"use strict";(self.webpackChunkvirtua=self.webpackChunkvirtua||[]).push([[465],{"./stories/advanced/Chat.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_src__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/List.tsx"),react__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/index.js"),_faker_js_faker__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@faker-js/faker/dist/esm/index.mjs");const __WEBPACK_DEFAULT_EXPORT__={component:_src__WEBPACK_IMPORTED_MODULE_3__.a},itemStyle={border:"solid 1px #ccc",background:"#fff",margin:10,padding:10,borderRadius:8,whiteSpace:"pre-wrap"},Item=({value,me})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{style:{...itemStyle,...me?{background:"lightyellow",marginLeft:80}:{marginRight:80}},children:value}),Default={name:"Chat",render:()=>{const[items,setItems]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)((()=>Array.from({length:100},(()=>({value:_faker_js_faker__WEBPACK_IMPORTED_MODULE_2__.We.lorem.paragraphs(1),me:!1}))))),ref=(0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null),[value,setValue]=(0,react__WEBPACK_IMPORTED_MODULE_1__.useState)("Hello world!");(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{ref.current&&ref.current.scrollToIndex(items.length-1)}),[items.length]),(0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)((()=>{let canceled=!1,timer=null;const setTimer=()=>{timer=setTimeout((()=>{canceled||(setItems((p=>[...p,{value:_faker_js_faker__WEBPACK_IMPORTED_MODULE_2__.We.lorem.paragraphs(1),me:!1}])),setTimer())}),5e3)};return setTimer(),()=>{canceled=!0,timer&&clearTimeout(timer)}}),[]);const disabled=!value.length,submit=()=>{disabled||(setItems((p=>[...p,{value,me:!0}])),setValue(""))};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{style:{width:"90vw",height:"90vh",display:"flex",flexDirection:"column"},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_src__WEBPACK_IMPORTED_MODULE_3__.a,{ref,style:{flex:1},children:items.map(((d,i)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Item,{...d},i)))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("form",{style:{margin:10},onSubmit:e=>{e.preventDefault(),e.stopPropagation(),submit()},children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("textarea",{style:{width:400},rows:6,value,onChange:e=>{setValue(e.target.value)},onKeyDown:e=>{"Enter"===e.code&&(e.ctrlKey||e.metaKey)&&(submit(),e.preventDefault())}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"submit",disabled,children:"submit"})]})]})}};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:'{\n  name: "Chat",\n  render: () => {\n    const [items, setItems] = useState(() => Array.from({\n      length: 100\n    }, () => ({\n      value: faker.lorem.paragraphs(1),\n      me: false\n    })));\n    const ref = useRef(null);\n    const [value, setValue] = useState("Hello world!");\n    useEffect(() => {\n      if (!ref.current) return;\n      ref.current.scrollToIndex(items.length - 1);\n    }, [items.length]);\n    useEffect(() => {\n      let canceled = false;\n      let timer = null;\n      const setTimer = () => {\n        timer = setTimeout(() => {\n          if (canceled) return;\n          setItems(p => [...p, {\n            value: faker.lorem.paragraphs(1),\n            me: false\n          }]);\n          setTimer();\n        }, 5e3);\n      };\n      setTimer();\n      return () => {\n        canceled = true;\n        if (timer) {\n          clearTimeout(timer);\n        }\n      };\n    }, []);\n    const disabled = !value.length;\n    const submit = () => {\n      if (disabled) return;\n      setItems(p => [...p, {\n        value,\n        me: true\n      }]);\n      setValue("");\n    };\n    return /* @__PURE__ */jsxs("div", {\n      style: {\n        width: "90vw",\n        height: "90vh",\n        display: "flex",\n        flexDirection: "column"\n      },\n      children: [/* @__PURE__ */jsx(List, {\n        ref,\n        style: {\n          flex: 1\n        },\n        children: items.map((d, i) => /* @__PURE__ */jsx(Item, {\n          ...d\n        }, i))\n      }), /* @__PURE__ */jsxs("form", {\n        style: {\n          margin: 10\n        },\n        onSubmit: e => {\n          e.preventDefault();\n          e.stopPropagation();\n          submit();\n        },\n        children: [/* @__PURE__ */jsx("textarea", {\n          style: {\n            width: 400\n          },\n          rows: 6,\n          value,\n          onChange: e => {\n            setValue(e.target.value);\n          },\n          onKeyDown: e => {\n            if (e.code === "Enter" && (e.ctrlKey || e.metaKey)) {\n              submit();\n              e.preventDefault();\n            }\n          }\n        }), /* @__PURE__ */jsx("button", {\n          type: "submit",\n          disabled,\n          children: "submit"\n        })]\n      })]\n    });\n  }\n}',...Default.parameters?.docs?.source}}}}}]);