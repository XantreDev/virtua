import{r as C}from"./index-c6dae603.js";import{j as H}from"./jsx-runtime-c3d7f245.js";const D=Math.min,E=Math.max,le=Math.abs,ee=Date.now,Ne=Object.values,ve=Array.isArray,q=setTimeout,V=(e,t,n)=>D(n,E(t,e)),J=e=>e!=null,be=e=>{const t=[...e].sort((s,o)=>s-o),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},B=(e,t)=>{let n;const s=()=>{J(n)&&clearTimeout(n)},o=()=>{s(),n=q(()=>{n=null,e()},t)};return o._cancel=s,o},he=(e,t)=>{let n=ee()-t;return(...s)=>{const o=ee();n+t<o&&(n=o,e(...s))}},L=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},Z=e=>getComputedStyle(e),j=e=>e?parseFloat(e):0,z=-1,x=(e,t)=>{const n=e._sizes[t];return n===z?e._defaultItemSize:n},Ie=(e,t,n)=>{const s=e._sizes[t]===z;return e._sizes[t]=n,e._computedOffsetIndex=D(t,e._computedOffsetIndex),s},Y=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=x(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Oe=e=>e._length?Y(e,e._length-1)+x(e,e._length-1):0,te=(e,t,n)=>{let s=Y(e,n);for(;n>=0&&n<e._length;)if(s<=t){const o=x(e,n);if(s+o>t)break;s+=o,n++}else s-=x(e,--n);return V(n,0,e._length-1)},Ee=(e,t,n,s)=>{const o=te(e,t,D(n,e._length-1));return[o,te(e,t+s,o)]},ye=e=>{const t=e._sizes.filter(s=>s!==z),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:be(t)},ce=(e,t,n)=>{const s=n?"unshift":"push";for(let o=e._length;o<t;o++)e._sizes[s](z),e._offsets.push(o===0?0:z);e._length=t},Re=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return ce(n,e),n},ne=(e,t,n)=>{const s=t-e._length,o=s<0;let m;return o?(m=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((r,l)=>r+(l===z?e._defaultItemSize:l),0),e._offsets.splice(s)):(m=e._defaultItemSize*s,ce(e,e._length+s,n)),e._computedOffsetIndex=n?0:V(t-1,0,e._computedOffsetIndex),e._length=t,[m,o]},ue=typeof window<"u",fe=()=>document.documentElement,ze=L(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),F=L(()=>ue?Z(fe()).direction==="rtl":!1),G=L(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Le=L(()=>"scrollBehavior"in fe().style),se=(e,t,n)=>t.reduce((s,[o,m])=>{const r=m-x(e,o);return(!n||r>0)&&(s+=r),s},0),Te=1.5,M=0,de=1,ae=2,k=1,W=2,Ce=3,$=4,Q=5,_e=6,U=1,X=2,me=4,Me=(e,t=40,n=0,s=Re(e,t),o,m)=>{let r=t*E(n-1,0),l=0,d=0,i=0,u=0,f=M,a=!1,g=!1,c=[0,n];const p=new Set,_=()=>Oe(s),v=()=>_()-r,b=S=>V(S,0,v()),A=S=>{G()&&f!==M?u+=S:(i+=S,d++)},T=S=>{const w=f;return f=S,f!==w};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return c=Ee(s,l+u,c[0],r)},_isUnmeasuredItem(S){return s._sizes[S]===z},_getItemOffset(S){const w=Y(s,S)-u;return o?w+E(0,r-_()):w},_getItemSize(S){return x(s,S)},_getItemsLength(){return s._length},_getScrollOffset(){return l},_getScrollOffsetMax:v,_getScrollDirection(){return f},_getViewportSize(){return r},_getCorrectedScrollSize(){return E(_(),r)},_getJumpCount(){return d},_flushJump(){const S=i;return i=0,S},_subscribe(S,w){const O=[S,w];return p.add(O),()=>{p.delete(O)}},_update(S,w){let O,K,y=0;switch(S){case k:{const h=w.filter(([R,N])=>s._sizes[R]!==N);if(!h.length)break;let I=0;if(l!==0)if(l>v()-Te)I=se(s,h,!0);else{const[R]=c;I=se(s,h.filter(([N])=>N<R))}I&&A(I);let P=!1;h.forEach(([R,N])=>{Ie(s,R,N)&&(P=!0)}),m&&P&&!l&&ye(s),y+=X,g=K=!0;break}case W:{r!==w&&(r=w,y=X);break}case Ce:{if(w[1]){const h=v()-l,[I,P]=ne(s,w[0],!0),R=P?-D(I,h):I;A(R),G()||(l=b(l+R)),y=U}else ne(s,w[0]);break}case $:{if(l===w)break;const h=w-l,I=g;g=!1,(f===M||!I)&&!a&&T(h<0?ae:de),K=le(h)>r,y+=me,l=b(w),y+=U;break}case Q:{T(M)&&(O=!0,y=U),a=!1;break}case _e:{a=!0;break}}y&&(O&&u&&(g=!0,i+=u,u=0,d++),p.forEach(([h,I])=>{y&h&&I(K)}))}}},Ve=ue?C.useLayoutEffect:C.useEffect,pe=(e,t,n)=>he(s=>{if(e._getScrollDirection()!==M&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const o=e._getScrollOffset();o>0&&o<e._getScrollOffsetMax()&&n()}},50),ge=(e,t,n,s)=>ze(e)||s?-n:t._getScrollOffsetMax()-n,ke=(e,t)=>{let n,s,o=!1,m=!1;const r=t?"scrollLeft":"scrollTop",l=(i,u)=>t&&F()?ge(n,e,i,u):i,d=async(i,u)=>{if(!n)return;s&&s();const f=()=>V(i(),0,e._getScrollOffsetMax());if(u&&Le()){for(m=!0;;){const a=l(f());if(le(e._getScrollOffset()-a)<1)break;n.scrollTo({[t?"left":"top"]:a,behavior:"smooth"});let g;const c=B(()=>{g&&g[0](),c._cancel()},100),p=e._subscribe(me,c);try{await new Promise((_,v)=>{g=[_,v]})}catch{return}finally{p(),c._cancel()}}m=!1;return}for(;;){let a;const g=e._subscribe(X,()=>{a&&a[0]()});try{n[r]=l(f()),e._update(_e),await new Promise((c,p)=>{a=[c,p],q(s=p,250)})}catch{return}finally{g()}}};return{_initRoot(i){n=i;let u=!1,f=!1;const a=()=>{e._update($,l(i[r]))},g=B(()=>{if(u){g();return}f=!1,a(),e._update(Q)},150),c=()=>{f&&(o=!0),a(),g()},p=pe(e,t,g),_=()=>{u=!0,f=o=!1},v=()=>{u=!1,G()&&(f=!0)};return i.addEventListener("scroll",c),i.addEventListener("wheel",p,{passive:!0}),i.addEventListener("touchstart",_,{passive:!0}),i.addEventListener("touchend",v,{passive:!0}),()=>{i.removeEventListener("scroll",c),i.removeEventListener("wheel",p),i.removeEventListener("touchstart",_),i.removeEventListener("touchend",v),g._cancel()}},_scrollTo(i){d(()=>i)},_scrollBy(i){i+=e._getScrollOffset(),d(()=>i)},_scrollToIndex(i,{align:u,smooth:f}={}){i=V(i,0,e._getItemsLength()-1),d(u==="end"?()=>e._getItemOffset(i)+e._getItemSize(i)-e._getViewportSize():u==="center"?()=>e._getItemOffset(i)+(e._getItemSize(i)-e._getViewportSize())/2:()=>e._getItemOffset(i),f)},_fixScrollJump:i=>{if(n&&!m){if(o){const u=n.style.overflow;n.style.overflow="hidden",o=!1,q(()=>{n.style.overflow=u})}n[r]+=l(i,!0)}}}},We=(e,t)=>{let n;const s=t?"scrollX":"scrollY",o=t?"offsetLeft":"offsetTop",m=(r,l)=>t&&F()?ge(n,e,r,l):r;return{_initRoot(r){n=r;let l=!1;const d=(c,p)=>{const _=p+(t&&F()?window.innerWidth-c[o]-c.offsetWidth:c[o]),v=c.offsetParent;return c===document.body||!v?_:d(v,_)},i=()=>{l&&e._update($,m(window[s])-d(r,0))},u=B(()=>{i(),e._update(Q)},150),f=()=>{i(),u()},a=pe(e,t,u),g=new IntersectionObserver(([c])=>{l=c.isIntersecting});return g.observe(r),window.addEventListener("scroll",f),window.addEventListener("wheel",a,{passive:!0}),()=>{g.disconnect(),window.removeEventListener("scroll",f),window.removeEventListener("wheel",a),u._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?m(r,!0):0,t?0:r)}}},re="current",De={},Se=(e,t)=>{if(ve(e))for(const n of e)Se(n,t);else!J(e)||typeof e=="boolean"||t.push(e)},Pe=e=>{const t=[];return Se(e,t),t},Je=(e,t,n)=>E(e-(n===de?1:E(1,t)),0),Ke=(e,t,n,s)=>D(e+(n===ae?1:E(1,t)),s-1),Ue=e=>{const t=C.useRef();return t[re]||(t[re]=e())},we={box:"border-box"},qe=(e,t)=>{let n;const s=t?"width":"height",o=new WeakMap,m=L(()=>new ResizeObserver(r=>{const l=[];for(const{target:d,contentRect:i}of r)if(d.offsetParent)if(d===n)e._update(W,i[s]+i[t?"left":"top"]+j(Z(n)[t?"paddingRight":"paddingBottom"]));else{const u=o.get(d);J(u)&&l.push([u,i[s]])}l.length&&e._update(k,l)}));return{_observeRoot(r){n=r;const l=m();return l.observe(r,we),()=>{l.disconnect()}},_observeItem(r,l){const d=m();return o.set(r,l),d.observe(r),()=>{o.delete(r),d.unobserve(r)}}}},Be=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",o=new WeakMap,m=L(()=>new ResizeObserver(r=>{const l=[];for(const{target:d,contentRect:i}of r){if(!d.offsetParent)continue;const u=o.get(d);J(u)&&l.push([u,i[n]])}l.length&&e._update(k,l)}));return{_observeRoot(){const r=()=>{e._update(W,window[s])};return window.addEventListener("resize",r),r(),()=>{window.removeEventListener("resize",r),m().disconnect()}},_observeItem(r,l){const d=m();return o.set(r,l),d.observe(r),()=>{o.delete(r),d.unobserve(r)}}}},je=(e,t)=>{let n;const s="height",o="width",m=new WeakMap,r=new Set,l=new Set,d=new Map,i=(f,a)=>`${f}-${a}`,u=L(()=>new ResizeObserver(f=>{const a=new Set,g=new Set;for(const{target:c,contentRect:p}of f)if(c.offsetParent)if(c===n){const _=Z(n);e._update(W,p[s]+p.top+j(_.paddingBottom)),t._update(W,p[o]+p.left+j(_.paddingRight))}else{const _=m.get(c);if(_){const[v,b]=_,A=i(v,b),T=d.get(A),S=[p[s],p[o]];let w,O;T?(T[0]!==S[0]&&(w=!0),T[1]!==S[1]&&(O=!0)):w=O=!0,w&&a.add(v),O&&g.add(b),(w||O)&&d.set(A,S)}}if(a.size){const c=[];a.forEach(p=>{let _=0;l.forEach(v=>{const b=d.get(i(p,v));b&&(_=E(_,b[0]))}),_&&c.push([p,_])}),e._update(k,c)}if(g.size){const c=[];g.forEach(p=>{let _=0;r.forEach(v=>{const b=d.get(i(v,p));b&&(_=E(_,b[1]))}),_&&c.push([p,_])}),t._update(k,c)}}));return{_observeRoot(f){n=f;const a=u();return a.observe(f,we),()=>{a.disconnect()}},_observeItem(f,a,g){const c=u();return m.set(f,[a,g]),r.add(a),l.add(g),c.observe(f),()=>{m.delete(f),c.unobserve(f)}}}},oe=C.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:o},m)=>H("div",{ref:m,...t,children:H("div",{style:C.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:o?"none":"auto"}),[n,s,o]),children:e})}));try{oe.displayName="Viewport",oe.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ie=()=>[],Fe=()=>C.useReducer(ie,void 0,ie)[1];export{Ce as A,M as S,U,oe as V,Fe as a,Ve as b,X as c,De as d,J as e,Pe as f,Me as g,Be as h,We as i,Ke as j,Je as k,F as l,je as m,ke as n,me as o,qe as p,re as r,Ue as u,Ne as v};
//# sourceMappingURL=useRerender-e377181b.js.map
