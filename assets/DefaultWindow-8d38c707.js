import{r as O}from"./index-5284b0bf.js";import{r as ue}from"./index-480187bb.js";import{j as $}from"./jsx-runtime-f8a6c6ea.js";const J=Math.min,v=Math.max,le=Math.abs,Q=Date.now,D=e=>e!=null,X=(e,t)=>Array.from({length:e},(s,n)=>t(n)),ce=e=>{const t=[...e].sort((n,o)=>n-o),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},fe=(e,t)=>{let s;const n=()=>{D(s)&&clearTimeout(s)},o=()=>{n(),s=setTimeout(()=>{s=null,e()},t)};return o._cancel=n,o},ae=(e,t)=>{let s=Q()-t;return(...n)=>{const o=Q();s+t<o&&(s=o,e(...n))}},G=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},y=-1,N=(e,t)=>{const s=e._sizes[t];return s===y?e._defaultItemSize:s},de=(e,t,s)=>{const n=e._sizes[t]===y;return e._sizes[t]=s,e._measuredOffsetIndex=J(t,e._measuredOffsetIndex),n},re=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+N(e,t):e._offsets[t];let n=e._measuredOffsetIndex,o=e._offsets[n];for(;n<=t&&(e._offsets[n]=o,!(n===t&&!s));)o+=N(e,n),n++;return e._measuredOffsetIndex=t,o},me=e=>re(e,e._length-1,!0),Y=(e,t)=>re(e,t),oe=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const o=N(e,t++);if((n+=o)>=s){n-o/2>=s&&t--;break}}else for(;t>0;){const o=N(e,--t);if((n-=o)<=s){n+o/2<s&&t++;break}}return J(v(t,0),e._length-1)},B=(e,t,s,n)=>oe(e,s,t-n),H=oe,_e=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===y)return!0;return!1},pe=e=>{const t=e._sizes.filter(n=>n!==y),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:ce(t)},ee=(e,t,s)=>({_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?J(s._measuredOffsetIndex,e-1):0,_sizes:X(e,n=>{const o=s&&s._sizes[n];return D(o)?o:y}),_offsets:X(e,n=>{if(n===0)return 0;const o=s&&s._offsets[n];return D(o)?o:y})}),K=e=>e.reduce((t,[s])=>t+s,0),te=(e,t)=>t.map(([s,n])=>[n-N(e,s),s]),T=0,se=1,j=2,q=3,M=1,V=2,k=3,F=4,P=5,be=(e,t,s=0,n,o,g)=>{const c=!t,_=t||40;let f=_*v(s-1,0),r=0,p=0,a,i=ee(e,_),d=T,l=!1,I=[0,s],S;const h=new Set,z=()=>me(i),W=()=>{const u=l;return l=!1,u},C=u=>{const m=d;if(d=u,d===T)return!1;if(m===T&&(d===se||d===j))return!0};return{_getRange(){const[u,m]=I,w=Y(i,u),b=B(i,r,u,w),E=H(i,b,f);return u===b&&m===E?I:I=[b,E]},_isUnmeasuredItem(u){return i._sizes[u]===y},_hasUnmeasuredItemsInRange(u){return _e(i,u,H(i,u,f))},_getItemOffset(u){const m=Y(i,u);return n?m+v(0,f-z()):m},_getItemSize(u){return N(i,u)},_getScrollOffset(){return r},_getViewportSize(){return f},_getScrollSize(){return z()},_getScrollableDomSize(){return v(z(),f)},_getJumpCount(){return p},_flushJump(){const u=a;return a=void 0,u},_getItemIndexForScrollTo(u){return B(i,u,0,0)},_waitForScrollDestinationItemsMeasured(){return S&&S[1](),new Promise((u,m)=>{S=[()=>{u(),S=void 0},m]})},_subscribe(u){return h.add(u),()=>{h.delete(u)}},_update(u,m){let w,b,E=!1;switch(u){case M:{const R=m.filter(([L,x])=>i._sizes[L]!==x);if(!R.length)break;let A=0;if(d===j)A=K(te(i,R));else if(d===q){const L=te(i,R),[x]=I;r===0||(z()<=r+f?A=K(L):A=K(L.filter(([,ie])=>ie<x)))}A&&(a=A,p++);let Z=!1;R.forEach(([L,x])=>{de(i,L,x)&&(Z=!0)}),c&&Z&&!r&&pe(i),l=w=E=!0;break}case V:{E=f!==m,f=m;break}case k:case F:{if(r===m)break;if(u===k){const R=W();(d===T||!R)&&d!==q&&(b=C(r>m?j:se)),w=le(r-m)>f}r=m,E=!0;break}case P:{b=C(m);break}}E&&(h.forEach(R=>{R(w)}),u===k&&g(r)),S&&u===M&&S[0](),D(b)&&o(b)},_getScrollDirection(){return d},_updateCacheLength(u){i._length!==u&&(i=ee(u,_,i))}}},Se=typeof window<"u"?O.useLayoutEffect:O.useEffect,U="current",Re=e=>!D(e)||typeof e=="boolean",Ie=e=>{const t=O.useRef(e);return Se(()=>{t[U]=e},[e]),t},ve=(e,t,s)=>{const[n,o]=O.useState(t),g=Ie(t);if(O.useLayoutEffect(()=>{const c=()=>{o(()=>g[U]())};return e._subscribe(_=>{_?ue.flushSync(c):c()})},[]),s){const c=t();n!==c&&o(c)}return n},ge=G(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),Oe=(e,t,s)=>{let n;const o=t?"scrollLeft":"scrollTop",g=()=>n?t?n.scrollWidth:n.scrollHeight:0,c=(r,p)=>ge(n)||p?-r:e._getScrollSize()-e._getViewportSize()-r,_=(r,p)=>{n&&(t&&s&&(r=c(r,p)),p?n[o]+=r:(n[o]=r,e._update(P,q)))},f=async(r,p)=>{const a=()=>{let i=p();const d=g(),l=e._getViewportSize();return d-(i+l)<=0&&(i=d-l),i};if(e._hasUnmeasuredItemsInRange(r)){do{e._update(F,a());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(r));_(a())}else{const i=a();_(i),e._update(F,i)}};return{_initRoot(r){n=r;const p=()=>{let l=r[o];t&&s&&(l=c(l)),e._update(k,l)},a=fe(()=>{p(),e._update(P,T)},150),i=()=>{p(),a()},d=ae(l=>{if(e._getScrollDirection()!==T&&!l.ctrlKey&&(t?l.deltaX:l.deltaY)){const I=e._getScrollOffset();I>0&&I<e._getScrollSize()-e._getViewportSize()&&a()}},50);return r.addEventListener("scroll",i),r.addEventListener("wheel",d,{passive:!0}),()=>{r.removeEventListener("scroll",i),r.removeEventListener("wheel",d),a._cancel()}},_getActualScrollSize:g,_scrollTo(r){r=v(r,0),f(e._getItemIndexForScrollTo(r),()=>r)},_scrollToIndex(r,p){r=v(J(r,p-1),0),f(r,()=>e._getItemOffset(r))},_fixScrollJump:r=>{_(r,!0)}}},Ee=e=>{const t=O.useRef();return t[U]||(t[U]=e())},ye=(e,t)=>{let s;const n=t?"width":"height",o=new WeakMap,g=G(()=>new ResizeObserver(c=>{const _=[];for(const{target:f,contentRect:r}of c)if(f===s)e._update(V,r[n]);else{const p=o.get(f);D(p)&&_.push([p,r[n]])}_.length&&e._update(M,_)}));return{_observeRoot(c){s=c;const _=g();return _.observe(c),()=>{_.disconnect()}},_observeItem(c,_){const f=g();return o.set(c,_),f.observe(c),()=>{o.delete(c),f.unobserve(c)}}}},Ce=(e,t)=>{let s;const n="height",o="width",g=new WeakMap,c=new Set,_=new Set,f=new Map,r=(a,i)=>`${a}-${i}`,p=G(()=>new ResizeObserver(a=>{const i=new Set,d=new Set;for(const{target:l,contentRect:I}of a)if(l===s)e._update(V,I[n]),t._update(V,I[o]);else{const S=g.get(l);if(S){const[h,z]=S,W=r(h,z),C=f.get(W),u=[I[n],I[o]];let m,w;C?(C[0]!==u[0]&&(m=!0),C[1]!==u[1]&&(w=!0)):m=w=!0,m&&i.add(h),w&&d.add(z),(m||w)&&f.set(W,u)}}if(i.size){const l=[];i.forEach(I=>{let S=0;_.forEach(h=>{const z=f.get(r(I,h));z&&(S=v(S,z[0]))}),S&&l.push([I,S])}),e._update(M,l)}if(d.size){const l=[];d.forEach(I=>{let S=0;c.forEach(h=>{const z=f.get(r(h,I));z&&(S=v(S,z[1]))}),S&&l.push([I,S])}),t._update(M,l)}}));return{_observeRoot(a){s=a;const i=p();return i.observe(a),()=>{i.disconnect()}},_observeItem(a,i,d){const l=p();return g.set(a,[i,d]),c.add(i),_.add(d),l.observe(a),()=>{g.delete(a),l.unobserve(a)}}}},ne=O.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:o},g)=>$("div",{ref:g,...t,children:$("div",{style:O.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:o?"none":"auto"}),[s,n,o]),children:e})}));try{ne.displayName="DefaultWindow",ne.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{ne as D,Se as a,Ie as b,Ee as c,be as d,D as e,ye as f,Oe as g,J as h,Re as i,Ce as j,v as m,U as r,ve as u};
//# sourceMappingURL=DefaultWindow-8d38c707.js.map
