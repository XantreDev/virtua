import{j as R}from"./jsx-runtime-c3d7f245.js";import{r as y}from"./index-c6dae603.js";import{A as ie}from"./AutoSizer-dac56843.js";import{_ as ne}from"./setPrototypeOf-67537e4a.js";import{_ as $}from"./assertThisInitialized-081f9914.js";import{_ as ae}from"./inheritsLoose-db34722d.js";import{m as N}from"./memoize-one.esm-52518564.js";var oe=typeof performance=="object"&&typeof performance.now=="function",U=oe?function(){return performance.now()}:function(){return Date.now()};function q(a){cancelAnimationFrame(a.id)}function se(a,t){var r=U();function i(){U()-r>=t?a.call(null):o.id=requestAnimationFrame(i)}var o={id:requestAnimationFrame(i)};return o}var A=-1;function H(a){if(a===void 0&&(a=!1),A===-1||a){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),A=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return A}var O=null;function V(a){if(a===void 0&&(a=!1),O===null||a){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var i=document.createElement("div"),o=i.style;return o.width="100px",o.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?O="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?O="negative":O="positive-ascending"),document.body.removeChild(t),O}return O}var le=150,ce=function(t,r){return t};function de(a){var t,r=a.getItemOffset,i=a.getEstimatedTotalSize,o=a.getItemSize,m=a.getOffsetForIndexAndAlignment,l=a.getStartIndexForOffset,c=a.getStopIndexForStartIndex,p=a.initInstanceProps,g=a.shouldResetStyleCacheOnItemSizeChange,M=a.validateProps;return t=function(x){ae(z,x);function z(S){var e;return e=x.call(this,S)||this,e._instanceProps=p(e.props,$(e)),e._outerRef=void 0,e._resetIsScrollingTimeoutId=null,e.state={instance:$(e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof e.props.initialScrollOffset=="number"?e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},e._callOnItemsRendered=void 0,e._callOnItemsRendered=N(function(n,s,u,f){return e.props.onItemsRendered({overscanStartIndex:n,overscanStopIndex:s,visibleStartIndex:u,visibleStopIndex:f})}),e._callOnScroll=void 0,e._callOnScroll=N(function(n,s,u){return e.props.onScroll({scrollDirection:n,scrollOffset:s,scrollUpdateWasRequested:u})}),e._getItemStyle=void 0,e._getItemStyle=function(n){var s=e.props,u=s.direction,f=s.itemSize,v=s.layout,d=e._getItemStyleCache(g&&f,g&&v,g&&u),h;if(d.hasOwnProperty(n))h=d[n];else{var I=r(e.props,n,e._instanceProps),T=o(e.props,n,e._instanceProps),C=u==="horizontal"||v==="horizontal",E=u==="rtl",L=C?I:0;d[n]=h={position:"absolute",left:E?void 0:L,right:E?L:void 0,top:C?0:I,height:C?"100%":T,width:C?T:"100%"}}return h},e._getItemStyleCache=void 0,e._getItemStyleCache=N(function(n,s,u){return{}}),e._onScrollHorizontal=function(n){var s=n.currentTarget,u=s.clientWidth,f=s.scrollLeft,v=s.scrollWidth;e.setState(function(d){if(d.scrollOffset===f)return null;var h=e.props.direction,I=f;if(h==="rtl")switch(V()){case"negative":I=-f;break;case"positive-descending":I=v-u-f;break}return I=Math.max(0,Math.min(I,v-u)),{isScrolling:!0,scrollDirection:d.scrollOffset<f?"forward":"backward",scrollOffset:I,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._onScrollVertical=function(n){var s=n.currentTarget,u=s.clientHeight,f=s.scrollHeight,v=s.scrollTop;e.setState(function(d){if(d.scrollOffset===v)return null;var h=Math.max(0,Math.min(v,f-u));return{isScrolling:!0,scrollDirection:d.scrollOffset<h?"forward":"backward",scrollOffset:h,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(n){var s=e.props.outerRef;e._outerRef=n,typeof s=="function"?s(n):s!=null&&typeof s=="object"&&s.hasOwnProperty("current")&&(s.current=n)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&q(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=se(e._resetIsScrolling,le)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1,null)})},e}z.getDerivedStateFromProps=function(e,n){return ue(e,n),M(e),null};var _=z.prototype;return _.scrollTo=function(e){e=Math.max(0,e),this.setState(function(n){return n.scrollOffset===e?null:{scrollDirection:n.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},_.scrollToItem=function(e,n){n===void 0&&(n="auto");var s=this.props,u=s.itemCount,f=s.layout,v=this.state.scrollOffset;e=Math.max(0,Math.min(e,u-1));var d=0;if(this._outerRef){var h=this._outerRef;f==="vertical"?d=h.scrollWidth>h.clientWidth?H():0:d=h.scrollHeight>h.clientHeight?H():0}this.scrollTo(m(this.props,e,n,v,this._instanceProps,d))},_.componentDidMount=function(){var e=this.props,n=e.direction,s=e.initialScrollOffset,u=e.layout;if(typeof s=="number"&&this._outerRef!=null){var f=this._outerRef;n==="horizontal"||u==="horizontal"?f.scrollLeft=s:f.scrollTop=s}this._callPropsCallbacks()},_.componentDidUpdate=function(){var e=this.props,n=e.direction,s=e.layout,u=this.state,f=u.scrollOffset,v=u.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var d=this._outerRef;if(n==="horizontal"||s==="horizontal")if(n==="rtl")switch(V()){case"negative":d.scrollLeft=-f;break;case"positive-ascending":d.scrollLeft=f;break;default:var h=d.clientWidth,I=d.scrollWidth;d.scrollLeft=I-h-f;break}else d.scrollLeft=f;else d.scrollTop=f}this._callPropsCallbacks()},_.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&q(this._resetIsScrollingTimeoutId)},_.render=function(){var e=this.props,n=e.children,s=e.className,u=e.direction,f=e.height,v=e.innerRef,d=e.innerElementType,h=e.innerTagName,I=e.itemCount,T=e.itemData,C=e.itemKey,E=C===void 0?ce:C,L=e.layout,Z=e.outerElementType,J=e.outerTagName,Q=e.style,X=e.useIsScrolling,Y=e.width,D=this.state.isScrolling,W=u==="horizontal"||L==="horizontal",ee=W?this._onScrollHorizontal:this._onScrollVertical,P=this._getRangeToRender(),te=P[0],re=P[1],F=[];if(I>0)for(var b=te;b<=re;b++)F.push(y.createElement(n,{data:T,key:E(b,T),index:b,isScrolling:X?D:void 0,style:this._getItemStyle(b)}));var k=i(this.props,this._instanceProps);return y.createElement(Z||J||"div",{className:s,onScroll:ee,ref:this._outerRefSetter,style:ne({position:"relative",height:f,width:Y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:u},Q)},y.createElement(d||h||"div",{children:F,ref:v,style:{height:W?"100%":k,pointerEvents:D?"none":void 0,width:W?k:"100%"}}))},_._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var e=this.props.itemCount;if(e>0){var n=this._getRangeToRender(),s=n[0],u=n[1],f=n[2],v=n[3];this._callOnItemsRendered(s,u,f,v)}}if(typeof this.props.onScroll=="function"){var d=this.state,h=d.scrollDirection,I=d.scrollOffset,T=d.scrollUpdateWasRequested;this._callOnScroll(h,I,T)}},_._getRangeToRender=function(){var e=this.props,n=e.itemCount,s=e.overscanCount,u=this.state,f=u.isScrolling,v=u.scrollDirection,d=u.scrollOffset;if(n===0)return[0,0,0,0];var h=l(this.props,d,this._instanceProps),I=c(this.props,h,d,this._instanceProps),T=!f||v==="backward"?Math.max(1,s):1,C=!f||v==="forward"?Math.max(1,s):1;return[Math.max(0,h-T),Math.max(0,Math.min(n-1,I+C)),h,I]},z}(y.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var ue=function(t,r){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,r.instance},fe=50,w=function(t,r,i){var o=t,m=o.itemSize,l=i.itemMetadataMap,c=i.lastMeasuredIndex;if(r>c){var p=0;if(c>=0){var g=l[c];p=g.offset+g.size}for(var M=c+1;M<=r;M++){var x=m(M);l[M]={offset:p,size:x},p+=x}i.lastMeasuredIndex=r}return l[r]},me=function(t,r,i){var o=r.itemMetadataMap,m=r.lastMeasuredIndex,l=m>0?o[m].offset:0;return l>=i?j(t,r,m,0,i):he(t,r,Math.max(0,m),i)},j=function(t,r,i,o,m){for(;o<=i;){var l=o+Math.floor((i-o)/2),c=w(t,l,r).offset;if(c===m)return l;c<m?o=l+1:c>m&&(i=l-1)}return o>0?o-1:0},he=function(t,r,i,o){for(var m=t.itemCount,l=1;i<m&&w(t,i,r).offset<o;)i+=l,l*=2;return j(t,r,Math.min(i,m-1),Math.floor(i/2),o)},B=function(t,r){var i=t.itemCount,o=r.itemMetadataMap,m=r.estimatedItemSize,l=r.lastMeasuredIndex,c=0;if(l>=i&&(l=i-1),l>=0){var p=o[l];c=p.offset+p.size}var g=i-l-1,M=g*m;return c+M},pe=de({getItemOffset:function(t,r,i){return w(t,r,i).offset},getItemSize:function(t,r,i){return i.itemMetadataMap[r].size},getEstimatedTotalSize:B,getOffsetForIndexAndAlignment:function(t,r,i,o,m,l){var c=t.direction,p=t.height,g=t.layout,M=t.width,x=c==="horizontal"||g==="horizontal",z=x?M:p,_=w(t,r,m),S=B(t,m),e=Math.max(0,Math.min(S-z,_.offset)),n=Math.max(0,_.offset-z+_.size+l);switch(i==="smart"&&(o>=n-z&&o<=e+z?i="auto":i="center"),i){case"start":return e;case"end":return n;case"center":return Math.round(n+(e-n)/2);case"auto":default:return o>=n&&o<=e?o:o<n?n:e}},getStartIndexForOffset:function(t,r,i){return me(t,i,r)},getStopIndexForStartIndex:function(t,r,i,o){for(var m=t.direction,l=t.height,c=t.itemCount,p=t.layout,g=t.width,M=m==="horizontal"||p==="horizontal",x=M?g:l,z=w(t,r,o),_=i+x,S=z.offset+z.size,e=r;e<c-1&&S<_;)e++,S+=w(t,e,o).size;return e},initInstanceProps:function(t,r){var i=t,o=i.estimatedItemSize,m={itemMetadataMap:{},estimatedItemSize:o||fe,lastMeasuredIndex:-1};return r.resetAfterIndex=function(l,c){c===void 0&&(c=!0),m.lastMeasuredIndex=Math.min(m.lastMeasuredIndex,l-1),r._getItemStyleCache(-1),c&&r.forceUpdate()},m},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});const ve=({index:a,setHeight:t,Component:r})=>{const i=y.useRef(null);return y.useEffect(()=>{i.current&&t(a,i.current.getBoundingClientRect().height)},[]),R(r,{ref:i,index:a})},G=y.createContext(null),Ie=({index:a,style:t})=>{const{Component:r,setHeight:i}=y.useContext(G);return R("div",{style:t,children:R(ve,{index:a,setHeight:i,Component:r})},a)},K=y.memo(({count:a,Component:t,handle:r})=>{const i=y.useMemo(()=>Array.from({length:a}).map(()=>50),[]),o=y.useRef(null),m=c=>i[c],l=(c,p)=>{var g;i[c]=p,(g=o.current)==null||g.resetAfterIndex(c)};return y.useImperativeHandle(r,()=>({scrollToIndex:c=>{var p;(p=o.current)==null||p.scrollToItem(c)}})),R(G.Provider,{value:y.useMemo(()=>({Component:t,setHeight:l}),[t,l]),children:R(ie,{children:({width:c,height:p})=>R(pe,{ref:o,width:c,height:p,itemCount:a,itemSize:m,children:Ie})})})});try{K.displayName="ReactWindowList",K.__docgenInfo={description:"",displayName:"ReactWindowList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{K as R};
//# sourceMappingURL=react-window-a10209fc.js.map
