import{r as N}from"./index-c6dae603.js";import{s as q}from"./index-7f713258.js";const C=Math.min,O=Math.max,K=Date.now,E=e=>e!=null,J=(e,t)=>Array.from({length:e},(s,o)=>t(o)),B=(e,t)=>{let s;const o=()=>{E(s)&&clearTimeout(s)},c=()=>{o(),s=setTimeout(()=>{s=null,e()},t)};return c._cancel=o,c},j=(e,t)=>{let s=K()-t;return(...o)=>{const c=K();s+t<c&&(s=c,e(...o))}},H=e=>{let t,s;return(...o)=>(t||(t=!0,s=e(...o)),s)},b=-1,v=(e,t)=>{const s=e._sizes[t];return s===b?e._defaultItemSize:s},ee=(e,t,s)=>{e._sizes[t]=s,e._measuredOffsetIndex=C(t,e._measuredOffsetIndex)},Q=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+v(e,t):e._offsets[t];let o=e._measuredOffsetIndex,c=e._offsets[o];for(;o<=t&&(e._offsets[o]=c,!(o===t&&!s));)c+=v(e,o),o++;return e._measuredOffsetIndex=t,c},te=e=>Q(e,e._length-1,!0),V=(e,t)=>Q(e,t),X=(e,t,s)=>{let o=0;if(s>=0)for(;t<e._length-1;){const c=v(e,t++);if((o+=c)>=s){o-c/2>=s&&t--;break}}else for(;t>0;){const c=v(e,--t);if((o-=c)<=s){o+c/2<s&&t++;break}}return C(O(t,0),e._length-1)},F=(e,t,s,o)=>X(e,s,t-o),P=X,se=(e,t,s)=>{for(let o=t;o<=s;o++)if(e._sizes[o]===b)return!0;return!1},Z=(e,t,s)=>({_defaultItemSize:t,_length:e,_measuredOffsetIndex:s?C(s._measuredOffsetIndex,e-1):0,_sizes:J(e,o=>{const c=s&&s._sizes[o];return E(c)?c:b}),_offsets:J(e,o=>{if(o===0)return 0;const c=s&&s._offsets[o];return E(c)?c:b})}),w=0,Y=1,U=2,M=3,L=1,y=2,W=3,k=4,oe=(e,t,s,o,c=0,p,d)=>{let a=t*O(c-1,0),g=0,h=[],r=Z(e,t),_=w,m=[0,c],i;const f=new Set;return{_getRange(){const[n,l]=m,S=V(r,n),u=F(r,g,n,S),I=P(r,u,a);return n===u&&l===I?m:m=[u,I]},_isUnmeasuredItem(n){return r._sizes[n]===b},_hasUnmeasuredItemsInRange(n){return se(r,n,P(r,n,a))},_getItemOffset(n){return V(r,n)},_getItemSize(n){return v(r,n)},_getScrollOffset(){return g},_getViewportSize(){return a},_getScrollSize(){return te(r)},_getJump(){return h},_isHorizontal(){return s},_isRtl(){return o},_getItemIndexForScrollTo(n){return F(r,n,0,0)},_waitForScrollDestinationItemsMeasured(){return i&&i[1](),new Promise((n,l)=>{i=[()=>{Promise.resolve().then(()=>{n(),i=void 0})},l]})},_subscribe(n){return f.add(n),()=>{f.delete(n)}},_update(n,l){(()=>{switch(n){case L:{const u=l.filter(([z,R])=>r._sizes[z]!==R);if(!u.length)return!1;const I=[];return u.forEach(([z,R])=>{I.push([R-v(r,z),z]),ee(r,z,R)}),h=I,!0}case y:return a===l?!1:(a=l,!0);case W:case k:{const u=g;return(g=l)!==u}}})()&&(f.forEach(u=>{u()}),n===W?d(g):i&&n===L&&i[0]())},_getScrollDirection(){return _},_setScrollDirection(n){const l=_;_=n,_===w?p(!1):l===w&&(_===Y||_===U)&&p(!0)},_updateCacheLength(n){r._length!==n&&(r=Z(n,t,r))}}},ie=typeof window<"u"?N.useLayoutEffect:N.useEffect,ce=(e,t)=>q.useSyncExternalStore(e,t,t),$=H(e=>{const t="scrollLeft",s=e[t];e[t]=1;const o=e[t]<1;return e[t]=s,o}),le=(e,t)=>{let s;const o=e._isHorizontal(),c=e._isRtl(),p=o?"scrollLeft":"scrollTop",d=()=>s?o?s.scrollWidth:s.scrollHeight:0,a=(r,_)=>{s&&(o&&c&&$(s)&&(r*=-1),_?s[p]+=r:(s[p]=r,e._setScrollDirection(M)))},g=async(r,_)=>{const m=()=>{let i=_();const f=d(),n=e._getViewportSize();return f-(i+n)<=0&&(i=f-n),i};if(e._hasUnmeasuredItemsInRange(r)){do{e._update(k,m());try{await e._waitForScrollDestinationItemsMeasured()}catch(i){return}}while(e._hasUnmeasuredItemsInRange(r));a(m())}else{const i=m();a(i),e._update(k,i)}},h=r=>r.reduce((_,[m])=>_+m,0);return{_initRoot(r){s=r;const _=()=>{let n=r[p];o&&c&&$(r)&&(n*=-1);const l=e._getScrollOffset();if(l===n)return;const S=e._getScrollDirection(),u=t();(S===w||!u)&&S!==M&&e._setScrollDirection(l>n?U:Y),e._update(W,n)},m=B(()=>{_(),e._setScrollDirection(w)},150),i=()=>{_(),m()},f=j(n=>{if(e._getScrollDirection()!==w&&!n.ctrlKey&&(o?n.deltaX:n.deltaY)){const l=e._getScrollOffset();l>0&&l<e._getScrollSize()-e._getViewportSize()&&m()}},50);return r.addEventListener("scroll",i),r.addEventListener("wheel",f,{passive:!0}),()=>{r.removeEventListener("scroll",i),r.removeEventListener("wheel",f),m._cancel()}},_getActualScrollSize:d,_scrollTo(r){r=O(r,0),g(e._getItemIndexForScrollTo(r),()=>r)},_scrollToIndex(r,_){r=O(C(r,_-1),0),g(r,()=>e._getItemOffset(r))},_fixScrollJump:(r,_)=>{const m=e._getScrollDirection();if(m===U){const i=h(r);i&&a(i,!0)}else if(m===M){const i=e._getScrollOffset();if(i!==0){const f=h(r);if(e._getScrollSize()-(i+e._getViewportSize()+f)<=0)f&&a(i+f);else{const n=r.reduce((l,[S,u])=>(u<_&&(l+=S),l),0);n&&a(n,!0)}}}}}},G="current",fe=e=>!E(e)||typeof e=="boolean",ue=e=>{const t=N.useRef();return t[G]||(t[G]=e())},ae=e=>{let t=!1,s;const o=e._isHorizontal()?"width":"height",c=new WeakMap,p=H(()=>new ResizeObserver(d=>{const a=[];for(const{target:g,contentRect:h}of d)if(g===s)e._update(y,h[o]);else{const r=c.get(g);E(r)&&a.push([r,h[o]])}a.length&&(e._update(L,a),t=!0)}));return{_observeRoot(d){s=d;const a=p();return a.observe(d),()=>{a.disconnect()}},_observeItem(d,a){const g=p();return c.set(d,a),g.observe(d),()=>{c.delete(d),g.unobserve(d)}},_isJustResized(){const d=t;return t=!1,d}}},_e=(e,t)=>{let s=!1,o=!1,c;const p="height",d="width",a=new WeakMap,g=new Set,h=new Set,r=new Map,_=(i,f)=>`${i}-${f}`,m=H(()=>new ResizeObserver(i=>{const f=new Set,n=new Set;for(const{target:l,contentRect:S}of i)if(l===c)e._update(y,S[p]),t._update(y,S[d]);else{const u=a.get(l);if(u){const[I,z]=u,R=_(I,z),x=r.get(R),A=[S[p],S[d]];let D,T;x?(x[0]!==A[0]&&(D=!0),x[1]!==A[1]&&(T=!0)):D=T=!0,D&&f.add(I),T&&n.add(z),(D||T)&&r.set(R,A)}}if(f.size){const l=[];f.forEach(S=>{let u=0;h.forEach(I=>{const z=r.get(_(S,I));z&&(u=O(u,z[0]))}),u&&l.push([S,u])}),e._update(L,l),s=!0}if(n.size){const l=[];n.forEach(S=>{let u=0;g.forEach(I=>{const z=r.get(_(I,S));z&&(u=O(u,z[1]))}),u&&l.push([S,u])}),t._update(L,l),o=!0}}));return{_observeRoot(i){c=i;const f=m();return f.observe(i),()=>{f.disconnect()}},_observeItem(i,f,n){const l=m();return a.set(i,[f,n]),g.add(f),h.add(n),l.observe(i),()=>{a.delete(i),l.unobserve(i)}},_isJustResized(i){const f=i?o:s;return i?o=!1:s=!1,f}}};export{ie as a,ue as b,oe as c,le as d,C as e,_e as f,E as g,ae as h,fe as i,O as m,G as r,ce as u};
//# sourceMappingURL=resizer-5270f707.js.map
