import{r as A}from"./index-c6dae603.js";import{j as te}from"./jsx-runtime-c3d7f245.js";const J=Math.min,O=Math.max,ue=Math.abs,ne=Date.now,Me=Object.values,he=Array.isArray,j=setTimeout,k=(e,t,n)=>J(n,O(t,e)),U=e=>e!=null,Ie=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},F=(e,t)=>{let n;const s=()=>{U(n)&&clearTimeout(n)},i=()=>{s(),n=j(()=>{n=null,e()},t)};return i._cancel=s,i},Oe=(e,t)=>{let n=ne()-t;return(...s)=>{const i=ne();n+t<i&&(n=i,e(...s))}},T=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},$=e=>getComputedStyle(e),G=e=>e?parseFloat(e):0,L=-1,N=(e,t)=>{const n=e._sizes[t];return n===L?e._defaultItemSize:n},Ee=(e,t,n)=>{const s=e._sizes[t]===L;return e._sizes[t]=n,e._computedOffsetIndex=J(t,e._computedOffsetIndex),s},Q=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=N(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Re=e=>e._length?Q(e,e._length-1)+N(e,e._length-1):0,se=(e,t,n)=>{let s=Q(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=N(e,n);if(s+i>t)break;s+=i,n++}else s-=N(e,--n);return k(n,0,e._length-1)},ye=(e,t,n,s)=>{const i=se(e,t,J(n,e._length-1));return[i,se(e,t+s,i)]},ze=e=>{const t=e._sizes.filter(s=>s!==L),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ie(t)},fe=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](L),e._offsets.push(i===0?0:L);e._length=t},Le=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return fe(n,e),n},re=(e,t,n)=>{const s=t-e._length,i=s<0;let g;return i?(g=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,c)=>o+(c===L?e._defaultItemSize:c),0),e._offsets.splice(s)):(g=e._defaultItemSize*s,fe(e,e._length+s,n)),e._computedOffsetIndex=n?0:k(t-1,0,e._computedOffsetIndex),e._length=t,[g,i]},de=typeof window<"u",ae=()=>document.documentElement,Te=T(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),X=T(()=>de?$(ae()).direction==="rtl":!1),Z=T(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ce=T(()=>"scrollBehavior"in ae().style),oe=(e,t,n)=>t.reduce((s,[i,g])=>{const o=g-N(e,i);return(!n||o>0)&&(s+=o),s},0),xe=1.5,P=0,_e=1,me=2,W=1,D=2,Ae=3,H=4,ee=5,pe=6,B=1,Y=2,ge=4,Pe=(e,t=40,n=0,s=Le(e,t),i,g)=>{let o=t*O(n-1,0),c=0,_=0,r=0,f=0,d=0,u=0,m=P,l=!1,p=!1,a=[0,n];const v=new Set,h=()=>Re(s),y=()=>h()-o+_,C=S=>k(S,0,y()),x=S=>{Z()&&m!==P?u+=S:(d+=S,f++)},z=S=>{const w=m;return m=S,m!==w};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return a=ye(s,r+u,a[0],o)},_isUnmeasuredItem(S){return s._sizes[S]===L},_getItemOffset(S){const w=Q(s,S)-u;return i?w+O(0,o-h()):w},_getItemSize(S){return N(s,S)},_getItemsLength(){return s._length},_getScrollOffset(){return r},_getScrollOffsetMax:y,_getScrollDirection(){return m},_getViewportSize(){return o},_getViewportPaddingStart(){return c},_getCorrectedScrollSize(){return O(h(),o)},_getJumpCount(){return f},_flushJump(){const S=d;return d=0,S},_subscribe(S,w){const V=[S,w];return v.add(V),()=>{v.delete(V)}},_update(S,w){let V,q,E=0;switch(S){case W:{const b=w.filter(([R,M])=>s._sizes[R]!==M);if(!b.length)break;let I=0;if(r!==0)if(r>y()-xe)I=oe(s,b,!0);else{const[R]=a;I=oe(s,b.filter(([M])=>M<R))}I&&x(I);let K=!1;b.forEach(([R,M])=>{Ee(s,R,M)&&(K=!0)}),g&&K&&!r&&ze(s),E+=Y,p=q=!0;break}case D:{const b=w[0]+w[1]+w[2];o!==b&&(o=b,c=w[1],_=w[2],E=Y);break}case Ae:{if(w[1]){const b=y()-r,[I,K]=re(s,w[0],!0),R=K?-J(I,b):I;x(R),Z()||(r=C(r+R)),E=B}else re(s,w[0]);break}case H:{if(r===w)break;const b=w-r,I=p;p=!1,(m===P||!I)&&!l&&z(b<0?me:_e),q=ue(b)>o,E+=ge,r=C(w),E+=B;break}case ee:{z(P)&&(V=!0,E=B),l=!1;break}case pe:{l=!0;break}}E&&(V&&u&&(p=!0,d+=u,u=0,f++),v.forEach(([b,I])=>{E&b&&I(q)}))}}},ke=de?A.useLayoutEffect:A.useEffect,Se=(e,t,n)=>Oe(s=>{if(e._getScrollDirection()!==P&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),we=(e,t,n,s)=>Te(e)||s?-n:t._getScrollOffsetMax()-n,We=(e,t)=>{let n,s,i=!1,g=!1;const o=t?"scrollLeft":"scrollTop",c=(r,f)=>t&&X()?we(n,e,r,f):r,_=async(r,f)=>{if(!n)return;s&&s();const d=()=>k(r(),0,e._getScrollOffsetMax());if(f&&Ce()){for(g=!0;;){const u=c(d());if(ue(e._getScrollOffset()-u)<1)break;n.scrollTo({[t?"left":"top"]:u,behavior:"smooth"});let m;const l=F(()=>{m&&m[0](),l._cancel()},100),p=e._subscribe(ge,l);try{await new Promise((a,v)=>{m=[a,v]})}catch{return}finally{p(),l._cancel()}}g=!1;return}for(;;){let u;const m=e._subscribe(Y,()=>{u&&u[0]()});try{n[o]=c(d()),e._update(pe),await new Promise((l,p)=>{u=[l,p],j(s=p,250)})}catch{return}finally{m()}}};return{_initRoot(r){n=r;let f=!1,d=!1;const u=()=>{e._update(H,c(r[o]))},m=F(()=>{if(f){m();return}d=!1,u(),e._update(ee)},150),l=()=>{d&&(i=!0),u(),m()},p=Se(e,t,m),a=()=>{f=!0,d=i=!1},v=()=>{f=!1,Z()&&(d=!0)};return r.addEventListener("scroll",l),r.addEventListener("wheel",p,{passive:!0}),r.addEventListener("touchstart",a,{passive:!0}),r.addEventListener("touchend",v,{passive:!0}),()=>{r.removeEventListener("scroll",l),r.removeEventListener("wheel",p),r.removeEventListener("touchstart",a),r.removeEventListener("touchend",v),m._cancel()}},_scrollTo(r){_(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),_(()=>r)},_scrollToIndex(r,{align:f,smooth:d}={}){r=k(r,0,e._getItemsLength()-1),_(f==="end"?()=>e._getViewportPaddingStart()+e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():f==="center"?()=>e._getViewportPaddingStart()+e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:()=>e._getViewportPaddingStart()+e._getItemOffset(r),d)},_fixScrollJump:r=>{if(n&&!g){if(i){const f=n.style.overflow;n.style.overflow="hidden",i=!1,j(()=>{n.style.overflow=f})}n[o]+=c(r,!0)}}}},De=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",g=(o,c)=>t&&X()?we(n,e,o,c):o;return{_initRoot(o){n=o;let c=!1;const _=(l,p)=>{const a=p+(t&&X()?window.innerWidth-l[i]-l.offsetWidth:l[i]),v=l.offsetParent;return l===document.body||!v?a:_(v,a)},r=()=>{c&&e._update(H,g(window[s])-_(o,0))},f=F(()=>{r(),e._update(ee)},150),d=()=>{r(),f()},u=Se(e,t,f),m=new IntersectionObserver(([l])=>{c=l.isIntersecting});return m.observe(o),window.addEventListener("scroll",d),window.addEventListener("wheel",u,{passive:!0}),()=>{m.disconnect(),window.removeEventListener("scroll",d),window.removeEventListener("wheel",u),f._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?g(o,!0):0,t?0:o)}}},ie="current",Je={},ve=(e,t)=>{if(he(e))for(const n of e)ve(n,t);else!U(e)||typeof e=="boolean"||t.push(e)},Ke=e=>{const t=[];return ve(e,t),t},Ue=(e,t,n)=>O(e-(n===_e?1:O(1,t)),0),qe=(e,t,n,s)=>J(e+(n===me?1:O(1,t)),s-1),Be=e=>{const t=A.useRef();return t[ie]||(t[ie]=e())},be={box:"border-box"},je=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,g=T(()=>new ResizeObserver(o=>{const c=[];for(const{target:_,contentRect:r}of o)if(_.offsetParent)if(_===n)e._update(D,[r[s],r[t?"left":"top"],G($(n)[t?"paddingRight":"paddingBottom"])]);else{const f=i.get(_);U(f)&&c.push([f,r[s]])}c.length&&e._update(W,c)}));return{_observeRoot(o){n=o;const c=g();return c.observe(o,be),()=>{c.disconnect()}},_observeItem(o,c){const _=g();return i.set(o,c),_.observe(o),()=>{i.delete(o),_.unobserve(o)}}}},Fe=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,g=T(()=>new ResizeObserver(o=>{const c=[];for(const{target:_,contentRect:r}of o){if(!_.offsetParent)continue;const f=i.get(_);U(f)&&c.push([f,r[n]])}c.length&&e._update(W,c)}));return{_observeRoot(){const o=()=>{e._update(D,[window[s],0,0])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),g().disconnect()}},_observeItem(o,c){const _=g();return i.set(o,c),_.observe(o),()=>{i.delete(o),_.unobserve(o)}}}},Ge=(e,t)=>{let n;const s="height",i="width",g=new WeakMap,o=new Set,c=new Set,_=new Map,r=(d,u)=>`${d}-${u}`,f=T(()=>new ResizeObserver(d=>{const u=new Set,m=new Set;for(const{target:l,contentRect:p}of d)if(l.offsetParent)if(l===n){const a=$(n);e._update(D,[p[s],p.top,G(a.paddingBottom)]),t._update(D,[p[i],p.left,G(a.paddingRight)])}else{const a=g.get(l);if(a){const[v,h]=a,y=r(v,h),C=_.get(y),x=[p[s],p[i]];let z,S;C?(C[0]!==x[0]&&(z=!0),C[1]!==x[1]&&(S=!0)):z=S=!0,z&&u.add(v),S&&m.add(h),(z||S)&&_.set(y,x)}}if(u.size){const l=[];u.forEach(p=>{let a=0;c.forEach(v=>{const h=_.get(r(p,v));h&&(a=O(a,h[0]))}),a&&l.push([p,a])}),e._update(W,l)}if(m.size){const l=[];m.forEach(p=>{let a=0;o.forEach(v=>{const h=_.get(r(v,p));h&&(a=O(a,h[1]))}),a&&l.push([p,a])}),t._update(W,l)}}));return{_observeRoot(d){n=d;const u=f();return u.observe(d,be),()=>{u.disconnect()}},_observeItem(d,u,m){const l=f();return g.set(d,[u,m]),o.add(u),c.add(m),l.observe(d),()=>{g.delete(d),l.unobserve(d)}}}},le=A.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},g)=>te("div",{ref:g,...t,children:te("div",{style:A.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{le.displayName="Viewport",le.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ce=()=>[],Xe=()=>A.useReducer(ce,void 0,ce)[1];export{Ae as A,P as S,B as U,le as V,Xe as a,ke as b,Y as c,Je as d,U as e,Ke as f,Pe as g,Fe as h,De as i,qe as j,Ue as k,X as l,Ge as m,We as n,ge as o,je as p,ie as r,Be as u,Me as v};
//# sourceMappingURL=useRerender-65259131.js.map
