import{r as z}from"./index-5284b0bf.js";import{r as de}from"./index-480187bb.js";import{j as Z}from"./jsx-runtime-f8a6c6ea.js";const x=Math.min,b=Math.max,_e=Math.abs,Q=Date.now,ye=Object.values,se=setTimeout,W=e=>e!=null,me=e=>{const t=[...e].sort((n,r)=>n-r),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},ne=(e,t)=>{let s;const n=()=>{W(s)&&clearTimeout(s)},r=()=>{n(),s=se(()=>{s=null,e()},t)};return r._cancel=n,r},pe=(e,t)=>{let s=Q()-t;return(...n)=>{const r=Q();s+t<r&&(s=r,e(...n))}},q=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},M=-1,D=(e,t)=>{const s=e._sizes[t];return s===M?e._defaultItemSize:s},ge=(e,t,s)=>{const n=e._sizes[t]===M;return e._sizes[t]=s,e._measuredOffsetIndex=x(t,e._measuredOffsetIndex),n},re=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+D(e,t):e._offsets[t];let n=e._measuredOffsetIndex,r=e._offsets[n];for(;n<=t&&(e._offsets[n]=r,!(n===t&&!s));)r+=D(e,n),n++;return e._measuredOffsetIndex=t,r},he=e=>re(e,e._length-1,!0),Y=(e,t)=>re(e,t),oe=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const r=D(e,t++);if((n+=r)>=s){n-r/2>=s&&t--;break}}else for(;t>0;){const r=D(e,--t);if((n-=r)<=s){n+r/2<s&&t++;break}}return x(b(t,0),e._length-1)},$=(e,t,s,n)=>oe(e,s,t-n),we=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===M)return!0;return!1},Se=e=>{const t=e._sizes.filter(n=>n!==M),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:me(t)},G=(e,t,s)=>{const n=[],r=[];for(let a=0;a<e;a++){const i=s&&s._sizes[a];if(n.push(W(i)?i:M),a===0)r.push(0);else{const u=s&&s._offsets[a];r.push(W(u)?u:M)}}return{_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?x(s._measuredOffsetIndex,e-1):0,_sizes:n,_offsets:r}},F=e=>e.reduce((t,[s])=>t+s,0),H=(e,t)=>t.map(([s,n])=>[n-D(e,s),s]),Ie=1.5,A=0,be=1,ee=2,P=1,V=2,K=3,ie=4,B=5,ce=6,le=1,k=2,ue=4,Ce=(e,t,s=0,n,r,a,i)=>{const u=!t,d=t||40;let o=d*b(s-1,0),f=0,m=0,_=0,c=a??G(e,d),p=A,g=!1,h=!1,I=[0,s];const S=new Set,L=()=>he(c),y=()=>L()-o,J=()=>{const l=h;return h=!1,l},C=l=>{const w=p;if(p=l,p===A)return!1;if(w===A)return!0};return{_getCache(){return JSON.parse(JSON.stringify(c))},_getRange(){const[l,w]=I,O=Y(c,l),R=$(c,f,l,O),v=oe(c,R,o);return l===R&&w===v?I:I=[R,v]},_isUnmeasuredItem(l){return c._sizes[l]===M},_hasUnmeasuredItemsInRange(l){return we(c,b(0,l-2),x(c._length-1,l+2))},_getItemOffset(l){const w=Y(c,l);return n?w+b(0,o-L()):w},_getItemSize(l){return D(c,l)},_getItemLength(){return c._length},_getScrollOffset(){return f},_getScrollOffsetMax:y,_getViewportSize(){return o},_getScrollSize:L,_getCorrectedScrollSize(){return b(L(),o)},_getJumpCount(){return m},_flushJump(){const l=_;return _=0,l},_getItemIndexForScrollTo(l){return $(c,l,0,0)},_subscribe(l,w){const O=[l,w];return S.add(O),()=>{S.delete(O)}},_update(l,w){let O,R,v=0;switch(l){case P:{const E=w.filter(([N,U])=>c._sizes[N]!==U);if(!E.length)break;let T=0;if(p===ee)T=F(H(c,E));else if(g){const N=H(c,E),[U]=I;f===0||(f>y()-Ie?T=F(N):T=F(N.filter(([,ae])=>ae<U)))}T&&(_=T,m++,v+=ue);let X=!1;E.forEach(([N,U])=>{ge(c,N,U)&&(X=!0)}),u&&X&&!f&&Se(c),v+=k,h=O=!0;break}case V:{o!==w&&(o=w,v=k);break}case K:case ie:{if(f===w)break;if(l===K){const E=J();(p===A||!E)&&!g&&(R=C(f>w?ee:be)),O=_e(f-w)>o}f=b(0,x(y(),w)),v=le;break}case B:{R=C(A),g=!1;break}case ce:{g=!0;break}}v&&(S.forEach(([E,T])=>{v&E&&T(O)}),l===K&&i&&i(f)),W(R)&&r(R)},_getScrollDirection(){return p},_updateCacheLength(l){c._length!==l&&(c=G(l,d,c))}}},ve=typeof window<"u"?z.useLayoutEffect:z.useEffect,j="current",Te=e=>{const t=[];return z.Children.forEach(e,s=>{!W(s)||typeof s=="boolean"||t.push(s)}),t},ze=e=>{const t=z.useRef(e);return ve(()=>{t[j]=e},[e]),t},xe=(e,t,s)=>{const[n,r]=z.useState(t),a=ze(t);if(z.useLayoutEffect(()=>{let i;t===e._getRange?i=le+k:t===e._getCorrectedScrollSize?i=k:t===e._getJumpCount?i=ue:i=k;const u=()=>{r(()=>a[j]())};return e._subscribe(i,d=>{d?de.flushSync(u):u()})},[]),s){const i=t();n!==i&&r(i)}return n},Oe=q(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),fe=(e,t,s)=>pe(n=>{if(e._getScrollDirection()!==A&&!n.ctrlKey&&(t?n.deltaX:n.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&s()}},50),We=(e,t,s)=>{let n,r;const a=t?"scrollLeft":"scrollTop",i=()=>n?t?n.scrollWidth:n.scrollHeight:0,u=(o,f)=>t&&s?Oe(n)||f?-o:e._getScrollOffsetMax()-o:o,d=async(o,f)=>{if(!n)return;const m=()=>x(f(),i()-e._getViewportSize());for(;e._update(ie,m()),!!e._hasUnmeasuredItemsInRange(o);){r&&r[1]();const _=e._subscribe(k,()=>{r&&r[0]()});try{await new Promise((c,p)=>{let g=!1;const h=()=>{g||(g=!0,c(),r=void 0)};r=[h,p],se(h,250)})}catch{return}finally{_()}}n[a]=u(m()),e._update(ce)};return{_initRoot(o){n=o;const f=()=>{e._update(K,u(o[a]))},m=ne(()=>{f(),e._update(B)},150),_=()=>{f(),m()},c=fe(e,t,m);return o.addEventListener("scroll",_),o.addEventListener("wheel",c,{passive:!0}),()=>{o.removeEventListener("scroll",_),o.removeEventListener("wheel",c),m._cancel()}},_getActualScrollSize:i,_scrollTo(o){o=b(o,0),d(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o){o=b(x(o,e._getItemLength()-1),0),d(o,()=>e._getItemOffset(o))},_fixScrollJump:o=>{n&&(n[a]+=u(o,!0))}}},Me=(e,t)=>{const s=t?"scrollX":"scrollY",n=t?"offsetLeft":"offsetTop";return{_initRoot(r){let a=!1;const i=(_,c)=>{const p=c+_[n],g=_.offsetParent;return _===document.body||!g?p:i(g,p)},u=()=>{a&&e._update(K,window[s]-i(r,0))},d=ne(()=>{u(),e._update(B)},150),o=()=>{u(),d()},f=fe(e,t,d),m=new IntersectionObserver(([_])=>{a=_.isIntersecting});return m.observe(r),window.addEventListener("scroll",o),window.addEventListener("wheel",f,{passive:!0}),()=>{m.disconnect(),window.removeEventListener("scroll",o),window.removeEventListener("wheel",f),d._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?r:0,t?0:r)}}},Ne=e=>{const t=z.useRef();return t[j]||(t[j]=e())},Ae=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,a=q(()=>new ResizeObserver(i=>{const u=[];for(const{target:d,contentRect:o}of i)if(d===s)e._update(V,o[n]);else{const f=r.get(d);W(f)&&u.push([f,o[n]])}u.length&&e._update(P,u)}));return{_observeRoot(i){s=i;const u=a();return u.observe(i),()=>{u.disconnect()}},_observeItem(i,u){const d=a();return r.set(i,u),d.observe(i),()=>{r.delete(i),d.unobserve(i)}}}},ke=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,a=q(()=>new ResizeObserver(i=>{const u=[];for(const{target:d,contentRect:o}of i){const f=r.get(d);W(f)&&u.push([f,o[s]])}u.length&&e._update(P,u)}));return{_observeRoot(){const i=()=>{e._update(V,window[n])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),a().disconnect()}},_observeItem(i,u){const d=a();return r.set(i,u),d.observe(i),()=>{r.delete(i),d.unobserve(i)}}}},De=(e,t)=>{let s;const n="height",r="width",a=new WeakMap,i=new Set,u=new Set,d=new Map,o=(m,_)=>`${m}-${_}`,f=q(()=>new ResizeObserver(m=>{const _=new Set,c=new Set;for(const{target:p,contentRect:g}of m)if(p===s)e._update(V,g[n]),t._update(V,g[r]);else{const h=a.get(p);if(h){const[I,S]=h,L=o(I,S),y=d.get(L),J=[g[n],g[r]];let C,l;y?(y[0]!==J[0]&&(C=!0),y[1]!==J[1]&&(l=!0)):C=l=!0,C&&_.add(I),l&&c.add(S),(C||l)&&d.set(L,J)}}if(_.size){const p=[];_.forEach(g=>{let h=0;u.forEach(I=>{const S=d.get(o(g,I));S&&(h=b(h,S[0]))}),h&&p.push([g,h])}),e._update(P,p)}if(c.size){const p=[];c.forEach(g=>{let h=0;i.forEach(I=>{const S=d.get(o(I,g));S&&(h=b(h,S[1]))}),h&&p.push([g,h])}),t._update(P,p)}}));return{_observeRoot(m){s=m;const _=f();return _.observe(m),()=>{_.disconnect()}},_observeItem(m,_,c){const p=f();return a.set(m,[_,c]),i.add(_),u.add(c),p.observe(m),()=>{a.delete(m),p.unobserve(m)}}}},te=z.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:r},a)=>Z("div",{ref:a,...t,children:Z("div",{style:z.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:r?"none":"auto"}),[s,n,r]),children:e})}));try{te.displayName="Window",te.__docgenInfo={description:"",displayName:"Window",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{te as W,Ne as a,xe as b,ve as c,Ce as d,W as e,Te as f,Ae as g,We as h,x as i,ke as j,Me as k,De as l,b as m,j as r,ze as u,ye as v};
//# sourceMappingURL=Window-5a7d9742.js.map
