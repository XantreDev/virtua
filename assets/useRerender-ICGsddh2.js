import{r as x}from"./index-G6kSzgdV.js";import{j as te}from"./jsx-runtime-KhpQ_ow-.js";const C=Math.min,I=Math.max,Oe=Math.abs,ne=Date.now,Pe=Object.values,Ie=Array.isArray,F=setTimeout,D=(e,t,n)=>C(n,I(t,e)),q=e=>e!=null,Ee=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},fe=(e,t)=>{let n;const s=()=>{q(n)&&clearTimeout(n)},i=()=>{s(),n=F(()=>{n=null,e()},t)};return i._cancel=s,i},Re=(e,t)=>{let n=ne()-t;return(...s)=>{const i=ne();n+t<i&&(n=i,e(...s))}},A=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},$=e=>getComputedStyle(e),X=e=>e?parseFloat(e):0,L=-1,V=(e,t)=>{const n=e._sizes[t];return n===L?e._defaultItemSize:n},ze=(e,t,n)=>{const s=e._sizes[t]===L;return e._sizes[t]=n,e._computedOffsetIndex=C(t,e._computedOffsetIndex),s},Q=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=V(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Le=e=>e._length?Q(e,e._length-1)+V(e,e._length-1):0,se=(e,t,n)=>{let s=Q(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=V(e,n);if(s+i>t)break;s+=i,n++}else s-=V(e,--n);return D(n,0,e._length-1)},re=(e,t,n,s)=>{const i=se(e,t,C(n,e._length-1));return[i,se(e,t+s,i)]},ye=e=>{const t=e._sizes.filter(s=>s!==L),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ee(t)},de=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](L),e._offsets.push(i===0?0:L);e._length=t},Te=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return de(n,e),n},oe=(e,t,n)=>{const s=t-e._length,i=s<0;let p;return i?(p=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,l)=>o+(l===L?e._defaultItemSize:l),0),e._offsets.splice(s)):(p=e._defaultItemSize*s,de(e,e._length+s,n)),e._computedOffsetIndex=n?0:D(t-1,0,e._computedOffsetIndex),e._length=t,[p,i]},ae=typeof window<"u",_e=()=>document.documentElement,Ce=A(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),G=A(()=>ae?$(_e()).direction==="rtl":!1),Y=A(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ae=A(()=>"scrollBehavior"in _e().style),ie=(e,t,n)=>t.reduce((s,[i,p])=>{const o=p-V(e,i);return(!n||o>0)&&(s+=o),s},0),Me=1.5,W=0,me=1,pe=2,J=1,K=2,Ne=3,H=4,ee=5,ge=6,Se=7,B=1,Z=2,xe=4,We=(e,t=40,n=0,s=Te(e,t),i,p)=>{let o=t*I(n-1,0),l=0,a=0,r=0,c=0,u=0,f=0,d=W,_=!1,m=null,g=!1,v=[0,n];const b=new Set,M=()=>Le(s),E=()=>M()-o+l+a,N=w=>D(w,0,E()),y=w=>{Y()&&d!==W?f+=w:(u+=w,c++)},T=w=>{const S=d;return d=w,d!==S};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return m?[C(v[0],m[0]),I(v[1],m[1])]:v=re(s,r+f,v[0],o)},_isUnmeasuredItem(w){return s._sizes[w]===L},_hasUnmeasuredItemsInSmoothScrollRange(){return m?s._sizes.slice(I(0,m[0]-1),C(s._length-1,m[1]+1)+1).includes(L):!1},_getItemOffset(w){const S=Q(s,w)-f;return i?S+I(0,o-M()):S},_getItemSize(w){return V(s,w)},_getItemsLength(){return s._length},_getScrollOffset(){return r},_getScrollOffsetMax:E,_getScrollDirection(){return d},_getViewportSize(){return o},_getViewportPaddingStart(){return l},_getTotalSize(){return I(M(),o-l-a)},_getJumpCount(){return c},_flushJump(){const w=u;return u=0,w},_subscribe(w,S){const k=[w,S];return b.add(k),()=>{b.delete(k)}},_update(w,S){let k,j,R=0;switch(w){case J:{const h=S.filter(([z,P])=>s._sizes[z]!==P);if(!h.length)break;let O=0;if(r!==0)if(r>E()-Me)O=ie(s,h,!0);else{const[z]=v;O=ie(s,h.filter(([P])=>P<z))}O&&y(O);let U=!1;h.forEach(([z,P])=>{ze(s,z,P)&&(U=!0)}),p&&U&&!r&&ye(s),R=Z,g=j=!0;break}case K:{const h=S[0]+S[1]+S[2];o!==h&&(o=h,l=S[1],a=S[2],R=Z);break}case Ne:{if(S[1]){const h=E()-r,[O,U]=oe(s,S[0],!0),z=U?-C(O,h):O;y(z),Y()||(r=N(r+z)),R=B}else oe(s,S[0]);break}case H:{if(S===r)break;const h=S-r,O=g;g=!1,(d===W||!O)&&!_&&T(h<0?pe:me),j=Oe(h)>o,r=N(S),R=B+xe;break}case ee:{T(W)&&(k=!0,R=B),_=!1,m=null;break}case ge:{_=!0;break}case Se:{m=re(s,S,v[0],o),R=B;break}}R&&(k&&f&&(g=!0,u+=f,f=0,c++),b.forEach(([h,O])=>{R&h&&O(j)}))}}},De=ae?x.useLayoutEffect:x.useEffect,we=(e,t,n)=>Re(s=>{if(e._getScrollDirection()!==W&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),he=(e,t,n,s)=>Ce(e)||s?-n:t._getScrollOffsetMax()-n,Je=(e,t)=>{let n,s,i=!1;const p=t?"scrollLeft":"scrollTop",o=t?"overflowX":"overflowY",l=(r,c)=>t&&G()?he(n,e,r,c):r,a=async(r,c)=>{if(!n)return;s&&s();const u=()=>D(r(),0,e._getScrollOffsetMax()),f=()=>{let d;return[new Promise((_,m)=>{d=_,F(s=m,150)}),e._subscribe(Z,()=>{d&&d()})]};if(c&&Ae()){for(;e._update(Se,u()),!!e._hasUnmeasuredItemsInSmoothScrollRange();){const[d,_]=f();try{await d}catch{return}finally{_()}}n.scrollTo({[t?"left":"top"]:l(u()),behavior:"smooth"})}else for(;;){const[d,_]=f();try{n[p]=l(u()),e._update(ge),await d}catch{return}finally{_()}}};return{_observe(r){n=r;let c=!1,u=!1;const f=fe(()=>{if(c){f();return}u=!1,e._update(ee)},150),d=()=>{u&&(i=!0),e._update(H,l(r[p])),f()},_=we(e,t,f),m=()=>{c=!0,u=i=!1},g=()=>{c=!1,Y()&&(u=!0)};return r.addEventListener("scroll",d),r.addEventListener("wheel",_,{passive:!0}),r.addEventListener("touchstart",m,{passive:!0}),r.addEventListener("touchend",g,{passive:!0}),()=>{r.removeEventListener("scroll",d),r.removeEventListener("wheel",_),r.removeEventListener("touchstart",m),r.removeEventListener("touchend",g),f._cancel()}},_scrollTo(r){a(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),a(()=>r)},_scrollToIndex(r,{align:c,smooth:u}={}){if(r=D(r,0,e._getItemsLength()-1),c==="nearest"){const f=e._getItemOffset(r),d=e._getScrollOffset();if(f<d)c="start";else if(f+e._getItemSize(r)>d+e._getViewportSize())c="end";else return}a(()=>c==="end"?e._getViewportPaddingStart()+e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():c==="center"?e._getViewportPaddingStart()+e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:e._getViewportPaddingStart()+e._getItemOffset(r),u)},_fixScrollJump:r=>{if(n){if(i){i=!1;const c=n.style,u=c[o];c[o]="hidden",F(()=>{c[o]=u})}n[p]+=l(r,!0)}}}},Ke=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",p=(o,l)=>t&&G()?he(n,e,o,l):o;return{_observe(o){n=o;const l=(u,f)=>{const d=f+(t&&G()?window.innerWidth-u[i]-u.offsetWidth:u[i]),_=u.offsetParent;return u===document.body||!_?d:l(_,d)},a=fe(()=>{e._update(ee)},150),r=()=>{e._update(H,p(window[s])-l(o,0)),a()},c=we(e,t,a);return window.addEventListener("scroll",r),window.addEventListener("wheel",c,{passive:!0}),()=>{window.removeEventListener("scroll",r),window.removeEventListener("wheel",c),a._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?p(o,!0):0,t?0:o)}}},le="current",Ue={},ve=(e,t)=>{if(Ie(e))for(const n of e)ve(n,t);else!q(e)||typeof e=="boolean"||t.push(e)},Be=e=>{const t=[];return ve(e,t),t},qe=(e,t,n)=>I(e-(n===me?1:I(1,t)),0),je=(e,t,n,s)=>C(e+(n===pe?1:I(1,t)),s-1),Fe=e=>{const t=x.useRef();return t[le]||(t[le]=e())},be={box:"border-box"},Xe=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,p=A(()=>new ResizeObserver(o=>{const l=[];for(const{target:a,contentRect:r}of o)if(a.offsetParent)if(a===n)e._update(K,[r[s],r[t?"left":"top"],X($(n)[t?"paddingRight":"paddingBottom"])]);else{const c=i.get(a);q(c)&&l.push([c,r[s]])}l.length&&e._update(J,l)}));return{_observeRoot(o){n=o;const l=p();return l.observe(o,be),()=>{l.disconnect()}},_observeItem(o,l){const a=p();return i.set(o,l),a.observe(o),()=>{i.delete(o),a.unobserve(o)}}}},Ge=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,p=A(()=>new ResizeObserver(o=>{const l=[];for(const{target:a,contentRect:r}of o){if(!a.offsetParent)continue;const c=i.get(a);q(c)&&l.push([c,r[n]])}l.length&&e._update(J,l)}));return{_observeRoot(){const o=()=>{e._update(K,[window[s],0,0])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),p().disconnect()}},_observeItem(o,l){const a=p();return i.set(o,l),a.observe(o),()=>{i.delete(o),a.unobserve(o)}}}},Ye=(e,t)=>{let n;const s="height",i="width",p=new WeakMap,o=new Set,l=new Set,a=new Map,r=(u,f)=>`${u}-${f}`,c=A(()=>new ResizeObserver(u=>{const f=new Set,d=new Set;for(const{target:_,contentRect:m}of u)if(_.offsetParent)if(_===n){const g=$(n);e._update(K,[m[s],m.top,X(g.paddingBottom)]),t._update(K,[m[i],m.left,X(g.paddingRight)])}else{const g=p.get(_);if(g){const[v,b]=g,M=r(v,b),E=a.get(M),N=[m[s],m[i]];let y,T;E?(E[0]!==N[0]&&(y=!0),E[1]!==N[1]&&(T=!0)):y=T=!0,y&&f.add(v),T&&d.add(b),(y||T)&&a.set(M,N)}}if(f.size){const _=[];f.forEach(m=>{let g=0;l.forEach(v=>{const b=a.get(r(m,v));b&&(g=I(g,b[0]))}),g&&_.push([m,g])}),e._update(J,_)}if(d.size){const _=[];d.forEach(m=>{let g=0;o.forEach(v=>{const b=a.get(r(v,m));b&&(g=I(g,b[1]))}),g&&_.push([m,g])}),t._update(J,_)}}));return{_observeRoot(u){n=u;const f=c();return f.observe(u,be),()=>{f.disconnect()}},_observeItem(u,f,d){const _=c();return p.set(u,[f,d]),o.add(f),l.add(d),_.observe(u),()=>{p.delete(u),_.unobserve(u)}}}},ue=x.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},p)=>te("div",{ref:p,...t,children:te("div",{style:x.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{ue.displayName="Viewport",ue.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ce=()=>[],Ze=()=>x.useReducer(ce,void 0,ce)[1];export{Ne as A,W as S,B as U,ue as V,Ze as a,De as b,Z as c,Ue as d,q as e,We as f,Ge as g,Ke as h,je as i,qe as j,G as k,Ye as l,Je as m,xe as n,Xe as o,Be as p,le as r,Fe as u,Pe as v};
//# sourceMappingURL=useRerender-ICGsddh2.js.map
