import{r as k}from"./index-yp3VsGQP.js";import{a as ee}from"./jsx-runtime-sgeEVxPu.js";const x=Math.min,I=Math.max,te=Math.abs,ne=Date.now,We=Object.values,Ie=Array.isArray,j=setTimeout,J=(e,t,n)=>x(n,I(t,e)),q=e=>e!=null,ze=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},fe=(e,t)=>{let n;const s=()=>{q(n)&&clearTimeout(n)},i=()=>{s(),n=j(()=>{n=null,e()},t)};return i._cancel=s,i},Ee=(e,t)=>{let n=ne()-t;return(...s)=>{const i=ne();n+t<i&&(n=i,e(...s))}},M=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},Z=e=>getComputedStyle(e),X=e=>e?parseFloat(e):0,R=-1,V=(e,t)=>{const n=e._sizes[t];return n===R?e._defaultItemSize:n},Re=(e,t,n)=>{const s=e._sizes[t]===R;return e._sizes[t]=n,e._computedOffsetIndex=x(t,e._computedOffsetIndex),s},$=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=V(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},ye=e=>e._length?$(e,e._length-1)+V(e,e._length-1):0,se=(e,t,n)=>{let s=$(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=V(e,n);if(s+i>t)break;s+=i,n++}else s-=V(e,--n);return J(n,0,e._length-1)},re=(e,t,n,s)=>{const i=se(e,t,x(n,e._length-1));return[i,se(e,t+s,i)]},Le=e=>{const t=e._sizes.filter(s=>s!==R),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:ze(t)},ae=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](R),e._offsets.push(i===0?0:R);e._length=t},Te=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return ae(n,e),n},oe=(e,t,n)=>{const s=t-e._length,i=s<0;let p;return i?(p=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,u)=>o+(u===R?e._defaultItemSize:u),0),e._offsets.splice(s)):(p=e._defaultItemSize*s,ae(e,e._length+s,n)),e._computedOffsetIndex=n?0:J(t-1,0,e._computedOffsetIndex),e._length=t,[p,i]},de=typeof window<"u",_e=()=>document.documentElement,Ce=M(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),G=M(()=>de?Z(_e()).direction==="rtl":!1),me=M(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ae=M(()=>"scrollBehavior"in _e().style),ie=(e,t,n)=>t.reduce((s,[i,p])=>{const o=p-V(e,i);return(!n||o>0)&&(s+=o),s},0),xe=1.5,B=0,pe=1,ge=2,K=1,P=2,Me=3,Q=4,H=5,Se=6,we=7,U=1,Y=2,Ne=4,De=(e,t=40,n=0,s=Te(e,t),i,p)=>{let o=t*I(n-1,0),u=0,_=0,r=0,c=0,l=0,f=0,a=0,d=B,g=!1,m=null,h=[0,n];const b=new Set,y=()=>ye(s),N=()=>o-u-_,z=()=>y()-N(),L=v=>{me()&&d!==B?f+=v:(l+=v,c++)},T=v=>{const S=d;return d=v,d!==S};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return m?[x(h[0],m[0]),I(h[1],m[1])]:a?h:h=re(s,r+f+l,h[0],o)},_isUnmeasuredItem(v){return s._sizes[v]===R},_hasUnmeasuredItemsInSmoothScrollRange(){return m?s._sizes.slice(I(0,m[0]-1),x(s._length-1,m[1]+1)+1).includes(R):!1},_getItemOffset(v){const S=$(s,v)-f;return i?S+I(0,o-y()):S},_getItemSize(v){return V(s,v)},_getItemsLength(){return s._length},_getScrollOffset(){return r},_getMaxScrollOffset:z,_getScrollDirection(){return d},_getViewportSize(){return o},_getStartSpacerSize(){return u},_getScrollSize(){return I(y(),N())},_getTotalSize:y,_getJumpCount(){return c},_flushJump(){return a=l,l=0,a},_subscribe(v,S){const W=[v,S];return b.add(W),()=>{b.delete(W)}},_update(v,S){let W,F,E=0;switch(v){case K:{const w=S.filter(([A,D])=>s._sizes[A]!==D);if(!w.length)break;let O=0;if(r!==0)if(r>z()-xe)O=ie(s,w,!0);else{const[A]=h;O=ie(s,w.filter(([D])=>D<A))}O&&L(O);let C=!1;w.forEach(([A,D])=>{Re(s,A,D)&&(C=!0)}),p&&C&&!r&&Le(s),E=Y,F=!0;break}case P:{const w=S[0]+S[1]+S[2];o!==w&&(o=w,u=S[1],_=S[2],E=Y);break}case Me:{if(S[1]){const w=z()-r,[O,C]=oe(s,S[0],!0);L(C?-x(O,w):O),E=U}else oe(s,S[0]);break}case Q:{const w=J(S,0,z());if(w===r)break;const O=w-r,C=te(O),A=a&&C<te(a)+1;a=0,!A&&!g&&T(O<0?ge:pe),F=C>o,r=w,E=U+Ne;break}case H:{T(B)&&(W=!0,E=U),g=!1,m=null;break}case Se:{g=!0;break}case we:{m=re(s,S,h[0],o),E=U;break}}E&&(W&&f&&(l+=f,f=0,c++),b.forEach(([w,O])=>{E&w&&O(F)}))}}},Je=de?k.useLayoutEffect:k.useEffect,he=(e,t,n)=>Ee(s=>{if(e._getScrollDirection()!==B&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getMaxScrollOffset()&&n()}},50),ve=(e,t,n,s)=>Ce(e)||s?-n:t._getMaxScrollOffset()-n,Ke=(e,t)=>{let n,s,i=!1;const p=t?"scrollLeft":"scrollTop",o=t?"overflowX":"overflowY",u=(r,c)=>t&&G()?ve(n,e,r,c):r,_=async(r,c)=>{if(!n)return;s&&s();const l=()=>J(r(),0,e._getMaxScrollOffset()),f=()=>{let a;return[new Promise((d,g)=>{a=d,j(s=g,150)}),e._subscribe(Y,()=>{a&&a()})]};if(c&&Ae()){for(;e._update(we,l()),!!e._hasUnmeasuredItemsInSmoothScrollRange();){const[a,d]=f();try{await a}catch{return}finally{d()}}n.scrollTo({[t?"left":"top"]:u(l()),behavior:"smooth"})}else for(;;){const[a,d]=f();try{n[p]=u(l()),e._update(Se),await a}catch{return}finally{d()}}};return{_observe(r){n=r;let c=!1,l=!1;const f=fe(()=>{if(c){f();return}l=!1,e._update(H)},150),a=()=>{l&&(i=!0),e._update(Q,u(r[p])),f()},d=he(e,t,f),g=()=>{c=!0,l=i=!1},m=()=>{c=!1,me()&&(l=!0)};return r.addEventListener("scroll",a),r.addEventListener("wheel",d,{passive:!0}),r.addEventListener("touchstart",g,{passive:!0}),r.addEventListener("touchend",m,{passive:!0}),()=>{r.removeEventListener("scroll",a),r.removeEventListener("wheel",d),r.removeEventListener("touchstart",g),r.removeEventListener("touchend",m),f._cancel()}},_scrollTo(r){_(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),_(()=>r)},_scrollToIndex(r,{align:c,smooth:l}={}){if(r=J(r,0,e._getItemsLength()-1),c==="nearest"){const f=e._getItemOffset(r),a=e._getScrollOffset();if(f<a)c="start";else if(f+e._getItemSize(r)>a+e._getViewportSize())c="end";else return}_(()=>e._getStartSpacerSize()+(c==="end"?e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():c==="center"?e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:e._getItemOffset(r)),l)},_fixScrollJump:r=>{if(n){if(i){i=!1;const c=n.style,l=c[o];c[o]="hidden",j(()=>{c[o]=l})}n[p]+=u(r,!0)}}}},Pe=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",p=(o,u)=>t&&G()?ve(n,e,o,u):o;return{_observe(o){n=o;const u=(l,f)=>{const a=f+(t&&G()?window.innerWidth-l[i]-l.offsetWidth:l[i]),d=l.offsetParent;return l===document.body||!d?a:u(d,a)},_=fe(()=>{e._update(H)},150),r=()=>{e._update(Q,p(window[s])-u(o,0)),_()},c=he(e,t,_);return window.addEventListener("scroll",r),window.addEventListener("wheel",c,{passive:!0}),()=>{window.removeEventListener("scroll",r),window.removeEventListener("wheel",c),_._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?p(o,!0):0,t?0:o)}}},le="current",Ue={},be=(e,t)=>{if(Ie(e))for(const n of e)be(n,t);else!q(e)||typeof e=="boolean"||t.push(e)},Be=e=>{const t=[];return be(e,t),t},qe=(e,t,n)=>I(e-(n===pe?1:I(1,t)),0),Fe=(e,t,n,s)=>x(e+(n===ge?1:I(1,t)),s-1),je=e=>{const t=k.useRef();return t[le]||(t[le]=e())},Oe={box:"border-box"},Xe=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,p=M(()=>new ResizeObserver(o=>{const u=[];for(const{target:_,contentRect:r}of o)if(_.offsetParent)if(_===n)e._update(P,[r[s],r[t?"left":"top"],X(Z(n)[t?"paddingRight":"paddingBottom"])]);else{const c=i.get(_);q(c)&&u.push([c,r[s]])}u.length&&e._update(K,u)}));return{_observeRoot(o){n=o;const u=p();return u.observe(o,Oe),()=>{u.disconnect()}},_observeItem(o,u){const _=p();return i.set(o,u),_.observe(o),()=>{i.delete(o),_.unobserve(o)}}}},Ge=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,p=M(()=>new ResizeObserver(o=>{const u=[];for(const{target:_,contentRect:r}of o){if(!_.offsetParent)continue;const c=i.get(_);q(c)&&u.push([c,r[n]])}u.length&&e._update(K,u)}));return{_observeRoot(){const o=()=>{e._update(P,[window[s],0,0])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),p().disconnect()}},_observeItem(o,u){const _=p();return i.set(o,u),_.observe(o),()=>{i.delete(o),_.unobserve(o)}}}},Ye=(e,t)=>{let n;const s="height",i="width",p=new WeakMap,o=new Set,u=new Set,_=new Map,r=(l,f)=>`${l}-${f}`,c=M(()=>new ResizeObserver(l=>{const f=new Set,a=new Set;for(const{target:d,contentRect:g}of l)if(d.offsetParent)if(d===n){const m=Z(n);e._update(P,[g[s],g.top,X(m.paddingBottom)]),t._update(P,[g[i],g.left,X(m.paddingRight)])}else{const m=p.get(d);if(m){const[h,b]=m,y=r(h,b),N=_.get(y),z=[g[s],g[i]];let L,T;N?(N[0]!==z[0]&&(L=!0),N[1]!==z[1]&&(T=!0)):L=T=!0,L&&f.add(h),T&&a.add(b),(L||T)&&_.set(y,z)}}if(f.size){const d=[];f.forEach(g=>{let m=0;u.forEach(h=>{const b=_.get(r(g,h));b&&(m=I(m,b[0]))}),m&&d.push([g,m])}),e._update(K,d)}if(a.size){const d=[];a.forEach(g=>{let m=0;o.forEach(h=>{const b=_.get(r(h,g));b&&(m=I(m,b[1]))}),m&&d.push([g,m])}),t._update(K,d)}}));return{_observeRoot(l){n=l;const f=c();return f.observe(l,Oe),()=>{f.disconnect()}},_observeItem(l,f,a){const d=c();return p.set(l,[f,a]),o.add(f),u.add(a),d.observe(l),()=>{p.delete(l),d.unobserve(l)}}}},ue=k.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},p)=>ee("div",{ref:p,...t,children:ee("div",{style:k.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{ue.displayName="Viewport",ue.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ce=()=>[],Ze=()=>k.useReducer(ce,void 0,ce)[1];export{Me as A,B as S,U,ue as V,je as a,Ze as b,Y as c,De as d,Ue as e,Ye as f,Ke as g,Fe as h,G as i,qe as j,Ne as k,q as l,Xe as m,Ge as n,Pe as o,Be as p,le as r,Je as u,We as v};
