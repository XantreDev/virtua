import{j as N}from"./jsx-runtime-DCrfGL6_.js";import{r as a}from"./index-98wxwTcn.js";import{a as M,A as Q,h as W,b as X,c as Y,u as D,r,U as Z,j as $,k as ee,m as se,g as te,s as re,S as oe,d as le,l as ae,n as ne,o as ie}from"./useRerender-BFndcX2P.js";import{u as ce,a as H,L as ue}from"./useChildren-BgszxwjF.js";import{r as fe}from"./index-SCI4cgSJ.js";const de=a.forwardRef(({children:j,count:k,overscan:x=4,keepMounted:p,itemSize:g,shift:w,horizontal:U,cache:q,startMargin:E=0,ssrCount:h,as:u="div",item:G="div",scrollRef:v,onScroll:P,onScrollEnd:B,onRangeChange:b},F)=>{u=u;const[J,n]=ce(j,k),I=a.useRef(null),z=a.useRef(!!h),T=H(P),R=H(B),[e,f,o,d]=M(()=>{const s=!!U,t=le(n,g,h,q,!g);return[t,ae(t,s),ne(t,s),s]});n!==e._getItemsLength()&&e._update(Q,[n,w]),E!==e._getStartSpacerSize()&&e._update(W,E);const O=X(e),[_,m]=e._getRange(),L=e._getScrollDirection(),K=e._getJumpCount(),V=e._getTotalSize(),i=[],[A,C]=Y(_,m,x,L,n),S=s=>{const t=J(s);return N.jsx(ue,{_resizer:f._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_as:G,_children:t,_isHorizontal:d,_isSSR:z[r]},ie(t,s))};D(()=>{z[r]=!1;const s=e._subscribe(Z,c=>{c?fe.flushSync(O):O()}),t=e._subscribe($,()=>{T[r]&&T[r](e._getScrollOffset())}),l=e._subscribe(ee,()=>{R[r]&&R[r]()}),y=c=>{f._observeRoot(c),o._observe(c)};return v?se(()=>y(v[r])):y(I[r].parentElement),()=>{s(),t(),l(),f._dispose(),o._dispose()}},[]),D(()=>{o._fixScrollJump()},[K]),a.useEffect(()=>{b&&b(_,m)},[_,m]),a.useImperativeHandle(F,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return te(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let s=A,t=C;s<=t;s++)i.push(S(s));if(p){const s=[],t=[];re(p).forEach(l=>{l<A&&s.push(S(l)),l>C&&t.push(S(l))}),i.unshift(...s),i.push(...t)}return N.jsx(u,{ref:I,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?V:"100%",height:d?"100%":V,pointerEvents:L!==oe?"none":"auto"},children:i})});de.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},startMargin:{defaultValue:{value:"0",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{de as V};
