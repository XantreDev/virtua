import{j as A}from"./jsx-runtime-WtcO95wV.js";import{r as l}from"./index-DaO3jVNX.js";import{a as M,A as Q,b as W,c as X,u as C,r,U as Y,h as Z,j as $,m as ee,g as se,S as te,d as re,k as oe,l as le,n as ne}from"./useRerender-2nbuV_q9.js";import{u as ae,a as D,L as ie}from"./useChildren-BpMocZl7.js";import{r as ce}from"./index-DpI4bZRz.js";const ue=l.forwardRef(({children:j,count:k,overscan:x=4,keepMounted:S,itemSize:p,shift:H,horizontal:N,cache:w,startMargin:U,ssrCount:g,as:c="div",item:q="div",scrollRef:E,onScroll:P,onScrollEnd:B,onRangeChange:b},G)=>{c=c;const[J,n]=ae(j,k),h=l.useRef(null),v=l.useRef(!!g),z=D(P),I=D(B),[s,u,o,f]=M(()=>{const e=!!N,t=re(n,p,g,w,!p,U);return[t,oe(t,e),le(t,e),e]});n!==s._getItemsLength()&&s._update(Q,[n,H]);const R=W(s),[d,m]=s._getRange(),T=s._getScrollDirection(),K=s._getJumpCount(),L=s._getTotalSize(),a=[],[O,V]=X(d,m,x,T,n),_=e=>{const t=J(e);return A.jsx(ie,{_resizer:u._observeItem,_index:e,_offset:s._getItemOffset(e),_hide:s._isUnmeasuredItem(e),_element:q,_children:t,_isHorizontal:f,_isSSR:v[r]},ne(t,e))};C(()=>{v[r]=!1;const e=s._subscribe(Y,i=>{i?ce.flushSync(R):R()}),t=s._subscribe(Z,()=>{z[r]&&z[r](s._getScrollOffset())}),F=s._subscribe($,()=>{I[r]&&I[r]()}),y=i=>{u._observeRoot(i),o._observe(i)};return E?ee(()=>y(E[r])):y(h[r].parentElement),()=>{e(),t(),F(),u._dispose(),o._dispose()}},[]),C(()=>{o._fixScrollJump()},[K]),l.useEffect(()=>{b&&b(d,m)},[d,m]),l.useImperativeHandle(G,()=>({get cache(){return s._getCacheSnapshot()},get scrollOffset(){return s._getScrollOffset()},get scrollSize(){return se(s)},get viewportSize(){return s._getViewportSize()},getItemOffset:s._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let e=O,t=V;e<=t;e++)a.push(_(e));return S&&S.forEach(e=>{e<O&&a.unshift(_(e)),e>V&&a.push(_(e))}),A.jsx(c,{ref:h,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:f?L:"100%",height:f?"100%":L,pointerEvents:T!==te?"none":"auto"},children:a})});ue.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ue as V};
