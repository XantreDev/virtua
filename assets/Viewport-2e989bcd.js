import{r as T}from"./index-c6dae603.js";import{j as X}from"./jsx-runtime-c3d7f245.js";const N=Math.min,z=Math.max,Se=Math.abs,Z=Date.now,Me=Object.values,Ie=Array.isArray,re=setTimeout,M=(e,t,n)=>N(n,z(t,e)),K=e=>e!=null,be=e=>{const t=[...e].sort((s,r)=>s-r),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},oe=(e,t)=>{let n;const s=()=>{K(n)&&clearTimeout(n)},r=()=>{s(),n=re(()=>{n=null,e()},t)};return r._cancel=s,r},Oe=(e,t)=>{let n=Z()-t;return(...s)=>{const r=Z();n+t<r&&(n=r,e(...s))}},k=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},j=e=>getComputedStyle(e),J=e=>e?parseFloat(e):0,y=-1,x=(e,t)=>{const n=e._sizes[t];return n===y?e._defaultItemSize:n},ve=(e,t,n)=>{const s=e._sizes[t]===y;return e._sizes[t]=n,e._computedOffsetIndex=N(t,e._computedOffsetIndex),s},F=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=x(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Re=e=>e._length?F(e,e._length-1)+x(e,e._length-1):0,Q=(e,t,n)=>{let s=F(e,n);for(;n>=0&&n<e._length;)if(s<=t){const r=x(e,n);if(s+r>t)break;s+=r,n++}else s-=x(e,--n);return M(n,0,e._length-1)},Y=(e,t,n,s)=>{const r=Q(e,t,N(n,e._length-1));return[r,Q(e,t+s,r)]},Ee=(e,t,n)=>e._sizes.slice(z(0,t-1),N(e._length-1,n+1)+1).includes(y),ze=e=>{const t=e._sizes.filter(s=>s!==y),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:be(t)},ie=(e,t,n)=>{const s=n?"unshift":"push";for(let r=e._length;r<t;r++)e._sizes[s](y),e._offsets.push(r===0?0:y);e._length=t},he=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return ie(n,e),n},$=(e,t,n)=>{const s=t-e._length,r=s<0;let c;return r?(c=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((i,o)=>i+(o===y?e._defaultItemSize:o),0),e._offsets.splice(s)):(c=e._defaultItemSize*s,ie(e,e._length+s,n)),e._computedOffsetIndex=n?0:M(t-1,0,e._computedOffsetIndex),e._length=t,[c,r]},H=(e,t,n)=>t.reduce((s,[r,c])=>{const i=c-x(e,r);return(!n||i>0)&&(s+=i),s},0),Le=1.5,P=0,le=1,ce=2,V=1,D=2,ye=3,U=4,ue=5,G=6,fe=7,ee=1,B=2,te=4,ne=8,Te=16,Ve=(e,t,n=40,s=0,r=he(t,n),c,i)=>{let o=n*z(s-1,0),l=0,_=0,m=0,f=P,g=!1,S=!1,u=!1,w=[0,s];const p=new Set,b=()=>Re(r),O=()=>b()-o,A=d=>M(d,0,O()),C=d=>{const a=f;return f=d,f!==a};return{_getCache(){return JSON.parse(JSON.stringify(r))},_getRange(){const[d,a]=w,[I,v]=Y(r,l,d,o);return d===I&&a===v?w:w=[I,v]},_isUnmeasuredItem(d){return r._sizes[d]===y},_hasUnmeasuredItemsInTargetViewport(d){const[a,I]=Y(r,d,w[0],o);return Ee(r,a,I)},_getItemOffset(d){const a=F(r,d);return c?a+z(0,o-b()):a},_getItemSize(d){return x(r,d)},_getItemsLength(){return r._length},_getScrollOffset(){return l},_getScrollOffsetMax:O,_getScrollDirection(){return f},_getViewportSize(){return o},_getCorrectedScrollSize(){return z(b(),o)},_getJumpCount(){return _},_flushJump(){const d=m;return m=0,d},_subscribe(d,a){const I=[d,a];return p.add(I),()=>{p.delete(I)}},_update(d,a){let I,v=0;switch(d){case V:{const R=a.filter(([E,L])=>r._sizes[E]!==L);if(!R.length)break;if(!g){let E=0;if(l!==0)if(l>O()-Le)E=H(r,R,!0);else{const[L]=w;E=H(r,R.filter(([we])=>we<L))}E&&(m=E,_++,v+=te)}let h=!1;R.forEach(([E,L])=>{ve(r,E,L)&&(h=!0)}),i&&h&&!l&&ze(r),v+=B,u=I=!0;break}case D:{o!==a&&(o=a,v=B);break}case ye:{if(a[1]){const R=O()-l,[h,E]=$(r,a[0],!0),L=E?-N(h,R):h;m+=L,l=A(l+L),_++,v=ee+te}else $(r,a[0]);break}case U:case ue:{if(l===a)break;if(d===U){const R=a-l,h=u;u=!1,(f===P||!h)&&!S&&C(R<0?ce:le)&&(v+=ne),I=Se(R)>o,v+=Te}else g=!0;l=A(a),v+=ee;break}case G:{C(P)&&(v=ne),S=g=!1;break}case fe:{g=!1,S=!0;break}}if(v){const R=()=>{p.forEach(([h,E])=>{v&h&&E()})};I?e(R):R()}}}},de=typeof window<"u",Ce=k(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),q=k(()=>de?j(document.body).direction==="rtl":!1),ae=de?T.useLayoutEffect:T.useEffect,W="current",De={},_e=(e,t)=>{if(Ie(e))for(const n of e)_e(n,t);else!K(e)||typeof e=="boolean"||t.push(e)},ke=e=>{const t=[];return _e(e,t),t},Pe=(e,t,n)=>z(e-(n===le?1:z(1,t)),0),Ue=(e,t,n,s)=>N(e+(n===ce?1:z(1,t)),s-1),xe=e=>{const t=T.useRef(e);return ae(()=>{t[W]=e},[e]),t},We=(e,t,n,s)=>{const[r,c]=T.useState(t),i=xe(t);if(ae(()=>e._subscribe(n,()=>{c(()=>i[W]())}),[]),s){const o=t();r!==o&&c(o)}return r},me=(e,t,n)=>Oe(s=>{if(e._getScrollDirection()!==P&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&n()}},50),pe=(e,t,n,s)=>Ce(e)||s?-n:t._getScrollOffsetMax()-n,Ke=(e,t)=>{let n,s;const r=t?"scrollLeft":"scrollTop",c=(o,l)=>t&&q()?pe(n,e,o,l):o,i=async o=>{if(!n)return;const l=()=>M(o(),0,e._getScrollOffsetMax());for(;;){const _=l();if(e._update(ue,_),!e._hasUnmeasuredItemsInTargetViewport(_))break;s&&s[1]();const m=e._subscribe(B,()=>{s&&s[0]()});try{await new Promise((f,g)=>{let S=!1;const u=()=>{S||(S=!0,f(),s=void 0)};s=[u,g],re(u,250)})}catch{return}finally{m()}}n[r]=c(l()),e._update(fe)};return{_initRoot(o){n=o;const l=()=>{e._update(U,c(o[r]))},_=oe(()=>{l(),e._update(G)},150),m=()=>{l(),_()},f=me(e,t,_);return o.addEventListener("scroll",m),o.addEventListener("wheel",f,{passive:!0}),()=>{o.removeEventListener("scroll",m),o.removeEventListener("wheel",f),_._cancel()}},_scrollTo(o){i(()=>o)},_scrollBy(o){o+=e._getScrollOffset(),i(()=>o)},_scrollToIndex(o,l){o=M(o,0,e._getItemsLength()-1),i(l==="end"?()=>e._getItemOffset(o)+e._getItemSize(o)-e._getViewportSize():()=>e._getItemOffset(o))},_fixScrollJump:o=>{n&&(n[r]+=c(o,!0))}}},Je=(e,t)=>{let n;const s=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop",c=(i,o)=>t&&q()?pe(n,e,i,o):i;return{_initRoot(i){n=i;let o=!1;const l=(u,w)=>{const p=w+(t&&q()?window.innerWidth-u[r]-u.offsetWidth:u[r]),b=u.offsetParent;return u===document.body||!b?p:l(b,p)},_=()=>{o&&e._update(U,c(window[s])-l(i,0))},m=oe(()=>{_(),e._update(G)},150),f=()=>{_(),m()},g=me(e,t,m),S=new IntersectionObserver(([u])=>{o=u.isIntersecting});return S.observe(i),window.addEventListener("scroll",f),window.addEventListener("wheel",g,{passive:!0}),()=>{S.disconnect(),window.removeEventListener("scroll",f),window.removeEventListener("wheel",g),m._cancel()}},_fixScrollJump:i=>{window.scrollBy(t?c(i,!0):0,t?0:i)}}},Be=e=>{const t=T.useRef();return t[W]||(t[W]=e())},ge={box:"border-box"},qe=(e,t)=>{let n;const s=t?"width":"height",r=new WeakMap,c=k(()=>new ResizeObserver(i=>{const o=[];for(const{target:l,contentRect:_}of i)if(l.offsetParent)if(l===n)e._update(D,_[s]+_[t?"left":"top"]+J(j(n)[t?"paddingRight":"paddingBottom"]));else{const m=r.get(l);K(m)&&o.push([m,_[s]])}o.length&&e._update(V,o)}));return{_observeRoot(i){n=i;const o=c();return o.observe(i,ge),()=>{o.disconnect()}},_observeItem(i,o){const l=c();return r.set(i,o),l.observe(i),()=>{r.delete(i),l.unobserve(i)}}}},je=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",r=new WeakMap,c=k(()=>new ResizeObserver(i=>{const o=[];for(const{target:l,contentRect:_}of i){if(!l.offsetParent)continue;const m=r.get(l);K(m)&&o.push([m,_[n]])}o.length&&e._update(V,o)}));return{_observeRoot(){const i=()=>{e._update(D,window[s])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),c().disconnect()}},_observeItem(i,o){const l=c();return r.set(i,o),l.observe(i),()=>{r.delete(i),l.unobserve(i)}}}},Fe=(e,t)=>{let n;const s="height",r="width",c=new WeakMap,i=new Set,o=new Set,l=new Map,_=(f,g)=>`${f}-${g}`,m=k(()=>new ResizeObserver(f=>{const g=new Set,S=new Set;for(const{target:u,contentRect:w}of f)if(u.offsetParent)if(u===n){const p=j(n);e._update(D,w[s]+w.top+J(p.paddingBottom)),t._update(D,w[r]+w.left+J(p.paddingRight))}else{const p=c.get(u);if(p){const[b,O]=p,A=_(b,O),C=l.get(A),d=[w[s],w[r]];let a,I;C?(C[0]!==d[0]&&(a=!0),C[1]!==d[1]&&(I=!0)):a=I=!0,a&&g.add(b),I&&S.add(O),(a||I)&&l.set(A,d)}}if(g.size){const u=[];g.forEach(w=>{let p=0;o.forEach(b=>{const O=l.get(_(w,b));O&&(p=z(p,O[0]))}),p&&u.push([w,p])}),e._update(V,u)}if(S.size){const u=[];S.forEach(w=>{let p=0;i.forEach(b=>{const O=l.get(_(b,w));O&&(p=z(p,O[1]))}),p&&u.push([w,p])}),t._update(V,u)}}));return{_observeRoot(f){n=f;const g=m();return g.observe(f,ge),()=>{g.disconnect()}},_observeItem(f,g,S){const u=m();return c.set(f,[g,S]),i.add(g),o.add(S),u.observe(f),()=>{c.delete(f),u.unobserve(f)}}}},se=T.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:r},c)=>X("div",{ref:c,...t,children:X("div",{style:T.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:r?"none":"auto"}),[n,s,r]),children:e})}));try{se.displayName="Viewport",se.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{ye as A,P as S,ee as U,se as V,Be as a,We as b,ae as c,De as d,K as e,ke as f,Ve as g,je as h,Je as i,B as j,ne as k,te as l,Pe as m,Ue as n,q as o,Fe as p,Ke as q,W as r,Te as s,qe as t,xe as u,Me as v};
//# sourceMappingURL=Viewport-2e989bcd.js.map
