import{j as L}from"./index-DvWd75dA.js";import{r as l,a as G}from"./entry-preview-8m_gBI-P.js";import{u as J,A as K,a as M,b as O,r as t,U as F,c as Q,d as W,m as X,g as Y,e as Z,f as $,S as ee,h as se,i as te,j as re}from"./useRerender-CUup1IBo.js";import{u as oe,a as V,L as le}from"./useChildren-BbHk2Kcs.js";const ne=l.forwardRef(({children:y,count:A,overscan:C=4,itemSize:m,shift:D,horizontal:j,cache:k,startMargin:H,ssrCount:S,as:c="div",item:N="div",scrollRef:p,onScroll:w,onScrollEnd:U,onRangeChange:g},q)=>{c=c;const[P,n]=oe(y,A),b=l.useRef(null),E=l.useRef(!!S),v=V(w),h=V(U),[e,u,o,f]=J(()=>{const s=!!j,r=se(n,m,S,k,!m,H);return[r,te(r,s),re(r,s),s]});n!==e._getItemsLength()&&e._update(K,[n,D]);const z=M(e),[d,_]=e._getRange(),I=e._getScrollDirection(),B=e._getJumpCount(),R=e._getTotalSize(),T=[];O(()=>{E[t]=!1;const s=e._subscribe(F,i=>{i?G.flushSync(z):z()}),r=e._subscribe(Q,()=>{v[t]&&v[t](e._getScrollOffset())}),a=e._subscribe(W,()=>{h[t]&&h[t]()}),x=i=>{u._observeRoot(i),o._observe(i)};return p?X(()=>x(p[t])):x(b[t].parentElement),()=>{s(),r(),a(),u._dispose(),o._dispose()}},[]),O(()=>{o._fixScrollJump()},[B]),l.useEffect(()=>{g&&g(d,_)},[d,_]),l.useImperativeHandle(q,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return Y(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let[s,r]=Z(d,_,C,I,n);s<=r;s++){const a=P(s);T.push(L.jsx(le,{_resizer:u._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_element:N,_children:a,_isHorizontal:f,_isSSR:E[t]},$(a,s)))}return L.jsx(c,{ref:b,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:f?R:"100%",height:f?"100%":R,pointerEvents:I!==ee?"none":"auto"},children:T})});ne.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ne as V};
