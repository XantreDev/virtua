import{r as k}from"./index-yp3VsGQP.js";import{a as ne}from"./jsx-runtime-sgeEVxPu.js";const x=Math.min,I=Math.max,se=Math.abs,re=Date.now,Je=Object.values,ze=Array.isArray,G=setTimeout,P=(e,t,n)=>x(n,I(t,e)),F=e=>e!=null,Ee=e=>{const t=[...e].sort((s,r)=>s-r),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},ae=(e,t)=>{let n;const s=()=>{F(n)&&clearTimeout(n)},r=()=>{s(),n=G(()=>{n=null,e()},t)};return r._cancel=s,r},Re=(e,t)=>{let n=re()-t;return(...s)=>{const r=re();n+t<r&&(n=r,e(...s))}},M=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},Q=e=>getComputedStyle(e),Y=e=>e?parseFloat(e):0,y=-1,V=(e,t)=>{const n=e._sizes[t];return n===y?e._defaultItemSize:n},ye=(e,t,n)=>{const s=e._sizes[t]===y;return e._sizes[t]=n,e._computedOffsetIndex=x(t,e._computedOffsetIndex),s},H=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=V(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Le=e=>e._length?H(e,e._length-1)+V(e,e._length-1):0,oe=(e,t,n)=>{let s=H(e,n);for(;n>=0&&n<e._length;)if(s<=t){const r=V(e,n);if(s+r>t)break;s+=r,n++}else s-=V(e,--n);return P(n,0,e._length-1)},ie=(e,t,n,s)=>{const r=oe(e,t,x(n,e._length-1));return[r,oe(e,t+s,r)]},Te=e=>{const t=e._sizes.filter(s=>s!==y),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ee(t)},de=(e,t,n)=>{const s=n?"unshift":"push";for(let r=e._length;r<t;r++)e._sizes[s](y),e._offsets.push(r===0?0:y);e._length=t},Ce=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return de(n,e),n},le=(e,t,n)=>{const s=t-e._length,r=s<0;let a;return r?(a=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((i,f)=>i+(f===y?e._defaultItemSize:f),0),e._offsets.splice(s)):(a=e._defaultItemSize*s,de(e,e._length+s,n)),e._computedOffsetIndex=n?0:P(t-1,0,e._computedOffsetIndex),e._length=t,[a,r]},_e=typeof window<"u",me=()=>document.documentElement,Ae=M(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),Z=M(()=>_e?Q(me()).direction==="rtl":!1),pe=M(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),xe=M(()=>"scrollBehavior"in me().style),De=(e,t,n)=>I(e-(n===ge?1:I(1,t)),0),Pe=(e,t,n,s)=>x(e+(n===Se?1:I(1,t)),s-1),X=(e,t,n)=>t.reduce((s,[r,a])=>{const i=a-V(e,r);return(!n||i>0)&&(s+=i),s},0),Me=1.5,q=0,ge=1,Se=2,K=1,U=2,Ne=3,ee=4,te=5,we=6,he=7,B=1,$=2,ke=4,Ke=(e,t=40,n=0,s=Ce(e,t),r)=>{let a=t*I(n-1,0),i=0,f=0,c=0,o=0,u=0,l=0,d=0,_=q,m=!1,g=!1,p=null,h=[0,n];const b=new Set,L=()=>Le(s),T=()=>a-i-f,E=()=>L()-T(),C=v=>{pe()&&_!==q?l+=v:(u+=v,o++)},A=v=>{const w=_;return _=v,_!==w};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return p?[x(h[0],p[0]),I(h[1],p[1])]:d?h:h=ie(s,c+l+u,h[0],a)},_isUnmeasuredItem(v){return s._sizes[v]===y},_hasUnmeasuredItemsInSmoothScrollRange(){return p?s._sizes.slice(I(0,p[0]-1),x(s._length-1,p[1]+1)+1).includes(y):!1},_getItemOffset(v){return H(s,v)-l},_getItemSize(v){return V(s,v)},_getItemsLength(){return s._length},_getScrollOffset(){return c},_getMaxScrollOffset:E,_getScrollDirection(){return _},_getViewportSize(){return a},_getStartSpacerSize(){return i},_getScrollSize(){return I(L(),T())},_getTotalSize:L,_getJumpCount(){return o},_flushJump(){return T()>L()?u=0:(d=u,u=0,d)},_subscribe(v,w){const W=[v,w];return b.add(W),()=>{b.delete(W)}},_update(v,w){let W,j,R=0;switch(v){case K:{const S=w.filter(([N,D])=>s._sizes[N]!==D),z=m;if(m=!1,!S.length)break;let O=0;if(c!==0)if(c>E()-Me)O=X(s,S,!0);else if(z)O=X(s,S);else{const[N]=h;O=X(s,S.filter(([D])=>D<N))}O&&C(O);let J=!1;S.forEach(([N,D])=>{ye(s,N,D)&&(J=!0)}),r&&J&&!c&&Te(s),R=$,j=!0;break}case U:{const S=w[0]+w[1]+w[2];a!==S&&(a=S,i=w[1],f=w[2],R=$);break}case Ne:{if(w[1]){const S=E()-c,[z,O]=le(s,w[0],!0);C(O?-x(z,S):z),m=!O,R=B}else le(s,w[0]);break}case ee:{const S=P(w,0,E()),z=d;if(d=0,S===c)break;const O=S-c,J=se(O);!(z&&J<se(z)+1)&&!g&&A(O<0?Se:ge),j=J>a,c=S,R=B+ke;break}case te:{A(q)&&(W=!0,R=B),g=!1,p=null;break}case we:{g=!0;break}case he:{p=ie(s,w,h[0],a),R=B;break}}R&&(W&&l&&(u+=l,l=0,o++),b.forEach(([S,z])=>{R&S&&z(j)}))}}},Ue=_e?k.useLayoutEffect:k.useEffect,ve=(e,t,n)=>Re(s=>{if(e._getScrollDirection()!==q&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getMaxScrollOffset()&&n()}},50),be=(e,t,n,s)=>Ae(e)||s?-n:t._getMaxScrollOffset()-n,Be=(e,t)=>{let n,s,r=!1;const a=t?"scrollLeft":"scrollTop",i=t?"overflowX":"overflowY",f=(o,u)=>t&&Z()?be(n,e,o,u):o,c=async(o,u)=>{if(!n)return;s&&s();const l=()=>P(o(),0,e._getMaxScrollOffset()),d=()=>{let _;return[new Promise((m,g)=>{_=m,G(s=g,150)}),e._subscribe($,()=>{_&&_()})]};if(u&&xe()){for(;e._update(he,l()),!!e._hasUnmeasuredItemsInSmoothScrollRange();){const[_,m]=d();try{await _}catch{return}finally{m()}}n.scrollTo({[t?"left":"top"]:f(l()),behavior:"smooth"})}else for(;;){const[_,m]=d();try{n[a]=f(l()),e._update(we),await _}catch{return}finally{m()}}};return{_observe(o){n=o;let u=!1,l=!1;const d=ae(()=>{if(u){d();return}l=!1,e._update(te)},150),_=()=>{l&&(r=!0),e._update(ee,f(o[a])),d()},m=ve(e,t,d),g=()=>{u=!0,l=r=!1},p=()=>{u=!1,pe()&&(l=!0)};return o.addEventListener("scroll",_),o.addEventListener("wheel",m,{passive:!0}),o.addEventListener("touchstart",g,{passive:!0}),o.addEventListener("touchend",p,{passive:!0}),()=>{o.removeEventListener("scroll",_),o.removeEventListener("wheel",m),o.removeEventListener("touchstart",g),o.removeEventListener("touchend",p),d._cancel()}},_scrollTo(o){c(()=>o)},_scrollBy(o){o+=e._getScrollOffset(),c(()=>o)},_scrollToIndex(o,{align:u,smooth:l}={}){if(o=P(o,0,e._getItemsLength()-1),u==="nearest"){const d=e._getItemOffset(o),_=e._getScrollOffset();if(d<_)u="start";else if(d+e._getItemSize(o)>_+e._getViewportSize())u="end";else return}c(()=>e._getStartSpacerSize()+(u==="end"?e._getItemOffset(o)+e._getItemSize(o)-e._getViewportSize():u==="center"?e._getItemOffset(o)+(e._getItemSize(o)-e._getViewportSize())/2:e._getItemOffset(o)),l)},_fixScrollJump:o=>{if(n){if(r){r=!1;const u=n.style,l=u[i];u[i]="hidden",G(()=>{u[i]=l})}n[a]+=f(o,!0)}}}},qe=(e,t)=>{let n;const s=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop",a=(i,f)=>t&&Z()?be(n,e,i,f):i;return{_observe(i){n=i;const f=(l,d)=>{const _=d+(t&&Z()?window.innerWidth-l[r]-l.offsetWidth:l[r]),m=l.offsetParent;return l===document.body||!m?_:f(m,_)},c=ae(()=>{e._update(te)},150),o=()=>{e._update(ee,a(window[s])-f(i,0)),c()},u=ve(e,t,c);return window.addEventListener("scroll",o),window.addEventListener("wheel",u,{passive:!0}),()=>{window.removeEventListener("scroll",o),window.removeEventListener("wheel",u),c._cancel()}},_fixScrollJump:i=>{window.scrollBy(t?a(i,!0):0,t?0:i)}}},ue="current",Fe={},Oe=(e,t)=>{if(ze(e))for(const n of e)Oe(n,t);else!F(e)||typeof e=="boolean"||t.push(e)},je=e=>{const t=[];return Oe(e,t),t},Xe=e=>{const t=k.useRef();return t[ue]||(t[ue]=e())},Ie={box:"border-box"},Ge=(e,t)=>{let n;const s=t?"width":"height",r=new WeakMap,a=M(()=>new ResizeObserver(i=>{const f=[];for(const{target:c,contentRect:o}of i)if(c.offsetParent)if(c===n)e._update(U,[o[s],o[t?"left":"top"],Y(Q(n)[t?"paddingRight":"paddingBottom"])]);else{const u=r.get(c);F(u)&&f.push([u,o[s]])}f.length&&e._update(K,f)}));return{_observeRoot(i){n=i;const f=a();return f.observe(i,Ie),()=>{f.disconnect()}},_observeItem(i,f){const c=a();return r.set(i,f),c.observe(i),()=>{r.delete(i),c.unobserve(i)}}}},Ye=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",r=new WeakMap,a=M(()=>new ResizeObserver(i=>{const f=[];for(const{target:c,contentRect:o}of i){if(!c.offsetParent)continue;const u=r.get(c);F(u)&&f.push([u,o[n]])}f.length&&e._update(K,f)}));return{_observeRoot(){const i=()=>{e._update(U,[window[s],0,0])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),a().disconnect()}},_observeItem(i,f){const c=a();return r.set(i,f),c.observe(i),()=>{r.delete(i),c.unobserve(i)}}}},Ze=(e,t)=>{let n;const s="height",r="width",a=new WeakMap,i=new Set,f=new Set,c=new Map,o=(l,d)=>`${l}-${d}`,u=M(()=>new ResizeObserver(l=>{const d=new Set,_=new Set;for(const{target:m,contentRect:g}of l)if(m.offsetParent)if(m===n){const p=Q(n);e._update(U,[g[s],g.top,Y(p.paddingBottom)]),t._update(U,[g[r],g.left,Y(p.paddingRight)])}else{const p=a.get(m);if(p){const[h,b]=p,L=o(h,b),T=c.get(L),E=[g[s],g[r]];let C,A;T?(T[0]!==E[0]&&(C=!0),T[1]!==E[1]&&(A=!0)):C=A=!0,C&&d.add(h),A&&_.add(b),(C||A)&&c.set(L,E)}}if(d.size){const m=[];d.forEach(g=>{let p=0;f.forEach(h=>{const b=c.get(o(g,h));b&&(p=I(p,b[0]))}),p&&m.push([g,p])}),e._update(K,m)}if(_.size){const m=[];_.forEach(g=>{let p=0;i.forEach(h=>{const b=c.get(o(h,g));b&&(p=I(p,b[1]))}),p&&m.push([g,p])}),t._update(K,m)}}));return{_observeRoot(l){n=l;const d=u();return d.observe(l,Ie),()=>{d.disconnect()}},_observeItem(l,d,_){const m=u();return a.set(l,[d,_]),i.add(d),f.add(_),m.observe(l),()=>{a.delete(l),m.unobserve(l)}}}},ce=k.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:r},a)=>ne("div",{ref:a,...t,children:ne("div",{style:k.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:r?"none":"auto"}),[n,s,r]),children:e})}));try{ce.displayName="Viewport",ce.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const fe=()=>[],$e=()=>k.useReducer(fe,void 0,fe)[1];export{Ne as A,q as S,B as U,ce as V,Xe as a,$e as b,$ as c,De as d,Pe as e,Fe as f,Ke as g,Ze as h,Z as i,Be as j,ke as k,F as l,I as m,Ge as n,Ye as o,qe as p,je as q,ue as r,Ue as u,Je as v};
