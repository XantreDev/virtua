import{r as O}from"./index-5284b0bf.js";import{r as B}from"./index-480187bb.js";import{j as J}from"./jsx-runtime-f8a6c6ea.js";const W=Math.min,R=Math.max,H=Math.abs,q=Date.now,E=e=>e!=null,F=(e,t)=>Array.from({length:e},(s,r)=>t(r)),ee=(e,t)=>{let s;const r=()=>{E(s)&&clearTimeout(s)},i=()=>{r(),s=setTimeout(()=>{s=null,e()},t)};return i._cancel=r,i},te=(e,t)=>{let s=q()-t;return(...r)=>{const i=q();s+t<i&&(s=i,e(...r))}},K=e=>{let t,s;return(...r)=>(t||(t=!0,s=e(...r)),s)},D=-1,y=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},se=(e,t,s)=>{e._sizes[t]=s,e._measuredOffsetIndex=W(t,e._measuredOffsetIndex)},Q=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+y(e,t):e._offsets[t];let r=e._measuredOffsetIndex,i=e._offsets[r];for(;r<=t&&(e._offsets[r]=i,!(r===t&&!s));)i+=y(e,r),r++;return e._measuredOffsetIndex=t,i},re=e=>Q(e,e._length-1,!0),P=(e,t)=>Q(e,t),X=(e,t,s)=>{let r=0;if(s>=0)for(;t<e._length-1;){const i=y(e,t++);if((r+=i)>=s){r-i/2>=s&&t--;break}}else for(;t>0;){const i=y(e,--t);if((r-=i)<=s){r+i/2<s&&t++;break}}return W(R(t,0),e._length-1)},j=(e,t,s,r)=>X(e,s,t-r),Z=X,ne=(e,t,s)=>{for(let r=t;r<=s;r++)if(e._sizes[r]===D)return!0;return!1},$=(e,t,s)=>({_defaultItemSize:t,_length:e,_measuredOffsetIndex:s?W(s._measuredOffsetIndex,e-1):0,_sizes:F(e,r=>{const i=s&&s._sizes[r];return E(i)?i:D}),_offsets:F(e,r=>{if(r===0)return 0;const i=s&&s._offsets[r];return E(i)?i:D})}),b=0,Y=1,U=2,V=3,L=1,A=2,x=3,k=4,ae=(e,t,s=0,r,i,z)=>{let m=t*R(s-1,0),a=0,S=[],f=$(e,t),h=b,o=[0,s],d;const u=new Set,c=()=>re(f);return{_getRange(){const[n,l]=o,_=P(f,n),p=j(f,a,n,_),g=Z(f,p,m);return n===p&&l===g?o:o=[p,g]},_isUnmeasuredItem(n){return f._sizes[n]===D},_hasUnmeasuredItemsInRange(n){return ne(f,n,Z(f,n,m))},_getItemOffset(n){const l=P(f,n);return r?l+R(0,m-c()):l},_getItemSize(n){return y(f,n)},_getScrollOffset(){return a},_getViewportSize(){return m},_getScrollSize(){return c()},_getScrollableDomSize(){return R(c(),m)},_getJump(){return S},_getItemIndexForScrollTo(n){return j(f,n,0,0)},_waitForScrollDestinationItemsMeasured(){return d&&d[1](),new Promise((n,l)=>{d=[()=>{Promise.resolve().then(()=>{n(),d=void 0})},l]})},_subscribe(n){return u.add(n),()=>{u.delete(n)}},_update(n,l){let _;(()=>{switch(n){case L:{const g=l.filter(([w,v])=>f._sizes[w]!==v);if(!g.length)return!1;const I=[];return g.forEach(([w,v])=>{I.push([v-y(f,w),w]),se(f,w,v)}),S=I,_=!0,!0}case A:return m===l?!1:(m=l,!0);case x:case k:{const g=a,I=(a=l)!==g;return I&&n===x&&(_=H(g-l)>m),I}}})()&&(u.forEach(g=>{g(_)}),n===x?z(a):d&&n===L&&d[0]())},_getScrollDirection(){return h},_setScrollDirection(n){const l=h;h=n,h===b?i(!1):l===b&&(h===Y||h===U)&&i(!0)},_updateCacheLength(n){f._length!==n&&(f=$(n,t,f))}}},oe=typeof window<"u"?O.useLayoutEffect:O.useEffect,N="current",de=e=>!E(e)||typeof e=="boolean",ie=e=>{const t=O.useRef(e);return oe(()=>{t[N]=e},[e]),t},_e=(e,t,s)=>{const[r,i]=O.useState(t),z=ie(t);if(O.useLayoutEffect(()=>{const m=()=>{i(()=>z[N]())};return e._subscribe(a=>{a?B.flushSync(m):m()})},[]),s){const m=t();r!==m&&i(m)}return r},le=K(e=>{const t="scrollLeft",s=e[t];e[t]=1;const r=e[t]<1;return e[t]=s,r}),me=(e,t,s,r)=>{let i;const z=t?"scrollLeft":"scrollTop",m=()=>i?t?i.scrollWidth:i.scrollHeight:0,a=(o,d)=>le(i)||d?-o:e._getScrollSize()-e._getViewportSize()-o,S=(o,d)=>{i&&(t&&s&&(o=a(o,d)),d?i[z]+=o:(i[z]=o,e._setScrollDirection(V)))},f=async(o,d)=>{const u=()=>{let c=d();const n=m(),l=e._getViewportSize();return n-(c+l)<=0&&(c=n-l),c};if(e._hasUnmeasuredItemsInRange(o)){do{e._update(k,u());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(o));S(u())}else{const c=u();S(c),e._update(k,c)}},h=o=>o.reduce((d,[u])=>d+u,0);return{_initRoot(o){i=o;const d=()=>{let l=o[z];t&&s&&(l=a(l));const _=e._getScrollOffset();if(_===l)return;const p=e._getScrollDirection(),g=r();(p===b||!g)&&p!==V&&e._setScrollDirection(_>l?U:Y),e._update(x,l)},u=ee(()=>{d(),e._setScrollDirection(b)},150),c=()=>{d(),u()},n=te(l=>{if(e._getScrollDirection()!==b&&!l.ctrlKey&&(t?l.deltaX:l.deltaY)){const _=e._getScrollOffset();_>0&&_<e._getScrollSize()-e._getViewportSize()&&u()}},50);return o.addEventListener("scroll",c),o.addEventListener("wheel",n,{passive:!0}),()=>{o.removeEventListener("scroll",c),o.removeEventListener("wheel",n),u._cancel()}},_getActualScrollSize:m,_scrollTo(o){o=R(o,0),f(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o,d){o=R(W(o,d-1),0),f(o,()=>e._getItemOffset(o))},_fixScrollJump:(o,d)=>{const u=e._getScrollDirection();if(u===U){const c=h(o);c&&S(c,!0)}else if(u===V){const c=e._getScrollOffset();if(c!==0){const n=h(o);if(e._getScrollSize()-(c+e._getViewportSize()+n)<=0)n&&S(c+n);else{const l=o.reduce((_,[p,g])=>(g<d&&(_+=p),_),0);l&&S(l,!0)}}}}}},pe=e=>{const t=O.useRef();return t[N]||(t[N]=e())},ge=(e,t)=>{let s=!1,r;const i=t?"width":"height",z=new WeakMap,m=K(()=>new ResizeObserver(a=>{const S=[];for(const{target:f,contentRect:h}of a)if(f===r)e._update(A,h[i]);else{const o=z.get(f);E(o)&&S.push([o,h[i]])}S.length&&(e._update(L,S),s=!0)}));return{_observeRoot(a){r=a;const S=m();return S.observe(a),()=>{S.disconnect()}},_observeItem(a,S){const f=m();return z.set(a,S),f.observe(a),()=>{z.delete(a),f.unobserve(a)}},_isJustResized(){const a=s;return s=!1,a}}},Se=(e,t)=>{let s=!1,r=!1,i;const z="height",m="width",a=new WeakMap,S=new Set,f=new Set,h=new Map,o=(u,c)=>`${u}-${c}`,d=K(()=>new ResizeObserver(u=>{const c=new Set,n=new Set;for(const{target:l,contentRect:_}of u)if(l===i)e._update(A,_[z]),t._update(A,_[m]);else{const p=a.get(l);if(p){const[g,I]=p,w=o(g,I),v=h.get(w),M=[_[z],_[m]];let T,C;v?(v[0]!==M[0]&&(T=!0),v[1]!==M[1]&&(C=!0)):T=C=!0,T&&c.add(g),C&&n.add(I),(T||C)&&h.set(w,M)}}if(c.size){const l=[];c.forEach(_=>{let p=0;f.forEach(g=>{const I=h.get(o(_,g));I&&(p=R(p,I[0]))}),p&&l.push([_,p])}),e._update(L,l),s=!0}if(n.size){const l=[];n.forEach(_=>{let p=0;S.forEach(g=>{const I=h.get(o(g,_));I&&(p=R(p,I[1]))}),p&&l.push([_,p])}),t._update(L,l),r=!0}}));return{_observeRoot(u){i=u;const c=d();return c.observe(u),()=>{c.disconnect()}},_observeItem(u,c,n){const l=d();return a.set(u,[c,n]),S.add(c),f.add(n),l.observe(u),()=>{a.delete(u),l.unobserve(u)}},_isJustResized(u){const c=u?r:s;return u?r=!1:s=!1,c}}},G=O.forwardRef(({children:e,width:t,height:s,scrolling:r,attrs:i},z)=>J("div",{ref:z,...i,children:J("div",{style:O.useMemo(()=>({position:"relative",visibility:"hidden",width:t??"100%",height:s??"100%",pointerEvents:r?"none":"auto"}),[t,s,r]),children:e})}));try{G.displayName="DefaultWindow",G.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}}}}}catch{}export{G as D,oe as a,ie as b,pe as c,ae as d,E as e,me as f,W as g,ge as h,de as i,Se as j,R as m,N as r,_e as u};
//# sourceMappingURL=DefaultWindow-83995a21.js.map
