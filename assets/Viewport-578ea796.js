import{r as L}from"./index-c6dae603.js";import{j as Z}from"./jsx-runtime-c3d7f245.js";const x=Math.min,z=Math.max,pe=Math.abs,Q=Date.now,Ne=Object.values,ge=Array.isArray,ne=setTimeout,V=(e,t,s)=>x(s,z(t,e)),K=e=>e!=null,Se=e=>{const t=[...e].sort((r,n)=>r-n),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},re=(e,t)=>{let s;const r=()=>{K(s)&&clearTimeout(s)},n=()=>{r(),s=ne(()=>{s=null,e()},t)};return n._cancel=r,n},we=(e,t)=>{let s=Q()-t;return(...r)=>{const n=Q();s+t<n&&(s=n,e(...r))}},J=e=>{let t,s;return(...r)=>(t||(t=!0,s=e(...r)),s)},oe=e=>getComputedStyle(e),B=e=>e?parseFloat(e):0,y=-1,N=(e,t)=>{const s=e._sizes[t];return s===y?e._defaultItemSize:s},Ie=(e,t,s)=>{const r=e._sizes[t]===y;return e._sizes[t]=s,e._measuredOffsetIndex=x(t,e._measuredOffsetIndex),r},G=(e,t)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return e._offsets[t];let s=e._measuredOffsetIndex,r=e._offsets[s];for(;s<t;)r+=N(e,s),e._offsets[++s]=r;return e._measuredOffsetIndex=t,r},be=e=>e._length?G(e,e._length-1)+N(e,e._length-1):0,ie=(e,t,s)=>{let r=0;if(s>=0)for(;t<e._length-1;){const n=N(e,t++);if((r+=n)>=s){r-n/2>=s&&t--;break}}else for(;t>0;){const n=N(e,--t);if((r-=n)<=s){r+n/2<s&&t++;break}}return V(t,0,e._length-1)},Oe=(e,t,s)=>ie(e,s,t-G(e,s)),Y=(e,t,s,r)=>{const n=Oe(e,t,x(s,e._length-1));return[n,ie(e,n,r)]},ve=(e,t,s)=>e._sizes.slice(t,s+1).includes(y),Re=e=>{const t=e._sizes.filter(r=>r!==y),s=t[0];e._defaultItemSize=t.every(r=>r===s)?s:Se(t)},le=(e,t,s)=>{const r=s?"unshift":"push";for(let n=e._length;n<t;n++)e._sizes[r](y),e._offsets.push(n===0?0:y);e._length=t},he=(e,t)=>{const s={_defaultItemSize:t,_length:0,_measuredOffsetIndex:0,_sizes:[],_offsets:[]};return le(s,e),s},$=(e,t,s)=>{const r=t-e._length,n=r<0;let u;return n?(u=(s?e._sizes.splice(0,-r):e._sizes.splice(r)).reduce((l,i)=>l+(i===y?e._defaultItemSize:i),0),e._offsets.splice(r)):(u=e._defaultItemSize*r,le(e,e._length+r,s)),e._measuredOffsetIndex=s?0:V(t-1,0,e._measuredOffsetIndex),e._length=t,[u,n]},q=(e,t,s)=>t.reduce((r,[n,u])=>{const l=u-N(e,n);return(!s||l>0)&&(r+=l),r},0),ze=1.5,P=0,ue=1,j=2,k=1,D=2,Ee=3,U=4,fe=5,X=6,ce=7,H=1,F=2,ee=4,te=8,ye=16,Ae=(e,t,s=40,r=0,n=he(t,s),u,l)=>{let i=s*z(r-1,0),o=0,c=0,p=0,a=P,f=!1,I=!1,g=!1,m=[0,r];const S=new Set,h=()=>be(n),b=()=>h()-i,A=d=>V(d,0,b()),T=d=>{const _=a;return a=d,a!==_};return{_getCache(){return JSON.parse(JSON.stringify(n))},_getRange(){const[d,_]=m,[w,O]=Y(n,o,d,i);return d===w&&_===O?m:m=[w,O]},_isUnmeasuredItem(d){return n._sizes[d]===y},_hasUnmeasuredItemsInTargetViewport(d){const[_,w]=Y(n,d,m[0],i);return ve(n,z(0,_-1),x(n._length-1,w+1))},_getItemOffset(d){const _=G(n,d);return u?_+z(0,i-h()):_},_getItemSize(d){return N(n,d)},_getItemsLength(){return n._length},_getScrollOffset(){return o},_getScrollOffsetMax:b,_getScrollDirection(){return a},_getViewportSize(){return i},_getCorrectedScrollSize(){return z(h(),i)},_getJumpCount(){return c},_flushJump(){const d=p;return p=0,d},_subscribe(d,_){const w=[d,_];return S.add(w),()=>{S.delete(w)}},_update(d,_){let w,O=0;switch(d){case k:{const v=_.filter(([E,M])=>n._sizes[E]!==M);if(!v.length)break;let R=0;if(f||I){const[E]=m;o===0||(o>b()-ze?R=q(n,v,!0):R=q(n,v.filter(([M])=>M<E)))}else a===j&&(R=q(n,v));R&&(p=R,c++,O+=ee);let C=!1;v.forEach(([E,M])=>{Ie(n,E,M)&&(C=!0)}),l&&C&&!o&&Re(n),O+=F,g=w=!0;break}case D:{i!==_&&(i=_,O=F);break}case Ee:{if(_[1]){const v=b()-o,[R,C]=$(n,_[0],!0),E=C?-x(R,v):R;p+=E,o=A(o+E),c++,O=H+ee,f=!0}else $(n,_[0]);break}case U:case fe:{if(o===_)break;if(d===U){const v=_-o,R=g;g=!1,(a===P||!R)&&!I&&T(v<0?j:ue)&&(O+=te),w=pe(v)>i,O+=ye,R||(f=!1)}o=A(_),O+=H;break}case X:{T(P)&&(O=te),f=I=!1;break}case ce:{I=!0;break}}if(O){const v=()=>{S.forEach(([R,C])=>{O&R&&C()})};w?e(v):v()}}}},ae=typeof window<"u"?L.useLayoutEffect:L.useEffect,W="current",Me={},de=(e,t)=>{if(ge(e))for(const s of e)de(s,t);else!K(e)||typeof e=="boolean"||t.push(e)},Ve=e=>{const t=[];return de(e,t),t},ke=(e,t,s)=>z(e-(s===ue?1:z(1,t)),0),De=(e,t,s,r)=>x(e+(s===j?1:z(1,t)),r-1),Le=e=>{const t=L.useRef(e);return ae(()=>{t[W]=e},[e]),t},Pe=(e,t,s,r)=>{const[n,u]=L.useState(t),l=Le(t);if(ae(()=>e._subscribe(s,()=>{u(()=>l[W]())}),[]),r){const i=t();n!==i&&u(i)}return n},Te=J(e=>{const t="scrollLeft",s=e[t];e[t]=1;const r=e[t]<1;return e[t]=s,r}),_e=(e,t,s)=>we(r=>{if(e._getScrollDirection()!==P&&!r.ctrlKey&&(t?r.deltaX:r.deltaY)){const n=e._getScrollOffset();n>0&&n<e._getScrollOffsetMax()&&s()}},50),Ue=(e,t,s)=>{let r,n;const u=t?"scrollLeft":"scrollTop",l=(o,c)=>t&&s?Te(r)||c?-o:e._getScrollOffsetMax()-o:o,i=async o=>{if(!r)return;const c=()=>V(o(),0,e._getScrollOffsetMax());for(;;){const p=c();if(e._update(fe,p),!e._hasUnmeasuredItemsInTargetViewport(p))break;n&&n[1]();const a=e._subscribe(F,()=>{n&&n[0]()});try{await new Promise((f,I)=>{let g=!1;const m=()=>{g||(g=!0,f(),n=void 0)};n=[m,I],ne(m,250)})}catch{return}finally{a()}}r[u]=l(c()),e._update(ce)};return{_initRoot(o){r=o;const c=()=>{e._update(U,l(o[u]))},p=re(()=>{c(),e._update(X)},150),a=()=>{c(),p()},f=_e(e,t,p);return o.addEventListener("scroll",a),o.addEventListener("wheel",f,{passive:!0}),()=>{o.removeEventListener("scroll",a),o.removeEventListener("wheel",f),p._cancel()}},_scrollTo(o){i(()=>o)},_scrollBy(o){o+=e._getScrollOffset(),i(()=>o)},_scrollToIndex(o,c){o=V(o,0,e._getItemsLength()-1),i(c==="end"?()=>e._getItemOffset(o)+e._getItemSize(o)-e._getViewportSize():()=>e._getItemOffset(o))},_fixScrollJump:o=>{r&&(r[u]+=l(o,!0))}}},We=(e,t)=>{const s=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop";return{_initRoot(n){let u=!1;const l=(f,I)=>{const g=I+f[r],m=f.offsetParent;return f===document.body||!m?g:l(m,g)},i=()=>{u&&e._update(U,window[s]-l(n,0))},o=re(()=>{i(),e._update(X)},150),c=()=>{i(),o()},p=_e(e,t,o),a=new IntersectionObserver(([f])=>{u=f.isIntersecting});return a.observe(n),window.addEventListener("scroll",c),window.addEventListener("wheel",p,{passive:!0}),()=>{a.disconnect(),window.removeEventListener("scroll",c),window.removeEventListener("wheel",p),o._cancel()}},_fixScrollJump:n=>{window.scrollBy(t?n:0,t?0:n)}}},Ke=e=>{const t=L.useRef();return t[W]||(t[W]=e())},me={box:"border-box"},Je=(e,t)=>{let s;const r=t?"width":"height",n=new WeakMap,u=J(()=>new ResizeObserver(l=>{const i=[];for(const{target:o,contentRect:c}of l)if(o.offsetParent)if(o===s)e._update(D,c[r]+c[t?"left":"top"]+B(oe(s)[t?"paddingRight":"paddingBottom"]));else{const p=n.get(o);K(p)&&i.push([p,c[r]])}i.length&&e._update(k,i)}));return{_observeRoot(l){s=l;const i=u();return i.observe(l,me),()=>{i.disconnect()}},_observeItem(l,i){const o=u();return n.set(l,i),o.observe(l),()=>{n.delete(l),o.unobserve(l)}}}},qe=(e,t)=>{const s=t?"width":"height",r=t?"innerWidth":"innerHeight",n=new WeakMap,u=J(()=>new ResizeObserver(l=>{const i=[];for(const{target:o,contentRect:c}of l){if(!o.offsetParent)continue;const p=n.get(o);K(p)&&i.push([p,c[s]])}i.length&&e._update(k,i)}));return{_observeRoot(){const l=()=>{e._update(D,window[r])};return window.addEventListener("resize",l),l(),()=>{window.removeEventListener("resize",l),u().disconnect()}},_observeItem(l,i){const o=u();return n.set(l,i),o.observe(l),()=>{n.delete(l),o.unobserve(l)}}}},Be=(e,t)=>{let s;const r="height",n="width",u=new WeakMap,l=new Set,i=new Set,o=new Map,c=(a,f)=>`${a}-${f}`,p=J(()=>new ResizeObserver(a=>{const f=new Set,I=new Set;for(const{target:g,contentRect:m}of a)if(g.offsetParent)if(g===s){const S=oe(s);e._update(D,m[r]+m.top+B(S.paddingBottom)),t._update(D,m[n]+m.left+B(S.paddingRight))}else{const S=u.get(g);if(S){const[h,b]=S,A=c(h,b),T=o.get(A),d=[m[r],m[n]];let _,w;T?(T[0]!==d[0]&&(_=!0),T[1]!==d[1]&&(w=!0)):_=w=!0,_&&f.add(h),w&&I.add(b),(_||w)&&o.set(A,d)}}if(f.size){const g=[];f.forEach(m=>{let S=0;i.forEach(h=>{const b=o.get(c(m,h));b&&(S=z(S,b[0]))}),S&&g.push([m,S])}),e._update(k,g)}if(I.size){const g=[];I.forEach(m=>{let S=0;l.forEach(h=>{const b=o.get(c(h,m));b&&(S=z(S,b[1]))}),S&&g.push([m,S])}),t._update(k,g)}}));return{_observeRoot(a){s=a;const f=p();return f.observe(a,me),()=>{f.disconnect()}},_observeItem(a,f,I){const g=p();return u.set(a,[f,I]),l.add(f),i.add(I),g.observe(a),()=>{u.delete(a),g.unobserve(a)}}}},se=L.forwardRef(({children:e,attrs:t,width:s,height:r,scrolling:n},u)=>Z("div",{ref:u,...t,children:Z("div",{style:L.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:r??"100%",pointerEvents:n?"none":"auto"}),[s,r,n]),children:e})}));try{se.displayName="Viewport",se.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{Ee as A,P as S,H as U,se as V,Ke as a,Pe as b,ae as c,Me as d,K as e,Ve as f,Ae as g,qe as h,We as i,F as j,te as k,ee as l,ke as m,De as n,Be as o,Ue as p,ye as q,W as r,Je as s,Le as u,Ne as v};
//# sourceMappingURL=Viewport-578ea796.js.map
