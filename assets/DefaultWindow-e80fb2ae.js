import{r as b}from"./index-5284b0bf.js";import{r as re}from"./index-480187bb.js";import{j as P}from"./jsx-runtime-f8a6c6ea.js";const U=Math.min,O=Math.max,se=Math.abs,j=Date.now,C=e=>e!=null,G=(e,t)=>Array.from({length:e},(r,s)=>t(s)),ne=(e,t)=>{let r;const s=()=>{C(r)&&clearTimeout(r)},o=()=>{s(),r=setTimeout(()=>{r=null,e()},t)};return o._cancel=s,o},oe=(e,t)=>{let r=j()-t;return(...s)=>{const o=j();r+t<o&&(r=o,e(...s))}},q=e=>{let t,r;return(...s)=>(t||(t=!0,r=e(...s)),r)},D=-1,L=(e,t)=>{const r=e._sizes[t];return r===D?e._defaultItemSize:r},ie=(e,t,r)=>{e._sizes[t]=r,e._measuredOffsetIndex=U(t,e._measuredOffsetIndex)},ee=(e,t,r)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return r?e._offsets[t]+L(e,t):e._offsets[t];let s=e._measuredOffsetIndex,o=e._offsets[s];for(;s<=t&&(e._offsets[s]=o,!(s===t&&!r));)o+=L(e,s),s++;return e._measuredOffsetIndex=t,o},ue=e=>ee(e,e._length-1,!0),Z=(e,t)=>ee(e,t),te=(e,t,r)=>{let s=0;if(r>=0)for(;t<e._length-1;){const o=L(e,t++);if((s+=o)>=r){s-o/2>=r&&t--;break}}else for(;t>0;){const o=L(e,--t);if((s-=o)<=r){s+o/2<r&&t++;break}}return U(O(t,0),e._length-1)},$=(e,t,r,s)=>te(e,r,t-s),Q=te,le=(e,t,r)=>{for(let s=t;s<=r;s++)if(e._sizes[s]===D)return!0;return!1},X=(e,t,r)=>({_defaultItemSize:t,_length:e,_measuredOffsetIndex:r?U(r._measuredOffsetIndex,e-1):0,_sizes:G(e,s=>{const o=r&&r._sizes[s];return C(o)?o:D}),_offsets:G(e,s=>{if(s===0)return 0;const o=r&&r._offsets[s];return C(o)?o:D})}),Y=e=>e.reduce((t,[r])=>t+r,0),y=0,B=1,J=2,x=3,N=1,M=2,W=3,k=4,K=5,pe=(e,t,r=0,s,o,h)=>{let a=t*O(r-1,0),d=0,g=0,n,i=X(e,t),l=y,c=!1,m=[0,r],f;const p=new Set,S=()=>ue(i),w=()=>{const u=c;return c=!1,u},z=u=>{const _=l;if(l=u,l===y)return!1;if(_===y&&(l===B||l===J))return!0};return{_getRange(){const[u,_]=m,R=Z(i,u),I=$(i,d,u,R),v=Q(i,I,a);return u===I&&_===v?m:m=[I,v]},_isUnmeasuredItem(u){return i._sizes[u]===D},_hasUnmeasuredItemsInRange(u){return le(i,u,Q(i,u,a))},_getItemOffset(u){const _=Z(i,u);return s?_+O(0,a-S()):_},_getItemSize(u){return L(i,u)},_getScrollOffset(){return d},_getViewportSize(){return a},_getScrollSize(){return S()},_getScrollableDomSize(){return O(S(),a)},_getJumpCount(){return g},_flushJump(){const u=n;return n=void 0,u},_getItemIndexForScrollTo(u){return $(i,u,0,0)},_waitForScrollDestinationItemsMeasured(){return f&&f[1](),new Promise((u,_)=>{f=[()=>{Promise.resolve().then(()=>{u(),f=void 0})},_]})},_subscribe(u){return p.add(u),()=>{p.delete(u)}},_update(u,_){let R,I;(()=>{switch(u){case N:{const E=_.filter(([T,A])=>i._sizes[T]!==A);if(!E.length)return!1;const F=[];return E.forEach(([T,A])=>{F.push([A-L(i,T),T]),ie(i,T,A)}),(l===x||l===J)&&(n=[F,l===x],g++),c=R=!0}case M:return a===_?!1:(a=_,!0);case W:case k:{if(d===_)return!1;if(u===W){const E=w();(l===y||!E)&&l!==x&&(I=z(d>_?J:B)),R=se(d-_)>a}return d=_,!0}case K:return I=z(_),!1}})()&&(p.forEach(E=>{E(R)}),u===W?h(d):f&&u===N&&f[0]()),C(I)&&o(I)},_getScrollDirection(){return l},_updateCacheLength(u){i._length!==u&&(i=X(u,t,i))}}},ce=typeof window<"u"?b.useLayoutEffect:b.useEffect,V="current",Se=e=>!C(e)||typeof e=="boolean",fe=e=>{const t=b.useRef(e);return ce(()=>{t[V]=e},[e]),t},ge=(e,t,r)=>{const[s,o]=b.useState(t),h=fe(t);if(b.useLayoutEffect(()=>{const a=()=>{o(()=>h[V]())};return e._subscribe(d=>{d?re.flushSync(a):a()})},[]),r){const a=t();s!==a&&o(a)}return s},ae=q(e=>{const t="scrollLeft",r=e[t];e[t]=1;const s=e[t]<1;return e[t]=r,s}),he=(e,t,r)=>{let s;const o=t?"scrollLeft":"scrollTop",h=()=>s?t?s.scrollWidth:s.scrollHeight:0,a=(n,i)=>ae(s)||i?-n:e._getScrollSize()-e._getViewportSize()-n,d=(n,i)=>{s&&(t&&r&&(n=a(n,i)),i?s[o]+=n:(s[o]=n,e._update(K,x)))},g=async(n,i)=>{const l=()=>{let c=i();const m=h(),f=e._getViewportSize();return m-(c+f)<=0&&(c=m-f),c};if(e._hasUnmeasuredItemsInRange(n)){do{e._update(k,l());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(n));d(l())}else{const c=l();d(c),e._update(k,c)}};return{_initRoot(n){s=n;const i=()=>{let f=n[o];t&&r&&(f=a(f)),e._update(W,f)},l=ne(()=>{i(),e._update(K,y)},150),c=()=>{i(),l()},m=oe(f=>{if(e._getScrollDirection()!==y&&!f.ctrlKey&&(t?f.deltaX:f.deltaY)){const p=e._getScrollOffset();p>0&&p<e._getScrollSize()-e._getViewportSize()&&l()}},50);return n.addEventListener("scroll",c),n.addEventListener("wheel",m,{passive:!0}),()=>{n.removeEventListener("scroll",c),n.removeEventListener("wheel",m),l._cancel()}},_getActualScrollSize:h,_scrollTo(n){n=O(n,0),g(e._getItemIndexForScrollTo(n),()=>n)},_scrollToIndex(n,i){n=O(U(n,i-1),0),g(n,()=>e._getItemOffset(n))},_fixScrollJump:([n,i],l)=>{if(i){const c=e._getScrollOffset();if(c!==0){const m=Y(n);if(e._getScrollSize()-(c+e._getViewportSize()+m)<=0)m&&d(c+m);else{const f=n.reduce((p,[S,w])=>(w<l&&(p+=S),p),0);f&&d(f,!0)}}}else{const c=Y(n);c&&d(c,!0)}}}},Ie=e=>{const t=b.useRef();return t[V]||(t[V]=e())},ze=(e,t)=>{let r;const s=t?"width":"height",o=new WeakMap,h=q(()=>new ResizeObserver(a=>{const d=[];for(const{target:g,contentRect:n}of a)if(g===r)e._update(M,n[s]);else{const i=o.get(g);C(i)&&d.push([i,n[s]])}d.length&&e._update(N,d)}));return{_observeRoot(a){r=a;const d=h();return d.observe(a),()=>{d.disconnect()}},_observeItem(a,d){const g=h();return o.set(a,d),g.observe(a),()=>{o.delete(a),g.unobserve(a)}}}},we=(e,t)=>{let r;const s="height",o="width",h=new WeakMap,a=new Set,d=new Set,g=new Map,n=(l,c)=>`${l}-${c}`,i=q(()=>new ResizeObserver(l=>{const c=new Set,m=new Set;for(const{target:f,contentRect:p}of l)if(f===r)e._update(M,p[s]),t._update(M,p[o]);else{const S=h.get(f);if(S){const[w,z]=S,u=n(w,z),_=g.get(u),R=[p[s],p[o]];let I,v;_?(_[0]!==R[0]&&(I=!0),_[1]!==R[1]&&(v=!0)):I=v=!0,I&&c.add(w),v&&m.add(z),(I||v)&&g.set(u,R)}}if(c.size){const f=[];c.forEach(p=>{let S=0;d.forEach(w=>{const z=g.get(n(p,w));z&&(S=O(S,z[0]))}),S&&f.push([p,S])}),e._update(N,f)}if(m.size){const f=[];m.forEach(p=>{let S=0;a.forEach(w=>{const z=g.get(n(w,p));z&&(S=O(S,z[1]))}),S&&f.push([p,S])}),t._update(N,f)}}));return{_observeRoot(l){r=l;const c=i();return c.observe(l),()=>{c.disconnect()}},_observeItem(l,c,m){const f=i();return h.set(l,[c,m]),a.add(c),d.add(m),f.observe(l),()=>{h.delete(l),f.unobserve(l)}}}},H=b.forwardRef(({children:e,attrs:t,width:r,height:s,scrolling:o},h)=>P("div",{ref:h,...t,children:P("div",{style:b.useMemo(()=>({position:"relative",visibility:"hidden",width:r??"100%",height:s??"100%",pointerEvents:o?"none":"auto"}),[r,s,o]),children:e})}));try{H.displayName="DefaultWindow",H.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{H as D,ce as a,fe as b,Ie as c,pe as d,C as e,ze as f,he as g,U as h,Se as i,we as j,O as m,V as r,ge as u};
//# sourceMappingURL=DefaultWindow-e80fb2ae.js.map
