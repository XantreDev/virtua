import{r as y}from"./index-c6dae603.js";import{j as Z}from"./jsx-runtime-c3d7f245.js";const N=Math.min,z=Math.max,Se=Math.abs,Q=Date.now,Me=Object.values,Ie=Array.isArray,oe=setTimeout,V=(e,t,n)=>N(n,z(t,e)),J=e=>e!=null,be=e=>{const t=[...e].sort((s,r)=>s-r),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},ie=(e,t)=>{let n;const s=()=>{J(n)&&clearTimeout(n)},r=()=>{s(),n=oe(()=>{n=null,e()},t)};return r._cancel=s,r},Oe=(e,t)=>{let n=Q()-t;return(...s)=>{const r=Q();n+t<r&&(n=r,e(...s))}},P=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},F=e=>getComputedStyle(e),B=e=>e?parseFloat(e):0,L=-1,x=(e,t)=>{const n=e._sizes[t];return n===L?e._defaultItemSize:n},ve=(e,t,n)=>{const s=e._sizes[t]===L;return e._sizes[t]=n,e._computedOffsetIndex=N(t,e._computedOffsetIndex),s},G=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=x(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Re=e=>e._length?G(e,e._length-1)+x(e,e._length-1):0,Y=(e,t,n)=>{let s=G(e,n);for(;n>=0&&n<e._length;)if(s<=t){const r=x(e,n);if(s+r>t)break;s+=r,n++}else s-=x(e,--n);return V(n,0,e._length-1)},$=(e,t,n,s)=>{const r=Y(e,t,N(n,e._length-1));return[r,Y(e,t+s,r)]},Ee=(e,t,n)=>e._sizes.slice(z(0,t-1),N(e._length-1,n+1)+1).includes(L),ze=e=>{const t=e._sizes.filter(s=>s!==L),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:be(t)},le=(e,t,n)=>{const s=n?"unshift":"push";for(let r=e._length;r<t;r++)e._sizes[s](L),e._offsets.push(r===0?0:L);e._length=t},he=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return le(n,e),n},H=(e,t,n)=>{const s=t-e._length,r=s<0;let c;return r?(c=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((i,o)=>i+(o===L?e._defaultItemSize:o),0),e._offsets.splice(s)):(c=e._defaultItemSize*s,le(e,e._length+s,n)),e._computedOffsetIndex=n?0:V(t-1,0,e._computedOffsetIndex),e._length=t,[c,r]},ee=(e,t,n)=>t.reduce((s,[r,c])=>{const i=c-x(e,r);return(!n||i>0)&&(s+=i),s},0),Le=1.5,U=0,ce=1,ue=2,D=1,k=2,ye=3,W=4,fe=5,X=6,de=7,te=1,q=2,ne=4,se=8,Te=16,Ve=(e,t,n=40,s=0,r=he(t,n),c,i)=>{let o=n*z(s-1,0),l=0,_=0,m=0,f=U,g=!1,S=!1,u=!1,w=[0,s];const p=new Set,b=()=>Re(r),O=()=>b()-o,A=d=>V(d,0,O()),T=d=>{const a=f;return f=d,f!==a};return{_getCache(){return JSON.parse(JSON.stringify(r))},_getRange(){const[d,a]=w,[I,v]=$(r,l,d,o);return d===I&&a===v?w:w=[I,v]},_isUnmeasuredItem(d){return r._sizes[d]===L},_hasUnmeasuredItemsInTargetViewport(d){const[a,I]=$(r,d,w[0],o);return Ee(r,a,I)},_getItemOffset(d){const a=G(r,d);return c?a+z(0,o-b()):a},_getItemSize(d){return x(r,d)},_getItemsLength(){return r._length},_getScrollOffset(){return l},_getScrollOffsetMax:O,_getScrollDirection(){return f},_getViewportSize(){return o},_getCorrectedScrollSize(){return z(b(),o)},_getJumpCount(){return _},_flushJump(){const d=m;return m=0,d},_subscribe(d,a){const I=[d,a];return p.add(I),()=>{p.delete(I)}},_update(d,a){let I,v=0;switch(d){case D:{const R=a.filter(([h,M])=>r._sizes[h]!==M);if(!R.length)break;let E=0;if(!g){const[h]=w;l===0||(l>O()-Le?E=ee(r,R,!0):E=ee(r,R.filter(([M])=>M<h)))}E&&(m=E,_++,v+=ne);let C=!1;R.forEach(([h,M])=>{ve(r,h,M)&&(C=!0)}),i&&C&&!l&&ze(r),v+=q,u=I=!0;break}case k:{o!==a&&(o=a,v=q);break}case ye:{if(a[1]){const R=O()-l,[E,C]=H(r,a[0],!0),h=C?-N(E,R):E;m+=h,l=A(l+h),_++,v=te+ne}else H(r,a[0]);break}case W:case fe:{if(l===a)break;if(d===W){const R=a-l,E=u;u=!1,(f===U||!E)&&!S&&T(R<0?ue:ce)&&(v+=se),I=Se(R)>o,v+=Te}else g=!0;l=A(a),v+=te;break}case X:{T(U)&&(v=se),S=g=!1;break}case de:{g=!1,S=!0;break}}if(v){const R=()=>{p.forEach(([E,C])=>{v&E&&C()})};I?e(R):R()}}}},ae=typeof window<"u",Ce=P(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),j=P(()=>ae?F(document.body).direction==="rtl":!1),_e=ae?y.useLayoutEffect:y.useEffect,K="current",De={},me=(e,t)=>{if(Ie(e))for(const n of e)me(n,t);else!J(e)||typeof e=="boolean"||t.push(e)},ke=e=>{const t=[];return me(e,t),t},Pe=(e,t,n)=>z(e-(n===ce?1:z(1,t)),0),Ue=(e,t,n,s)=>N(e+(n===ue?1:z(1,t)),s-1),xe=e=>{const t=y.useRef(e);return _e(()=>{t[K]=e},[e]),t},We=(e,t,n,s)=>{const[r,c]=y.useState(t),i=xe(t);if(_e(()=>e._subscribe(n,()=>{c(()=>i[K]())}),[]),s){const o=t();r!==o&&c(o)}return r},pe=(e,t,n)=>Oe(s=>{if(e._getScrollDirection()!==U&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&n()}},50),ge=(e,t,n,s)=>Ce(e)||s?-n:t._getScrollOffsetMax()-n,Ke=(e,t)=>{let n,s;const r=t?"scrollLeft":"scrollTop",c=(o,l)=>t&&j()?ge(n,e,o,l):o,i=async o=>{if(!n)return;const l=()=>V(o(),0,e._getScrollOffsetMax());for(;;){const _=l();if(e._update(fe,_),!e._hasUnmeasuredItemsInTargetViewport(_))break;s&&s[1]();const m=e._subscribe(q,()=>{s&&s[0]()});try{await new Promise((f,g)=>{let S=!1;const u=()=>{S||(S=!0,f(),s=void 0)};s=[u,g],oe(u,250)})}catch{return}finally{m()}}n[r]=c(l()),e._update(de)};return{_initRoot(o){n=o;const l=()=>{e._update(W,c(o[r]))},_=ie(()=>{l(),e._update(X)},150),m=()=>{l(),_()},f=pe(e,t,_);return o.addEventListener("scroll",m),o.addEventListener("wheel",f,{passive:!0}),()=>{o.removeEventListener("scroll",m),o.removeEventListener("wheel",f),_._cancel()}},_scrollTo(o){i(()=>o)},_scrollBy(o){o+=e._getScrollOffset(),i(()=>o)},_scrollToIndex(o,l){o=V(o,0,e._getItemsLength()-1),i(l==="end"?()=>e._getItemOffset(o)+e._getItemSize(o)-e._getViewportSize():()=>e._getItemOffset(o))},_fixScrollJump:o=>{n&&(n[r]+=c(o,!0))}}},Je=(e,t)=>{let n;const s=t?"scrollX":"scrollY",r=t?"offsetLeft":"offsetTop",c=(i,o)=>t&&j()?ge(n,e,i,o):i;return{_initRoot(i){n=i;let o=!1;const l=(u,w)=>{const p=w+(t&&j()?window.innerWidth-u[r]-u.offsetWidth:u[r]),b=u.offsetParent;return u===document.body||!b?p:l(b,p)},_=()=>{o&&e._update(W,c(window[s])-l(i,0))},m=ie(()=>{_(),e._update(X)},150),f=()=>{_(),m()},g=pe(e,t,m),S=new IntersectionObserver(([u])=>{o=u.isIntersecting});return S.observe(i),window.addEventListener("scroll",f),window.addEventListener("wheel",g,{passive:!0}),()=>{S.disconnect(),window.removeEventListener("scroll",f),window.removeEventListener("wheel",g),m._cancel()}},_fixScrollJump:i=>{window.scrollBy(t?c(i,!0):0,t?0:i)}}},Be=e=>{const t=y.useRef();return t[K]||(t[K]=e())},we={box:"border-box"},qe=(e,t)=>{let n;const s=t?"width":"height",r=new WeakMap,c=P(()=>new ResizeObserver(i=>{const o=[];for(const{target:l,contentRect:_}of i)if(l.offsetParent)if(l===n)e._update(k,_[s]+_[t?"left":"top"]+B(F(n)[t?"paddingRight":"paddingBottom"]));else{const m=r.get(l);J(m)&&o.push([m,_[s]])}o.length&&e._update(D,o)}));return{_observeRoot(i){n=i;const o=c();return o.observe(i,we),()=>{o.disconnect()}},_observeItem(i,o){const l=c();return r.set(i,o),l.observe(i),()=>{r.delete(i),l.unobserve(i)}}}},je=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",r=new WeakMap,c=P(()=>new ResizeObserver(i=>{const o=[];for(const{target:l,contentRect:_}of i){if(!l.offsetParent)continue;const m=r.get(l);J(m)&&o.push([m,_[n]])}o.length&&e._update(D,o)}));return{_observeRoot(){const i=()=>{e._update(k,window[s])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),c().disconnect()}},_observeItem(i,o){const l=c();return r.set(i,o),l.observe(i),()=>{r.delete(i),l.unobserve(i)}}}},Fe=(e,t)=>{let n;const s="height",r="width",c=new WeakMap,i=new Set,o=new Set,l=new Map,_=(f,g)=>`${f}-${g}`,m=P(()=>new ResizeObserver(f=>{const g=new Set,S=new Set;for(const{target:u,contentRect:w}of f)if(u.offsetParent)if(u===n){const p=F(n);e._update(k,w[s]+w.top+B(p.paddingBottom)),t._update(k,w[r]+w.left+B(p.paddingRight))}else{const p=c.get(u);if(p){const[b,O]=p,A=_(b,O),T=l.get(A),d=[w[s],w[r]];let a,I;T?(T[0]!==d[0]&&(a=!0),T[1]!==d[1]&&(I=!0)):a=I=!0,a&&g.add(b),I&&S.add(O),(a||I)&&l.set(A,d)}}if(g.size){const u=[];g.forEach(w=>{let p=0;o.forEach(b=>{const O=l.get(_(w,b));O&&(p=z(p,O[0]))}),p&&u.push([w,p])}),e._update(D,u)}if(S.size){const u=[];S.forEach(w=>{let p=0;i.forEach(b=>{const O=l.get(_(b,w));O&&(p=z(p,O[1]))}),p&&u.push([w,p])}),t._update(D,u)}}));return{_observeRoot(f){n=f;const g=m();return g.observe(f,we),()=>{g.disconnect()}},_observeItem(f,g,S){const u=m();return c.set(f,[g,S]),i.add(g),o.add(S),u.observe(f),()=>{c.delete(f),u.unobserve(f)}}}},re=y.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:r},c)=>Z("div",{ref:c,...t,children:Z("div",{style:y.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:r?"none":"auto"}),[n,s,r]),children:e})}));try{re.displayName="Viewport",re.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{ye as A,U as S,te as U,re as V,Be as a,We as b,_e as c,De as d,J as e,ke as f,Ve as g,je as h,Je as i,q as j,se as k,ne as l,Pe as m,Ue as n,j as o,Fe as p,Ke as q,K as r,Te as s,qe as t,xe as u,Me as v};
//# sourceMappingURL=Viewport-4a611d8b.js.map
