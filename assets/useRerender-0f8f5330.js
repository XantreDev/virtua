import{r as T}from"./index-c6dae603.js";import{j as Q}from"./jsx-runtime-c3d7f245.js";const D=Math.min,E=Math.max,ge=Math.abs,H=Date.now,xe=Object.values,Se=Array.isArray,q=setTimeout,V=(e,t,n)=>D(n,E(t,e)),J=e=>e!=null,we=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},ie=(e,t)=>{let n;const s=()=>{J(n)&&clearTimeout(n)},i=()=>{s(),n=q(()=>{n=null,e()},t)};return i._cancel=s,i},ve=(e,t)=>{let n=H()-t;return(...s)=>{const i=H();n+t<i&&(n=i,e(...s))}},x=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},X=e=>getComputedStyle(e),B=e=>e?parseFloat(e):0,R=-1,C=(e,t)=>{const n=e._sizes[t];return n===R?e._defaultItemSize:n},be=(e,t,n)=>{const s=e._sizes[t]===R;return e._sizes[t]=n,e._computedOffsetIndex=D(t,e._computedOffsetIndex),s},Z=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=C(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},he=e=>e._length?Z(e,e._length-1)+C(e,e._length-1):0,ee=(e,t,n)=>{let s=Z(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=C(e,n);if(s+i>t)break;s+=i,n++}else s-=C(e,--n);return V(n,0,e._length-1)},Ie=(e,t,n,s)=>{const i=ee(e,t,D(n,e._length-1));return[i,ee(e,t+s,i)]},Oe=e=>{const t=e._sizes.filter(s=>s!==R),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:we(t)},le=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](R),e._offsets.push(i===0?0:R);e._length=t},Ee=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return le(n,e),n},te=(e,t,n)=>{const s=t-e._length,i=s<0;let d;return i?(d=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,l)=>o+(l===R?e._defaultItemSize:l),0),e._offsets.splice(s)):(d=e._defaultItemSize*s,le(e,e._length+s,n)),e._computedOffsetIndex=n?0:V(t-1,0,e._computedOffsetIndex),e._length=t,[d,i]},ue=typeof window<"u",ye=x(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),j=x(()=>ue?X(document.body).direction==="rtl":!1),F=x(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),ne=(e,t,n)=>t.reduce((s,[i,d])=>{const o=d-C(e,i);return(!n||o>0)&&(s+=o),s},0),ze=1.5,M=0,ce=1,fe=2,W=1,k=2,Re=3,Y=4,$=5,de=6,U=1,G=2,Le=4,Ae=(e,t=40,n=0,s=Ee(e,t),i,d)=>{let o=t*E(n-1,0),l=0,r=0,u=0,c=0,a=M,_=!1,w=!1,f=[0,n];const g=new Set,m=()=>he(s),v=()=>m()-o,b=p=>V(p,0,v()),A=p=>{F()&&a!==M?c+=p:(u+=p,r++)},L=p=>{const S=a;return a=p,a!==S};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return f=Ie(s,l+c,f[0],o)},_isUnmeasuredItem(p){return s._sizes[p]===R},_getItemOffset(p){const S=Z(s,p)-c;return i?S+E(0,o-m()):S},_getItemSize(p){return C(s,p)},_getItemsLength(){return s._length},_getScrollOffset(){return l},_getScrollOffsetMax:v,_getScrollDirection(){return a},_getViewportSize(){return o},_getCorrectedScrollSize(){return E(m(),o)},_getJumpCount(){return r},_flushJump(){const p=u;return u=0,p},_subscribe(p,S){const O=[p,S];return g.add(O),()=>{g.delete(O)}},_update(p,S){let O,K,y=0;switch(p){case W:{const h=S.filter(([z,N])=>s._sizes[z]!==N);if(!h.length)break;let I=0;if(l!==0)if(l>v()-ze)I=ne(s,h,!0);else{const[z]=f;I=ne(s,h.filter(([N])=>N<z))}I&&A(I);let P=!1;h.forEach(([z,N])=>{be(s,z,N)&&(P=!0)}),d&&P&&!l&&Oe(s),y+=G,w=K=!0;break}case k:{o!==S&&(o=S,y=G);break}case Re:{if(S[1]){const h=v()-l,[I,P]=te(s,S[0],!0),z=P?-D(I,h):I;A(z),F()||(l=b(l+z)),y=U}else te(s,S[0]);break}case Y:{if(l===S)break;const h=S-l,I=w;w=!1,(a===M||!I)&&!_&&L(h<0?fe:ce),K=ge(h)>o,y+=Le,l=b(S),y+=U;break}case $:{L(M)&&(O=!0,y=U),_=!1;break}case de:{_=!0;break}}y&&(O&&c&&(w=!0,u+=c,c=0,r++),g.forEach(([h,I])=>{y&h&&I(K)}))}}},Ne=ue?T.useLayoutEffect:T.useEffect,ae=(e,t,n)=>ve(s=>{if(e._getScrollDirection()!==M&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),_e=(e,t,n,s)=>ye(e)||s?-n:t._getScrollOffsetMax()-n,Me=(e,t)=>{let n,s,i=!1;const d=t?"scrollLeft":"scrollTop",o=(r,u)=>t&&j()?_e(n,e,r,u):r,l=async r=>{if(!n)return;s&&s();const u=()=>V(r(),0,e._getScrollOffsetMax());for(;;){let c;const a=e._subscribe(G,()=>{c&&c[0]()});try{n[d]=o(u()),e._update(de),await new Promise((_,w)=>{c=[_,w],q(s=w,250)})}catch{return}finally{a()}}};return{_initRoot(r){n=r;let u=!1,c=!1;const a=()=>{e._update(Y,o(r[d]))},_=ie(()=>{if(u){_();return}c=!1,a(),e._update($)},150),w=()=>{c&&(i=!0),a(),_()},f=ae(e,t,_),g=()=>{u=!0,c=i=!1},m=()=>{u=!1,F()&&(c=!0)};return r.addEventListener("scroll",w),r.addEventListener("wheel",f,{passive:!0}),r.addEventListener("touchstart",g,{passive:!0}),r.addEventListener("touchend",m,{passive:!0}),()=>{r.removeEventListener("scroll",w),r.removeEventListener("wheel",f),r.removeEventListener("touchstart",g),r.removeEventListener("touchend",m),_._cancel()}},_scrollTo(r){l(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),l(()=>r)},_scrollToIndex(r,u){r=V(r,0,e._getItemsLength()-1),l(u==="end"?()=>e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():u==="center"?()=>e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:()=>e._getItemOffset(r))},_fixScrollJump:r=>{if(n){if(i){const u=n.style.overflow;n.style.overflow="hidden",i=!1,q(()=>{n.style.overflow=u})}n[d]+=o(r,!0)}}}},Ve=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",d=(o,l)=>t&&j()?_e(n,e,o,l):o;return{_initRoot(o){n=o;let l=!1;const r=(f,g)=>{const m=g+(t&&j()?window.innerWidth-f[i]-f.offsetWidth:f[i]),v=f.offsetParent;return f===document.body||!v?m:r(v,m)},u=()=>{l&&e._update(Y,d(window[s])-r(o,0))},c=ie(()=>{u(),e._update($)},150),a=()=>{u(),c()},_=ae(e,t,c),w=new IntersectionObserver(([f])=>{l=f.isIntersecting});return w.observe(o),window.addEventListener("scroll",a),window.addEventListener("wheel",_,{passive:!0}),()=>{w.disconnect(),window.removeEventListener("scroll",a),window.removeEventListener("wheel",_),c._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?d(o,!0):0,t?0:o)}}},se="current",We={},me=(e,t)=>{if(Se(e))for(const n of e)me(n,t);else!J(e)||typeof e=="boolean"||t.push(e)},ke=e=>{const t=[];return me(e,t),t},De=(e,t,n)=>E(e-(n===ce?1:E(1,t)),0),Pe=(e,t,n,s)=>D(e+(n===fe?1:E(1,t)),s-1),Je=e=>{const t=T.useRef();return t[se]||(t[se]=e())},pe={box:"border-box"},Ke=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,d=x(()=>new ResizeObserver(o=>{const l=[];for(const{target:r,contentRect:u}of o)if(r.offsetParent)if(r===n)e._update(k,u[s]+u[t?"left":"top"]+B(X(n)[t?"paddingRight":"paddingBottom"]));else{const c=i.get(r);J(c)&&l.push([c,u[s]])}l.length&&e._update(W,l)}));return{_observeRoot(o){n=o;const l=d();return l.observe(o,pe),()=>{l.disconnect()}},_observeItem(o,l){const r=d();return i.set(o,l),r.observe(o),()=>{i.delete(o),r.unobserve(o)}}}},Ue=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,d=x(()=>new ResizeObserver(o=>{const l=[];for(const{target:r,contentRect:u}of o){if(!r.offsetParent)continue;const c=i.get(r);J(c)&&l.push([c,u[n]])}l.length&&e._update(W,l)}));return{_observeRoot(){const o=()=>{e._update(k,window[s])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),d().disconnect()}},_observeItem(o,l){const r=d();return i.set(o,l),r.observe(o),()=>{i.delete(o),r.unobserve(o)}}}},qe=(e,t)=>{let n;const s="height",i="width",d=new WeakMap,o=new Set,l=new Set,r=new Map,u=(a,_)=>`${a}-${_}`,c=x(()=>new ResizeObserver(a=>{const _=new Set,w=new Set;for(const{target:f,contentRect:g}of a)if(f.offsetParent)if(f===n){const m=X(n);e._update(k,g[s]+g.top+B(m.paddingBottom)),t._update(k,g[i]+g.left+B(m.paddingRight))}else{const m=d.get(f);if(m){const[v,b]=m,A=u(v,b),L=r.get(A),p=[g[s],g[i]];let S,O;L?(L[0]!==p[0]&&(S=!0),L[1]!==p[1]&&(O=!0)):S=O=!0,S&&_.add(v),O&&w.add(b),(S||O)&&r.set(A,p)}}if(_.size){const f=[];_.forEach(g=>{let m=0;l.forEach(v=>{const b=r.get(u(g,v));b&&(m=E(m,b[0]))}),m&&f.push([g,m])}),e._update(W,f)}if(w.size){const f=[];w.forEach(g=>{let m=0;o.forEach(v=>{const b=r.get(u(v,g));b&&(m=E(m,b[1]))}),m&&f.push([g,m])}),t._update(W,f)}}));return{_observeRoot(a){n=a;const _=c();return _.observe(a,pe),()=>{_.disconnect()}},_observeItem(a,_,w){const f=c();return d.set(a,[_,w]),o.add(_),l.add(w),f.observe(a),()=>{d.delete(a),f.unobserve(a)}}}},re=T.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},d)=>Q("div",{ref:d,...t,children:Q("div",{style:T.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{re.displayName="Viewport",re.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const oe=()=>[],Be=()=>T.useReducer(oe,void 0,oe)[1];export{Re as A,M as S,U,re as V,Be as a,Ne as b,G as c,We as d,J as e,ke as f,Ae as g,Ue as h,Ve as i,Pe as j,De as k,j as l,qe as m,Me as n,Le as o,Ke as p,se as r,Je as u,xe as v};
//# sourceMappingURL=useRerender-0f8f5330.js.map
