import{r as N}from"./index-yp3VsGQP.js";import{a as H}from"./jsx-runtime-sgeEVxPu.js";const A=Math.min,I=Math.max,ee=Math.abs,te=Date.now,ke=Object.values,Oe=Array.isArray,F=setTimeout,W=(e,t,n)=>A(n,I(t,e)),B=e=>e!=null,Ie=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},ce=(e,t)=>{let n;const s=()=>{B(n)&&clearTimeout(n)},i=()=>{s(),n=F(()=>{n=null,e()},t)};return i._cancel=s,i},Ee=(e,t)=>{let n=te()-t;return(...s)=>{const i=te();n+t<i&&(n=i,e(...s))}},x=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},Y=e=>getComputedStyle(e),j=e=>e?parseFloat(e):0,z=-1,V=(e,t)=>{const n=e._sizes[t];return n===z?e._defaultItemSize:n},Re=(e,t,n)=>{const s=e._sizes[t]===z;return e._sizes[t]=n,e._computedOffsetIndex=A(t,e._computedOffsetIndex),s},Z=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=V(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},ze=e=>e._length?Z(e,e._length-1)+V(e,e._length-1):0,ne=(e,t,n)=>{let s=Z(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=V(e,n);if(s+i>t)break;s+=i,n++}else s-=V(e,--n);return W(n,0,e._length-1)},se=(e,t,n,s)=>{const i=ne(e,t,A(n,e._length-1));return[i,ne(e,t+s,i)]},ye=e=>{const t=e._sizes.filter(s=>s!==z),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ie(t)},fe=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](z),e._offsets.push(i===0?0:z);e._length=t},Le=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return fe(n,e),n},re=(e,t,n)=>{const s=t-e._length,i=s<0;let p;return i?(p=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,u)=>o+(u===z?e._defaultItemSize:u),0),e._offsets.splice(s)):(p=e._defaultItemSize*s,fe(e,e._length+s,n)),e._computedOffsetIndex=n?0:W(t-1,0,e._computedOffsetIndex),e._length=t,[p,i]},de=typeof window<"u",ae=()=>document.documentElement,Te=x(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),X=x(()=>de?Y(ae()).direction==="rtl":!1),_e=x(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ce=x(()=>"scrollBehavior"in ae().style),oe=(e,t,n)=>t.reduce((s,[i,p])=>{const o=p-V(e,i);return(!n||o>0)&&(s+=o),s},0),Ae=1.5,U=0,me=1,pe=2,D=1,J=2,xe=3,$=4,Q=5,ge=6,Se=7,K=1,G=2,Me=4,Pe=(e,t=40,n=0,s=Le(e,t),i,p)=>{let o=t*I(n-1,0),u=0,a=0,r=0,c=0,l=0,f=0,_=0,d=U,g=!1,m=null,v=[0,n];const b=new Set,y=()=>ze(s),E=()=>y()-o+u+a,M=S=>{_e()&&d!==U?f+=S:(l+=S,c++)},L=S=>{const w=d;return d=S,d!==w};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return m?[A(v[0],m[0]),I(v[1],m[1])]:v=se(s,r+f+l,v[0],o)},_isUnmeasuredItem(S){return s._sizes[S]===z},_hasUnmeasuredItemsInSmoothScrollRange(){return m?s._sizes.slice(I(0,m[0]-1),A(s._length-1,m[1]+1)+1).includes(z):!1},_getItemOffset(S){const w=Z(s,S)-f;return i?w+I(0,o-y()):w},_getItemSize(S){return V(s,S)},_getItemsLength(){return s._length},_getScrollOffset(){return r},_getMaxScrollOffset:E,_getScrollDirection(){return d},_getViewportSize(){return o},_getViewportPaddingStart(){return u},_getTotalSize(){return I(y(),o-u-a)},_getScrollSize:y,_getJumpCount(){return c},_flushJump(){return _=l,l=0,_},_subscribe(S,w){const k=[S,w];return b.add(k),()=>{b.delete(k)}},_update(S,w){let k,q,R=0;switch(S){case D:{const h=w.filter(([C,P])=>s._sizes[C]!==P);if(!h.length)break;let O=0;if(r!==0)if(r>E()-Ae)O=oe(s,h,!0);else{const[C]=v;O=oe(s,h.filter(([P])=>P<C))}O&&M(O);let T=!1;h.forEach(([C,P])=>{Re(s,C,P)&&(T=!0)}),p&&T&&!r&&ye(s),R=G,q=!0;break}case J:{const h=w[0]+w[1]+w[2];o!==h&&(o=h,u=w[1],a=w[2],R=G);break}case xe:{if(w[1]){const h=E()-r,[O,T]=re(s,w[0],!0);M(T?-A(O,h):O),R=K}else re(s,w[0]);break}case $:{const h=W(w,0,E());if(h===r)break;const O=h-r,T=ee(O),C=_&&T<ee(_)+1;_=0,!C&&!g&&L(O<0?pe:me),q=T>o,r=h,R=K+Me;break}case Q:{L(U)&&(k=!0,R=K),g=!1,m=null;break}case ge:{g=!0;break}case Se:{m=se(s,w,v[0],o),R=K;break}}R&&(k&&f&&(l+=f,f=0,c++),b.forEach(([h,O])=>{R&h&&O(q)}))}}},We=de?N.useLayoutEffect:N.useEffect,we=(e,t,n)=>Ee(s=>{if(e._getScrollDirection()!==U&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getMaxScrollOffset()&&n()}},50),he=(e,t,n,s)=>Te(e)||s?-n:t._getMaxScrollOffset()-n,De=(e,t)=>{let n,s,i=!1;const p=t?"scrollLeft":"scrollTop",o=t?"overflowX":"overflowY",u=(r,c)=>t&&X()?he(n,e,r,c):r,a=async(r,c)=>{if(!n)return;s&&s();const l=()=>W(r(),0,e._getMaxScrollOffset()),f=()=>{let _;return[new Promise((d,g)=>{_=d,F(s=g,150)}),e._subscribe(G,()=>{_&&_()})]};if(c&&Ce()){for(;e._update(Se,l()),!!e._hasUnmeasuredItemsInSmoothScrollRange();){const[_,d]=f();try{await _}catch{return}finally{d()}}n.scrollTo({[t?"left":"top"]:u(l()),behavior:"smooth"})}else for(;;){const[_,d]=f();try{n[p]=u(l()),e._update(ge),await _}catch{return}finally{d()}}};return{_observe(r){n=r;let c=!1,l=!1;const f=ce(()=>{if(c){f();return}l=!1,e._update(Q)},150),_=()=>{l&&(i=!0),e._update($,u(r[p])),f()},d=we(e,t,f),g=()=>{c=!0,l=i=!1},m=()=>{c=!1,_e()&&(l=!0)};return r.addEventListener("scroll",_),r.addEventListener("wheel",d,{passive:!0}),r.addEventListener("touchstart",g,{passive:!0}),r.addEventListener("touchend",m,{passive:!0}),()=>{r.removeEventListener("scroll",_),r.removeEventListener("wheel",d),r.removeEventListener("touchstart",g),r.removeEventListener("touchend",m),f._cancel()}},_scrollTo(r){a(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),a(()=>r)},_scrollToIndex(r,{align:c,smooth:l}={}){if(r=W(r,0,e._getItemsLength()-1),c==="nearest"){const f=e._getItemOffset(r),_=e._getScrollOffset();if(f<_)c="start";else if(f+e._getItemSize(r)>_+e._getViewportSize())c="end";else return}a(()=>c==="end"?e._getViewportPaddingStart()+e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():c==="center"?e._getViewportPaddingStart()+e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:e._getViewportPaddingStart()+e._getItemOffset(r),l)},_fixScrollJump:r=>{if(n){if(i){i=!1;const c=n.style,l=c[o];c[o]="hidden",F(()=>{c[o]=l})}n[p]+=u(r,!0)}}}},Je=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",p=(o,u)=>t&&X()?he(n,e,o,u):o;return{_observe(o){n=o;const u=(l,f)=>{const _=f+(t&&X()?window.innerWidth-l[i]-l.offsetWidth:l[i]),d=l.offsetParent;return l===document.body||!d?_:u(d,_)},a=ce(()=>{e._update(Q)},150),r=()=>{e._update($,p(window[s])-u(o,0)),a()},c=we(e,t,a);return window.addEventListener("scroll",r),window.addEventListener("wheel",c,{passive:!0}),()=>{window.removeEventListener("scroll",r),window.removeEventListener("wheel",c),a._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?p(o,!0):0,t?0:o)}}},ie="current",Ke={},ve=(e,t)=>{if(Oe(e))for(const n of e)ve(n,t);else!B(e)||typeof e=="boolean"||t.push(e)},Ue=e=>{const t=[];return ve(e,t),t},Be=(e,t,n)=>I(e-(n===me?1:I(1,t)),0),qe=(e,t,n,s)=>A(e+(n===pe?1:I(1,t)),s-1),Fe=e=>{const t=N.useRef();return t[ie]||(t[ie]=e())},be={box:"border-box"},je=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,p=x(()=>new ResizeObserver(o=>{const u=[];for(const{target:a,contentRect:r}of o)if(a.offsetParent)if(a===n)e._update(J,[r[s],r[t?"left":"top"],j(Y(n)[t?"paddingRight":"paddingBottom"])]);else{const c=i.get(a);B(c)&&u.push([c,r[s]])}u.length&&e._update(D,u)}));return{_observeRoot(o){n=o;const u=p();return u.observe(o,be),()=>{u.disconnect()}},_observeItem(o,u){const a=p();return i.set(o,u),a.observe(o),()=>{i.delete(o),a.unobserve(o)}}}},Xe=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,p=x(()=>new ResizeObserver(o=>{const u=[];for(const{target:a,contentRect:r}of o){if(!a.offsetParent)continue;const c=i.get(a);B(c)&&u.push([c,r[n]])}u.length&&e._update(D,u)}));return{_observeRoot(){const o=()=>{e._update(J,[window[s],0,0])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),p().disconnect()}},_observeItem(o,u){const a=p();return i.set(o,u),a.observe(o),()=>{i.delete(o),a.unobserve(o)}}}},Ge=(e,t)=>{let n;const s="height",i="width",p=new WeakMap,o=new Set,u=new Set,a=new Map,r=(l,f)=>`${l}-${f}`,c=x(()=>new ResizeObserver(l=>{const f=new Set,_=new Set;for(const{target:d,contentRect:g}of l)if(d.offsetParent)if(d===n){const m=Y(n);e._update(J,[g[s],g.top,j(m.paddingBottom)]),t._update(J,[g[i],g.left,j(m.paddingRight)])}else{const m=p.get(d);if(m){const[v,b]=m,y=r(v,b),E=a.get(y),M=[g[s],g[i]];let L,S;E?(E[0]!==M[0]&&(L=!0),E[1]!==M[1]&&(S=!0)):L=S=!0,L&&f.add(v),S&&_.add(b),(L||S)&&a.set(y,M)}}if(f.size){const d=[];f.forEach(g=>{let m=0;u.forEach(v=>{const b=a.get(r(g,v));b&&(m=I(m,b[0]))}),m&&d.push([g,m])}),e._update(D,d)}if(_.size){const d=[];_.forEach(g=>{let m=0;o.forEach(v=>{const b=a.get(r(v,g));b&&(m=I(m,b[1]))}),m&&d.push([g,m])}),t._update(D,d)}}));return{_observeRoot(l){n=l;const f=c();return f.observe(l,be),()=>{f.disconnect()}},_observeItem(l,f,_){const d=c();return p.set(l,[f,_]),o.add(f),u.add(_),d.observe(l),()=>{p.delete(l),d.unobserve(l)}}}},le=N.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},p)=>H("div",{ref:p,...t,children:H("div",{style:N.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{le.displayName="Viewport",le.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ue=()=>[],Ye=()=>N.useReducer(ue,void 0,ue)[1];export{xe as A,U as S,K as U,le as V,Fe as a,Ye as b,G as c,Pe as d,Ke as e,Ge as f,De as g,qe as h,X as i,Be as j,Me as k,B as l,je as m,Xe as n,Je as o,Ue as p,ie as r,We as u,ke as v};
