import{r as z}from"./index-5284b0bf.js";import{r as ae}from"./index-480187bb.js";import{j as Z}from"./jsx-runtime-f8a6c6ea.js";const W=Math.min,b=Math.max,de=Math.abs,Q=Date.now,Ce=Object.values,te=setTimeout,M=e=>e!=null,_e=e=>{const t=[...e].sort((s,r)=>s-r),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},se=(e,t)=>{let n;const s=()=>{M(n)&&clearTimeout(n)},r=()=>{s(),n=te(()=>{n=null,e()},t)};return r._cancel=s,r},me=(e,t)=>{let n=Q()-t;return(...s)=>{const r=Q();n+t<r&&(n=r,e(...s))}},q=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},O=-1,D=(e,t)=>{const n=e._sizes[t];return n===O?e._defaultItemSize:n},pe=(e,t,n)=>{const s=e._sizes[t]===O;return e._sizes[t]=n,e._measuredOffsetIndex=W(t,e._measuredOffsetIndex),s},ne=(e,t,n)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return n?e._offsets[t]+D(e,t):e._offsets[t];let s=e._measuredOffsetIndex,r=e._offsets[s];for(;s<=t&&(e._offsets[s]=r,!(s===t&&!n));)r+=D(e,s),s++;return e._measuredOffsetIndex=t,r},he=e=>ne(e,e._length-1,!0),Y=(e,t)=>ne(e,t),re=(e,t,n)=>{let s=0;if(n>=0)for(;t<e._length-1;){const r=D(e,t++);if((s+=r)>=n){s-r/2>=n&&t--;break}}else for(;t>0;){const r=D(e,--t);if((s-=r)<=n){s+r/2<n&&t++;break}}return W(b(t,0),e._length-1)},$=(e,t,n,s)=>re(e,n,t-s),ge=(e,t,n)=>{for(let s=t;s<=n;s++)if(e._sizes[s]===O)return!0;return!1},we=e=>{const t=e._sizes.filter(s=>s!==O),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:_e(t)},Se=(e,t)=>{const n=[],s=[];for(let r=0;r<e;r++)n.push(O),s.push(r===0?0:O);return{_defaultItemSize:t,_length:e,_measuredOffsetIndex:0,_sizes:n,_offsets:s}},Ie=(e,t)=>{const n=[],s=[];for(let r=0;r<t;r++){const d=e._sizes[r];if(n.push(M(d)?d:O),r===0)s.push(0);else{const i=e._offsets[r];s.push(M(i)?i:O)}}e._length=t,e._measuredOffsetIndex=W(e._measuredOffsetIndex,t-1),e._sizes=n,e._offsets=s},F=e=>e.reduce((t,[n])=>t+n,0),G=(e,t)=>t.map(([n,s])=>[s-D(e,n),n]),be=1.5,A=0,ve=1,H=2,P=1,V=2,K=3,oe=4,B=5,ie=6,ce=1,k=2,ue=4,Te=(e,t,n=0,s,r,d,i)=>{const l=!t,f=t||40,o=d??Se(e,f);let a=f*b(n-1,0),u=0,_=0,g=0,m=A,p=!1,h=!1,I=[0,n];const S=new Set,y=()=>he(o),C=()=>y()-a,J=()=>{const c=h;return h=!1,c},T=c=>{const w=m;if(m=c,m===A)return!1;if(w===A)return!0};return{_getCache(){return JSON.parse(JSON.stringify(o))},_getRange(){const[c,w]=I,R=Y(o,c),E=$(o,u,c,R),v=re(o,E,a);return c===E&&w===v?I:I=[E,v]},_isUnmeasuredItem(c){return o._sizes[c]===O},_hasUnmeasuredItemsInRange(c){return ge(o,b(0,c-2),W(o._length-1,c+2))},_getItemOffset(c){const w=Y(o,c);return s?w+b(0,a-y()):w},_getItemSize(c){return D(o,c)},_getItemLength(){return o._length},_getScrollOffset(){return u},_getScrollOffsetMax:C,_getViewportSize(){return a},_getScrollSize:y,_getCorrectedScrollSize(){return b(y(),a)},_getJumpCount(){return _},_flushJump(){const c=g;return g=0,c},_getItemIndexForScrollTo(c){return $(o,c,0,0)},_subscribe(c,w){const R=[c,w];return S.add(R),()=>{S.delete(R)}},_update(c,w){let R,E,v=0;switch(c){case P:{const L=w.filter(([N,U])=>o._sizes[N]!==U);if(!L.length)break;let x=0;if(m===H)x=F(G(o,L));else if(p){const N=G(o,L),[U]=I;u===0||(u>C()-be?x=F(N):x=F(N.filter(([,fe])=>fe<U)))}x&&(g=x,_++,v+=ue);let X=!1;L.forEach(([N,U])=>{pe(o,N,U)&&(X=!0)}),l&&X&&!u&&we(o),v+=k,h=R=!0;break}case V:{a!==w&&(a=w,v=k);break}case K:case oe:{if(u===w)break;if(c===K){const L=J();(m===A||!L)&&!p&&(E=T(u>w?H:ve)),R=de(u-w)>a}u=b(0,W(C(),w)),v=ce;break}case B:{E=T(A),p=!1;break}case ie:{p=!0;break}}v&&(S.forEach(([L,x])=>{v&L&&x(R)}),c===K&&i&&i(u)),M(E)&&r(E)},_getScrollDirection(){return m},_updateCacheLength(c){o._length!==c&&Ie(o,c)}}},ze=typeof window<"u"?z.useLayoutEffect:z.useEffect,j="current",xe=e=>{const t=[];return z.Children.forEach(e,n=>{!M(n)||typeof n=="boolean"||t.push(n)}),t},Oe=e=>{const t=z.useRef(e);return ze(()=>{t[j]=e},[e]),t},We=(e,t,n)=>{const[s,r]=z.useState(t),d=Oe(t);if(z.useLayoutEffect(()=>{let i;t===e._getRange?i=ce+k:t===e._getCorrectedScrollSize?i=k:t===e._getJumpCount?i=ue:i=k;const l=()=>{r(()=>d[j]())};return e._subscribe(i,f=>{f?ae.flushSync(l):l()})},[]),n){const i=t();s!==i&&r(i)}return s},Re=q(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),le=(e,t,n)=>me(s=>{if(e._getScrollDirection()!==A&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&n()}},50),Me=(e,t,n)=>{let s,r;const d=t?"scrollLeft":"scrollTop",i=()=>s?t?s.scrollWidth:s.scrollHeight:0,l=(o,a)=>t&&n?Re(s)||a?-o:e._getScrollOffsetMax()-o:o,f=async(o,a)=>{if(!s)return;const u=()=>W(a(),i()-e._getViewportSize());for(;e._update(oe,u()),!!e._hasUnmeasuredItemsInRange(o);){r&&r[1]();const _=e._subscribe(k,()=>{r&&r[0]()});try{await new Promise((g,m)=>{let p=!1;const h=()=>{p||(p=!0,g(),r=void 0)};r=[h,m],te(h,250)})}catch{return}finally{_()}}s[d]=l(u()),e._update(ie)};return{_initRoot(o){s=o;const a=()=>{e._update(K,l(o[d]))},u=se(()=>{a(),e._update(B)},150),_=()=>{a(),u()},g=le(e,t,u);return o.addEventListener("scroll",_),o.addEventListener("wheel",g,{passive:!0}),()=>{o.removeEventListener("scroll",_),o.removeEventListener("wheel",g),u._cancel()}},_getActualScrollSize:i,_scrollTo(o){o=b(o,0),f(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o){o=b(W(o,e._getItemLength()-1),0),f(o,()=>e._getItemOffset(o))},_fixScrollJump:o=>{s&&(s[d]+=l(o,!0))}}},Ne=(e,t)=>{const n=t?"scrollX":"scrollY",s=t?"offsetLeft":"offsetTop";return{_initRoot(r){let d=!1;const i=(_,g)=>{const m=g+_[s],p=_.offsetParent;return _===document.body||!p?m:i(p,m)},l=()=>{d&&e._update(K,window[n]-i(r,0))},f=se(()=>{l(),e._update(B)},150),o=()=>{l(),f()},a=le(e,t,f),u=new IntersectionObserver(([_])=>{d=_.isIntersecting});return u.observe(r),window.addEventListener("scroll",o),window.addEventListener("wheel",a,{passive:!0}),()=>{u.disconnect(),window.removeEventListener("scroll",o),window.removeEventListener("wheel",a),f._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?r:0,t?0:r)}}},Ae=e=>{const t=z.useRef();return t[j]||(t[j]=e())},ke=(e,t)=>{let n;const s=t?"width":"height",r=new WeakMap,d=q(()=>new ResizeObserver(i=>{const l=[];for(const{target:f,contentRect:o}of i)if(f===n)e._update(V,o[s]);else{const a=r.get(f);M(a)&&l.push([a,o[s]])}l.length&&e._update(P,l)}));return{_observeRoot(i){n=i;const l=d();return l.observe(i),()=>{l.disconnect()}},_observeItem(i,l){const f=d();return r.set(i,l),f.observe(i),()=>{r.delete(i),f.unobserve(i)}}}},De=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",r=new WeakMap,d=q(()=>new ResizeObserver(i=>{const l=[];for(const{target:f,contentRect:o}of i){const a=r.get(f);M(a)&&l.push([a,o[n]])}l.length&&e._update(P,l)}));return{_observeRoot(){const i=()=>{e._update(V,window[s])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),d().disconnect()}},_observeItem(i,l){const f=d();return r.set(i,l),f.observe(i),()=>{r.delete(i),f.unobserve(i)}}}},Je=(e,t)=>{let n;const s="height",r="width",d=new WeakMap,i=new Set,l=new Set,f=new Map,o=(u,_)=>`${u}-${_}`,a=q(()=>new ResizeObserver(u=>{const _=new Set,g=new Set;for(const{target:m,contentRect:p}of u)if(m===n)e._update(V,p[s]),t._update(V,p[r]);else{const h=d.get(m);if(h){const[I,S]=h,y=o(I,S),C=f.get(y),J=[p[s],p[r]];let T,c;C?(C[0]!==J[0]&&(T=!0),C[1]!==J[1]&&(c=!0)):T=c=!0,T&&_.add(I),c&&g.add(S),(T||c)&&f.set(y,J)}}if(_.size){const m=[];_.forEach(p=>{let h=0;l.forEach(I=>{const S=f.get(o(p,I));S&&(h=b(h,S[0]))}),h&&m.push([p,h])}),e._update(P,m)}if(g.size){const m=[];g.forEach(p=>{let h=0;i.forEach(I=>{const S=f.get(o(I,p));S&&(h=b(h,S[1]))}),h&&m.push([p,h])}),t._update(P,m)}}));return{_observeRoot(u){n=u;const _=a();return _.observe(u),()=>{_.disconnect()}},_observeItem(u,_,g){const m=a();return d.set(u,[_,g]),i.add(_),l.add(g),m.observe(u),()=>{d.delete(u),m.unobserve(u)}}}},ee=z.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:r},d)=>Z("div",{ref:d,...t,children:Z("div",{style:z.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:r?"none":"auto"}),[n,s,r]),children:e})}));try{ee.displayName="Window",ee.__docgenInfo={description:"",displayName:"Window",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{ee as W,Ae as a,We as b,ze as c,Te as d,M as e,xe as f,ke as g,Me as h,W as i,De as j,Ne as k,Je as l,b as m,j as r,Oe as u,Ce as v};
//# sourceMappingURL=Window-53de3cd8.js.map
