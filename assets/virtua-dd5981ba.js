import{j as V}from"./jsx-runtime-f8a6c6ea.js";import{r as d}from"./index-5284b0bf.js";var le={exports:{}},ae={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C=d;function me(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ve=typeof Object.is=="function"?Object.is:me,ge=C.useState,ye=C.useEffect,we=C.useLayoutEffect,Se=C.useDebugValue;function Ee(e,t){var n=t(),o=ge({inst:{value:n,getSnapshot:t}}),s=o[0].inst,c=o[1];return we(function(){s.value=n,s.getSnapshot=t,U(s)&&c({inst:s})},[e,n,t]),ye(function(){return U(s)&&c({inst:s}),e(function(){U(s)&&c({inst:s})})},[e]),Se(n),n}function U(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ve(e,n)}catch{return!0}}function xe(e,t){return t()}var Le=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?xe:Ee;ae.useSyncExternalStore=C.useSyncExternalStore!==void 0?C.useSyncExternalStore:Le;le.exports=ae;var Re=le.exports;const A=Math.min,j=Math.max,ee=Date.now,z=e=>e!=null,te=(e,t)=>Array.from({length:e},(n,o)=>t(o)),de=e=>{let t,n;return(...o)=>(t||(t=!0,n=e(...o)),n)},D=(e,t)=>{const n=e.t[t];return n===-1?e.o:n},fe=(e,t,n)=>{if(!e.i)return 0;if(e.l>=t)return n?e.u[t]+D(e,t):e.u[t];let o=e.l,s=e.u[o];for(;o<=t&&(e.u[o]=s,o!==t||n);)s+=D(e,o),o++;return e.l=t,s},ne=(e,t)=>fe(e,t),he=(e,t,n)=>{let o=0;if(n>=0)for(;t<e.i-1;){const s=D(e,t++);if((o+=s)>=n){o-s/2>=n&&t--;break}}else for(;t>0;){const s=D(e,--t);if((o-=s)<=n){o+s/2<n&&t++;break}}return A(j(t,0),e.i-1)},re=(e,t,n,o)=>he(e,n,t-o),oe=he,se=(e,t,n)=>({o:t,i:e,l:n?A(n.l,e-1):0,t:te(e,o=>{const s=n&&n.t[o];return z(s)?s:-1}),u:te(e,o=>{if(o===0)return 0;const s=n&&n.u[o];return z(s)?s:-1})}),Te=(e,t,n,o,s=0,c,R)=>{let p,w=t*j(s-1,0),L=0,i=[],u=se(e,t),h=0,a=[0,s];const m=new Set;return{_(){const[r,l]=a,v=ne(u,r),f=re(u,L,r,v),x=oe(u,f,w);return r===f&&l===x?a:a=[f,x]},h:r=>u.t[r]===-1,g:r=>((l,v,f)=>{for(let x=v;x<=f;x++)if(l.t[x]===-1)return!0;return!1})(u,r,oe(u,r,w)),m:r=>ne(u,r),S:r=>D(u,r),v:()=>L,p:()=>w,I:()=>(r=>fe(r,r.i-1,!0))(u),R:()=>i,T:()=>n,M:()=>o,C:r=>re(u,r,0,0),O:()=>(p&&p[1](),new Promise((r,l)=>{p=[()=>{Promise.resolve().then(()=>{r(),p=void 0})},l]})),W:r=>(m.add(r),()=>{m.delete(r)}),H(r,l){(()=>{switch(r){case 1:{const f=l.filter(([H,S])=>u.t[H]!==S);if(!f.length)return!1;const x=[];return f.forEach(([H,S])=>{x.push([S-D(u,H),H]),((I,_,k)=>{I.t[_]=k,I.l=A(_,I.l)})(u,H,S)}),i=x,!0}case 2:return w!==l&&(w=l,!0);case 3:case 4:{const f=L;return(L=l)!==f}}})()&&(m.forEach(f=>{f()}),r===3?R(L):p&&r===1&&p[0]())},k:()=>h,D(r){const l=h;h=r,h===0?c(!1):l!==0||h!==1&&h!==2||c(!0)},J(r){u.i!==r&&(u=se(r,t,u))}}},O=typeof window<"u"?d.useLayoutEffect:d.useEffect,q=(e,t)=>Re.useSyncExternalStore(e,t,t),ie=de(e=>{const t="scrollLeft",n=e[t];e[t]=1;const o=e[t]===0;return e[t]=n,o}),_e=(e,t)=>{let n;const o=e.T(),s=e.M(),c=o?"scrollLeft":"scrollTop",R=()=>n?o?n.scrollWidth:n.scrollHeight:0,p=(i,u)=>{n&&(o&&s&&ie(n)&&(i*=-1),u?n[c]+=i:(n[c]=i,e.D(3)))},w=async(i,u)=>{const h=()=>{let a=u();const m=R(),r=e.p();return m-(a+r)<=0&&(a=m-r),a};if(e.g(i)){do{e.H(4,h());try{await e.O()}catch{return}}while(e.g(i));p(h())}else{const a=h();p(a),e.H(4,a)}},L=i=>i.reduce((u,[h])=>u+h,0);return{$(i){n=i;const u=()=>{let r=i[c];o&&s&&ie(i)&&(r*=-1);const l=e.v();if(l===r)return;const v=e.k(),f=t();v!==0&&f||v===3||e.D(l>r?2:1),e.H(3,r)},h=(()=>{let r;const l=()=>{z(r)&&clearTimeout(r)},v=()=>{l(),r=setTimeout(()=>{r=null,u(),e.D(0)},150)};return v.L=l,v})(),a=()=>{u(),h()},m=(()=>{let r=ee()-50;return(...l)=>{const v=ee();r+50<v&&(r=v,(f=>{if(e.k()!==0&&!f.ctrlKey&&(o?f.deltaX:f.deltaY)){const x=e.v();x>0&&x<e.I()-e.p()&&h()}})(...l))}})();return i.addEventListener("scroll",a),i.addEventListener("wheel",m,{passive:!0}),()=>{i.removeEventListener("scroll",a),i.removeEventListener("wheel",m),h.L()}},j:R,A(i){i=j(i,0),w(e.C(i),()=>i)},F(i,u){i=j(A(i,u-1),0),w(i,()=>e.m(i))},P:(i,u)=>{const h=e.k();if(h===2){const a=L(i);a&&p(a,!0)}else if(h===3){const a=e.v();if(a!==0){const m=L(i);if(e.I()-(a+e.p()+m)<=0)m&&p(a+m);else{const r=i.reduce((l,[v,f])=>(f<u&&(l+=v),l),0);r&&p(r,!0)}}}}}},b="current",be=e=>{const t=d.useRef();return t[b]||(t[b]=e())},ue=e=>{const t=d.useRef(e);return O(()=>{t[b]=e},[e]),t},Me=d.memo(({U:e,B:t,V:n,q:o,G:s})=>{const c=d.useRef(null),R=q(n.W,()=>n.m(o)),p=q(n.W,()=>n.h(o));return O(()=>t.K(c[b],o),[o]),V(s,{ref:c,style:d.useMemo(()=>{const w=n.T(),L=n.M()?"right":"left",i={margin:0,padding:0,position:"absolute",[w?"height":"width"]:"100%",[w?"top":L]:0,[w?L:"top"]:R,visibility:p?"hidden":"visible"};return w&&(i.display="flex"),i},[R,p]),children:e})}),Ve=d.forwardRef(({children:e,scrollSize:t,scrolling:n,horizontal:o,attrs:s},c)=>V("div",{ref:c,...s,children:V("div",{style:d.useMemo(()=>({position:"relative",visibility:"hidden",width:o?t:"100%",height:o?"100%":t,pointerEvents:n?"none":"auto"}),[t,n]),children:e})})),He=({U:e,N:t,V:n,G:o,X:s,Y:c})=>{const R=q(n.W,n.I),p=n.T();return V(o,{ref:t,scrollSize:R,scrolling:s,horizontal:p,attrs:d.useMemo(()=>({...c,style:{overflow:p?"auto hidden":"hidden auto",contain:"strict",width:"100%",height:"100%",padding:0,margin:0,...c.style}}),[c]),children:e})},Ie=d.forwardRef(({children:e,itemSize:t=40,overscan:n=4,initialItemCount:o,horizontal:s,rtl:c,element:R=Ve,itemElement:p="div",onScroll:w,onScrollStop:L,onRangeChange:i,...u},h)=>{const a=d.useMemo(()=>{const y=[];return d.Children.forEach(e,E=>{(g=>!z(g)||typeof g=="boolean")(E)||y.push(E)}),y},[e]),m=a.length,r=ue(w),l=ue(L),[v,f]=d.useState(new Set),[x,H]=d.useState(!1),[S,I,_]=be(()=>{const y=Te(m,t,!!s,!!c,o,g=>{H(g),g||(f(new Set),l[b]&&l[b]())},g=>{r[b]&&r[b](g)}),E=(g=>{let X,N=!1;const J=g.T()?"width":"height",P=new WeakMap,Y=de(()=>new ResizeObserver(T=>{const M=[];for(const{target:W,contentRect:Z}of T)if(W===X)g.H(2,Z[J]);else{const Q=P.get(W);z(Q)&&M.push([Q,Z[J]])}M.length&&(g.H(1,M),N=!0)}));return{Z(T){X=T;const M=Y();return M.observe(T),()=>{M.disconnect()}},K(T,M){const W=Y();return P.set(T,M),W.observe(T),()=>{P.delete(T),W.unobserve(T)}},ee(){const T=N;return N=!1,T}}})(y);return[y,E,_e(y,E.ee)]});S.J(m);const[k,$]=q(S.W,S._),G=q(S.W,S.R),B=d.useRef(null);O(()=>{const y=B[b],E=I.Z(y),g=_.$(y);return()=>{E(),g()}},[]),O(()=>{G.length&&_.P(G,k)},[G]),d.useEffect(()=>{i&&i({start:k,end:$,count:m})},[k,$]),d.useImperativeHandle(h,()=>({get scrollOffset(){return S.v()},get scrollSize(){return _.j()},get viewportSize(){return S.p()},scrollToIndex(y){_.F(y,m)},scrollTo:_.A,scrollBy(y){_.A(S.v()+y)}}),[m]);const F=j(k-n,0),K=A($+n,m-1),pe=d.useMemo(()=>{const y=[];for(let E=F;E<=K;E++)v.add(E);return v.forEach(E=>{const g=a[E];z(g)&&y.push(V(Me,{B:I,V:S,q:E,G:p,U:g},(g==null?void 0:g.key)||E))}),y},[a,v,F,K]);return V(He,{N:B,V:S,G:R,X:x,U:pe,Y:u})}),ce=d.memo(({count:e,Component:t,handle:n})=>{const o=d.useRef(null);return d.useImperativeHandle(n,()=>({scrollToIndex:s=>{var c;(c=o.current)==null||c.scrollToIndex(s)}})),V(Ie,{ref:o,children:Array.from({length:e}).map((s,c)=>V(t,{index:c},c))})});try{ce.displayName="VirtuaList",ce.__docgenInfo={description:"",displayName:"VirtuaList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{ce as V};
//# sourceMappingURL=virtua-dd5981ba.js.map
