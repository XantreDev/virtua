import{r as O}from"./index-5284b0bf.js";import{r as ue}from"./index-480187bb.js";import{a as Z}from"./jsx-runtime-e162df28.js";const k=Math.min,v=Math.max,le=Math.abs,$=Date.now,se=setTimeout,T=e=>e!=null,G=(e,t)=>Array.from({length:e},(s,r)=>t(r)),ce=e=>{const t=[...e].sort((r,o)=>r-o),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},fe=(e,t)=>{let s;const r=()=>{T(s)&&clearTimeout(s)},o=()=>{r(),s=se(()=>{s=null,e()},t)};return o._cancel=r,o},ae=(e,t)=>{let s=$()-t;return(...r)=>{const o=$();s+t<o&&(s=o,e(...r))}},P=e=>{let t,s;return(...r)=>(t||(t=!0,s=e(...r)),s)},y=-1,N=(e,t)=>{const s=e._sizes[t];return s===y?e._defaultItemSize:s},de=(e,t,s)=>{const r=e._sizes[t]===y;return e._sizes[t]=s,e._measuredOffsetIndex=k(t,e._measuredOffsetIndex),r},re=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+N(e,t):e._offsets[t];let r=e._measuredOffsetIndex,o=e._offsets[r];for(;r<=t&&(e._offsets[r]=o,!(r===t&&!s));)o+=N(e,r),r++;return e._measuredOffsetIndex=t,o},me=e=>re(e,e._length-1,!0),X=(e,t)=>re(e,t),ne=(e,t,s)=>{let r=0;if(s>=0)for(;t<e._length-1;){const o=N(e,t++);if((r+=o)>=s){r-o/2>=s&&t--;break}}else for(;t>0;){const o=N(e,--t);if((r-=o)<=s){r+o/2<s&&t++;break}}return k(v(t,0),e._length-1)},Y=(e,t,s,r)=>ne(e,s,t-r),_e=(e,t,s)=>{for(let r=t;r<=s;r++)if(e._sizes[r]===y)return!0;return!1},pe=e=>{const t=e._sizes.filter(r=>r!==y),s=t[0];e._defaultItemSize=t.every(r=>r===s)?s:ce(t)},B=(e,t,s)=>({_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?k(s._measuredOffsetIndex,e-1):0,_sizes:G(e,r=>{const o=s&&s._sizes[r];return T(o)?o:y}),_offsets:G(e,r=>{if(r===0)return 0;const o=s&&s._offsets[r];return T(o)?o:y})}),K=e=>e.reduce((t,[s])=>t+s,0),H=(e,t)=>t.map(([s,r])=>[r-N(e,s),s]),D=0,ee=1,q=2,F=3,M=1,J=2,V=3,oe=4,j=5,be=(e,t,s=0,r,o,S)=>{const c=!t,m=t||40;let n=m*v(s-1,0),l=0,g=0,a,u=B(e,m),f=D,p=!1,z=[0,s],_;const b=new Set,I=()=>me(u),W=()=>{const i=p;return p=!1,i},L=i=>{const d=f;if(f=i,f===D)return!1;if(d===D&&(f===ee||f===q))return!0};return{_getRange(){const[i,d]=z,h=X(u,i),w=Y(u,l,i,h),E=ne(u,w,n);return i===w&&d===E?z:z=[w,E]},_isUnmeasuredItem(i){return u._sizes[i]===y},_hasUnmeasuredItemsInRange(i){return _e(u,v(0,i-2),k(u._length-1,i+2))},_getItemOffset(i){const d=X(u,i);return r?d+v(0,n-I()):d},_getItemSize(i){return N(u,i)},_getScrollOffset(){return l},_getViewportSize(){return n},_getScrollSize(){return I()},_getScrollableDomSize(){return v(I(),n)},_getJumpCount(){return g},_flushJump(){const i=a;return a=void 0,i},_getItemIndexForScrollTo(i){return Y(u,i,0,0)},_waitForScrollDestinationItemsMeasured(){return _&&_[1](),new Promise((i,d)=>{let h=!1;const w=()=>{h||(h=!0,i(),_=void 0)};_=[w,d],se(w,250)})},_subscribe(i){return b.add(i),()=>{b.delete(i)}},_update(i,d){let h,w,E=!1;switch(i){case M:{const R=d.filter(([C,x])=>u._sizes[C]!==x);if(!R.length)break;let A=0;if(f===q)A=K(H(u,R));else if(f===F){const C=H(u,R),[x]=z;l===0||(I()<=l+n?A=K(C):A=K(C.filter(([,ie])=>ie<x)))}A&&(a=A,g++);let Q=!1;R.forEach(([C,x])=>{de(u,C,x)&&(Q=!0)}),c&&Q&&!l&&pe(u),p=h=E=!0;break}case J:{E=n!==d,n=d;break}case V:case oe:{if(l===d)break;if(i===V){const R=W();(f===D||!R)&&f!==F&&(w=L(l>d?q:ee)),h=le(l-d)>n}l=d,E=!0;break}case j:{w=L(d?F:D);break}}E&&(b.forEach(R=>{R(h)}),i===V&&S(l)),_&&i===M&&_[0](),T(w)&&o(w)},_getScrollDirection(){return f},_updateCacheLength(i){u._length!==i&&(u=B(i,m,u))}}},Se=typeof window<"u"?O.useLayoutEffect:O.useEffect,U="current",ve=e=>!T(e)||typeof e=="boolean",ge=e=>{const t=O.useRef(e);return Se(()=>{t[U]=e},[e]),t},Re=(e,t,s)=>{const[r,o]=O.useState(t),S=ge(t);if(O.useLayoutEffect(()=>{const c=()=>{o(()=>S[U]())};return e._subscribe(m=>{m?ue.flushSync(c):c()})},[]),s){const c=t();r!==c&&o(c)}return r},ze=P(e=>{const t="scrollLeft",s=e[t];e[t]=1;const r=e[t]<1;return e[t]=s,r}),Oe=(e,t,s)=>{let r;const o=t?"scrollLeft":"scrollTop",S=()=>r?t?r.scrollWidth:r.scrollHeight:0,c=(n,l)=>t&&s?ze(r)||l?-n:e._getScrollSize()-e._getViewportSize()-n:n,m=async(n,l)=>{if(!r)return;const g=()=>{let a=l();const u=S(),f=e._getViewportSize();return u-(a+f)<=0&&(a=u-f),a};for(;e._update(oe,g()),!!e._hasUnmeasuredItemsInRange(n);)try{await e._waitForScrollDestinationItemsMeasured()}catch{return}r[o]=c(g()),e._update(j,!0)};return{_initRoot(n){r=n;const l=()=>{e._update(V,c(n[o]))},g=fe(()=>{l(),e._update(j,!1)},150),a=()=>{l(),g()},u=ae(f=>{if(e._getScrollDirection()!==D&&!f.ctrlKey&&(t?f.deltaX:f.deltaY)){const p=e._getScrollOffset();p>0&&p<e._getScrollSize()-e._getViewportSize()&&g()}},50);return n.addEventListener("scroll",a),n.addEventListener("wheel",u,{passive:!0}),()=>{n.removeEventListener("scroll",a),n.removeEventListener("wheel",u),g._cancel()}},_getActualScrollSize:S,_scrollTo(n){n=v(n,0),m(e._getItemIndexForScrollTo(n),()=>n)},_scrollToIndex(n,l){n=v(k(n,l-1),0),m(n,()=>e._getItemOffset(n))},_fixScrollJump:n=>{r&&(r[o]+=c(n,!0))}}},Ee=e=>{const t=O.useRef();return t[U]||(t[U]=e())},ye=(e,t)=>{let s;const r=t?"width":"height",o=new WeakMap,S=P(()=>new ResizeObserver(c=>{const m=[];for(const{target:n,contentRect:l}of c)if(n===s)e._update(J,l[r]);else{const g=o.get(n);T(g)&&m.push([g,l[r]])}m.length&&e._update(M,m)}));return{_observeRoot(c){s=c;const m=S();return m.observe(c),()=>{m.disconnect()}},_observeItem(c,m){const n=S();return o.set(c,m),n.observe(c),()=>{o.delete(c),n.unobserve(c)}}}},Le=(e,t)=>{let s;const r="height",o="width",S=new WeakMap,c=new Set,m=new Set,n=new Map,l=(a,u)=>`${a}-${u}`,g=P(()=>new ResizeObserver(a=>{const u=new Set,f=new Set;for(const{target:p,contentRect:z}of a)if(p===s)e._update(J,z[r]),t._update(J,z[o]);else{const _=S.get(p);if(_){const[b,I]=_,W=l(b,I),L=n.get(W),i=[z[r],z[o]];let d,h;L?(L[0]!==i[0]&&(d=!0),L[1]!==i[1]&&(h=!0)):d=h=!0,d&&u.add(b),h&&f.add(I),(d||h)&&n.set(W,i)}}if(u.size){const p=[];u.forEach(z=>{let _=0;m.forEach(b=>{const I=n.get(l(z,b));I&&(_=v(_,I[0]))}),_&&p.push([z,_])}),e._update(M,p)}if(f.size){const p=[];f.forEach(z=>{let _=0;c.forEach(b=>{const I=n.get(l(b,z));I&&(_=v(_,I[1]))}),_&&p.push([z,_])}),t._update(M,p)}}));return{_observeRoot(a){s=a;const u=g();return u.observe(a),()=>{u.disconnect()}},_observeItem(a,u,f){const p=g();return S.set(a,[u,f]),c.add(u),m.add(f),p.observe(a),()=>{S.delete(a),p.unobserve(a)}}}},te=O.forwardRef(({children:e,attrs:t,width:s,height:r,scrolling:o},S)=>Z("div",{ref:S,...t,children:Z("div",{style:O.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:r??"100%",pointerEvents:o?"none":"auto"}),[s,r,o]),children:e})}));try{te.displayName="DefaultWindow",te.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{te as D,Se as a,ge as b,Ee as c,be as d,T as e,ye as f,Oe as g,k as h,ve as i,Le as j,v as m,U as r,Re as u};
//# sourceMappingURL=DefaultWindow-a9fb66b1.js.map
