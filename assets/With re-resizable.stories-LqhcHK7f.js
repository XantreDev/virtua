import{j as O}from"./jsx-runtime-KhpQ_ow-.js";import{r as m}from"./index-G6kSzgdV.js";import{r as K}from"./index-xBZDQ2qw.js";import{V as Z}from"./VList-VCplLbmT.js";import"./useRerender-5pxUOkH4.js";import"./useChildren-TCG2xWgs.js";var Q=function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},s(r,e)};return function(r,e){s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),d=function(){return d=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},d.apply(this,arguments)},F={width:"100%",height:"10px",top:"0px",left:"0px",cursor:"row-resize"},U={width:"10px",height:"100%",top:"0px",left:"0px",cursor:"col-resize"},N={width:"20px",height:"20px",position:"absolute"},tt={top:d(d({},F),{top:"-5px"}),right:d(d({},U),{left:void 0,right:"-5px"}),bottom:d(d({},F),{top:void 0,bottom:"-5px"}),left:d(d({},U),{left:"-5px"}),topRight:d(d({},N),{right:"-10px",top:"-10px",cursor:"ne-resize"}),bottomRight:d(d({},N),{right:"-10px",bottom:"-10px",cursor:"se-resize"}),bottomLeft:d(d({},N),{left:"-10px",bottom:"-10px",cursor:"sw-resize"}),topLeft:d(d({},N),{left:"-10px",top:"-10px",cursor:"nw-resize"})},et=function(s){Q(r,s);function r(){var e=s!==null&&s.apply(this,arguments)||this;return e.onMouseDown=function(t){e.props.onResizeStart(t,e.props.direction)},e.onTouchStart=function(t){e.props.onResizeStart(t,e.props.direction)},e}return r.prototype.render=function(){return m.createElement("div",{className:this.props.className||"",style:d(d({position:"absolute",userSelect:"none"},tt[this.props.direction]),this.props.replaceStyles||{}),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart},this.props.children)},r}(m.PureComponent),it=function(){var s=function(r,e){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},s(r,e)};return function(r,e){s(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),z=function(){return z=Object.assign||function(s){for(var r,e=1,t=arguments.length;e<t;e++){r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(s[i]=r[i])}return s},z.apply(this,arguments)},st={width:"auto",height:"auto"},L=function(s,r,e){return Math.max(Math.min(s,e),r)},X=function(s,r){return Math.round(s/r)*r},S=function(s,r){return new RegExp(s,"i").test(r)},C=function(s){return!!(s.touches&&s.touches.length)},rt=function(s){return!!((s.clientX||s.clientX===0)&&(s.clientY||s.clientY===0))},Y=function(s,r,e){e===void 0&&(e=0);var t=r.reduce(function(o,n,a){return Math.abs(n-s)<Math.abs(r[o]-s)?a:o},0),i=Math.abs(r[t]-s);return e===0||i<e?r[t]:s},j=function(s){return s=s.toString(),s==="auto"||s.endsWith("px")||s.endsWith("%")||s.endsWith("vh")||s.endsWith("vw")||s.endsWith("vmax")||s.endsWith("vmin")?s:s+"px"},H=function(s,r,e,t){if(s&&typeof s=="string"){if(s.endsWith("px"))return Number(s.replace("px",""));if(s.endsWith("%")){var i=Number(s.replace("%",""))/100;return r*i}if(s.endsWith("vw")){var i=Number(s.replace("vw",""))/100;return e*i}if(s.endsWith("vh")){var i=Number(s.replace("vh",""))/100;return t*i}}return s},ot=function(s,r,e,t,i,o,n){return t=H(t,s.width,r,e),i=H(i,s.height,r,e),o=H(o,s.width,r,e),n=H(n,s.height,r,e),{maxWidth:typeof t>"u"?void 0:Number(t),maxHeight:typeof i>"u"?void 0:Number(i),minWidth:typeof o>"u"?void 0:Number(o),minHeight:typeof n>"u"?void 0:Number(n)}},nt=["as","style","className","grid","snap","bounds","boundsByDirection","size","defaultSize","minWidth","minHeight","maxWidth","maxHeight","lockAspectRatio","lockAspectRatioExtraWidth","lockAspectRatioExtraHeight","enable","handleStyles","handleClasses","handleWrapperStyle","handleWrapperClass","children","onResizeStart","onResize","onResizeStop","handleComponent","scale","resizeRatio","snapGap"],I="__resizable_base__",q=function(s){it(r,s);function r(e){var t=s.call(this,e)||this;return t.ratio=1,t.resizable=null,t.parentLeft=0,t.parentTop=0,t.resizableLeft=0,t.resizableRight=0,t.resizableTop=0,t.resizableBottom=0,t.targetLeft=0,t.targetTop=0,t.appendBase=function(){if(!t.resizable||!t.window)return null;var i=t.parentNode;if(!i)return null;var o=t.window.document.createElement("div");return o.style.width="100%",o.style.height="100%",o.style.position="absolute",o.style.transform="scale(0, 0)",o.style.left="0",o.style.flex="0 0 100%",o.classList?o.classList.add(I):o.className+=I,i.appendChild(o),o},t.removeBase=function(i){var o=t.parentNode;o&&o.removeChild(i)},t.ref=function(i){i&&(t.resizable=i)},t.state={isResizing:!1,width:typeof(t.propsSize&&t.propsSize.width)>"u"?"auto":t.propsSize&&t.propsSize.width,height:typeof(t.propsSize&&t.propsSize.height)>"u"?"auto":t.propsSize&&t.propsSize.height,direction:"right",original:{x:0,y:0,width:0,height:0},backgroundStyle:{height:"100%",width:"100%",backgroundColor:"rgba(0,0,0,0)",cursor:"auto",opacity:0,position:"fixed",zIndex:9999,top:"0",left:"0",bottom:"0",right:"0"},flexBasis:void 0},t.onResizeStart=t.onResizeStart.bind(t),t.onMouseMove=t.onMouseMove.bind(t),t.onMouseUp=t.onMouseUp.bind(t),t}return Object.defineProperty(r.prototype,"parentNode",{get:function(){return this.resizable?this.resizable.parentNode:null},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"window",{get:function(){return!this.resizable||!this.resizable.ownerDocument?null:this.resizable.ownerDocument.defaultView},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"propsSize",{get:function(){return this.props.size||this.props.defaultSize||st},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"size",{get:function(){var e=0,t=0;if(this.resizable&&this.window){var i=this.resizable.offsetWidth,o=this.resizable.offsetHeight,n=this.resizable.style.position;n!=="relative"&&(this.resizable.style.position="relative"),e=this.resizable.style.width!=="auto"?this.resizable.offsetWidth:i,t=this.resizable.style.height!=="auto"?this.resizable.offsetHeight:o,this.resizable.style.position=n}return{width:e,height:t}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sizeStyle",{get:function(){var e=this,t=this.props.size,i=function(a){if(typeof e.state[a]>"u"||e.state[a]==="auto")return"auto";if(e.propsSize&&e.propsSize[a]&&e.propsSize[a].toString().endsWith("%")){if(e.state[a].toString().endsWith("%"))return e.state[a].toString();var h=e.getParentSize(),p=Number(e.state[a].toString().replace("px","")),l=p/h[a]*100;return l+"%"}return j(e.state[a])},o=t&&typeof t.width<"u"&&!this.state.isResizing?j(t.width):i("width"),n=t&&typeof t.height<"u"&&!this.state.isResizing?j(t.height):i("height");return{width:o,height:n}},enumerable:!1,configurable:!0}),r.prototype.getParentSize=function(){if(!this.parentNode)return this.window?{width:this.window.innerWidth,height:this.window.innerHeight}:{width:0,height:0};var e=this.appendBase();if(!e)return{width:0,height:0};var t=!1,i=this.parentNode.style.flexWrap;i!=="wrap"&&(t=!0,this.parentNode.style.flexWrap="wrap"),e.style.position="relative",e.style.minWidth="100%",e.style.minHeight="100%";var o={width:e.offsetWidth,height:e.offsetHeight};return t&&(this.parentNode.style.flexWrap=i),this.removeBase(e),o},r.prototype.bindEvents=function(){this.window&&(this.window.addEventListener("mouseup",this.onMouseUp),this.window.addEventListener("mousemove",this.onMouseMove),this.window.addEventListener("mouseleave",this.onMouseUp),this.window.addEventListener("touchmove",this.onMouseMove,{capture:!0,passive:!1}),this.window.addEventListener("touchend",this.onMouseUp))},r.prototype.unbindEvents=function(){this.window&&(this.window.removeEventListener("mouseup",this.onMouseUp),this.window.removeEventListener("mousemove",this.onMouseMove),this.window.removeEventListener("mouseleave",this.onMouseUp),this.window.removeEventListener("touchmove",this.onMouseMove,!0),this.window.removeEventListener("touchend",this.onMouseUp))},r.prototype.componentDidMount=function(){if(!(!this.resizable||!this.window)){var e=this.window.getComputedStyle(this.resizable);this.setState({width:this.state.width||this.size.width,height:this.state.height||this.size.height,flexBasis:e.flexBasis!=="auto"?e.flexBasis:void 0})}},r.prototype.componentWillUnmount=function(){this.window&&this.unbindEvents()},r.prototype.createSizeForCssProperty=function(e,t){var i=this.propsSize&&this.propsSize[t];return this.state[t]==="auto"&&this.state.original[t]===e&&(typeof i>"u"||i==="auto")?"auto":e},r.prototype.calculateNewMaxFromBoundary=function(e,t){var i=this.props.boundsByDirection,o=this.state.direction,n=i&&S("left",o),a=i&&S("top",o),h,p;if(this.props.bounds==="parent"){var l=this.parentNode;l&&(h=n?this.resizableRight-this.parentLeft:l.offsetWidth+(this.parentLeft-this.resizableLeft),p=a?this.resizableBottom-this.parentTop:l.offsetHeight+(this.parentTop-this.resizableTop))}else this.props.bounds==="window"?this.window&&(h=n?this.resizableRight:this.window.innerWidth-this.resizableLeft,p=a?this.resizableBottom:this.window.innerHeight-this.resizableTop):this.props.bounds&&(h=n?this.resizableRight-this.targetLeft:this.props.bounds.offsetWidth+(this.targetLeft-this.resizableLeft),p=a?this.resizableBottom-this.targetTop:this.props.bounds.offsetHeight+(this.targetTop-this.resizableTop));return h&&Number.isFinite(h)&&(e=e&&e<h?e:h),p&&Number.isFinite(p)&&(t=t&&t<p?t:p),{maxWidth:e,maxHeight:t}},r.prototype.calculateNewSizeFromDirection=function(e,t){var i=this.props.scale||1,o=this.props.resizeRatio||1,n=this.state,a=n.direction,h=n.original,p=this.props,l=p.lockAspectRatio,u=p.lockAspectRatioExtraHeight,y=p.lockAspectRatioExtraWidth,w=h.width,f=h.height,v=u||0,b=y||0;return S("right",a)&&(w=h.width+(e-h.x)*o/i,l&&(f=(w-b)/this.ratio+v)),S("left",a)&&(w=h.width-(e-h.x)*o/i,l&&(f=(w-b)/this.ratio+v)),S("bottom",a)&&(f=h.height+(t-h.y)*o/i,l&&(w=(f-v)*this.ratio+b)),S("top",a)&&(f=h.height-(t-h.y)*o/i,l&&(w=(f-v)*this.ratio+b)),{newWidth:w,newHeight:f}},r.prototype.calculateNewSizeFromAspectRatio=function(e,t,i,o){var n=this.props,a=n.lockAspectRatio,h=n.lockAspectRatioExtraHeight,p=n.lockAspectRatioExtraWidth,l=typeof o.width>"u"?10:o.width,u=typeof i.width>"u"||i.width<0?e:i.width,y=typeof o.height>"u"?10:o.height,w=typeof i.height>"u"||i.height<0?t:i.height,f=h||0,v=p||0;if(a){var b=(y-f)*this.ratio+v,x=(w-f)*this.ratio+v,W=(l-v)/this.ratio+f,c=(u-v)/this.ratio+f,g=Math.max(l,b),_=Math.min(u,x),E=Math.max(y,W),M=Math.min(w,c);e=L(e,g,_),t=L(t,E,M)}else e=L(e,l,u),t=L(t,y,w);return{newWidth:e,newHeight:t}},r.prototype.setBoundingClientRect=function(){if(this.props.bounds==="parent"){var e=this.parentNode;if(e){var t=e.getBoundingClientRect();this.parentLeft=t.left,this.parentTop=t.top}}if(this.props.bounds&&typeof this.props.bounds!="string"){var i=this.props.bounds.getBoundingClientRect();this.targetLeft=i.left,this.targetTop=i.top}if(this.resizable){var o=this.resizable.getBoundingClientRect(),n=o.left,a=o.top,h=o.right,p=o.bottom;this.resizableLeft=n,this.resizableRight=h,this.resizableTop=a,this.resizableBottom=p}},r.prototype.onResizeStart=function(e,t){if(!(!this.resizable||!this.window)){var i=0,o=0;if(e.nativeEvent&&rt(e.nativeEvent)?(i=e.nativeEvent.clientX,o=e.nativeEvent.clientY):e.nativeEvent&&C(e.nativeEvent)&&(i=e.nativeEvent.touches[0].clientX,o=e.nativeEvent.touches[0].clientY),this.props.onResizeStart&&this.resizable){var n=this.props.onResizeStart(e,t,this.resizable);if(n===!1)return}this.props.size&&(typeof this.props.size.height<"u"&&this.props.size.height!==this.state.height&&this.setState({height:this.props.size.height}),typeof this.props.size.width<"u"&&this.props.size.width!==this.state.width&&this.setState({width:this.props.size.width})),this.ratio=typeof this.props.lockAspectRatio=="number"?this.props.lockAspectRatio:this.size.width/this.size.height;var a,h=this.window.getComputedStyle(this.resizable);if(h.flexBasis!=="auto"){var p=this.parentNode;if(p){var l=this.window.getComputedStyle(p).flexDirection;this.flexDir=l.startsWith("row")?"row":"column",a=h.flexBasis}}this.setBoundingClientRect(),this.bindEvents();var u={original:{x:i,y:o,width:this.size.width,height:this.size.height},isResizing:!0,backgroundStyle:z(z({},this.state.backgroundStyle),{cursor:this.window.getComputedStyle(e.target).cursor||"auto"}),direction:t,flexBasis:a};this.setState(u)}},r.prototype.onMouseMove=function(e){var t=this;if(!(!this.state.isResizing||!this.resizable||!this.window)){if(this.window.TouchEvent&&C(e))try{e.preventDefault(),e.stopPropagation()}catch{}var i=this.props,o=i.maxWidth,n=i.maxHeight,a=i.minWidth,h=i.minHeight,p=C(e)?e.touches[0].clientX:e.clientX,l=C(e)?e.touches[0].clientY:e.clientY,u=this.state,y=u.direction,w=u.original,f=u.width,v=u.height,b=this.getParentSize(),x=ot(b,this.window.innerWidth,this.window.innerHeight,o,n,a,h);o=x.maxWidth,n=x.maxHeight,a=x.minWidth,h=x.minHeight;var W=this.calculateNewSizeFromDirection(p,l),c=W.newHeight,g=W.newWidth,_=this.calculateNewMaxFromBoundary(o,n);this.props.snap&&this.props.snap.x&&(g=Y(g,this.props.snap.x,this.props.snapGap)),this.props.snap&&this.props.snap.y&&(c=Y(c,this.props.snap.y,this.props.snapGap));var E=this.calculateNewSizeFromAspectRatio(g,c,{width:_.maxWidth,height:_.maxHeight},{width:a,height:h});if(g=E.newWidth,c=E.newHeight,this.props.grid){var M=X(g,this.props.grid[0]),T=X(c,this.props.grid[1]),B=this.props.snapGap||0;g=B===0||Math.abs(M-g)<=B?M:g,c=B===0||Math.abs(T-c)<=B?T:c}var J={width:g-w.width,height:c-w.height};if(f&&typeof f=="string"){if(f.endsWith("%")){var k=g/b.width*100;g=k+"%"}else if(f.endsWith("vw")){var D=g/this.window.innerWidth*100;g=D+"vw"}else if(f.endsWith("vh")){var P=g/this.window.innerHeight*100;g=P+"vh"}}if(v&&typeof v=="string"){if(v.endsWith("%")){var k=c/b.height*100;c=k+"%"}else if(v.endsWith("vw")){var D=c/this.window.innerWidth*100;c=D+"vw"}else if(v.endsWith("vh")){var P=c/this.window.innerHeight*100;c=P+"vh"}}var R={width:this.createSizeForCssProperty(g,"width"),height:this.createSizeForCssProperty(c,"height")};this.flexDir==="row"?R.flexBasis=R.width:this.flexDir==="column"&&(R.flexBasis=R.height),K.flushSync(function(){t.setState(R)}),this.props.onResize&&this.props.onResize(e,y,this.resizable,J)}},r.prototype.onMouseUp=function(e){var t=this.state,i=t.isResizing,o=t.direction,n=t.original;if(!(!i||!this.resizable)){var a={width:this.size.width-n.width,height:this.size.height-n.height};this.props.onResizeStop&&this.props.onResizeStop(e,o,this.resizable,a),this.props.size&&this.setState(this.props.size),this.unbindEvents(),this.setState({isResizing:!1,backgroundStyle:z(z({},this.state.backgroundStyle),{cursor:"auto"})})}},r.prototype.updateSize=function(e){this.setState({width:e.width,height:e.height})},r.prototype.renderResizer=function(){var e=this,t=this.props,i=t.enable,o=t.handleStyles,n=t.handleClasses,a=t.handleWrapperStyle,h=t.handleWrapperClass,p=t.handleComponent;if(!i)return null;var l=Object.keys(i).map(function(u){return i[u]!==!1?m.createElement(et,{key:u,direction:u,onResizeStart:e.onResizeStart,replaceStyles:o&&o[u],className:n&&n[u]},p&&p[u]?p[u]:null):null});return m.createElement("div",{className:h,style:a},l)},r.prototype.render=function(){var e=this,t=Object.keys(this.props).reduce(function(n,a){return nt.indexOf(a)!==-1||(n[a]=e.props[a]),n},{}),i=z(z(z({position:"relative",userSelect:this.state.isResizing?"none":"auto"},this.props.style),this.sizeStyle),{maxWidth:this.props.maxWidth,maxHeight:this.props.maxHeight,minWidth:this.props.minWidth,minHeight:this.props.minHeight,boxSizing:"border-box",flexShrink:0});this.state.flexBasis&&(i.flexBasis=this.state.flexBasis);var o=this.props.as||"div";return m.createElement(o,z({ref:this.ref,style:i,className:this.props.className},t),this.state.isResizing&&m.createElement("div",{style:this.state.backgroundStyle}),this.props.children,this.renderResizer())},r.defaultProps={as:"div",onResizeStart:function(){},onResize:function(){},onResizeStop:function(){},enable:{top:!0,right:!0,bottom:!0,left:!0,topRight:!0,bottomRight:!0,bottomLeft:!0,topLeft:!0},style:{},grid:[1,1],lockAspectRatio:!1,lockAspectRatioExtraWidth:0,lockAspectRatioExtraHeight:0,scale:1,resizeRatio:1,snapGap:0},r}(m.PureComponent);const wt={component:Z},at={height:50,borderBottom:"solid 4px #ccc",background:"#fff"},ht={top:!1,bottom:!0,right:!1,left:!1,topRight:!1,topLeft:!1,bottomRight:!1,bottomLeft:!1},pt=({id:s,height:r,onResize:e})=>O(q,{size:{height:r,width:"100%"},enable:ht,style:at,onResizeStop:(t,i,o,n)=>{e(s,n.height)},children:s}),A={name:"With re-resizable",render:()=>{const[s,r]=m.useState(()=>Array.from({length:1e3},()=>50)),e=m.useCallback((t,i)=>{r(o=>{const n=[...o];return n[t]+=i,n})},[]);return O(q,{defaultSize:{width:400,height:400},style:{border:"solid 4px #ccc"},children:O(Z,{style:{width:"100%",height:"100%"},children:Array.from({length:1e3},(t,i)=>O(pt,{id:i,height:s[i],onResize:e},i))})})}};var V,$,G;A.parameters={...A.parameters,docs:{...(V=A.parameters)==null?void 0:V.docs,source:{originalSource:`{
  name: "With re-resizable",
  render: () => {
    const [heights, setHeights] = useState(() => Array.from({
      length: 1000
    }, () => 50));
    const onResize = useCallback((id: number, height: number) => {
      setHeights(p => {
        const s = [...p];
        s[id] += height;
        return s;
      });
    }, []);
    return <Resizable defaultSize={{
      width: 400,
      height: 400
    }} style={{
      border: "solid 4px #ccc"
    }}>
        <VList style={{
        width: "100%",
        height: "100%"
      }}>
          {Array.from({
          length: 1000
        }, (_, i) => <ResizableItem key={i} id={i} height={heights[i]} onResize={onResize} />)}
        </VList>
      </Resizable>;
  }
}`,...(G=($=A.parameters)==null?void 0:$.docs)==null?void 0:G.source}}};const bt=["Default"];export{A as Default,bt as __namedExportsOrder,wt as default};
//# sourceMappingURL=With re-resizable.stories-LqhcHK7f.js.map
