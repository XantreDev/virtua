import{j as C}from"./index-CKMfL3Jx.js";import{r as n,a as M}from"./entry-preview-D8_MYwTg.js";import{u as Q,A as W,a as X,g as Y,b as D,r,U as Z,c as $,d as ee,m as se,e as te,s as re,S as oe,f as le,h as ne,i as ae,j as ie}from"./useRerender-DYbmKg6o.js";import{u as ce,a as j,L as ue}from"./useChildren-CgulYzJ9.js";const fe=n.forwardRef(({children:x,count:H,overscan:N=4,keepMounted:S,itemSize:g,shift:k,horizontal:w,cache:U,startMargin:q,ssrCount:h,as:u="div",item:P="div",scrollRef:E,onScroll:B,onScrollEnd:G,onRangeChange:b},J)=>{u=u;const[K,a]=ce(x,H),v=n.useRef(null),I=n.useRef(!!h),z=j(B),R=j(G),[e,f,o,d]=Q(()=>{const s=!!w,t=le(a,g,h,U,!g,q);return[t,ne(t,s),ae(t,s),s]});a!==e._getItemsLength()&&e._update(W,[a,k]);const T=X(e),[m,_]=e._getRange(),L=e._getScrollDirection(),F=e._getJumpCount(),O=e._getTotalSize(),i=[],[V,y]=Y(m,_,N,L,a),p=s=>{const t=K(s);return C.jsx(ue,{_resizer:f._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_element:P,_children:t,_isHorizontal:d,_isSSR:I[r]},ie(t,s))};D(()=>{I[r]=!1;const s=e._subscribe(Z,c=>{c?M.flushSync(T):T()}),t=e._subscribe($,()=>{z[r]&&z[r](e._getScrollOffset())}),l=e._subscribe(ee,()=>{R[r]&&R[r]()}),A=c=>{f._observeRoot(c),o._observe(c)};return E?se(()=>A(E[r])):A(v[r].parentElement),()=>{s(),t(),l(),f._dispose(),o._dispose()}},[]),D(()=>{o._fixScrollJump()},[F]),n.useEffect(()=>{b&&b(m,_)},[m,_]),n.useImperativeHandle(J,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return te(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let s=V,t=y;s<=t;s++)i.push(p(s));if(S){const s=[],t=[];re(S).forEach(l=>{l<V&&s.push(p(l)),l>y&&t.push(p(l))}),i.unshift(...s),i.push(...t)}return C.jsx(u,{ref:v,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?O:"100%",height:d?"100%":O,pointerEvents:L!==oe?"none":"auto"},children:i})});fe.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{fe as V};
