{"version":3,"file":"ListItem-f83180fc.js","sources":["../../src/react/ListItem.tsx"],"sourcesContent":["import {\n  memo,\n  useRef,\n  useMemo,\n  CSSProperties,\n  ReactElement,\n  ReactNode,\n} from \"react\";\nimport { UPDATE_SIZE, VirtualStore } from \"../core/store\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { useSelector } from \"./useSelector\";\nimport { ListResizer } from \"../core/resizer\";\nimport { refKey } from \"./utils\";\nimport { isRTLDocument } from \"../core/environment\";\n\n/**\n * Props of customized item component for {@link VList}.\n */\nexport interface CustomItemComponentProps {\n  style: CSSProperties;\n  children: ReactNode;\n}\n\nexport type CustomItemComponent = React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<CustomItemComponentProps> & React.RefAttributes<any>\n>;\n\ntype ListItemProps = {\n  _children: ReactNode;\n  _resizer: ListResizer;\n  _store: VirtualStore;\n  _index: number;\n  _element: \"div\";\n  _isHorizontal: boolean;\n};\n\nexport const ListItem = memo(\n  ({\n    _children: children,\n    _resizer: resizer,\n    _store: store,\n    _index: index,\n    _element: Element,\n    _isHorizontal: isHorizontal,\n  }: ListItemProps): ReactElement => {\n    const ref = useRef<HTMLDivElement>(null);\n\n    const offset = useSelector(\n      store,\n      () => store._getItemOffset(index),\n      UPDATE_SIZE,\n      true\n    );\n    const hide = useSelector(\n      store,\n      () => store._isUnmeasuredItem(index),\n      UPDATE_SIZE,\n      true\n    );\n\n    // The index may be changed if elements are inserted to or removed from the start of props.children\n    useIsomorphicLayoutEffect(\n      () => resizer._observeItem(ref[refKey]!, index),\n      [index]\n    );\n\n    return (\n      <Element\n        ref={ref}\n        style={useMemo((): CSSProperties => {\n          const leftOrRightKey = isRTLDocument() ? \"right\" : \"left\";\n          const style: CSSProperties = {\n            margin: 0,\n            padding: 0,\n            position: \"absolute\",\n            [isHorizontal ? \"height\" : \"width\"]: \"100%\",\n            [isHorizontal ? \"top\" : leftOrRightKey]: 0,\n            [isHorizontal ? leftOrRightKey : \"top\"]: offset,\n            visibility: hide ? \"hidden\" : \"visible\",\n            // willChange: \"transform\",\n          };\n          if (isHorizontal) {\n            style.display = \"flex\";\n          }\n          return style;\n        }, [offset, hide])}\n      >\n        {children}\n      </Element>\n    );\n  }\n);\n"],"names":["ListItem","memo","children","resizer","store","index","Element","isHorizontal","ref","useRef","offset","useSelector","UPDATE_SIZE","hide","useIsomorphicLayoutEffect","refKey","jsx","useMemo","leftOrRightKey","isRTLDocument","style"],"mappings":"6JAoCO,MAAAA,EAAAC,EAAA,KAAiB,CAAA,CACrB,UAAAC,EACY,SAAAC,EACD,OAAAC,EACF,OAAAC,EACA,SAAAC,EACE,cAAAC,CACK,IAAA,CAEf,MAAAC,EAAAC,SAAA,IAAA,EAEAC,EAAAC,EAAeP,EACb,IAAAA,EAAA,eAAAC,CAAA,EACgCO,EAChC,EACA,EAEFC,EAAAF,EAAaP,EACX,IAAAA,EAAA,kBAAAC,CAAA,EACmCO,EACnC,EACA,EAIF,OAAAE,EAAA,IAAAX,EAAA,aAAAK,EAAAO,CAAA,EAAAV,CAAA,EACgD,CAAAA,CAAA,CACxC,EAGRW,EACEV,EAAC,CAAA,IAAAE,EACC,MAAAS,EAAA,QAAA,IAAA,CAEE,MAAAC,EAAAC,IAAA,QAAA,OACAC,EAAA,CAA6B,OAAA,EACnB,QAAA,EACC,SAAA,WACC,CAAAb,EAAA,SAAA,OAAA,EAAA,OAC2B,CAAAA,EAAA,MAAAW,CAAA,EAAA,EACI,CAAAX,EAAAW,EAAA,KAAA,EAAAR,EACA,WAAAG,EAAA,SAAA,SACX,EAGhC,OAAAN,IACEa,EAAA,QAAA,QAEFA,CAAO,EAAA,CAAAV,EAAAG,CAAA,CAAA,EACQ,SAAAX,CAEhB,CAAA,CACH,CAGN"}