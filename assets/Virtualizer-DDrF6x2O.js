import{j as L}from"./jsx-runtime-CmfuFKGs.js";import{r as l}from"./index-obz6jkze.js";import{a as J,A as K,b as M,u as O,r,U as F,h as Q,j as W,m as X,g as Y,c as Z,k as $,S as ee,d as se,l as re,n as te}from"./useRerender-DlYYAwJz.js";import{u as oe,a as V,L as le}from"./useChildren-36KMAVWT.js";import{r as ne}from"./index-C4ZtItU4.js";const ie=l.forwardRef(({children:y,count:A,overscan:C=4,itemSize:_,shift:k,horizontal:D,cache:j,startMargin:H,endMargin:N,ssrCount:p,as:c="div",item:w="div",scrollRef:S,onScroll:U,onScrollEnd:q,onRangeChange:g},P)=>{c=c;const[B,n]=oe(y,A),b=l.useRef(null),E=l.useRef(!!p),v=V(U),h=V(q),[e,u,o,f]=J(()=>{const s=!!D,t=se(n,_,p,j,!_,H,N);return[t,re(t,s),te(t,s),s]});n!==e._getItemsLength()&&e._update(K,[n,k]);const z=M(e),[d,m]=e._getRange(),I=e._getScrollDirection(),G=e._getJumpCount(),R=e._getTotalSize(),T=[];O(()=>{E[r]=!1;const s=e._subscribe(F,a=>{a?ne.flushSync(z):z()}),t=e._subscribe(Q,()=>{v[r]&&v[r](e._getScrollOffset())}),i=e._subscribe(W,()=>{h[r]&&h[r]()}),x=a=>{u._observeRoot(a),o._observe(a)};return S?X(()=>x(S[r])):x(b[r].parentElement),()=>{s(),t(),i(),u._dispose(),o._dispose()}},[]),O(()=>{o._fixScrollJump()},[G]),l.useEffect(()=>{g&&g(d,m)},[d,m]),l.useImperativeHandle(P,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return Y(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let[s,t]=Z(d,m,C,I,n);s<=t;s++){const i=B(s);T.push(L.jsx(le,{_resizer:u._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_element:w,_children:i,_isHorizontal:f,_isSSR:E[r]},$(i,s)))}return L.jsx(c,{ref:b,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:f?R:"100%",height:f?"100%":R,pointerEvents:I!==ee?"none":"auto"},children:T})});ie.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ie as V};
