import{j as C}from"./jsx-runtime-DCrfGL6_.js";import{c as me,r as M}from"./index-98wxwTcn.js";import{_ as P}from"./defineProperty-CGxbSGuy.js";import{r as et}from"./raf-schd.esm-CmoV45_-.js";import{a as R,j as tt}from"./emotion-react.browser.esm-BHyxizD5.js";import{r as rt}from"./index-SCI4cgSJ.js";import{V as We}from"./VList-DsZjPMQR.js";import"./hoist-non-react-statics.cjs-Chi50N7D.js";import"./Virtualizer-DhI2ZnoE.js";import"./useRerender-DRs1Esn8.js";import"./useChildren-BZcvfk6l.js";function nt(e){if(Array.isArray(e))return e}function at(e,r){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var n,a,i,l,c=[],o=!0,u=!1;try{if(i=(t=t.call(e)).next,r===0){if(Object(t)!==t)return;o=!1}else for(;!(o=(n=i.call(t)).done)&&(c.push(n.value),c.length!==r);o=!0);}catch(s){u=!0,a=s}finally{try{if(!o&&t.return!=null&&(l=t.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}function ie(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ze(e,r){if(e){if(typeof e=="string")return ie(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ie(e,r)}}function it(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ke(e,r){return nt(e)||at(e,r)||ze(e,r)||it()}var K={},U={};Object.defineProperty(U,"__esModule",{value:!0});U.bind=void 0;function ot(e,r){var t=r.type,n=r.listener,a=r.options;return e.addEventListener(t,n,a),function(){e.removeEventListener(t,n,a)}}U.bind=ot;var Z={},$=me&&me.__assign||function(){return $=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},$.apply(this,arguments)};Object.defineProperty(Z,"__esModule",{value:!0});Z.bindAll=void 0;var ut=U;function ye(e){if(!(typeof e>"u"))return typeof e=="boolean"?{capture:e}:e}function lt(e,r){if(r==null)return e;var t=$($({},e),{options:$($({},ye(r)),ye(e.options))});return t}function ct(e,r,t){var n=r.map(function(a){var i=lt(a,t);return(0,ut.bind)(e,i)});return function(){n.forEach(function(i){return i()})}}Z.bindAll=ct;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var r=U;Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return r.bind}});var t=Z;Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return t.bindAll}})})(K);function st(e){if(Array.isArray(e))return ie(e)}function dt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ft(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e){return st(e)||dt(e)||ze(e)||ft()}function Be(e){var r=null;return function(){return r||(r={value:e.apply(void 0,arguments)}),r.value}}var _=Be(function(){var r=navigator,t=r.userAgent;return t.includes("AppleWebKit")&&!t.includes("Chrome")}),oe={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function gt(e){var r=e.dragLeave;return _()?r.hasOwnProperty(oe.isLeavingWindow):!1}(function(){if(typeof window>"u"||!_())return;function r(){return{enterCount:0,isOverWindow:!1}}var t=r();function n(){t=r()}K.bindAll(window,[{type:"dragstart",listener:function(){t.enterCount=0,t.isOverWindow=!0}},{type:"drop",listener:n},{type:"dragend",listener:n},{type:"dragenter",listener:function(i){!t.isOverWindow&&t.enterCount===0&&(i[oe.isEnteringWindow]=!0),t.isOverWindow=!0,t.enterCount++}},{type:"dragleave",listener:function(i){t.enterCount--,t.isOverWindow&&t.enterCount===0&&(i[oe.isLeavingWindow]=!0,t.isOverWindow=!1)}}],{capture:!0})})();function pt(e){return"nodeName"in e}function vt(e){var r=e.dragLeave,t=r.type,n=r.relatedTarget;return t!=="dragleave"?!1:_()?gt({dragLeave:r}):n==null||n instanceof HTMLIFrameElement?!0:pt(n)&&!document.contains(n)}function mt(e){var r=e.onDragEnd;return[{type:"pointermove",listener:function(){var t=0;return function(){if(t<20){t++;return}r()}}()},{type:"pointerdown",listener:r}]}function yt(e,r){var t=r.property,n=r.rule,a=r.priority,i=a===void 0?"":a,l=e.style.getPropertyValue(t),c=e.style.getPropertyPriority(t);return e.style.setProperty(t,n,i),function(){e.style.setProperty(t,l,c)}}function bt(e){var r=e.current,t=document.elementFromPoint(r.input.clientX,r.input.clientY);return t instanceof HTMLElement?yt(t,{property:"pointer-events",rule:"auto",priority:"important"}):null}function ht(){var e,r=document.createElement("style");return r.setAttribute("pdnd-post-drag-fix","true"),document.head.appendChild(r),(e=r.sheet)===null||e===void 0||e.insertRule("* { pointer-events: none !important; }"),function(){document.head.removeChild(r)}}function be(e){var r=e.current;queueMicrotask(function(){var t=bt({current:r}),n=ht();function a(){i(),t==null||t(),n()}var i=K.bindAll(window,[{type:"pointerdown",listener:a},{type:"pointermove",listener:a},{type:"focusin",listener:a},{type:"focusout",listener:a},{type:"dragstart",listener:a},{type:"dragenter",listener:a},{type:"dragover",listener:a}],{capture:!0})})}function de(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var te=et(function(e){return e()}),N=function(){var e=null;function r(n){var a=requestAnimationFrame(function(){e=null,n()});e={frameId:a,fn:n}}function t(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:r,flush:t}}();function St(e){var r=e.source,t=e.initial,n=e.dispatchEvent,a={dropTargets:[]};function i(c){n(c),a={dropTargets:c.payload.location.current.dropTargets}}var l={start:function(o){var u=o.nativeSetDragImage,s={current:t,previous:a,initial:t};i({eventName:"onGenerateDragPreview",payload:{source:r,location:s,nativeSetDragImage:u}}),N.schedule(function(){i({eventName:"onDragStart",payload:{source:r,location:s}})})},dragUpdate:function(o){var u=o.current;N.flush(),te.cancel(),i({eventName:"onDropTargetChange",payload:{source:r,location:{initial:t,previous:a,current:u}}})},drag:function(o){var u=o.current;te(function(){N.flush();var s={initial:t,previous:a,current:u};i({eventName:"onDrag",payload:{source:r,location:s}})})},drop:function(o){var u=o.current,s=o.updatedSourcePayload;N.flush(),te.cancel(),i({eventName:"onDrop",payload:{source:s??r,location:{current:u,previous:a,initial:t}}})}};return l}var ue={isActive:!1};function Ne(){return!ue.isActive}function Ot(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function xt(e){var r=e.current,t=e.next;if(r.length!==t.length)return!0;for(var n=0;n<r.length;n++)if(r[n].element!==t[n].element)return!0;return!1}function Dt(e){var r=e.event,t=e.dragType,n=e.getDropTargetsOver,a=e.dispatchEvent;if(!Ne())return;var i=Et({event:r,dragType:t,getDropTargetsOver:n});ue.isActive=!0;var l={current:i};re({event:r,current:i.dropTargets});var c=St({source:t.payload,dispatchEvent:a,initial:i});function o(d){var f=xt({current:l.current.dropTargets,next:d.dropTargets});l.current=d,f&&c.dragUpdate({current:l.current})}function u(d){var f=de(d),p=n({target:d.target,input:f,source:t.payload,current:l.current.dropTargets});p.length&&(d.preventDefault(),re({event:d,current:p})),o({dropTargets:p,input:f})}function s(){l.current.dropTargets.length&&o({dropTargets:[],input:l.current.input}),c.drop({current:l.current,updatedSourcePayload:null}),g()}function g(){ue.isActive=!1,v()}var v=K.bindAll(window,[{type:"dragover",listener:function(f){u(f),c.drag({current:l.current})}},{type:"dragenter",listener:u},{type:"dragleave",listener:function(f){vt({dragLeave:f})&&(o({input:l.current.input,dropTargets:[]}),t.startedFrom==="external"&&s())}},{type:"drop",listener:function(f){f.preventDefault(),re({event:f,current:l.current.dropTargets}),c.drop({current:l.current,updatedSourcePayload:t.type==="external"?t.getDropPayload(f):null}),g(),t.startedFrom==="internal"&&be({current:l.current})}},{type:"dragend",listener:function(f){s(),t.startedFrom==="internal"&&be({current:l.current})}}].concat(Ue(mt({onDragEnd:s}))),{capture:!0});c.start({nativeSetDragImage:Ot(r)})}function re(e){var r,t=e.event,n=e.current,a=(r=n[0])===null||r===void 0?void 0:r.dropEffect;a!=null&&t.dataTransfer&&(t.dataTransfer.dropEffect=a)}function Et(e){var r=e.event,t=e.dragType,n=e.getDropTargetsOver,a=de(r);if(t.startedFrom==="external")return{input:a,dropTargets:[]};var i=n({input:a,source:t.payload,target:r.target,current:[]});return{input:a,dropTargets:i}}var he={canStart:Ne,start:Dt},le=new Map;function wt(e){var r=e.typeKey,t=e.mount,n=le.get(r);if(n)return n.usageCount++,n;var a={typeKey:r,unmount:t(),usageCount:1};return le.set(r,a),a}function At(e){var r=wt(e);return function(){r.usageCount--,!(r.usageCount>0)&&(r.unmount(),le.delete(e.typeKey))}}function B(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return function(){r.forEach(function(a){return a()})}}function Ge(e,r){var t=r.attribute,n=r.value;return e.setAttribute(t,n),function(){return e.removeAttribute(t)}}function Se(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function F(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Se(Object(t),!0).forEach(function(n){P(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function ne(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Tt(e))||r){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,l=!1,c;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return i=u.done,u},e:function(u){l=!0,c=u},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(l)throw c}}}}function Tt(e,r){if(e){if(typeof e=="string")return Oe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Oe(e,r)}}function Oe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function ae(e){return e.slice(0).reverse()}function Pt(e){var r=e.typeKey,t=e.defaultDropEffect,n=new WeakMap,a="data-drop-target-for-".concat(r),i="[".concat(a,"]");function l(d){return n.set(d.element,d),function(){return n.delete(d.element)}}function c(d){return B(Ge(d.element,{attribute:a,value:"true"}),l(d))}function o(d){var f,p,m,b,h=d.source,O=d.target,S=d.input,x=d.result,y=x===void 0?[]:x;if(O==null)return y;if(!(O instanceof Element))return O instanceof Node?o({source:h,target:O.parentElement,input:S,result:y}):y;var w=O.closest(i);if(w==null)return y;var D=n.get(w);if(D==null)return y;var A={input:S,source:h,element:D.element};if(D.canDrop&&!D.canDrop(A))return o({source:h,target:D.element.parentElement,input:S,result:y});var T=(f=(p=D.getData)===null||p===void 0?void 0:p.call(D,A))!==null&&f!==void 0?f:{},j=(m=(b=D.getDropEffect)===null||b===void 0?void 0:b.call(D,A))!==null&&m!==void 0?m:t,E={data:T,element:D.element,dropEffect:j,isActiveDueToStickiness:!1};return o({source:h,target:D.element.parentElement,input:S,result:[].concat(Ue(y),[E])})}function u(d){var f=d.eventName,p=d.payload,m=ne(p.location.current.dropTargets),b;try{for(m.s();!(b=m.n()).done;){var h,O=b.value,S=n.get(O.element),x=F(F({},p),{},{self:O});S==null||(h=S[f])===null||h===void 0||h.call(S,x)}}catch(y){m.e(y)}finally{m.f()}}var s={onGenerateDragPreview:u,onDrag:u,onDragStart:u,onDrop:u,onDropTargetChange:function(f){var p=f.payload,m=new Set(p.location.current.dropTargets.map(function(W){return W.element})),b=new Set,h=ne(p.location.previous.dropTargets),O;try{for(h.s();!(O=h.n()).done;){var S,x=O.value;b.add(x.element);var y=n.get(x.element),w=m.has(x.element),D=F(F({},p),{},{self:x});if(y==null||(S=y.onDropTargetChange)===null||S===void 0||S.call(y,D),!w){var A;y==null||(A=y.onDragLeave)===null||A===void 0||A.call(y,D)}}}catch(W){h.e(W)}finally{h.f()}var T=ne(p.location.current.dropTargets),j;try{for(T.s();!(j=T.n()).done;){var E,L,ee=j.value;if(!b.has(ee.element)){var ve=F(F({},p),{},{self:ee}),I=n.get(ee.element);I==null||(E=I.onDropTargetChange)===null||E===void 0||E.call(I,ve),I==null||(L=I.onDragEnter)===null||L===void 0||L.call(I,ve)}}}catch(W){T.e(W)}finally{T.f()}}};function g(d){s[d.eventName](d)}function v(d){var f=d.source,p=d.target,m=d.input,b=d.current,h=o({source:f,target:p,input:m});if(h.length>=b.length)return h;for(var O=ae(b),S=ae(h),x=[],y=0;y<O.length;y++){var w,D=O[y],A=S[y];if(A!=null){x.push(A);continue}var T=x[y-1],j=O[y-1];if((T==null?void 0:T.element)!==(j==null?void 0:j.element))break;var E=n.get(D.element);if(!E)break;var L={input:m,source:f,element:E.element};if(E.canDrop&&!E.canDrop(L)||!((w=E.getIsSticky)!==null&&w!==void 0&&w.call(E,L)))break;x.push(F(F({},D),{},{isActiveDueToStickiness:!0}))}return ae(x)}return{dropTargetForConsumers:c,getIsOver:v,dispatchEvent:g}}function jt(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=It(e))||r){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,l=!1,c;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return i=u.done,u},e:function(u){l=!0,c=u},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(l)throw c}}}}function It(e,r){if(e){if(typeof e=="string")return xe(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return xe(e,r)}}function xe(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function De(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ft(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?De(Object(t),!0).forEach(function(n){P(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):De(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function Ct(){var e=new Set,r=null;function t(i){r&&(!i.canMonitor||i.canMonitor(r.canMonitorArgs))&&r.active.add(i)}function n(i){var l=Ft({},i);return e.add(l),t(l),function(){e.delete(l),r&&r.active.delete(l)}}function a(i){var l=i.eventName,c=i.payload;if(l==="onGenerateDragPreview"){r={canMonitorArgs:{initial:c.location.initial,source:c.source},active:new Set};var o=jt(e),u;try{for(o.s();!(u=o.n()).done;){var s=u.value;t(s)}}catch(m){o.e(m)}finally{o.f()}}if(r){for(var g=Array.from(r.active),v=0,d=g;v<d.length;v++){var f=d[v];if(r.active.has(f)){var p;(p=f[l])===null||p===void 0||p.call(f,c)}}l==="onDrop"&&(r.active.clear(),r=null)}}return{dispatchEvent:a,monitorForConsumers:n}}function Rt(e){var r=e.typeKey,t=e.mount,n=e.dispatchEventToSource,a=e.defaultDropEffect,i=Ct(),l=Pt({typeKey:r,defaultDropEffect:a});function c(s){n==null||n(s),l.dispatchEvent(s),i.dispatchEvent(s)}function o(s){var g=s.event,v=s.dragType;he.start({event:g,dragType:v,getDropTargetsOver:l.getIsOver,dispatchEvent:c})}function u(){function s(){var g={canStart:he.canStart,start:o};return t(g)}return At({typeKey:r,mount:s})}return{registerUsage:u,dropTarget:l.dropTargetForConsumers,monitor:i.monitorForConsumers}}var kt=Be(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Lt="pdnd:android-fallback",Ee="text/plain",Mt="text/uri-list",$t="application/vnd.pdnd",Q=new WeakMap;function Ht(e){return Q.set(e.element,e),function(){Q.delete(e.element)}}var fe=Rt({typeKey:"element",defaultDropEffect:"move",mount:function(r){return K.bind(document,{type:"dragstart",listener:function(n){var a,i,l,c,o,u;if(r.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var s=n.target;if(!(s instanceof HTMLElement))return null;var g=Q.get(s);if(!g)return null;var v=de(n),d={element:g.element,dragHandle:(a=g.dragHandle)!==null&&a!==void 0?a:null,input:v};if(g.canDrag&&!g.canDrag(d))return n.preventDefault(),null;if(g.dragHandle){var f=document.elementFromPoint(v.clientX,v.clientY);if(!g.dragHandle.contains(f))return n.preventDefault(),null}var p=(i=(l=g.getInitialDataForExternal)===null||l===void 0?void 0:l.call(g,d))!==null&&i!==void 0?i:null;if(p)for(var m=0,b=Object.entries(p);m<b.length;m++){var h=Ke(b[m],2),O=h[0],S=h[1];n.dataTransfer.setData(O,S??"")}var x=n.dataTransfer.types;kt()&&!x.includes(Ee)&&!x.includes(Mt)&&n.dataTransfer.setData(Ee,Lt),n.dataTransfer.setData($t,"");var y={element:g.element,dragHandle:(c=g.dragHandle)!==null&&c!==void 0?c:null,data:(o=(u=g.getInitialData)===null||u===void 0?void 0:u.call(g,d))!==null&&o!==void 0?o:{}},w={type:"element",payload:y,startedFrom:"internal"};r.start({event:n,dragType:w})}}})},dispatchEventToSource:function(r){var t,n,a=r.eventName,i=r.payload;(t=Q.get(i.source.element))===null||t===void 0||(n=t[a])===null||n===void 0||n.call(t,i)}}),Wt=fe.dropTarget,ge=fe.monitor;function zt(e){return B(fe.registerUsage(),Ht(e),Ge(e.element,{attribute:"draggable",value:"true"}))}function Kt(e){var r=e.list,t=e.startIndex,n=e.finishIndex;if(t===-1||n===-1)return r;var a=Array.from(r),i=a.splice(t,1),l=Ke(i,1),c=l[0];return a.splice(n,0,c),a}function Ut(e){return function(r){var t=r.container;return Object.assign(t.style,{borderLeft:"".concat(e.x," solid transparent"),borderTop:"".concat(e.y," solid transparent")}),{x:0,y:0}}}function Bt(){return{x:0,y:0}}function Nt(e){var r=e.render,t=e.nativeSetDragImage,n=e.getOffset,a=n===void 0?Bt:n,i=document.createElement("div");Object.assign(i.style,{position:"fixed",top:0,left:0,zIndex:2147483647,pointerEvents:"none"}),document.body.append(i);var l=r({container:i}),c=a({container:i});if(_()){var o=i.getBoundingClientRect();i.style.left="-".concat(o.width-1e-4,"px")}t==null||t(i,c.x,c.y);function u(){s(),l==null||l(),document.body.removeChild(i)}var s=ge({onDragStart:u,onDrop:u})}function we(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function Ae(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?we(Object(t),!0).forEach(function(n){P(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):we(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var Gt={top:function(r,t){return Math.abs(t.y-r.top)},right:function(r,t){return Math.abs(r.right-t.x)},bottom:function(r,t){return Math.abs(r.bottom-t.y)},left:function(r,t){return Math.abs(t.x-r.left)}},Xe=Symbol("closestEdge");function Xt(e,r){var t,n,a=r.element,i=r.input,l=r.allowedEdges,c={x:i.clientX,y:i.clientY},o=a.getBoundingClientRect(),u=l.map(function(g){return{edge:g,value:Gt[g](o,c)}}),s=(t=(n=u.sort(function(g,v){return g.value-v.value})[0])===null||n===void 0?void 0:n.edge)!==null&&t!==void 0?t:null;return Ae(Ae({},e),{},P({},Xe,s))}function Ye(e){var r;return(r=e[Xe])!==null&&r!==void 0?r:null}function Yt(e){var r=e.startIndex,t=e.closestEdgeOfTarget,n=e.indexOfTarget,a=e.axis;if(r===-1||n===-1||r===n)return r;if(t==null)return n;var i=a==="vertical"&&t==="bottom"||a==="horizontal"&&t==="right",l=r<n;return l?i?n:n-1:i?n+1:n}var z=new Map,J=new Set;function qe(e){qt(e);var r=z.get(e);if(r)return r;var t={timeOfEngagementStart:Date.now()};return z.set(e,t),t}function qt(e){J.add(e)}function Vt(e){J.clear(),e(),z.forEach(function(r,t){J.has(t)||z.delete(t)}),J.clear()}function Jt(){z.clear()}var Te=new Map;function Qt(e){var r=Te.get(e);if(r)return r;var t=Zt(e);return Te.set(e,t),t}function Zt(e){var r={type:"idle"},t=[];function n(o){if(r.type==="running"){var u=o-r.timeLastFrameFinished,s=r,g=s.latestArgs,v=document.elementFromPoint(g.location.current.input.clientX,g.location.current.input.clientY);Vt(function(){t.forEach(function(d){return d({underUsersPointer:v,latestArgs:g,timeSinceLastFrame:u})})}),r.timeLastFrameFinished=o,r.frameId=requestAnimationFrame(n)}}function a(){r.type!=="idle"&&(cancelAnimationFrame(r.frameId),Jt(),r={type:"idle"})}function i(o){r.type==="idle"&&(r={type:"initializing",latestArgs:o,frameId:requestAnimationFrame(function(u){r.type==="initializing"&&(r={type:"running",timeLastFrameFinished:u,latestArgs:r.latestArgs,frameId:requestAnimationFrame(n)})})})}function l(o){if(r.type==="idle"){i(o);return}r.latestArgs=o}e({onDragStart:i,onDropTargetChange:l,onDrag:l,onDrop:a});var c={onFrame:function(u){t.push(u)}};return c}var ce="data-auto-scrollable",_t="[".concat(ce,'="true"]');function er(e){return e.setAttribute(ce,"true"),function(){return e.removeAttribute(ce)}}function Pe(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function je(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Pe(Object(t),!0).forEach(function(n){P(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Pe(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}var tr={startHitboxAtPercentageRemainingOfElement:{top:.25,right:.25,bottom:.25,left:.25},maxScrollAtPercentageRemainingOfHitbox:{top:.5,right:.5,bottom:.5,left:.5},timeDampeningDurationMs:300,maxMainAxisHitboxSize:180},rr={standard:15*60,fast:25*60};function Ve(e){var r;return je(je({},tr),{},{maxPixelScrollPerSecond:rr[(r=e==null?void 0:e.maxScrollSpeed)!==null&&r!==void 0?r:"standard"]})}var nr={top:function(r){return r.scrollTop>0},right:function(r){return Math.ceil(r.scrollLeft)+r.clientWidth<r.scrollWidth},bottom:function(r){return Math.ceil(r.scrollTop)+r.clientHeight<r.scrollHeight},left:function(r){return r.scrollLeft>0}},ar=["top","right","bottom","left"],Ie={start:"top",end:"bottom",point:"y",size:"height"},Fe={start:"left",end:"right",point:"x",size:"width"},Je={vertical:{mainAxis:Ie,crossAxis:Fe},horizontal:{mainAxis:Fe,crossAxis:Ie}},pe={top:"start",right:"end",bottom:"end",left:"start"};function G(e){var r=e.edge,t=e.axis;return function(a){var i,l=a.clientRect,c=a.config,o=Je[t],u=o.mainAxis,s=o.crossAxis,g=pe[r],v=Math.min(c.startHitboxAtPercentageRemainingOfElement[r]*l[u.size],c.maxMainAxisHitboxSize);return DOMRect.fromRect((i={},P(i,u.point,g==="start"?l[u.point]:l[u.point]+l[u.size]-v),P(i,s.point,l[s.point]),P(i,u.size,v),P(i,s.size,l[s.size]),i))}}var ir={top:G({axis:"vertical",edge:"top"}),right:G({axis:"horizontal",edge:"right"}),bottom:G({axis:"vertical",edge:"bottom"}),left:G({axis:"horizontal",edge:"left"})};function se(e){var r=e.startOfRange,t=e.endOfRange,n=e.value,a=r<t;if(!a||n<r)return 0;if(n>t)return 1;var i=t-r;return(n-r)/i}function or(e){var r=e.timeSinceLastFrame,t=e.config,n=t.maxPixelScrollPerSecond/1e3,a=Math.ceil(n*r),i=t.maxPixelScrollPerSecond/60;return Math.min(a,i)}function ur(e){var r=e.client,t=e.axis,n=e.edge,a=e.hitbox,i=e.config,l=Je[t].mainAxis,c=pe[n],o=a[l.size]*i.maxScrollAtPercentageRemainingOfHitbox[n];if(c==="end")return se({startOfRange:a[l.start],endOfRange:a[l.end]-o,value:r[l.point]});var u=se({startOfRange:a[l.start]+o,endOfRange:a[l.end],value:r[l.point]});return 1-u}function X(e){var r=e.client,t=e.timeSinceLastFrame,n=e.engagement,a=e.axis,i=e.hitbox,l=e.edge,c=e.isDistanceDampeningEnabled,o=e.config,u=or({timeSinceLastFrame:t,config:o}),s=c?ur({client:r,edge:l,hitbox:i,axis:a,config:o}):1,g=se({startOfRange:n.timeOfEngagementStart,endOfRange:n.timeOfEngagementStart+o.timeDampeningDurationMs,value:Date.now()}),v=s*g,d=Math.max(u*v,1),f=pe[l];return f==="end"?d:-1*d}function lr(e){var r=e.client,t=e.clientRect;return r.x>=t.x&&r.x<=t.x+t.width&&r.y>=t.y&&r.y<=t.y+t.height}function cr(e){return e.getBoundingClientRect()}function Qe(e){var r=e.element,t=e.input,n=e.timeSinceLastFrame,a=e.engagement,i=e.config,l=e.getRect,c=l===void 0?cr:l,o={x:t.clientX,y:t.clientY},u=c(r),s=ar.reduce(function(d,f){var p=ir[f]({clientRect:u,config:i});return!lr({client:o,clientRect:p})||!nr[f](r)||d.set(f,{edge:f,hitbox:p}),d},new Map),g=function(){var d="horizontal",f=s.get("left");if(f)return X({client:o,edge:f.edge,hitbox:f.hitbox,axis:d,timeSinceLastFrame:n,engagement:a,isDistanceDampeningEnabled:!0,config:i});var p=s.get("right");return p?X({client:o,edge:p.edge,hitbox:p.hitbox,axis:d,timeSinceLastFrame:n,engagement:a,isDistanceDampeningEnabled:!0,config:i}):0}(),v=function(){var d="vertical",f=s.get("bottom");if(f)return X({client:o,edge:f.edge,hitbox:f.hitbox,axis:d,timeSinceLastFrame:n,engagement:a,isDistanceDampeningEnabled:!0,config:i});var p=s.get("top");return p?X({client:o,edge:p.edge,hitbox:p.hitbox,axis:d,timeSinceLastFrame:n,engagement:a,isDistanceDampeningEnabled:!0,config:i}):0}();return{left:g,top:v}}function sr(e,r){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=dr(e))||r){t&&(e=t);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,l=!1,c;return{s:function(){t=t.call(e)},n:function(){var u=t.next();return i=u.done,u},e:function(u){l=!0,c=u},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(l)throw c}}}}function dr(e,r){if(e){if(typeof e=="string")return Ce(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ce(e,r)}}function Ce(e,r){(r==null||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function Ze(e){return!!(e.top||e.left)}function _e(e){var r,t=e.target,n=e.input,a=e.source,i=e.findEntry,l=e.timeSinceLastFrame,c=e.available,o=c===void 0?{top:!0,left:!0}:c;if(!Ze(o)||!t)return o;var u=t.closest(_t);if(!u)return o;var s=i(u);if(!s)return o;function g(){var b;return _e({target:(b=u==null?void 0:u.parentElement)!==null&&b!==void 0?b:null,findEntry:i,source:a,timeSinceLastFrame:l,input:n,available:o})}var v={input:n,source:a,element:u};if(s.canScroll&&!s.canScroll(v))return g();var d=qe(u),f=Ve((r=s.getConfiguration)===null||r===void 0?void 0:r.call(s,v)),p=Qe({element:u,engagement:d,input:n,timeSinceLastFrame:l,config:f}),m={top:0,left:0};return o.top&&p.top!==0&&(m.top=p.top,o.top=!1),o.left&&p.left!==0&&(m.left=p.left,o.left=!1),(m.top!==0||m.left!==0)&&u.scrollBy(m),g()}function fr(e){var r=e.input,t=e.timeSinceLastFrame,n=e.available,a=e.source,i=e.entries,l=document.documentElement,c={input:r,source:a,element:l},o=sr(i),u;try{for(o.s();!(u=o.n()).done;){var s,g=u.value;if(!(g.canScroll&&!g.canScroll(c))){var v=qe(l),d=Ve((s=g.getConfiguration)===null||s===void 0?void 0:s.call(g,c)),f=Qe({element:l,engagement:v,input:r,config:d,getRect:function(b){return DOMRect.fromRect({y:0,x:0,width:b.clientWidth,height:b.clientHeight})},timeSinceLastFrame:t}),p={top:n.top?f.top:0,left:n.left?f.left:0};(p.top!==0||p.left!==0)&&l.scrollBy(p);break}}}catch(m){o.e(m)}finally{o.f()}}function gr(e){var r=e.input,t=e.findEntry,n=e.timeSinceLastFrame,a=e.source,i=e.getWindowScrollEntries,l=e.underUsersPointer,c=_e({target:l,timeSinceLastFrame:n,input:r,source:a,findEntry:t});Ze(c)&&fr({input:r,source:a,entries:i(),timeSinceLastFrame:n,available:c})}function Re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,n)}return t}function pr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Re(Object(t),!0).forEach(function(n){P(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function vr(e){var r=e.monitor,t=new Map,n=new Set;function a(u){return t.set(u.element,u),B(er(u.element),function(){return t.delete(u.element)})}function i(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=pr({},u);return n.add(s),function(){return n.delete(s)}}function l(u){var s;return(s=t.get(u))!==null&&s!==void 0?s:null}function c(){return Array.from(n)}function o(u){var s=u.latestArgs,g=u.underUsersPointer,v=u.timeSinceLastFrame;gr({input:s.location.current.input,source:s.source,findEntry:l,underUsersPointer:g,timeSinceLastFrame:v,getWindowScrollEntries:c})}return Qt(r).onFrame(o),{autoScroll:a,autoScrollWindow:i}}var mr=vr({monitor:ge}),yr=mr.autoScroll,k={borderRadius:0,thickness:2,backgroundColor:"var(--ds-border-selected, #0C66E4)"},H=8,br=R({display:"block",position:"absolute",zIndex:1,pointerEvents:"none",background:k.backgroundColor,"::before":{content:'""',width:H,height:H,boxSizing:"border-box",position:"absolute",border:"".concat(k.thickness,"px solid ").concat(k.backgroundColor),borderRadius:"50%"}}),Y=(k.thickness-H)/2,ke=H/2,hr={horizontal:R({height:k.thickness,left:ke,right:0,"::before":{left:-H}}),vertical:R({width:k.thickness,top:ke,bottom:0,"::before":{top:-H}})},Sr={top:"horizontal",bottom:"horizontal",left:"vertical",right:"vertical"},Or={top:R({top:"var(--local-line-offset)","::before":{top:Y}}),right:R({right:"var(--local-line-offset)","::before":{right:Y}}),bottom:R({bottom:"var(--local-line-offset)","::before":{bottom:Y}}),left:R({left:"var(--local-line-offset)","::before":{left:Y}})};function xr(e){var r=e.edge,t=e.gap,n=t===void 0?"0px":t,a="calc(-0.5 * (".concat(n," + ").concat(k.thickness,"px))"),i=Sr[r];return tt("div",{css:[br,hr[i],Or[r]],style:{"--local-line-offset":a}})}const Lr={component:We},q={type:"idle"},Le={type:"dragging"},Dr=({id:e})=>{const r=M.useRef(null),t=M.useRef(null),[n,a]=M.useState(q);return M.useEffect(()=>{const i=r.current,l={id:e};return B(zt({element:i,dragHandle:t.current,getInitialData:()=>l,onGenerateDragPreview({nativeSetDragImage:c}){Nt({nativeSetDragImage:c,getOffset:Ut({x:"16px",y:"8px"}),render({container:o}){return a({type:"preview",container:o}),()=>a(Le)}})},onDragStart(){a(Le)},onDrop(){a(q)}}),Wt({element:i,canDrop({source:c}){return c.data.id!==e},getIsSticky:()=>!0,getData({input:c}){return Xt(l,{element:i,input:c,allowedEdges:["top","bottom"]})},onDrag({self:c}){const o=Ye(c.data);a(u=>u.type==="is-over"&&u.closestEdge===o?u:{type:"is-over",closestEdge:o})},onDragLeave(){a(q)},onDrop(){a(q)}}))},[e]),C.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-start",columnGap:16,padding:"8px 16px",height:40,borderBottom:"solid 1px #ccc",background:"#fff",opacity:n.type==="dragging"?.4:void 0,zIndex:n.type==="is-over"&&n.closestEdge?1:void 0,pointerEvents:"auto"},ref:r,children:[C.jsx("div",{ref:t,style:{cursor:"grab"},children:"⠿"}),C.jsx("div",{children:e}),n.type==="is-over"&&n.closestEdge&&C.jsx(xr,{edge:n.closestEdge}),n.type==="preview"&&rt.createPortal(C.jsx("div",{style:{padding:"8px 16px",background:"#fff"},children:e}),n.container)]})},V={name:"With pragmatic-drag-and-drop",render:()=>{const[e,r]=M.useState(()=>Array.from({length:1e3},(t,n)=>({id:n+1})));return M.useEffect(()=>{const t=document.getElementById("vlist");return B(ge({onDrop({location:n,source:a}){const i=n.current.dropTargets[0];if(!i)return;const l=e.findIndex(u=>u.id===a.data.id);if(l<0)return;const c=e.findIndex(u=>u.id===i.data.id);if(c<0)return;const o=Yt({startIndex:l,closestEdgeOfTarget:Ye(i.data),indexOfTarget:c,axis:"vertical"});o!==l&&r(u=>Kt({list:u,startIndex:l,finishIndex:o}))}}),yr({canScroll:()=>!0,element:t}))},[e]),C.jsx(We,{id:"vlist",style:{width:400,height:600},children:e.map(t=>C.jsx(Dr,{id:t.id},t.id))})}};var Me,$e,He;V.parameters={...V.parameters,docs:{...(Me=V.parameters)==null?void 0:Me.docs,source:{originalSource:`{
  name: "With pragmatic-drag-and-drop",
  render: () => {
    const [items, setItems] = useState(() => Array.from({
      length: 1000
    }, (_, i) => ({
      id: i + 1
    })));
    useEffect(() => {
      // get scrollable element of VList
      const scrollContainer = document.getElementById("vlist")!;
      return combine(monitorForElements({
        onDrop({
          location,
          source
        }) {
          const target = location.current.dropTargets[0];
          if (!target) {
            return;
          }
          const startIndex = items.findIndex(item => item.id === source.data.id);
          if (startIndex < 0) {
            return;
          }
          const indexOfTarget = items.findIndex(item => item.id === target.data.id);
          if (indexOfTarget < 0) {
            return;
          }
          const finishIndex = getReorderDestinationIndex({
            startIndex,
            closestEdgeOfTarget: extractClosestEdge(target.data),
            indexOfTarget,
            axis: "vertical"
          });
          if (finishIndex !== startIndex) {
            setItems(prev => {
              return reorder({
                list: prev,
                startIndex,
                finishIndex
              });
            });
          }
        }
      }), autoScrollForElements({
        canScroll: () => true,
        element: scrollContainer
      }));
    }, [items]);
    return <VList id="vlist" style={{
      width: 400,
      height: 600
    }}>
        {items.map(item => <SortableItem key={item.id} id={item.id} />)}
      </VList>;
  }
}`,...(He=($e=V.parameters)==null?void 0:$e.docs)==null?void 0:He.source}}};const Mr=["Default"];export{V as Default,Mr as __namedExportsOrder,Lr as default};
