import{j as w}from"./jsx-runtime-c3d7f245.js";import{r as O}from"./index-c6dae603.js";import{A as ie}from"./AutoSizer-8f234528.js";import{a as $,_ as ne}from"./assertThisInitialized-60dddfb4.js";import{_ as ae}from"./inheritsLoose-495bf4f7.js";var U=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function oe(n,t){return!!(n===t||U(n)&&U(t))}function se(n,t){if(n.length!==t.length)return!1;for(var r=0;r<n.length;r++)if(!oe(n[r],t[r]))return!1;return!0}function W(n,t){t===void 0&&(t=se);var r,i=[],o,c=!1;function l(){for(var u=[],h=0;h<arguments.length;h++)u[h]=arguments[h];return c&&r===this&&t(u,i)||(o=n.apply(this,u),c=!0,r=this,i=u),o}return l}var le=typeof performance=="object"&&typeof performance.now=="function",q=le?function(){return performance.now()}:function(){return Date.now()};function H(n){cancelAnimationFrame(n.id)}function ce(n,t){var r=q();function i(){q()-r>=t?n.call(null):o.id=requestAnimationFrame(i)}var o={id:requestAnimationFrame(i)};return o}var A=-1;function V(n){if(n===void 0&&(n=!1),A===-1||n){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),A=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return A}var C=null;function B(n){if(n===void 0&&(n=!1),C===null||n){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var i=document.createElement("div"),o=i.style;return o.width="100px",o.height="100px",t.appendChild(i),document.body.appendChild(t),t.scrollLeft>0?C="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?C="negative":C="positive-ascending"),document.body.removeChild(t),C}return C}var ue=150,de=function(t,r){return t};function fe(n){var t,r=n.getItemOffset,i=n.getEstimatedTotalSize,o=n.getItemSize,c=n.getOffsetForIndexAndAlignment,l=n.getStartIndexForOffset,u=n.getStopIndexForStartIndex,h=n.initInstanceProps,S=n.shouldResetStyleCacheOnItemSizeChange,_=n.validateProps;return t=function(z){ae(M,z);function M(I){var e;return e=z.call(this,I)||this,e._instanceProps=h(e.props,$(e)),e._outerRef=void 0,e._resetIsScrollingTimeoutId=null,e.state={instance:$(e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof e.props.initialScrollOffset=="number"?e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},e._callOnItemsRendered=void 0,e._callOnItemsRendered=W(function(a,s,f,m){return e.props.onItemsRendered({overscanStartIndex:a,overscanStopIndex:s,visibleStartIndex:f,visibleStopIndex:m})}),e._callOnScroll=void 0,e._callOnScroll=W(function(a,s,f){return e.props.onScroll({scrollDirection:a,scrollOffset:s,scrollUpdateWasRequested:f})}),e._getItemStyle=void 0,e._getItemStyle=function(a){var s=e.props,f=s.direction,m=s.itemSize,v=s.layout,d=e._getItemStyleCache(S&&m,S&&v,S&&f),p;if(d.hasOwnProperty(a))p=d[a];else{var g=r(e.props,a,e._instanceProps),T=o(e.props,a,e._instanceProps),x=f==="horizontal"||v==="horizontal",E=f==="rtl",N=x?g:0;d[a]=p={position:"absolute",left:E?void 0:N,right:E?N:void 0,top:x?0:g,height:x?"100%":T,width:x?T:"100%"}}return p},e._getItemStyleCache=void 0,e._getItemStyleCache=W(function(a,s,f){return{}}),e._onScrollHorizontal=function(a){var s=a.currentTarget,f=s.clientWidth,m=s.scrollLeft,v=s.scrollWidth;e.setState(function(d){if(d.scrollOffset===m)return null;var p=e.props.direction,g=m;if(p==="rtl")switch(B()){case"negative":g=-m;break;case"positive-descending":g=v-f-m;break}return g=Math.max(0,Math.min(g,v-f)),{isScrolling:!0,scrollDirection:d.scrollOffset<m?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._onScrollVertical=function(a){var s=a.currentTarget,f=s.clientHeight,m=s.scrollHeight,v=s.scrollTop;e.setState(function(d){if(d.scrollOffset===v)return null;var p=Math.max(0,Math.min(v,m-f));return{isScrolling:!0,scrollDirection:d.scrollOffset<p?"forward":"backward",scrollOffset:p,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(a){var s=e.props.outerRef;e._outerRef=a,typeof s=="function"?s(a):s!=null&&typeof s=="object"&&s.hasOwnProperty("current")&&(s.current=a)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&H(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=ce(e._resetIsScrolling,ue)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1,null)})},e}M.getDerivedStateFromProps=function(e,a){return me(e,a),_(e),null};var y=M.prototype;return y.scrollTo=function(e){e=Math.max(0,e),this.setState(function(a){return a.scrollOffset===e?null:{scrollDirection:a.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},y.scrollToItem=function(e,a){a===void 0&&(a="auto");var s=this.props,f=s.itemCount,m=s.layout,v=this.state.scrollOffset;e=Math.max(0,Math.min(e,f-1));var d=0;if(this._outerRef){var p=this._outerRef;m==="vertical"?d=p.scrollWidth>p.clientWidth?V():0:d=p.scrollHeight>p.clientHeight?V():0}this.scrollTo(c(this.props,e,a,v,this._instanceProps,d))},y.componentDidMount=function(){var e=this.props,a=e.direction,s=e.initialScrollOffset,f=e.layout;if(typeof s=="number"&&this._outerRef!=null){var m=this._outerRef;a==="horizontal"||f==="horizontal"?m.scrollLeft=s:m.scrollTop=s}this._callPropsCallbacks()},y.componentDidUpdate=function(){var e=this.props,a=e.direction,s=e.layout,f=this.state,m=f.scrollOffset,v=f.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var d=this._outerRef;if(a==="horizontal"||s==="horizontal")if(a==="rtl")switch(B()){case"negative":d.scrollLeft=-m;break;case"positive-ascending":d.scrollLeft=m;break;default:var p=d.clientWidth,g=d.scrollWidth;d.scrollLeft=g-p-m;break}else d.scrollLeft=m;else d.scrollTop=m}this._callPropsCallbacks()},y.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&H(this._resetIsScrollingTimeoutId)},y.render=function(){var e=this.props,a=e.children,s=e.className,f=e.direction,m=e.height,v=e.innerRef,d=e.innerElementType,p=e.innerTagName,g=e.itemCount,T=e.itemData,x=e.itemKey,E=x===void 0?de:x,N=e.layout,Z=e.outerElementType,J=e.outerTagName,Q=e.style,X=e.useIsScrolling,Y=e.width,D=this.state.isScrolling,L=f==="horizontal"||N==="horizontal",ee=L?this._onScrollHorizontal:this._onScrollVertical,P=this._getRangeToRender(),te=P[0],re=P[1],F=[];if(g>0)for(var b=te;b<=re;b++)F.push(O.createElement(a,{data:T,key:E(b,T),index:b,isScrolling:X?D:void 0,style:this._getItemStyle(b)}));var k=i(this.props,this._instanceProps);return O.createElement(Z||J||"div",{className:s,onScroll:ee,ref:this._outerRefSetter,style:ne({position:"relative",height:m,width:Y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:f},Q)},O.createElement(d||p||"div",{children:F,ref:v,style:{height:L?"100%":k,pointerEvents:D?"none":void 0,width:L?k:"100%"}}))},y._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var e=this.props.itemCount;if(e>0){var a=this._getRangeToRender(),s=a[0],f=a[1],m=a[2],v=a[3];this._callOnItemsRendered(s,f,m,v)}}if(typeof this.props.onScroll=="function"){var d=this.state,p=d.scrollDirection,g=d.scrollOffset,T=d.scrollUpdateWasRequested;this._callOnScroll(p,g,T)}},y._getRangeToRender=function(){var e=this.props,a=e.itemCount,s=e.overscanCount,f=this.state,m=f.isScrolling,v=f.scrollDirection,d=f.scrollOffset;if(a===0)return[0,0,0,0];var p=l(this.props,d,this._instanceProps),g=u(this.props,p,d,this._instanceProps),T=!m||v==="backward"?Math.max(1,s):1,x=!m||v==="forward"?Math.max(1,s):1;return[Math.max(0,p-T),Math.max(0,Math.min(a-1,g+x)),p,g]},M}(O.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var me=function(t,r){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,r.instance},he=50,R=function(t,r,i){var o=t,c=o.itemSize,l=i.itemMetadataMap,u=i.lastMeasuredIndex;if(r>u){var h=0;if(u>=0){var S=l[u];h=S.offset+S.size}for(var _=u+1;_<=r;_++){var z=c(_);l[_]={offset:h,size:z},h+=z}i.lastMeasuredIndex=r}return l[r]},pe=function(t,r,i){var o=r.itemMetadataMap,c=r.lastMeasuredIndex,l=c>0?o[c].offset:0;return l>=i?G(t,r,c,0,i):ve(t,r,Math.max(0,c),i)},G=function(t,r,i,o,c){for(;o<=i;){var l=o+Math.floor((i-o)/2),u=R(t,l,r).offset;if(u===c)return l;u<c?o=l+1:u>c&&(i=l-1)}return o>0?o-1:0},ve=function(t,r,i,o){for(var c=t.itemCount,l=1;i<c&&R(t,i,r).offset<o;)i+=l,l*=2;return G(t,r,Math.min(i,c-1),Math.floor(i/2),o)},K=function(t,r){var i=t.itemCount,o=r.itemMetadataMap,c=r.estimatedItemSize,l=r.lastMeasuredIndex,u=0;if(l>=i&&(l=i-1),l>=0){var h=o[l];u=h.offset+h.size}var S=i-l-1,_=S*c;return u+_},ge=fe({getItemOffset:function(t,r,i){return R(t,r,i).offset},getItemSize:function(t,r,i){return i.itemMetadataMap[r].size},getEstimatedTotalSize:K,getOffsetForIndexAndAlignment:function(t,r,i,o,c,l){var u=t.direction,h=t.height,S=t.layout,_=t.width,z=u==="horizontal"||S==="horizontal",M=z?_:h,y=R(t,r,c),I=K(t,c),e=Math.max(0,Math.min(I-M,y.offset)),a=Math.max(0,y.offset-M+y.size+l);switch(i==="smart"&&(o>=a-M&&o<=e+M?i="auto":i="center"),i){case"start":return e;case"end":return a;case"center":return Math.round(a+(e-a)/2);case"auto":default:return o>=a&&o<=e?o:o<a?a:e}},getStartIndexForOffset:function(t,r,i){return pe(t,i,r)},getStopIndexForStartIndex:function(t,r,i,o){for(var c=t.direction,l=t.height,u=t.itemCount,h=t.layout,S=t.width,_=c==="horizontal"||h==="horizontal",z=_?S:l,M=R(t,r,o),y=i+z,I=M.offset+M.size,e=r;e<u-1&&I<y;)e++,I+=R(t,e,o).size;return e},initInstanceProps:function(t,r){var i=t,o=i.estimatedItemSize,c={itemMetadataMap:{},estimatedItemSize:o||he,lastMeasuredIndex:-1};return r.resetAfterIndex=function(l,u){u===void 0&&(u=!0),c.lastMeasuredIndex=Math.min(c.lastMeasuredIndex,l-1),r._getItemStyleCache(-1),u&&r.forceUpdate()},c},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});const Ie=({index:n,setHeight:t,Component:r})=>{const i=O.useRef(null);return O.useEffect(()=>{i.current&&t(n,i.current.getBoundingClientRect().height)},[]),w(r,{ref:i,index:n})},j=({count:n,Component:t})=>{const r=O.useMemo(()=>Array.from({length:n}).map(()=>50),[]),i=O.useRef(null),o=l=>r[l],c=(l,u)=>{var h;r[l]=u,(h=i.current)==null||h.resetAfterIndex(l)};return w("div",{style:{flex:1},children:w(ie,{children:({width:l,height:u})=>w(ge,{ref:i,width:l,height:u,itemCount:n,itemSize:o,children:({index:h,style:S})=>w("div",{style:S,children:w(Ie,{index:h,setHeight:c,Component:t})},h)})})})};try{j.displayName="ReactWindowList",j.__docgenInfo={description:"",displayName:"ReactWindowList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}}}}}catch{}export{j as R};
//# sourceMappingURL=react-window-2d01ca09.js.map
