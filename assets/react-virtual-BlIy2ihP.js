import{j as x}from"./jsx-runtime-CmfuFKGs.js";import{r as m}from"./index-obz6jkze.js";import{r as T}from"./index-C4ZtItU4.js";/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function y(){return y=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}return a},y.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function E(){return E=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var e=arguments[s];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}return a},E.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function p(a,s,e){var t,n=(t=e.initialDeps)!=null?t:[],r;return function(){var o;e.key&&e.debug!=null&&e.debug()&&(o=Date.now());var i=a(),l=i.length!==n.length||i.some(function(v,d){return n[d]!==v});if(!l)return r;n=i;var u;if(e.key&&e.debug!=null&&e.debug()&&(u=Date.now()),r=s.apply(void 0,i),e.key&&e.debug!=null&&e.debug()){var f=Math.round((Date.now()-o)*100)/100,c=Math.round((Date.now()-u)*100)/100,g=c/16,h=function(d,b){for(d=String(d);d.length<b;)d=" "+d;return d};console.info("%c⏱ "+h(c,5)+" /"+h(f,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*g,120))+"deg 100% 31%);",e==null?void 0:e.key)}return e==null||e.onChange==null||e.onChange(r),r}}function I(a,s){if(a===void 0)throw new Error("Unexpected undefined"+(s?": "+s:""));return a}var M=function(s,e){return Math.abs(s-e)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var C=function(s){return s},w=function(s){for(var e=Math.max(s.startIndex-s.overscan,0),t=Math.min(s.endIndex+s.overscan,s.count-1),n=[],r=e;r<=t;r++)n.push(r);return n},R=function(s,e){var t=s.scrollElement;if(t){var n=function(i){var l=i.width,u=i.height;e({width:Math.round(l),height:Math.round(u)})};n(t.getBoundingClientRect());var r=new ResizeObserver(function(o){var i=o[0];if(i!=null&&i.borderBoxSize){var l=i.borderBoxSize[0];if(l){n({width:l.inlineSize,height:l.blockSize});return}}n(t.getBoundingClientRect())});return r.observe(t,{box:"border-box"}),function(){r.unobserve(t)}}},j=function(s,e){var t=s.scrollElement;if(t){var n=function(){e(t[s.options.horizontal?"scrollLeft":"scrollTop"])};return n(),t.addEventListener("scroll",n,{passive:!0}),function(){t.removeEventListener("scroll",n)}}},D=function(s,e,t){if(e!=null&&e.borderBoxSize){var n=e.borderBoxSize[0];if(n){var r=Math.round(n[t.options.horizontal?"inlineSize":"blockSize"]);return r}}return Math.round(s.getBoundingClientRect()[t.options.horizontal?"width":"height"])},k=function(s,e,t){var n,r,o=e.adjustments,i=o===void 0?0:o,l=e.behavior,u=s+i;(n=t.scrollElement)==null||n.scrollTo==null||n.scrollTo((r={},r[t.options.horizontal?"left":"top"]=u,r.behavior=l,r))},F=function(s){var e=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var t=null,n=function(){return t||(typeof ResizeObserver<"u"?t=new ResizeObserver(function(o){o.forEach(function(i){e._measureElement(i.target,i)})}):null)};return{disconnect:function(){var o;return(o=n())==null?void 0:o.disconnect()},observe:function(o){var i;return(i=n())==null?void 0:i.observe(o,{box:"border-box"})},unobserve:function(o){var i;return(i=n())==null?void 0:i.unobserve(o)}}}(),this.range=null,this.setOptions=function(t){Object.entries(t).forEach(function(n){var r=n[0],o=n[1];typeof o>"u"&&delete t[r]}),e.options=E({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:C,rangeExtractor:w,onChange:function(){},measureElement:D,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1},t)},this.notify=function(t){e.options.onChange==null||e.options.onChange(e,t)},this.maybeNotify=p(function(){return e.calculateRange(),[e.isScrolling,e.range?e.range.startIndex:null,e.range?e.range.endIndex:null]},function(t){e.notify(t)},{key:!1,debug:function(){return e.options.debug},initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=function(){e.unsubs.filter(Boolean).forEach(function(t){return t()}),e.unsubs=[],e.scrollElement=null},this._didMount=function(){return e.measureElementCache.forEach(e.observer.observe),function(){e.observer.disconnect(),e.cleanup()}},this._willUpdate=function(){var t=e.options.getScrollElement();e.scrollElement!==t&&(e.cleanup(),e.scrollElement=t,e._scrollToOffset(e.scrollOffset,{adjustments:void 0,behavior:void 0}),e.unsubs.push(e.options.observeElementRect(e,function(n){e.scrollRect=n,e.maybeNotify()})),e.unsubs.push(e.options.observeElementOffset(e,function(n){e.scrollAdjustments=0,e.scrollOffset!==n&&(e.isScrollingTimeoutId!==null&&(clearTimeout(e.isScrollingTimeoutId),e.isScrollingTimeoutId=null),e.isScrolling=!0,e.scrollDirection=e.scrollOffset<n?"forward":"backward",e.scrollOffset=n,e.maybeNotify(),e.isScrollingTimeoutId=setTimeout(function(){e.isScrollingTimeoutId=null,e.isScrolling=!1,e.scrollDirection=null,e.maybeNotify()},e.options.scrollingDelay))})))},this.getSize=function(){return e.scrollRect[e.options.horizontal?"width":"height"]},this.memoOptions=p(function(){return[e.options.count,e.options.paddingStart,e.options.scrollMargin,e.options.getItemKey]},function(t,n,r,o){return e.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:n,scrollMargin:r,getItemKey:o}},{key:!1}),this.getFurthestMeasurement=function(t,n){for(var r=new Map,o=new Map,i=n-1;i>=0;i--){var l=t[i];if(!r.has(l.lane)){var u=o.get(l.lane);if(u==null||l.end>u.end?o.set(l.lane,l):l.end<u.end&&r.set(l.lane,!0),r.size===e.options.lanes)break}}return o.size===e.options.lanes?Array.from(o.values()).sort(function(f,c){return f.end-c.end})[0]:void 0},this.getMeasurements=p(function(){return[e.memoOptions(),e.itemSizeCache]},function(t,n){var r=t.count,o=t.paddingStart,i=t.scrollMargin,l=t.getItemKey,u=e.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,e.pendingMeasuredCacheIndexes):0;e.pendingMeasuredCacheIndexes=[];for(var f=e.measurementsCache.slice(0,u),c=u;c<r;c++){var g=l(c),h=e.options.lanes===1?f[c-1]:e.getFurthestMeasurement(f,c),v=h?h.end:o+i,d=n.get(g),b=typeof d=="number"?d:e.options.estimateSize(c),O=v+b,z=h?h.lane:c%e.options.lanes;f[c]={index:c,start:v,size:b,end:O,key:g,lane:z}}return e.measurementsCache=f,f},{key:!1,debug:function(){return e.options.debug}}),this.calculateRange=p(function(){return[e.getMeasurements(),e.getSize(),e.scrollOffset]},function(t,n,r){return e.range=t.length>0&&n>0?_({measurements:t,outerSize:n,scrollOffset:r}):null},{key:!1,debug:function(){return e.options.debug}}),this.getIndexes=p(function(){return[e.options.rangeExtractor,e.calculateRange(),e.options.overscan,e.options.count]},function(t,n,r,o){return n===null?[]:t(E({},n,{overscan:r,count:o}))},{key:!1,debug:function(){return e.options.debug}}),this.indexFromElement=function(t){var n=e.options.indexAttribute,r=t.getAttribute(n);return r?parseInt(r,10):(console.warn("Missing attribute name '"+n+"={index}' on measured element."),-1)},this._measureElement=function(t,n){var r=e.measurementsCache[e.indexFromElement(t)];if(!r||!t.isConnected){e.measureElementCache.forEach(function(l,u){l===t&&(e.observer.unobserve(t),e.measureElementCache.delete(u))});return}var o=e.measureElementCache.get(r.key);o!==t&&(o&&e.observer.unobserve(o),e.observer.observe(t),e.measureElementCache.set(r.key,t));var i=e.options.measureElement(t,n,e);e.resizeItem(r,i)},this.resizeItem=function(t,n){var r,o=(r=e.itemSizeCache.get(t.key))!=null?r:t.size,i=n-o;i!==0&&(t.start<e.scrollOffset&&e._scrollToOffset(e.scrollOffset,{adjustments:e.scrollAdjustments+=i,behavior:void 0}),e.pendingMeasuredCacheIndexes.push(t.index),e.itemSizeCache=new Map(e.itemSizeCache.set(t.key,n)),e.notify(!1))},this.measureElement=function(t){t&&e._measureElement(t,void 0)},this.getVirtualItems=p(function(){return[e.getIndexes(),e.getMeasurements()]},function(t,n){for(var r=[],o=0,i=t.length;o<i;o++){var l=t[o],u=n[l];r.push(u)}return r},{key:!1,debug:function(){return e.options.debug}}),this.getVirtualItemForOffset=function(t){var n=e.getMeasurements();return I(n[S(0,n.length-1,function(r){return I(n[r]).start},t)])},this.getOffsetForAlignment=function(t,n){var r=e.getSize();n==="auto"&&(t<=e.scrollOffset?n="start":t>=e.scrollOffset+r?n="end":n="start"),n==="start"?t=t:n==="end"?t=t-r:n==="center"&&(t=t-r/2);var o=e.options.horizontal?"scrollWidth":"scrollHeight",i=e.scrollElement?"document"in e.scrollElement?e.scrollElement.document.documentElement[o]:e.scrollElement[o]:0,l=i-e.getSize();return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=function(t,n){n===void 0&&(n="auto"),t=Math.max(0,Math.min(t,e.options.count-1));var r=I(e.getMeasurements()[t]);if(n==="auto")if(r.end>=e.scrollOffset+e.getSize()-e.options.scrollPaddingEnd)n="end";else if(r.start<=e.scrollOffset+e.options.scrollPaddingStart)n="start";else return[e.scrollOffset,n];var o=n==="end"?r.end+e.options.scrollPaddingEnd:r.start-e.options.scrollPaddingStart;return[e.getOffsetForAlignment(o,n),n]},this.isDynamicMode=function(){return e.measureElementCache.size>0},this.cancelScrollToIndex=function(){e.scrollToIndexTimeoutId!==null&&(clearTimeout(e.scrollToIndexTimeoutId),e.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(t,n){var r=n===void 0?{}:n,o=r.align,i=o===void 0?"start":o,l=r.behavior;e.cancelScrollToIndex(),l==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.getOffsetForAlignment(t,i),{adjustments:void 0,behavior:l})},this.scrollToIndex=function(t,n){var r=n===void 0?{}:n,o=r.align,i=o===void 0?"auto":o,l=r.behavior;t=Math.max(0,Math.min(t,e.options.count-1)),e.cancelScrollToIndex(),l==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var u=e.getOffsetForIndex(t,i),f=u[0],c=u[1];e._scrollToOffset(f,{adjustments:void 0,behavior:l}),l!=="smooth"&&e.isDynamicMode()&&(e.scrollToIndexTimeoutId=setTimeout(function(){e.scrollToIndexTimeoutId=null;var g=e.measureElementCache.has(e.options.getItemKey(t));if(g){var h=e.getOffsetForIndex(t,c),v=h[0];M(v,e.scrollOffset)||e.scrollToIndex(t,{align:c,behavior:l})}else e.scrollToIndex(t,{align:c,behavior:l})}))},this.scrollBy=function(t,n){var r=n===void 0?{}:n,o=r.behavior;e.cancelScrollToIndex(),o==="smooth"&&e.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),e._scrollToOffset(e.scrollOffset+t,{adjustments:void 0,behavior:o})},this.getTotalSize=function(){var t;return(((t=e.getMeasurements()[e.options.count-1])==null?void 0:t.end)||e.options.paddingStart)-e.options.scrollMargin+e.options.paddingEnd},this._scrollToOffset=function(t,n){var r=n.adjustments,o=n.behavior;e.options.scrollToFn(t,{behavior:o,adjustments:r},e)},this.measure=function(){e.itemSizeCache=new Map,e.notify(!1)},this.setOptions(s),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(t){e.itemSizeCache.set(t.key,t.size)}),this.maybeNotify()},S=function(s,e,t,n){for(;s<=e;){var r=(s+e)/2|0,o=t(r);if(o<n)s=r+1;else if(o>n)e=r-1;else return r}return s>0?s-1:0};function _(a){for(var s=a.measurements,e=a.outerSize,t=a.scrollOffset,n=s.length-1,r=function(u){return s[u].start},o=S(0,n,r,t),i=o;i<n&&s[i].end<t+e;)i++;return{startIndex:o,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $=typeof document<"u"?m.useLayoutEffect:m.useEffect;function B(a){var s=m.useReducer(function(){return{}},{})[1],e=y({},a,{onChange:function(o,i){i?T.flushSync(s):s(),a.onChange==null||a.onChange(o,i)}}),t=m.useState(function(){return new F(e)}),n=t[0];return n.setOptions(e),m.useEffect(function(){return n._didMount()},[]),$(function(){return n._willUpdate()}),n}function A(a){return B(y({observeElementRect:R,observeElementOffset:j,scrollToFn:k},a))}const N=m.memo(({count:a,Component:s,handle:e})=>{const t=m.useRef(null),n=A({count:a,getScrollElement:()=>t.current,estimateSize:r=>50});return m.useImperativeHandle(e,()=>({scrollToIndex:n.scrollToIndex})),x.jsx("div",{ref:t,style:{width:"100%",height:"100%",overflow:"auto"},children:x.jsx("div",{style:{height:`${n.getTotalSize()}px`,width:"100%",position:"relative"},children:n.getVirtualItems().map(r=>x.jsx("div",{"data-index":r.index,ref:n.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${r.start}px)`},children:x.jsx(s,{index:r.index})},r.key))})})});N.__docgenInfo={description:"",methods:[],displayName:"ReactVirtualList",props:{count:{required:!0,tsType:{name:"number"},description:""},Component:{required:!0,tsType:{name:"SimpleItem"},description:""},handle:{required:!1,tsType:{name:"Ref",elements:[{name:"signature",type:"object",raw:"{ scrollToIndex: (index: number) => void }",signature:{properties:[{key:"scrollToIndex",value:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}},required:!0}}]}}],raw:"Ref<ListHandle>"},description:""}}};export{N as R};
