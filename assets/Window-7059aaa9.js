import{r as O}from"./index-5284b0bf.js";import{r as ae}from"./index-480187bb.js";import{j as B}from"./jsx-runtime-f8a6c6ea.js";const y=Math.min,v=Math.max,de=Math.abs,Q=Date.now,Ee=Object.values,se=setTimeout,C=e=>e!=null,_e=e=>{const t=[...e].sort((n,r)=>n-r),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},ne=(e,t)=>{let s;const n=()=>{C(s)&&clearTimeout(s)},r=()=>{n(),s=se(()=>{s=null,e()},t)};return r._cancel=n,r},me=(e,t)=>{let s=Q()-t;return(...n)=>{const r=Q();s+t<r&&(s=r,e(...n))}},j=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},T=-1,N=(e,t)=>{const s=e._sizes[t];return s===T?e._defaultItemSize:s},pe=(e,t,s)=>{const n=e._sizes[t]===T;return e._sizes[t]=s,e._measuredOffsetIndex=y(t,e._measuredOffsetIndex),n},re=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+N(e,t):e._offsets[t];let n=e._measuredOffsetIndex,r=e._offsets[n];for(;n<=t&&(e._offsets[n]=r,!(n===t&&!s));)r+=N(e,n),n++;return e._measuredOffsetIndex=t,r},ge=e=>re(e,e._length-1,!0),Y=(e,t)=>re(e,t),oe=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const r=N(e,t++);if((n+=r)>=s){n-r/2>=s&&t--;break}}else for(;t>0;){const r=N(e,--t);if((n-=r)<=s){n+r/2<s&&t++;break}}return y(v(t,0),e._length-1)},$=(e,t,s,n)=>oe(e,s,t-n),he=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===T)return!0;return!1},we=e=>{const t=e._sizes.filter(n=>n!==T),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:_e(t)},G=(e,t,s)=>{const n=[],r=[];for(let a=0;a<e;a++){const i=s&&s._sizes[a];if(n.push(C(i)?i:T),a===0)r.push(0);else{const u=s&&s._offsets[a];r.push(C(u)?u:T)}}return{_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?y(s._measuredOffsetIndex,e-1):0,_sizes:n,_offsets:r}},q=e=>e.reduce((t,[s])=>t+s,0),H=(e,t)=>t.map(([s,n])=>[n-N(e,s),s]),Se=1.5,M=0,ee=1,F=2,X=3,U=1,J=2,D=3,ie=4,P=5,ce=1,A=2,ue=4,Le=(e,t,s=0,n,r,a)=>{const i=!t,u=t||40;let l=u*v(s-1,0),o=0,p=0,d,c=G(e,u),_=M,h=!1,g=[0,s];const w=new Set,b=()=>ge(c),I=()=>b()-l,K=()=>{const f=h;return h=!1,f},x=f=>{const m=_;if(_=f,_===M)return!1;if(m===M&&(_===ee||_===F))return!0};return{_getRange(){const[f,m]=g,S=Y(c,f),R=$(c,o,f,S),z=oe(c,R,l);return f===R&&m===z?g:g=[R,z]},_isUnmeasuredItem(f){return c._sizes[f]===T},_hasUnmeasuredItemsInRange(f){return he(c,v(0,f-2),y(c._length-1,f+2))},_getItemOffset(f){const m=Y(c,f);return n?m+v(0,l-b()):m},_getItemSize(f){return N(c,f)},_getItemLength(){return c._length},_getScrollOffset(){return o},_getScrollOffsetMax:I,_getViewportSize(){return l},_getScrollSize:b,_getCorrectedScrollSize(){return v(b(),l)},_getJumpCount(){return p},_flushJump(){const f=d;return d=void 0,f},_getItemIndexForScrollTo(f){return $(c,f,0,0)},_subscribe(f,m){const S=[f,m];return w.add(S),()=>{w.delete(S)}},_update(f,m){let S,R,z=0;switch(f){case U:{const E=m.filter(([W,k])=>c._sizes[W]!==k);if(!E.length)break;let L=0;if(_===F)L=q(H(c,E));else if(_===X){const W=H(c,E),[k]=g;o===0||(o>I()-Se?L=q(W):L=q(W.filter(([,fe])=>fe<k)))}L&&(d=L,p++,z+=ue);let Z=!1;E.forEach(([W,k])=>{pe(c,W,k)&&(Z=!0)}),i&&Z&&!o&&we(c),z+=A,h=S=!0;break}case J:{l!==m&&(z=A),l=m;break}case D:case ie:{if(o===m)break;if(f===D){const E=K();(_===M||!E)&&_!==X&&(R=x(o>m?F:ee)),S=de(o-m)>l}o=v(0,y(I(),m)),z=ce;break}case P:{R=x(m?X:M);break}}z&&(w.forEach(([E,L])=>{z&E&&L(S)}),f===D&&a&&a(o)),C(R)&&r(R)},_getScrollDirection(){return _},_updateCacheLength(f){c._length!==f&&(c=G(f,u,c))}}},Ie=typeof window<"u"?O.useLayoutEffect:O.useEffect,V="current",ye=e=>{const t=[];return O.Children.forEach(e,s=>{!C(s)||typeof s=="boolean"||t.push(s)}),t},be=e=>{const t=O.useRef(e);return Ie(()=>{t[V]=e},[e]),t},Ce=(e,t,s)=>{const[n,r]=O.useState(t),a=be(t);if(O.useLayoutEffect(()=>{let i;t===e._getRange?i=ce+A:t===e._getCorrectedScrollSize?i=A:t===e._getJumpCount?i=ue:i=A;const u=()=>{r(()=>a[V]())};return e._subscribe(i,l=>{l?ae.flushSync(u):u()})},[]),s){const i=t();n!==i&&r(i)}return n},ve=j(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),le=(e,t,s)=>me(n=>{if(e._getScrollDirection()!==M&&!n.ctrlKey&&(t?n.deltaX:n.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&s()}},50),Te=(e,t,s)=>{let n,r;const a=t?"scrollLeft":"scrollTop",i=()=>n?t?n.scrollWidth:n.scrollHeight:0,u=(o,p)=>t&&s?ve(n)||p?-o:e._getScrollOffsetMax()-o:o,l=async(o,p)=>{if(!n)return;const d=()=>y(p(),i()-e._getViewportSize());for(;e._update(ie,d()),!!e._hasUnmeasuredItemsInRange(o);){r&&r[1]();const c=e._subscribe(A,()=>{r&&r[0]()});try{await new Promise((_,h)=>{let g=!1;const w=()=>{g||(g=!0,_(),r=void 0)};r=[w,h],se(w,250)})}catch{return}finally{c()}}n[a]=u(d()),e._update(P,!0)};return{_initRoot(o){n=o;const p=()=>{e._update(D,u(o[a]))},d=ne(()=>{p(),e._update(P,!1)},150),c=()=>{p(),d()},_=le(e,t,d);return o.addEventListener("scroll",c),o.addEventListener("wheel",_,{passive:!0}),()=>{o.removeEventListener("scroll",c),o.removeEventListener("wheel",_),d._cancel()}},_getActualScrollSize:i,_scrollTo(o){o=v(o,0),l(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o){o=v(y(o,e._getItemLength()-1),0),l(o,()=>e._getItemOffset(o))},_fixScrollJump:o=>{n&&(n[a]+=u(o,!0))}}},xe=(e,t)=>{const s=t?"scrollX":"scrollY",n=t?"offsetLeft":"offsetTop";return{_initRoot(r){let a=!1;const i=(c,_)=>{const h=_+c[n],g=c.offsetParent;return c===document.body||!g?h:i(g,h)},u=()=>{a&&e._update(D,window[s]-i(r,0))},l=ne(()=>{u(),e._update(P,!1)},150),o=()=>{u(),l()},p=le(e,t,l),d=new IntersectionObserver(([c])=>{a=c.isIntersecting});return d.observe(r),window.addEventListener("scroll",o),window.addEventListener("wheel",p,{passive:!0}),()=>{d.disconnect(),window.removeEventListener("scroll",o),window.removeEventListener("wheel",p),l._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?r:0,t?0:r)}}},We=e=>{const t=O.useRef();return t[V]||(t[V]=e())},Me=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,a=j(()=>new ResizeObserver(i=>{const u=[];for(const{target:l,contentRect:o}of i)if(l===s)e._update(J,o[n]);else{const p=r.get(l);C(p)&&u.push([p,o[n]])}u.length&&e._update(U,u)}));return{_observeRoot(i){s=i;const u=a();return u.observe(i),()=>{u.disconnect()}},_observeItem(i,u){const l=a();return r.set(i,u),l.observe(i),()=>{r.delete(i),l.unobserve(i)}}}},Ae=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,a=j(()=>new ResizeObserver(i=>{const u=[];for(const{target:l,contentRect:o}of i){const p=r.get(l);C(p)&&u.push([p,o[s]])}u.length&&e._update(U,u)}));return{_observeRoot(){const i=()=>{e._update(J,window[n])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),a().disconnect()}},_observeItem(i,u){const l=a();return r.set(i,u),l.observe(i),()=>{r.delete(i),l.unobserve(i)}}}},Ne=(e,t)=>{let s;const n="height",r="width",a=new WeakMap,i=new Set,u=new Set,l=new Map,o=(d,c)=>`${d}-${c}`,p=j(()=>new ResizeObserver(d=>{const c=new Set,_=new Set;for(const{target:h,contentRect:g}of d)if(h===s)e._update(J,g[n]),t._update(J,g[r]);else{const w=a.get(h);if(w){const[b,I]=w,K=o(b,I),x=l.get(K),f=[g[n],g[r]];let m,S;x?(x[0]!==f[0]&&(m=!0),x[1]!==f[1]&&(S=!0)):m=S=!0,m&&c.add(b),S&&_.add(I),(m||S)&&l.set(K,f)}}if(c.size){const h=[];c.forEach(g=>{let w=0;u.forEach(b=>{const I=l.get(o(g,b));I&&(w=v(w,I[0]))}),w&&h.push([g,w])}),e._update(U,h)}if(_.size){const h=[];_.forEach(g=>{let w=0;i.forEach(b=>{const I=l.get(o(b,g));I&&(w=v(w,I[1]))}),w&&h.push([g,w])}),t._update(U,h)}}));return{_observeRoot(d){s=d;const c=p();return c.observe(d),()=>{c.disconnect()}},_observeItem(d,c,_){const h=p();return a.set(d,[c,_]),i.add(c),u.add(_),h.observe(d),()=>{a.delete(d),h.unobserve(d)}}}},te=O.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:r},a)=>B("div",{ref:a,...t,children:B("div",{style:O.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:r?"none":"auto"}),[s,n,r]),children:e})}));try{te.displayName="Window",te.__docgenInfo={description:"",displayName:"Window",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{te as W,We as a,Ce as b,Ie as c,Le as d,C as e,ye as f,Me as g,Te as h,y as i,Ae as j,xe as k,Ne as l,v as m,V as r,be as u,Ee as v};
//# sourceMappingURL=Window-7059aaa9.js.map
