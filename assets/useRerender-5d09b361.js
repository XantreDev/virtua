import{r as N}from"./index-c6dae603.js";import{j as $}from"./jsx-runtime-c3d7f245.js";const V=Math.min,O=Math.max,ve=Math.abs,H=Date.now,Ve=Object.values,be=Array.isArray,ue=setTimeout,D=(e,t,n)=>V(n,O(t,e)),K=e=>e!=null,Ie=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},le=(e,t)=>{let n;const s=()=>{K(n)&&clearTimeout(n)},i=()=>{s(),n=ue(()=>{n=null,e()},t)};return i._cancel=s,i},he=(e,t)=>{let n=H()-t;return(...s)=>{const i=H();n+t<i&&(n=i,e(...s))}},k=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},X=e=>getComputedStyle(e),j=e=>e?parseFloat(e):0,L=-1,M=(e,t)=>{const n=e._sizes[t];return n===L?e._defaultItemSize:n},Oe=(e,t,n)=>{const s=e._sizes[t]===L;return e._sizes[t]=n,e._computedOffsetIndex=V(t,e._computedOffsetIndex),s},Z=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=M(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},Ee=e=>e._length?Z(e,e._length-1)+M(e,e._length-1):0,ee=(e,t,n)=>{let s=Z(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=M(e,n);if(s+i>t)break;s+=i,n++}else s-=M(e,--n);return D(n,0,e._length-1)},te=(e,t,n,s)=>{const i=ee(e,t,V(n,e._length-1));return[i,ee(e,t+s,i)]},Re=(e,t,n)=>e._sizes.slice(O(0,t-1),V(e._length-1,n+1)+1).includes(L),ze=e=>{const t=e._sizes.filter(s=>s!==L),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ie(t)},ce=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](L),e._offsets.push(i===0?0:L);e._length=t},Le=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return ce(n,e),n},ne=(e,t,n)=>{const s=t-e._length,i=s<0;let f;return i?(f=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,r)=>o+(r===L?e._defaultItemSize:r),0),e._offsets.splice(s)):(f=e._defaultItemSize*s,ce(e,e._length+s,n)),e._computedOffsetIndex=n?0:D(t-1,0,e._computedOffsetIndex),e._length=t,[f,i]},Q=typeof window<"u",ye=k(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),F=k(()=>Q?X(document.body).direction==="rtl":!1),Te=k(()=>Q?/iP(hone|od|ad)/.test(navigator.userAgent):!1),se=(e,t,n)=>t.reduce((s,[i,f])=>{const o=f-M(e,i);return(!n||o>0)&&(s+=o),s},0),Ce=1.5,W=0,fe=1,de=2,P=1,J=2,xe=3,U=4,ae=5,Y=6,_e=7,q=1,G=2,Ae=4,ke=(e,t=40,n=0,s=Le(e,t),i,f)=>{let o=t*O(n-1,0),r=0,u=0,m=0,d=0,c=W,_=!1,g=!1,l=!1,S=[0,n];const p=Te(),v=new Set,b=()=>Ee(s),y=()=>b()-o,x=a=>D(a,0,y()),A=a=>{p&&c!==W?d+=a:(m+=a,u++)},T=a=>{const w=c;return c=a,c!==w};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return S=te(s,r+d,S[0],o)},_isUnmeasuredItem(a){return s._sizes[a]===L},_hasUnmeasuredItemsInTargetViewport(a){const[w,C]=te(s,a,S[0],o);return Re(s,w,C)},_getItemOffset(a){const w=Z(s,a)-d;return i?w+O(0,o-b()):w},_getItemSize(a){return M(s,a)},_getItemsLength(){return s._length},_getScrollOffset(){return r},_getScrollOffsetMax:y,_getScrollDirection(){return c},_getViewportSize(){return o},_getCorrectedScrollSize(){return O(b(),o)},_getJumpCount(){return u},_flushJump(){const a=m;return m=0,a},_subscribe(a,w){const C=[a,w];return v.add(C),()=>{v.delete(C)}},_update(a,w){let C,B,R=0;switch(a){case P:{const I=w.filter(([h,z])=>s._sizes[h]!==z);if(!I.length)break;if(!_){let h=0;if(r!==0)if(r>y()-Ce)h=se(s,I,!0);else{const[z]=S;h=se(s,I.filter(([we])=>we<z))}h&&A(h)}let E=!1;I.forEach(([h,z])=>{Oe(s,h,z)&&(E=!0)}),f&&E&&!r&&ze(s),R+=G,l=B=!0;break}case J:{o!==w&&(o=w,R=G);break}case xe:{if(w[1]){const I=y()-r,[E,h]=ne(s,w[0],!0),z=h?-V(E,I):E;A(z),p||(r=x(r+z)),R=q}else ne(s,w[0]);break}case U:case ae:{if(r===w)break;if(a===U){const I=w-r,E=l;l=!1,(c===W||!E)&&!g&&T(I<0?de:fe),B=ve(I)>o,R+=Ae}else _=!0;r=x(w),R+=q;break}case Y:{T(W)&&(C=!0,R=q),g=_=!1;break}case _e:{_=!1,g=!0;break}}R&&(C&&d&&(l=!0,m+=d,d=0,u++),v.forEach(([I,E])=>{R&I&&E(B)}))}}},We=Q?N.useLayoutEffect:N.useEffect,me=(e,t,n)=>he(s=>{if(e._getScrollDirection()!==W&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),pe=(e,t,n,s)=>ye(e)||s?-n:t._getScrollOffsetMax()-n,De=(e,t)=>{let n,s;const i=t?"scrollLeft":"scrollTop",f=(r,u)=>t&&F()?pe(n,e,r,u):r,o=async r=>{if(!n)return;const u=()=>D(r(),0,e._getScrollOffsetMax());for(;;){const m=u();if(e._update(ae,m),!e._hasUnmeasuredItemsInTargetViewport(m))break;s&&s[1]();const d=e._subscribe(G,()=>{s&&s[0]()});try{await new Promise((c,_)=>{let g=!1;const l=()=>{g||(g=!0,c(),s=void 0)};s=[l,_],ue(l,250)})}catch{return}finally{d()}}n[i]=f(u()),e._update(_e)};return{_initRoot(r){n=r;let u=!1;const m=()=>{e._update(U,f(r[i]))},d=le(()=>{if(u){d();return}m(),e._update(Y)},150),c=()=>{m(),d()},_=me(e,t,d),g=()=>{u=!0},l=()=>{u=!1};return r.addEventListener("scroll",c),r.addEventListener("wheel",_,{passive:!0}),r.addEventListener("touchstart",g,{passive:!0}),r.addEventListener("touchend",l,{passive:!0}),()=>{r.removeEventListener("scroll",c),r.removeEventListener("wheel",_),r.removeEventListener("touchstart",g),r.removeEventListener("touchend",l),d._cancel()}},_scrollTo(r){o(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),o(()=>r)},_scrollToIndex(r,u){r=D(r,0,e._getItemsLength()-1),o(u==="end"?()=>e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():()=>e._getItemOffset(r))},_fixScrollJump:r=>{n&&(n[i]+=f(r,!0))}}},Pe=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",f=(o,r)=>t&&F()?pe(n,e,o,r):o;return{_initRoot(o){n=o;let r=!1;const u=(l,S)=>{const p=S+(t&&F()?window.innerWidth-l[i]-l.offsetWidth:l[i]),v=l.offsetParent;return l===document.body||!v?p:u(v,p)},m=()=>{r&&e._update(U,f(window[s])-u(o,0))},d=le(()=>{m(),e._update(Y)},150),c=()=>{m(),d()},_=me(e,t,d),g=new IntersectionObserver(([l])=>{r=l.isIntersecting});return g.observe(o),window.addEventListener("scroll",c),window.addEventListener("wheel",_,{passive:!0}),()=>{g.disconnect(),window.removeEventListener("scroll",c),window.removeEventListener("wheel",_),d._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?f(o,!0):0,t?0:o)}}},re="current",Je={},ge=(e,t)=>{if(be(e))for(const n of e)ge(n,t);else!K(e)||typeof e=="boolean"||t.push(e)},Ue=e=>{const t=[];return ge(e,t),t},Ke=(e,t,n)=>O(e-(n===fe?1:O(1,t)),0),Be=(e,t,n,s)=>V(e+(n===de?1:O(1,t)),s-1),qe=e=>{const t=N.useRef();return t[re]||(t[re]=e())},Se={box:"border-box"},je=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,f=k(()=>new ResizeObserver(o=>{const r=[];for(const{target:u,contentRect:m}of o)if(u.offsetParent)if(u===n)e._update(J,m[s]+m[t?"left":"top"]+j(X(n)[t?"paddingRight":"paddingBottom"]));else{const d=i.get(u);K(d)&&r.push([d,m[s]])}r.length&&e._update(P,r)}));return{_observeRoot(o){n=o;const r=f();return r.observe(o,Se),()=>{r.disconnect()}},_observeItem(o,r){const u=f();return i.set(o,r),u.observe(o),()=>{i.delete(o),u.unobserve(o)}}}},Fe=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,f=k(()=>new ResizeObserver(o=>{const r=[];for(const{target:u,contentRect:m}of o){if(!u.offsetParent)continue;const d=i.get(u);K(d)&&r.push([d,m[n]])}r.length&&e._update(P,r)}));return{_observeRoot(){const o=()=>{e._update(J,window[s])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),f().disconnect()}},_observeItem(o,r){const u=f();return i.set(o,r),u.observe(o),()=>{i.delete(o),u.unobserve(o)}}}},Ge=(e,t)=>{let n;const s="height",i="width",f=new WeakMap,o=new Set,r=new Set,u=new Map,m=(c,_)=>`${c}-${_}`,d=k(()=>new ResizeObserver(c=>{const _=new Set,g=new Set;for(const{target:l,contentRect:S}of c)if(l.offsetParent)if(l===n){const p=X(n);e._update(J,S[s]+S.top+j(p.paddingBottom)),t._update(J,S[i]+S.left+j(p.paddingRight))}else{const p=f.get(l);if(p){const[v,b]=p,y=m(v,b),x=u.get(y),A=[S[s],S[i]];let T,a;x?(x[0]!==A[0]&&(T=!0),x[1]!==A[1]&&(a=!0)):T=a=!0,T&&_.add(v),a&&g.add(b),(T||a)&&u.set(y,A)}}if(_.size){const l=[];_.forEach(S=>{let p=0;r.forEach(v=>{const b=u.get(m(S,v));b&&(p=O(p,b[0]))}),p&&l.push([S,p])}),e._update(P,l)}if(g.size){const l=[];g.forEach(S=>{let p=0;o.forEach(v=>{const b=u.get(m(v,S));b&&(p=O(p,b[1]))}),p&&l.push([S,p])}),t._update(P,l)}}));return{_observeRoot(c){n=c;const _=d();return _.observe(c,Se),()=>{_.disconnect()}},_observeItem(c,_,g){const l=d();return f.set(c,[_,g]),o.add(_),r.add(g),l.observe(c),()=>{f.delete(c),l.unobserve(c)}}}},oe=N.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},f)=>$("div",{ref:f,...t,children:$("div",{style:N.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{oe.displayName="Viewport",oe.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ie=()=>[],Xe=()=>N.useReducer(ie,void 0,ie)[1];export{xe as A,W as S,q as U,oe as V,Xe as a,We as b,G as c,Je as d,K as e,Ue as f,ke as g,Fe as h,Pe as i,Be as j,Ke as k,F as l,Ge as m,De as n,Ae as o,je as p,re as r,qe as u,Ve as v};
//# sourceMappingURL=useRerender-5d09b361.js.map
