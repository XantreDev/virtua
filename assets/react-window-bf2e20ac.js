import{j as R}from"./jsx-runtime-c3d7f245.js";import{r as _}from"./index-c6dae603.js";import{A as ie}from"./AutoSizer-32fc7d06.js";import{a as $,_ as ae}from"./setPrototypeOf-5c857c1a.js";import{_ as oe}from"./inheritsLoose-fc7cbd8f.js";var U=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function se(i,t){return!!(i===t||U(i)&&U(t))}function le(i,t){if(i.length!==t.length)return!1;for(var r=0;r<i.length;r++)if(!se(i[r],t[r]))return!1;return!0}function W(i,t){t===void 0&&(t=le);var r,n=[],o,u=!1;function c(){for(var l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return u&&r===this&&t(l,n)||(o=i.apply(this,l),u=!0,r=this,n=l),o}return c}var ce=typeof performance=="object"&&typeof performance.now=="function",q=ce?function(){return performance.now()}:function(){return Date.now()};function H(i){cancelAnimationFrame(i.id)}function ue(i,t){var r=q();function n(){q()-r>=t?i.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var A=-1;function V(i){if(i===void 0&&(i=!1),A===-1||i){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),A=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return A}var O=null;function B(i){if(i===void 0&&(i=!1),O===null||i){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?O="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?O="negative":O="positive-ascending"),document.body.removeChild(t),O}return O}var de=150,fe=function(t,r){return t};function me(i){var t,r=i.getItemOffset,n=i.getEstimatedTotalSize,o=i.getItemSize,u=i.getOffsetForIndexAndAlignment,c=i.getStartIndexForOffset,l=i.getStopIndexForStartIndex,h=i.initInstanceProps,I=i.shouldResetStyleCacheOnItemSizeChange,M=i.validateProps;return t=function(T){oe(z,T);function z(S){var e;return e=T.call(this,S)||this,e._instanceProps=h(e.props,$(e)),e._outerRef=void 0,e._resetIsScrollingTimeoutId=null,e.state={instance:$(e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof e.props.initialScrollOffset=="number"?e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},e._callOnItemsRendered=void 0,e._callOnItemsRendered=W(function(a,s,f,m){return e.props.onItemsRendered({overscanStartIndex:a,overscanStopIndex:s,visibleStartIndex:f,visibleStopIndex:m})}),e._callOnScroll=void 0,e._callOnScroll=W(function(a,s,f){return e.props.onScroll({scrollDirection:a,scrollOffset:s,scrollUpdateWasRequested:f})}),e._getItemStyle=void 0,e._getItemStyle=function(a){var s=e.props,f=s.direction,m=s.itemSize,v=s.layout,d=e._getItemStyleCache(I&&m,I&&v,I&&f),p;if(d.hasOwnProperty(a))p=d[a];else{var g=r(e.props,a,e._instanceProps),x=o(e.props,a,e._instanceProps),C=f==="horizontal"||v==="horizontal",E=f==="rtl",N=C?g:0;d[a]=p={position:"absolute",left:E?void 0:N,right:E?N:void 0,top:C?0:g,height:C?"100%":x,width:C?x:"100%"}}return p},e._getItemStyleCache=void 0,e._getItemStyleCache=W(function(a,s,f){return{}}),e._onScrollHorizontal=function(a){var s=a.currentTarget,f=s.clientWidth,m=s.scrollLeft,v=s.scrollWidth;e.setState(function(d){if(d.scrollOffset===m)return null;var p=e.props.direction,g=m;if(p==="rtl")switch(B()){case"negative":g=-m;break;case"positive-descending":g=v-f-m;break}return g=Math.max(0,Math.min(g,v-f)),{isScrolling:!0,scrollDirection:d.scrollOffset<m?"forward":"backward",scrollOffset:g,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._onScrollVertical=function(a){var s=a.currentTarget,f=s.clientHeight,m=s.scrollHeight,v=s.scrollTop;e.setState(function(d){if(d.scrollOffset===v)return null;var p=Math.max(0,Math.min(v,m-f));return{isScrolling:!0,scrollDirection:d.scrollOffset<p?"forward":"backward",scrollOffset:p,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(a){var s=e.props.outerRef;e._outerRef=a,typeof s=="function"?s(a):s!=null&&typeof s=="object"&&s.hasOwnProperty("current")&&(s.current=a)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&H(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=ue(e._resetIsScrolling,de)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1,null)})},e}z.getDerivedStateFromProps=function(e,a){return he(e,a),M(e),null};var y=z.prototype;return y.scrollTo=function(e){e=Math.max(0,e),this.setState(function(a){return a.scrollOffset===e?null:{scrollDirection:a.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},y.scrollToItem=function(e,a){a===void 0&&(a="auto");var s=this.props,f=s.itemCount,m=s.layout,v=this.state.scrollOffset;e=Math.max(0,Math.min(e,f-1));var d=0;if(this._outerRef){var p=this._outerRef;m==="vertical"?d=p.scrollWidth>p.clientWidth?V():0:d=p.scrollHeight>p.clientHeight?V():0}this.scrollTo(u(this.props,e,a,v,this._instanceProps,d))},y.componentDidMount=function(){var e=this.props,a=e.direction,s=e.initialScrollOffset,f=e.layout;if(typeof s=="number"&&this._outerRef!=null){var m=this._outerRef;a==="horizontal"||f==="horizontal"?m.scrollLeft=s:m.scrollTop=s}this._callPropsCallbacks()},y.componentDidUpdate=function(){var e=this.props,a=e.direction,s=e.layout,f=this.state,m=f.scrollOffset,v=f.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var d=this._outerRef;if(a==="horizontal"||s==="horizontal")if(a==="rtl")switch(B()){case"negative":d.scrollLeft=-m;break;case"positive-ascending":d.scrollLeft=m;break;default:var p=d.clientWidth,g=d.scrollWidth;d.scrollLeft=g-p-m;break}else d.scrollLeft=m;else d.scrollTop=m}this._callPropsCallbacks()},y.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&H(this._resetIsScrollingTimeoutId)},y.render=function(){var e=this.props,a=e.children,s=e.className,f=e.direction,m=e.height,v=e.innerRef,d=e.innerElementType,p=e.innerTagName,g=e.itemCount,x=e.itemData,C=e.itemKey,E=C===void 0?fe:C,N=e.layout,J=e.outerElementType,Q=e.outerTagName,X=e.style,Y=e.useIsScrolling,ee=e.width,D=this.state.isScrolling,L=f==="horizontal"||N==="horizontal",te=L?this._onScrollHorizontal:this._onScrollVertical,P=this._getRangeToRender(),re=P[0],ne=P[1],F=[];if(g>0)for(var b=re;b<=ne;b++)F.push(_.createElement(a,{data:x,key:E(b,x),index:b,isScrolling:Y?D:void 0,style:this._getItemStyle(b)}));var k=n(this.props,this._instanceProps);return _.createElement(J||Q||"div",{className:s,onScroll:te,ref:this._outerRefSetter,style:ae({position:"relative",height:m,width:ee,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:f},X)},_.createElement(d||p||"div",{children:F,ref:v,style:{height:L?"100%":k,pointerEvents:D?"none":void 0,width:L?k:"100%"}}))},y._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var e=this.props.itemCount;if(e>0){var a=this._getRangeToRender(),s=a[0],f=a[1],m=a[2],v=a[3];this._callOnItemsRendered(s,f,m,v)}}if(typeof this.props.onScroll=="function"){var d=this.state,p=d.scrollDirection,g=d.scrollOffset,x=d.scrollUpdateWasRequested;this._callOnScroll(p,g,x)}},y._getRangeToRender=function(){var e=this.props,a=e.itemCount,s=e.overscanCount,f=this.state,m=f.isScrolling,v=f.scrollDirection,d=f.scrollOffset;if(a===0)return[0,0,0,0];var p=c(this.props,d,this._instanceProps),g=l(this.props,p,d,this._instanceProps),x=!m||v==="backward"?Math.max(1,s):1,C=!m||v==="forward"?Math.max(1,s):1;return[Math.max(0,p-x),Math.max(0,Math.min(a-1,g+C)),p,g]},z}(_.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var he=function(t,r){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,r.instance},pe=50,w=function(t,r,n){var o=t,u=o.itemSize,c=n.itemMetadataMap,l=n.lastMeasuredIndex;if(r>l){var h=0;if(l>=0){var I=c[l];h=I.offset+I.size}for(var M=l+1;M<=r;M++){var T=u(M);c[M]={offset:h,size:T},h+=T}n.lastMeasuredIndex=r}return c[r]},ve=function(t,r,n){var o=r.itemMetadataMap,u=r.lastMeasuredIndex,c=u>0?o[u].offset:0;return c>=n?G(t,r,u,0,n):ge(t,r,Math.max(0,u),n)},G=function(t,r,n,o,u){for(;o<=n;){var c=o+Math.floor((n-o)/2),l=w(t,c,r).offset;if(l===u)return c;l<u?o=c+1:l>u&&(n=c-1)}return o>0?o-1:0},ge=function(t,r,n,o){for(var u=t.itemCount,c=1;n<u&&w(t,n,r).offset<o;)n+=c,c*=2;return G(t,r,Math.min(n,u-1),Math.floor(n/2),o)},K=function(t,r){var n=t.itemCount,o=r.itemMetadataMap,u=r.estimatedItemSize,c=r.lastMeasuredIndex,l=0;if(c>=n&&(c=n-1),c>=0){var h=o[c];l=h.offset+h.size}var I=n-c-1,M=I*u;return l+M},Ie=me({getItemOffset:function(t,r,n){return w(t,r,n).offset},getItemSize:function(t,r,n){return n.itemMetadataMap[r].size},getEstimatedTotalSize:K,getOffsetForIndexAndAlignment:function(t,r,n,o,u,c){var l=t.direction,h=t.height,I=t.layout,M=t.width,T=l==="horizontal"||I==="horizontal",z=T?M:h,y=w(t,r,u),S=K(t,u),e=Math.max(0,Math.min(S-z,y.offset)),a=Math.max(0,y.offset-z+y.size+c);switch(n==="smart"&&(o>=a-z&&o<=e+z?n="auto":n="center"),n){case"start":return e;case"end":return a;case"center":return Math.round(a+(e-a)/2);case"auto":default:return o>=a&&o<=e?o:o<a?a:e}},getStartIndexForOffset:function(t,r,n){return ve(t,n,r)},getStopIndexForStartIndex:function(t,r,n,o){for(var u=t.direction,c=t.height,l=t.itemCount,h=t.layout,I=t.width,M=u==="horizontal"||h==="horizontal",T=M?I:c,z=w(t,r,o),y=n+T,S=z.offset+z.size,e=r;e<l-1&&S<y;)e++,S+=w(t,e,o).size;return e},initInstanceProps:function(t,r){var n=t,o=n.estimatedItemSize,u={itemMetadataMap:{},estimatedItemSize:o||pe,lastMeasuredIndex:-1};return r.resetAfterIndex=function(c,l){l===void 0&&(l=!0),u.lastMeasuredIndex=Math.min(u.lastMeasuredIndex,c-1),r._getItemStyleCache(-1),l&&r.forceUpdate()},u},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});const Se=({index:i,setHeight:t,Component:r})=>{const n=_.useRef(null);return _.useEffect(()=>{n.current&&t(i,n.current.getBoundingClientRect().height)},[]),R(r,{ref:n,index:i})},Z=_.createContext(null),ye=({index:i,style:t})=>{const{Component:r,setHeight:n}=_.useContext(Z);return R("div",{style:t,children:R(Se,{index:i,setHeight:n,Component:r})},i)},j=_.memo(({count:i,Component:t,handle:r})=>{const n=_.useMemo(()=>Array.from({length:i}).map(()=>50),[]),o=_.useRef(null),u=l=>n[l],c=(l,h)=>{var I;n[l]=h,(I=o.current)==null||I.resetAfterIndex(l)};return _.useImperativeHandle(r,()=>({scrollToIndex:l=>{var h;(h=o.current)==null||h.scrollToItem(l)}})),R(Z.Provider,{value:_.useMemo(()=>({Component:t,setHeight:c}),[t,c]),children:R(ie,{children:({width:l,height:h})=>R(Ie,{ref:o,width:l,height:h,itemCount:i,itemSize:u,children:ye})})})});try{j.displayName="ReactWindowList",j.__docgenInfo={description:"",displayName:"ReactWindowList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{j as R};
//# sourceMappingURL=react-window-bf2e20ac.js.map
