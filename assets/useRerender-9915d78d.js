import{r as N}from"./index-c6dae603.js";import{j as te}from"./jsx-runtime-c3d7f245.js";const C=Math.min,O=Math.max,Ie=Math.abs,ne=Date.now,ke=Object.values,Oe=Array.isArray,F=setTimeout,D=(e,t,n)=>C(n,O(t,e)),q=e=>e!=null,Ee=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},fe=(e,t)=>{let n;const s=()=>{q(n)&&clearTimeout(n)},i=()=>{s(),n=F(()=>{n=null,e()},t)};return i._cancel=s,i},Re=(e,t)=>{let n=ne()-t;return(...s)=>{const i=ne();n+t<i&&(n=i,e(...s))}},x=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},$=e=>getComputedStyle(e),G=e=>e?parseFloat(e):0,y=-1,V=(e,t)=>{const n=e._sizes[t];return n===y?e._defaultItemSize:n},ze=(e,t,n)=>{const s=e._sizes[t]===y;return e._sizes[t]=n,e._computedOffsetIndex=C(t,e._computedOffsetIndex),s},Q=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=V(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},ye=e=>e._length?Q(e,e._length-1)+V(e,e._length-1):0,se=(e,t,n)=>{let s=Q(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=V(e,n);if(s+i>t)break;s+=i,n++}else s-=V(e,--n);return D(n,0,e._length-1)},re=(e,t,n,s)=>{const i=se(e,t,C(n,e._length-1));return[i,se(e,t+s,i)]},Le=e=>{const t=e._sizes.filter(s=>s!==y),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ee(t)},de=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](y),e._offsets.push(i===0?0:y);e._length=t},Te=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return de(n,e),n},oe=(e,t,n)=>{const s=t-e._length,i=s<0;let a;return i?(a=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,c)=>o+(c===y?e._defaultItemSize:c),0),e._offsets.splice(s)):(a=e._defaultItemSize*s,de(e,e._length+s,n)),e._computedOffsetIndex=n?0:D(t-1,0,e._computedOffsetIndex),e._length=t,[a,i]},ae=typeof window<"u",_e=()=>document.documentElement,Ce=x(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),X=x(()=>ae?$(_e()).direction==="rtl":!1),Z=x(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),xe=x(()=>"scrollBehavior"in _e().style),ie=(e,t,n)=>t.reduce((s,[i,a])=>{const o=a-V(e,i);return(!n||o>0)&&(s+=o),s},0),Ae=1.5,W=0,me=1,pe=2,J=1,K=2,Me=3,H=4,ee=5,ge=6,Se=7,B=1,Y=2,Ne=4,We=(e,t=40,n=0,s=Te(e,t),i,a)=>{let o=t*O(n-1,0),c=0,r=0,l=0,d=0,p=0,u=0,g=W,f=!1,_=null,m=!1,h=[0,n];const b=new Set,A=()=>ye(s),R=()=>A()-o+r,M=w=>D(w,0,R()),L=w=>{Z()&&g!==W?u+=w:(p+=w,d++)},T=w=>{const S=g;return g=w,g!==S};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return _?[C(h[0],_[0]),O(h[1],_[1])]:h=re(s,l+u,h[0],o)},_isUnmeasuredItem(w){return s._sizes[w]===y},_hasUnmeasuredItemsInSmoothScrollRange(){return _?s._sizes.slice(O(0,_[0]-1),C(s._length-1,_[1]+1)+1).includes(y):!1},_getItemOffset(w){const S=Q(s,w)-u;return i?S+O(0,o-A()):S},_getItemSize(w){return V(s,w)},_getItemsLength(){return s._length},_getScrollOffset(){return l},_getScrollOffsetMax:R,_getScrollDirection(){return g},_getViewportSize(){return o},_getViewportPaddingStart(){return c},_getCorrectedScrollSize(){return O(A(),o)},_getJumpCount(){return d},_flushJump(){const w=p;return p=0,w},_subscribe(w,S){const P=[w,S];return b.add(P),()=>{b.delete(P)}},_update(w,S){let P,j,E=0;switch(w){case J:{const v=S.filter(([z,k])=>s._sizes[z]!==k);if(!v.length)break;let I=0;if(l!==0)if(l>R()-Ae)I=ie(s,v,!0);else{const[z]=h;I=ie(s,v.filter(([k])=>k<z))}I&&L(I);let U=!1;v.forEach(([z,k])=>{ze(s,z,k)&&(U=!0)}),a&&U&&!l&&Le(s),E+=Y,m=j=!0;break}case K:{const v=S[0]+S[1]+S[2];o!==v&&(o=v,c=S[1],r=S[2],E=Y);break}case Me:{if(S[1]){const v=R()-l,[I,U]=oe(s,S[0],!0),z=U?-C(I,v):I;L(z),Z()||(l=M(l+z)),E=B}else oe(s,S[0]);break}case H:{if(l===S)break;const v=S-l,I=m;m=!1,(g===W||!I)&&!f&&T(v<0?pe:me),j=Ie(v)>o,E+=Ne,l=M(S),E+=B;break}case ee:{T(W)&&(P=!0,E=B),f=!1,_=null;break}case ge:{f=!0;break}case Se:{_=re(s,S,h[0],o),E=B;break}}E&&(P&&u&&(m=!0,p+=u,u=0,d++),b.forEach(([v,I])=>{E&v&&I(j)}))}}},De=ae?N.useLayoutEffect:N.useEffect,we=(e,t,n)=>Re(s=>{if(e._getScrollDirection()!==W&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),he=(e,t,n,s)=>Ce(e)||s?-n:t._getScrollOffsetMax()-n,Je=(e,t)=>{let n,s,i=!1;const a=t?"scrollLeft":"scrollTop",o=(r,l)=>t&&X()?he(n,e,r,l):r,c=async(r,l)=>{if(!n)return;s&&s();const d=()=>D(r(),0,e._getScrollOffsetMax()),p=()=>{let u;return[new Promise((g,f)=>{u=g,F(s=f,150)}),e._subscribe(Y,()=>{u&&u()})]};if(l&&xe()){for(;e._update(Se,d()),!!e._hasUnmeasuredItemsInSmoothScrollRange();){const[u,g]=p();try{await u}catch{return}finally{g()}}n.scrollTo({[t?"left":"top"]:o(d()),behavior:"smooth"})}else for(;;){const[u,g]=p();try{n[a]=o(d()),e._update(ge),await u}catch{return}finally{g()}}};return{_initRoot(r){n=r;let l=!1,d=!1;const p=()=>{e._update(H,o(r[a]))},u=fe(()=>{if(l){u();return}d=!1,p(),e._update(ee)},150),g=()=>{d&&(i=!0),p(),u()},f=we(e,t,u),_=()=>{l=!0,d=i=!1},m=()=>{l=!1,Z()&&(d=!0)};return r.addEventListener("scroll",g),r.addEventListener("wheel",f,{passive:!0}),r.addEventListener("touchstart",_,{passive:!0}),r.addEventListener("touchend",m,{passive:!0}),()=>{r.removeEventListener("scroll",g),r.removeEventListener("wheel",f),r.removeEventListener("touchstart",_),r.removeEventListener("touchend",m),u._cancel()}},_scrollTo(r){c(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),c(()=>r)},_scrollToIndex(r,{align:l,smooth:d}={}){r=D(r,0,e._getItemsLength()-1),c(l==="end"?()=>e._getViewportPaddingStart()+e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():l==="center"?()=>e._getViewportPaddingStart()+e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:()=>e._getViewportPaddingStart()+e._getItemOffset(r),d)},_fixScrollJump:r=>{if(n){if(i){const l=n.style.overflow;n.style.overflow="hidden",i=!1,F(()=>{n.style.overflow=l})}n[a]+=o(r,!0)}}}},Ke=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",a=(o,c)=>t&&X()?he(n,e,o,c):o;return{_initRoot(o){n=o;let c=!1;const r=(f,_)=>{const m=_+(t&&X()?window.innerWidth-f[i]-f.offsetWidth:f[i]),h=f.offsetParent;return f===document.body||!h?m:r(h,m)},l=()=>{c&&e._update(H,a(window[s])-r(o,0))},d=fe(()=>{l(),e._update(ee)},150),p=()=>{l(),d()},u=we(e,t,d),g=new IntersectionObserver(([f])=>{c=f.isIntersecting});return g.observe(o),window.addEventListener("scroll",p),window.addEventListener("wheel",u,{passive:!0}),()=>{g.disconnect(),window.removeEventListener("scroll",p),window.removeEventListener("wheel",u),d._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?a(o,!0):0,t?0:o)}}},le="current",Ue={},ve=(e,t)=>{if(Oe(e))for(const n of e)ve(n,t);else!q(e)||typeof e=="boolean"||t.push(e)},Be=e=>{const t=[];return ve(e,t),t},qe=(e,t,n)=>O(e-(n===me?1:O(1,t)),0),je=(e,t,n,s)=>C(e+(n===pe?1:O(1,t)),s-1),Fe=e=>{const t=N.useRef();return t[le]||(t[le]=e())},be={box:"border-box"},Ge=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,a=x(()=>new ResizeObserver(o=>{const c=[];for(const{target:r,contentRect:l}of o)if(r.offsetParent)if(r===n)e._update(K,[l[s],l[t?"left":"top"],G($(n)[t?"paddingRight":"paddingBottom"])]);else{const d=i.get(r);q(d)&&c.push([d,l[s]])}c.length&&e._update(J,c)}));return{_observeRoot(o){n=o;const c=a();return c.observe(o,be),()=>{c.disconnect()}},_observeItem(o,c){const r=a();return i.set(o,c),r.observe(o),()=>{i.delete(o),r.unobserve(o)}}}},Xe=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,a=x(()=>new ResizeObserver(o=>{const c=[];for(const{target:r,contentRect:l}of o){if(!r.offsetParent)continue;const d=i.get(r);q(d)&&c.push([d,l[n]])}c.length&&e._update(J,c)}));return{_observeRoot(){const o=()=>{e._update(K,[window[s],0,0])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),a().disconnect()}},_observeItem(o,c){const r=a();return i.set(o,c),r.observe(o),()=>{i.delete(o),r.unobserve(o)}}}},Ze=(e,t)=>{let n;const s="height",i="width",a=new WeakMap,o=new Set,c=new Set,r=new Map,l=(p,u)=>`${p}-${u}`,d=x(()=>new ResizeObserver(p=>{const u=new Set,g=new Set;for(const{target:f,contentRect:_}of p)if(f.offsetParent)if(f===n){const m=$(n);e._update(K,[_[s],_.top,G(m.paddingBottom)]),t._update(K,[_[i],_.left,G(m.paddingRight)])}else{const m=a.get(f);if(m){const[h,b]=m,A=l(h,b),R=r.get(A),M=[_[s],_[i]];let L,T;R?(R[0]!==M[0]&&(L=!0),R[1]!==M[1]&&(T=!0)):L=T=!0,L&&u.add(h),T&&g.add(b),(L||T)&&r.set(A,M)}}if(u.size){const f=[];u.forEach(_=>{let m=0;c.forEach(h=>{const b=r.get(l(_,h));b&&(m=O(m,b[0]))}),m&&f.push([_,m])}),e._update(J,f)}if(g.size){const f=[];g.forEach(_=>{let m=0;o.forEach(h=>{const b=r.get(l(h,_));b&&(m=O(m,b[1]))}),m&&f.push([_,m])}),t._update(J,f)}}));return{_observeRoot(p){n=p;const u=d();return u.observe(p,be),()=>{u.disconnect()}},_observeItem(p,u,g){const f=d();return a.set(p,[u,g]),o.add(u),c.add(g),f.observe(p),()=>{a.delete(p),f.unobserve(p)}}}},ue=N.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},a)=>te("div",{ref:a,...t,children:te("div",{style:N.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{ue.displayName="Viewport",ue.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const ce=()=>[],Ye=()=>N.useReducer(ce,void 0,ce)[1];export{Me as A,W as S,B as U,ue as V,Ye as a,De as b,Y as c,Ue as d,q as e,Be as f,We as g,Xe as h,Ke as i,je as j,qe as k,X as l,Ze as m,Je as n,Ne as o,Ge as p,le as r,Fe as u,ke as v};
//# sourceMappingURL=useRerender-9915d78d.js.map
