import{j}from"./jsx-runtime-KhpQ_ow-.js";import{r as g}from"./index-G6kSzgdV.js";import{r as me}from"./index-xBZDQ2qw.js";const X=Math.min,V=Math.max,ve=Math.abs,Q=Date.now,ge=Object.values,ye=Array.isArray,G=setTimeout,Y=(e,n,t)=>X(t,V(n,e)),K=e=>e!=null,be=(e,n)=>{let t;const r=()=>{K(t)&&clearTimeout(t)},s=()=>{r(),t=G(()=>{t=null,e()},n)};return s.t=r,s},F=e=>{let n,t;return(...r)=>(n||(n=!0,t=e(...r)),t)},le=e=>getComputedStyle(e),we=e=>e?parseFloat(e):0,A=-1,J=(e,n)=>{const t=e.o[n];return t===A?e.i:t},$=(e,n)=>{if(!e.l)return 0;if(e.u>=n)return e.h[n];let t=e.u,r=e.h[t];for(;t<n;)r+=J(e,t),e.h[++t]=r;return e.u=n,r},Z=(e,n,t)=>{let r=$(e,t);for(;t>=0&&t<e.l;)if(r<=n){const s=J(e,t);if(r+s>n)break;r+=s,t++}else r-=J(e,--t);return Y(t,0,e.l-1)},ee=(e,n,t,r)=>{const s=Z(e,n,X(t,e.l-1));return[s,Z(e,n+r,s)]},ie=(e,n,t)=>{const r=t?"unshift":"push";for(let s=e.l;s<n;s++)e.o[r](A),e.h.push(s===0?0:A);e.l=n},te=(e,n,t)=>{const r=n-e.l,s=r<0;let c;return s?(c=(t?e.o.splice(0,-r):e.o.splice(r)).reduce((l,i)=>l+(i===A?e.i:i),0),e.h.splice(r)):(c=e.i*r,ie(e,e.l+r,t)),e.u=t?0:Y(n-1,0,e.u),e.l=n,[c,s]},ce=typeof window<"u",ue=()=>document.documentElement,Le=F(e=>{const n="scrollLeft",t=e[n];e[n]=1;const r=e[n]<1;return e[n]=t,r}),ae=F(()=>!!ce&&le(ue()).direction==="rtl"),fe=F(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Re=F(()=>"scrollBehavior"in ue().style),re=(e,n,t)=>n.reduce((r,[s,c])=>{const l=c-J(e,s);return(!t||l>0)&&(r+=l),r},0),Ee=(e,n=40,t=0,r=((l,i)=>{const p={i,l:0,u:0,o:[],h:[]};return ie(p,l),p})(e,n),s,c)=>{let l=n*V(t-1,0),i=0,p=0,o=0,a=0,v=0,y=0,d=0,w=!1,b=null,I=!1,T=[0,t];const z=new Set,H=()=>(u=>u.l?$(u,u.l-1)+J(u,u.l-1):0)(r),m=()=>H()-l+i+p,P=u=>{fe()&&d!==0?y+=u:(v+=u,a++)},B=u=>{const h=d;return d=u,d!==h};return{_:()=>JSON.parse(JSON.stringify(r)),g:()=>b?[X(T[0],b[0]),V(T[1],b[1])]:T=ee(r,o+y+v,T[0],l),p:u=>r.o[u]===A,m:()=>!!b&&r.o.slice(V(0,b[0]-1),X(r.l-1,b[1]+1)+1).includes(A),v(u){const h=$(r,u)-y;return s?h+V(0,l-H()):h},S:u=>J(r,u),I:()=>r.l,R:()=>o,k:m,O:()=>d,C:()=>l,T:()=>i,M:()=>V(H(),l-i-p),H,J:()=>a,W(){const u=v;return v=0,u},B(u,h){const _=[u,h];return z.add(_),()=>{z.delete(_)}},L(u,h){let _,q,x=0;switch(u){case 1:{const L=h.filter(([S,M])=>r.o[S]!==M);if(!L.length)break;let R=0;if(o!==0)if(o>m()-1.5)R=re(r,L,!0);else{const[S]=T;R=re(r,L.filter(([M])=>M<S))}R&&P(R);let N=!1;L.forEach(([S,M])=>{((C,k,f)=>{const E=C.o[k]===A;return C.o[k]=f,C.u=X(k,C.u),E})(r,S,M)&&(N=!0)}),c&&N&&!o&&(S=>{const M=S.o.filter(k=>k!==A),C=M[0];S.i=M.every(k=>k===C)?C:(k=>{const f=[...k].sort((D,U)=>D-U),E=k.length/2|0;return f.length%2==0?(f[E-1]+f[E])/2:f[E]})(M)})(r),x=2,I=q=!0;break}case 2:{const L=h[0]+h[1]+h[2];l!==L&&(l=L,i=h[1],p=h[2],x=2);break}case 3:if(h[1]){const L=m()-o,[R,N]=te(r,h[0],!0);P(N?-X(R,L):R),x=1}else te(r,h[0]);break;case 4:{if(h===o)break;const L=h-o,R=I;I=!1,d!==0&&R||w||B(L<0?2:1),q=ve(L)>l,o=Y(h,0,m()),x=5;break}case 5:B(0)&&(_=!0,x=1),w=!1,b=null;break;case 6:w=!0;break;case 7:b=ee(r,h,T[0],l),x=1}x&&(_&&y&&(I=!0,v+=y,y=0,a++),z.forEach(([L,R])=>{x&L&&R(q)}))}}},W=ce?g.useLayoutEffect:g.useEffect,ke=(e,n,t)=>(()=>{let r=Q()-50;return(...s)=>{const c=Q();r+50<c&&(r=c,(l=>{if(e.O()!==0&&!l.ctrlKey&&(n?l.deltaX:l.deltaY)){const i=e.R();i>0&&i<e.k()&&t()}})(...s))}})(),xe=(e,n,t,r)=>Le(e)||r?-t:n.k()-t,Se=(e,n)=>{let t,r,s=!1;const c=n?"scrollLeft":"scrollTop",l=n?"overflowX":"overflowY",i=(o,a)=>n&&ae()?xe(t,e,o,a):o,p=async(o,a)=>{if(!t)return;r&&r();const v=()=>Y(o(),0,e.k()),y=()=>{let d;return[new Promise((w,b)=>{d=w,G(r=b,150)}),e.B(2,()=>{d&&d()})]};if(a&&Re()){for(;e.L(7,v()),e.m();){const[d,w]=y();try{await d}catch{return}finally{w()}}t.scrollTo({[n?"left":"top"]:i(v()),behavior:"smooth"})}else for(;;){const[d,w]=y();try{t[c]=i(v()),e.L(6),await d}catch{return}finally{w()}}};return{$(o){t=o;let a=!1,v=!1;const y=be(()=>{a?y():(v=!1,e.L(5))},150),d=()=>{v&&(s=!0),e.L(4,i(o[c])),y()},w=ke(e,n,y),b=()=>{a=!0,v=s=!1},I=()=>{a=!1,fe()&&(v=!0)};return o.addEventListener("scroll",d),o.addEventListener("wheel",w,{passive:!0}),o.addEventListener("touchstart",b,{passive:!0}),o.addEventListener("touchend",I,{passive:!0}),()=>{o.removeEventListener("scroll",d),o.removeEventListener("wheel",w),o.removeEventListener("touchstart",b),o.removeEventListener("touchend",I),y.t()}},P(o){p(()=>o)},V(o){o+=e.R(),p(()=>o)},X(o,{align:a,smooth:v}={}){if(o=Y(o,0,e.I()-1),a==="nearest"){const y=e.v(o),d=e.R();if(y<d)a="start";else{if(!(y+e.S(o)>d+e.C()))return;a="end"}}p(()=>a==="end"?e.T()+e.v(o)+e.S(o)-e.C():a==="center"?e.T()+e.v(o)+(e.S(o)-e.C())/2:e.T()+e.v(o),v)},Y:o=>{if(t){if(s){s=!1;const a=t.style,v=a[l];a[l]="hidden",G(()=>{a[l]=v})}t[c]+=i(o,!0)}}}},O="current",Te={},de=(e,n)=>{if(ye(e))for(const t of e)de(t,n);else K(e)&&typeof e!="boolean"&&n.push(e)},Me=(e,n,t)=>V(e-(t===1?1:V(1,n)),0),Ie=(e,n,t,r)=>X(e+(t===2?1:V(1,n)),r-1),_e=e=>{const n=g.useRef();return n[O]||(n[O]=e())},ne=e=>{const n=g.useRef(e);return W(()=>{n[O]=e},[e]),n},Ce={box:"border-box"},Ve=(e,n)=>{let t;const r=n?"width":"height",s=new WeakMap,c=F(()=>new ResizeObserver(l=>{const i=[];for(const{target:p,contentRect:o}of l)if(p.offsetParent)if(p===t)e.L(2,[o[r],o[n?"left":"top"],we(le(t)[n?"paddingRight":"paddingBottom"])]);else{const a=s.get(p);K(a)&&i.push([a,o[r]])}i.length&&e.L(1,i)}));return{j(l){t=l;const i=c();return i.observe(l,Ce),()=>{i.disconnect()}},D(l,i){const p=c();return s.set(l,i),p.observe(l),()=>{s.delete(l),p.unobserve(l)}}}},Oe=g.forwardRef(({children:e,attrs:n,width:t,height:r,scrolling:s},c)=>j("div",{ref:c,...n,children:j("div",{style:g.useMemo(()=>({position:"relative",visibility:"hidden",width:t??"100%",height:r??"100%",pointerEvents:s?"none":"auto"}),[t,r,s]),children:e})})),Be=g.memo(({N:e,U:n,A:t,F:r,G:s,q:c,K:l})=>{const i=g.useRef(null);W(()=>n.D(i[O],t),[t]);const p=g.useMemo(()=>{const o={margin:0,padding:0,position:"absolute",[l?"height":"width"]:"100%",[l?"top":"left"]:0,[l?ae()?"right":"left":"top"]:r,visibility:s?"hidden":"visible"};return l&&(o.display="flex"),o},[r,s]);return j(c,typeof c=="string"?{ref:i,style:p,children:e}:{ref:i,style:p,index:t,children:e})}),oe=()=>[],Ae=()=>g.useReducer(oe,void 0,oe)[1],He=(e,n)=>g.useMemo(()=>{if(typeof e=="function")return[e,n||0];const t=(r=>{const s=[];return de(r,s),s})(e);return[r=>t[r],t.length]},[e,n]),qe=g.forwardRef(({children:e,count:n,overscan:t=4,initialItemSize:r,initialItemCount:s,shift:c,horizontal:l,reverse:i,cache:p,components:{Root:o=Oe,Item:a="div"}=Te,onScroll:v,onScrollStop:y,onRangeChange:d,...w},b)=>{const[I,T]=He(e,n),z=ne(v),H=ne(y),[m,P,B,u]=_e(()=>{const f=!!l,E=Ee(T,r,s,p,!!i,!r);return[E,Ve(E,f),Se(E,f),f]});T!==m.I()&&m.L(3,[T,c]);const h=Ae(),[_,q]=m.g(),x=m.O(),L=m.J(),R=m.M(),N=g.useRef(null),S=x!==0;W(()=>{const f=N[O],E=m.B(3,pe=>{pe?me.flushSync(h):h()}),D=m.B(4,()=>{z[O]&&z[O](m.R())}),U=P.j(f),he=B.$(f);return()=>{E(),D(),U(),he()}},[]),W(()=>{const f=m.W();f&&B.Y(f)},[L]),g.useEffect(()=>{S||H[O]&&H[O]()},[S]),g.useEffect(()=>{d&&d(_,q)},[_,q]),g.useImperativeHandle(b,()=>({get cache(){return m._()},get scrollOffset(){return m.R()},get scrollSize(){return m.M()},get viewportSize(){return m.C()},scrollToIndex:B.X,scrollTo:B.P,scrollBy:B.V}),[]);const M=Me(_,t,x),C=Ie(q,t,x,T),k=[];for(let f=M;f<=C;f++){const E=I(f),D=E.key;k.push(j(Be,{U:P,A:f,F:m.v(f),G:m.p(f),q:a,N:E,K:u},K(D)?D:"_"+f))}return j(o,{ref:N,width:u?R:void 0,height:u?void 0:R,scrolling:S,attrs:g.useMemo(()=>({...w,style:{[u?"overflowX":"overflowY"]:"auto",display:u?"inline-block":"block",contain:"strict",width:"100%",height:"100%",...w.style}}),ge(w)),children:k})}),se=g.memo(({count:e,Component:n,handle:t})=>{const r=g.useRef(null);return g.useImperativeHandle(t,()=>({scrollToIndex:s=>{var c;(c=r.current)==null||c.scrollToIndex(s)}})),j(qe,{ref:r,children:Array.from({length:e}).map((s,c)=>j(n,{index:c},c))})});try{se.displayName="VirtuaList",se.__docgenInfo={description:"",displayName:"VirtuaList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{se as V};
//# sourceMappingURL=virtua-9w_xnovx.js.map
