import{j as F}from"./jsx-runtime-c3d7f245.js";import{r as o,R as L}from"./index-c6dae603.js";/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M(){return M=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},M.apply(this,arguments)}function $e(n,e){if(n==null)return{};var r={},t=Object.keys(n),a,s;for(s=0;s<t.length;s++)a=t[s],!(e.indexOf(a)>=0)&&(r[a]=n[a]);return r}var ke=["bottom","height","left","right","top","width"],we=function(e,r){return e===void 0&&(e={}),r===void 0&&(r={}),ke.some(function(t){return e[t]!==r[t]})},S=new Map,me,Ie=function n(){var e=[];S.forEach(function(r,t){var a=t.getBoundingClientRect();we(a,r.rect)&&(r.rect=a,e.push(r))}),e.forEach(function(r){r.callbacks.forEach(function(t){return t(r.rect)})}),me=window.requestAnimationFrame(n)};function Te(n,e){return{observe:function(){var t=S.size===0;S.has(n)?S.get(n).callbacks.push(e):S.set(n,{rect:void 0,hasRectChanged:!1,callbacks:[e]}),t&&Ie()},unobserve:function(){var t=S.get(n);if(t){var a=t.callbacks.indexOf(e);a>=0&&t.callbacks.splice(a,1),t.callbacks.length||S.delete(n),S.size||cancelAnimationFrame(me)}}}}var V=typeof window<"u"?o.useLayoutEffect:o.useEffect;function Fe(n,e){var r=e.rect;return n.height!==r.height||n.width!==r.width?r:n}var Le=function(e,r){r===void 0&&(r={width:0,height:0});var t=L.useState(e.current),a=t[0],s=t[1],v=L.useReducer(Fe,r),m=v[0],y=v[1],z=L.useRef(!1);return V(function(){e.current!==a&&s(e.current)}),V(function(){if(a&&!z.current){z.current=!0;var g=a.getBoundingClientRect();y({rect:g})}},[a]),L.useEffect(function(){if(a){var g=Te(a,function($){y({rect:$})});return g.observe(),function(){g.unobserve()}}},[a]),m},Ve=["align"],je=function(){return 50},qe=function(e){return e},Ke=function(e,r){var t=r?"offsetWidth":"offsetHeight";return e[t]},Ne=function(e){for(var r=Math.max(e.start-e.overscan,0),t=Math.min(e.end+e.overscan,e.size-1),a=[],s=r;s<=t;s++)a.push(s);return a},Ae=function(e){var r,t=e.size,a=t===void 0?0:t,s=e.estimateSize,v=s===void 0?je:s,m=e.overscan,y=m===void 0?1:m,z=e.paddingStart,g=z===void 0?0:z,$=e.paddingEnd,he=$===void 0?0:$,b=e.parentRef,_=e.horizontal,k=_===void 0?!1:_,pe=e.scrollToFn,ge=e.useObserver,Re=e.initialRect,W=e.onScrollElement,D=e.scrollOffsetFn,Y=e.keyExtractor,G=Y===void 0?qe:Y,J=e.measureSize,Q=J===void 0?Ke:J,U=e.rangeExtractor,X=U===void 0?Ne:U,Se=k?"width":"height",w=k?"scrollLeft":"scrollTop",h=o.useRef({outerSize:0,scrollOffset:0,measurements:[],totalSize:0}),Z=o.useState(0),ze=Z[0],ee=Z[1];h.current.scrollOffset=ze;var xe=ge||Le,ye=xe(b,Re),Ee=ye[Se];h.current.outerSize=Ee;var O=o.useCallback(function(u){b.current&&(b.current[w]=u)},[b,w]),re=pe||O,I=o.useCallback(function(u){re(u,O)},[O,re]),te=o.useState({}),ae=te[0],j=te[1],be=o.useCallback(function(){return j({})},[]),T=o.useRef([]),E=o.useMemo(function(){var u=T.current.length>0?Math.min.apply(Math,T.current):0;T.current=[];for(var l=h.current.measurements.slice(0,u),c=u;c<a;c++){var i=G(c),R=ae[i],d=l[c-1]?l[c-1].end:g,p=typeof R=="number"?R:v(c),x=d+p;l[c]={index:c,start:d,size:p,end:x,key:i}}return l},[v,ae,g,a,G]),ne=(((r=E[a-1])==null?void 0:r.end)||g)+he;h.current.measurements=E,h.current.totalSize=ne;var C=W?W.current:b.current,q=o.useRef(D);q.current=D,V(function(){if(!C){ee(0);return}var u=function(c){var i=q.current?q.current(c):C[w];ee(i)};return u(),C.addEventListener("scroll",u,{capture:!1,passive:!0}),function(){C.removeEventListener("scroll",u)}},[C,w]);var se=He(h.current),ue=se.start,ie=se.end,K=o.useMemo(function(){return X({start:ue,end:ie,overscan:y,size:E.length})},[ue,ie,y,E.length,X]),oe=o.useRef(Q);oe.current=Q;var Oe=o.useMemo(function(){for(var u=[],l=function(d,p){var x=K[d],B=E[x],f=M({},B,{measureRef:function(fe){if(fe){var H=oe.current(fe,k);if(H!==f.size){var ve=h.current.scrollOffset;f.start<ve&&O(ve+(H-f.size)),T.current.push(x),j(function(Me){var P;return M({},Me,(P={},P[f.key]=H,P))})}}}});u.push(f)},c=0,i=K.length;c<i;c++)l(c);return u},[K,O,k,E]),ce=o.useRef(!1);V(function(){ce.current&&j({}),ce.current=!0},[v]);var N=o.useCallback(function(u,l){var c=l===void 0?{align:"start"}:l,i=c.align,R=h.current,d=R.scrollOffset,p=R.outerSize;i==="auto"&&(u<=d?i="start":u>=d+p?i="end":i="start"),i==="start"?I(u):i==="end"?I(u-p):i==="center"&&I(u-p/2)},[I]),A=o.useCallback(function(u,l){var c=l===void 0?{align:"auto"}:l,i=c.align,R=$e(c,Ve),d=h.current,p=d.measurements,x=d.scrollOffset,B=d.outerSize,f=p[Math.max(0,Math.min(u,a-1))];if(f){if(i==="auto")if(f.end>=x+B)i="end";else if(f.start<=x)i="start";else return;var le=i==="center"?f.start+f.size/2:i==="end"?f.end:f.start;N(le,M({align:i},R))}},[N,a]),Ce=o.useCallback(function(u,l){A(u,l),requestAnimationFrame(function(){A(u,l)})},[A]);return{virtualItems:Oe,totalSize:ne,scrollToOffset:N,scrollToIndex:Ce,measure:be}},Be=function(e,r,t,a){for(;e<=r;){var s=(e+r)/2|0,v=t(s);if(v<a)e=s+1;else if(v>a)r=s-1;else return s}return e>0?e-1:0};function He(n){for(var e=n.measurements,r=n.outerSize,t=n.scrollOffset,a=e.length-1,s=function(z){return e[z].start},v=Be(0,a,s,t),m=v;m<a&&e[m].end<t+r;)m++;return{start:v,end:m}}const de=o.memo(({count:n,Component:e,handle:r})=>{const t=o.useRef(null),a=Ae({size:n,parentRef:t});return o.useImperativeHandle(r,()=>({scrollToIndex:a.scrollToIndex})),F("div",{ref:t,style:{flex:1,overflow:"auto"},children:F("div",{style:{height:`${a.totalSize}px`,width:"100%",position:"relative"},children:a.virtualItems.map(s=>F("div",{ref:s.measureRef,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${s.start}px)`},children:F(e,{index:s.index})},s.key))})})});try{de.displayName="ReactVirtualList",de.__docgenInfo={description:"",displayName:"ReactVirtualList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{de as R};
//# sourceMappingURL=react-virtual-7ab94db4.js.map
