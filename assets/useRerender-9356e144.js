import{r as N}from"./index-c6dae603.js";import{j as ne}from"./jsx-runtime-c3d7f245.js";const M=Math.min,O=Math.max,Ie=Math.abs,se=Date.now,ke=Object.values,Oe=Array.isArray,G=setTimeout,D=(e,t,n)=>M(n,O(t,e)),U=e=>e!=null,Ee=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},X=(e,t)=>{let n;const s=()=>{U(n)&&clearTimeout(n)},i=()=>{s(),n=G(()=>{n=null,e()},t)};return i._cancel=s,i},Re=(e,t)=>{let n=se()-t;return(...s)=>{const i=se();n+t<i&&(n=i,e(...s))}},C=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},Q=e=>getComputedStyle(e),Z=e=>e?parseFloat(e):0,T=-1,V=(e,t)=>{const n=e._sizes[t];return n===T?e._defaultItemSize:n},ze=(e,t,n)=>{const s=e._sizes[t]===T;return e._sizes[t]=n,e._computedOffsetIndex=M(t,e._computedOffsetIndex),s},H=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=V(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},ye=e=>e._length?H(e,e._length-1)+V(e,e._length-1):0,re=(e,t,n)=>{let s=H(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=V(e,n);if(s+i>t)break;s+=i,n++}else s-=V(e,--n);return D(n,0,e._length-1)},oe=(e,t,n,s)=>{const i=re(e,t,M(n,e._length-1));return[i,re(e,t+s,i)]},Le=e=>{const t=e._sizes.filter(s=>s!==T),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:Ee(t)},de=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](T),e._offsets.push(i===0?0:T);e._length=t},Te=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return de(n,e),n},ie=(e,t,n)=>{const s=t-e._length,i=s<0;let p;return i?(p=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,u)=>o+(u===T?e._defaultItemSize:u),0),e._offsets.splice(s)):(p=e._defaultItemSize*s,de(e,e._length+s,n)),e._computedOffsetIndex=n?0:D(t-1,0,e._computedOffsetIndex),e._length=t,[p,i]},ae=typeof window<"u",_e=()=>document.documentElement,Ce=C(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),Y=C(()=>ae?Q(_e()).direction==="rtl":!1),$=C(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),xe=C(()=>"scrollBehavior"in _e().style),le=(e,t,n)=>t.reduce((s,[i,p])=>{const o=p-V(e,i);return(!n||o>0)&&(s+=o),s},0),Ae=1.5,W=0,me=1,pe=2,J=1,K=2,Ne=3,ee=4,te=5,ge=6,Se=7,q=1,j=2,Me=4,We=(e,t=40,n=0,s=Te(e,t),i,p)=>{let o=t*O(n-1,0),u=0,r=0,l=0,_=0,d=0,f=0,m=W,c=!1,g=null,a=!1,v=[0,n];const h=new Set,x=()=>ye(s),R=()=>x()-o+r,A=w=>D(w,0,R()),y=w=>{$()&&m!==W?f+=w:(d+=w,_++)},L=w=>{const S=m;return m=w,m!==S};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){if(U(g)){const[w,S]=oe(s,g,v[0],o);return[M(v[0],w),O(v[1],S)]}return v=oe(s,l+f,v[0],o)},_isUnmeasuredItem(w){return s._sizes[w]===T},_getItemOffset(w){const S=H(s,w)-f;return i?S+O(0,o-x()):S},_getItemSize(w){return V(s,w)},_getItemsLength(){return s._length},_getScrollOffset(){return l},_getScrollOffsetMax:R,_getScrollDirection(){return m},_getViewportSize(){return o},_getViewportPaddingStart(){return u},_getCorrectedScrollSize(){return O(x(),o)},_getJumpCount(){return _},_flushJump(){const w=d;return d=0,w},_subscribe(w,S){const P=[w,S];return h.add(P),()=>{h.delete(P)}},_update(w,S){let P,F,E=0;switch(w){case J:{const b=S.filter(([z,k])=>s._sizes[z]!==k);if(!b.length)break;let I=0;if(l!==0)if(l>R()-Ae)I=le(s,b,!0);else{const[z]=v;I=le(s,b.filter(([k])=>k<z))}I&&y(I);let B=!1;b.forEach(([z,k])=>{ze(s,z,k)&&(B=!0)}),p&&B&&!l&&Le(s),E+=j,a=F=!0;break}case K:{const b=S[0]+S[1]+S[2];o!==b&&(o=b,u=S[1],r=S[2],E=j);break}case Ne:{if(S[1]){const b=R()-l,[I,B]=ie(s,S[0],!0),z=B?-M(I,b):I;y(z),$()||(l=A(l+z)),E=q}else ie(s,S[0]);break}case ee:{if(l===S)break;const b=S-l,I=a;a=!1,(m===W||!I)&&!c&&L(b<0?pe:me),F=Ie(b)>o,E+=Me,l=A(S),E+=q;break}case te:{L(W)&&(P=!0,E=q),c=!1,g=null;break}case ge:{c=!0;break}case Se:{g=S,E=q;break}}E&&(P&&f&&(a=!0,d+=f,f=0,_++),h.forEach(([b,I])=>{E&b&&I(F)}))}}},De=ae?N.useLayoutEffect:N.useEffect,we=(e,t,n)=>Re(s=>{if(e._getScrollDirection()!==W&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),ve=(e,t,n,s)=>Ce(e)||s?-n:t._getScrollOffsetMax()-n,Je=(e,t)=>{let n,s,i=!1;const p=t?"scrollLeft":"scrollTop",o=(r,l)=>t&&Y()?ve(n,e,r,l):r,u=async(r,l)=>{if(!n)return;s&&s();const _=()=>D(r(),0,e._getScrollOffsetMax());if(l&&xe()){let d;const f=()=>{e._update(Se,_())};f();const m=X(()=>{d&&d[0](),m._cancel()},100),c=e._subscribe(j,()=>{f(),m()});try{await new Promise((g,a)=>{d=[g,s=a],m()})}catch{return}finally{c(),m._cancel()}n.scrollTo({[t?"left":"top"]:o(_()),behavior:"smooth"});return}for(;;){let d;const f=e._subscribe(j,()=>{d&&d[0]()});try{n[p]=o(_()),e._update(ge),await new Promise((m,c)=>{d=[m,s=c],G(c,150)})}catch{return}finally{f()}}};return{_initRoot(r){n=r;let l=!1,_=!1;const d=()=>{e._update(ee,o(r[p]))},f=X(()=>{if(l){f();return}_=!1,d(),e._update(te)},150),m=()=>{_&&(i=!0),d(),f()},c=we(e,t,f),g=()=>{l=!0,_=i=!1},a=()=>{l=!1,$()&&(_=!0)};return r.addEventListener("scroll",m),r.addEventListener("wheel",c,{passive:!0}),r.addEventListener("touchstart",g,{passive:!0}),r.addEventListener("touchend",a,{passive:!0}),()=>{r.removeEventListener("scroll",m),r.removeEventListener("wheel",c),r.removeEventListener("touchstart",g),r.removeEventListener("touchend",a),f._cancel()}},_scrollTo(r){u(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),u(()=>r)},_scrollToIndex(r,{align:l,smooth:_}={}){r=D(r,0,e._getItemsLength()-1),u(l==="end"?()=>e._getViewportPaddingStart()+e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():l==="center"?()=>e._getViewportPaddingStart()+e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:()=>e._getViewportPaddingStart()+e._getItemOffset(r),_)},_fixScrollJump:r=>{if(n){if(i){const l=n.style.overflow;n.style.overflow="hidden",i=!1,G(()=>{n.style.overflow=l})}n[p]+=o(r,!0)}}}},Ke=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",p=(o,u)=>t&&Y()?ve(n,e,o,u):o;return{_initRoot(o){n=o;let u=!1;const r=(c,g)=>{const a=g+(t&&Y()?window.innerWidth-c[i]-c.offsetWidth:c[i]),v=c.offsetParent;return c===document.body||!v?a:r(v,a)},l=()=>{u&&e._update(ee,p(window[s])-r(o,0))},_=X(()=>{l(),e._update(te)},150),d=()=>{l(),_()},f=we(e,t,_),m=new IntersectionObserver(([c])=>{u=c.isIntersecting});return m.observe(o),window.addEventListener("scroll",d),window.addEventListener("wheel",f,{passive:!0}),()=>{m.disconnect(),window.removeEventListener("scroll",d),window.removeEventListener("wheel",f),_._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?p(o,!0):0,t?0:o)}}},ue="current",Ue={},be=(e,t)=>{if(Oe(e))for(const n of e)be(n,t);else!U(e)||typeof e=="boolean"||t.push(e)},Be=e=>{const t=[];return be(e,t),t},qe=(e,t,n)=>O(e-(n===me?1:O(1,t)),0),je=(e,t,n,s)=>M(e+(n===pe?1:O(1,t)),s-1),Fe=e=>{const t=N.useRef();return t[ue]||(t[ue]=e())},he={box:"border-box"},Ge=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,p=C(()=>new ResizeObserver(o=>{const u=[];for(const{target:r,contentRect:l}of o)if(r.offsetParent)if(r===n)e._update(K,[l[s],l[t?"left":"top"],Z(Q(n)[t?"paddingRight":"paddingBottom"])]);else{const _=i.get(r);U(_)&&u.push([_,l[s]])}u.length&&e._update(J,u)}));return{_observeRoot(o){n=o;const u=p();return u.observe(o,he),()=>{u.disconnect()}},_observeItem(o,u){const r=p();return i.set(o,u),r.observe(o),()=>{i.delete(o),r.unobserve(o)}}}},Xe=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,p=C(()=>new ResizeObserver(o=>{const u=[];for(const{target:r,contentRect:l}of o){if(!r.offsetParent)continue;const _=i.get(r);U(_)&&u.push([_,l[n]])}u.length&&e._update(J,u)}));return{_observeRoot(){const o=()=>{e._update(K,[window[s],0,0])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),p().disconnect()}},_observeItem(o,u){const r=p();return i.set(o,u),r.observe(o),()=>{i.delete(o),r.unobserve(o)}}}},Ze=(e,t)=>{let n;const s="height",i="width",p=new WeakMap,o=new Set,u=new Set,r=new Map,l=(d,f)=>`${d}-${f}`,_=C(()=>new ResizeObserver(d=>{const f=new Set,m=new Set;for(const{target:c,contentRect:g}of d)if(c.offsetParent)if(c===n){const a=Q(n);e._update(K,[g[s],g.top,Z(a.paddingBottom)]),t._update(K,[g[i],g.left,Z(a.paddingRight)])}else{const a=p.get(c);if(a){const[v,h]=a,x=l(v,h),R=r.get(x),A=[g[s],g[i]];let y,L;R?(R[0]!==A[0]&&(y=!0),R[1]!==A[1]&&(L=!0)):y=L=!0,y&&f.add(v),L&&m.add(h),(y||L)&&r.set(x,A)}}if(f.size){const c=[];f.forEach(g=>{let a=0;u.forEach(v=>{const h=r.get(l(g,v));h&&(a=O(a,h[0]))}),a&&c.push([g,a])}),e._update(J,c)}if(m.size){const c=[];m.forEach(g=>{let a=0;o.forEach(v=>{const h=r.get(l(v,g));h&&(a=O(a,h[1]))}),a&&c.push([g,a])}),t._update(J,c)}}));return{_observeRoot(d){n=d;const f=_();return f.observe(d,he),()=>{f.disconnect()}},_observeItem(d,f,m){const c=_();return p.set(d,[f,m]),o.add(f),u.add(m),c.observe(d),()=>{p.delete(d),c.unobserve(d)}}}},ce=N.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},p)=>ne("div",{ref:p,...t,children:ne("div",{style:N.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{ce.displayName="Viewport",ce.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const fe=()=>[],Ye=()=>N.useReducer(fe,void 0,fe)[1];export{Ne as A,W as S,q as U,ce as V,Ye as a,De as b,j as c,Ue as d,U as e,Be as f,We as g,Xe as h,Ke as i,je as j,qe as k,Y as l,Ze as m,Je as n,Me as o,Ge as p,ue as r,Fe as u,ke as v};
//# sourceMappingURL=useRerender-9356e144.js.map
