import{j as C}from"./jsx-runtime-WtcO95wV.js";import{r as n}from"./index-DaO3jVNX.js";import{a as M,A as Q,b as W,c as X,u as D,r as o,U as Y,h as Z,j as $,m as ee,g as se,S as te,d as re,k as oe,l as le,n as ne}from"./useRerender-2nbuV_q9.js";import{u as ae,a as j,L as ie}from"./useChildren-BpMocZl7.js";import{r as ce}from"./index-DpI4bZRz.js";const ue=n.forwardRef(({children:k,count:x,overscan:H=4,keepMounted:g,itemSize:h,shift:N,horizontal:w,cache:U,startMargin:q,ssrCount:E,as:f="div",item:P="div",scrollRef:b,onScroll:B,onScrollEnd:G,onRangeChange:v},J)=>{f=f;const[K,a]=ae(k,x),I=n.useRef(null),z=n.useRef(!!E),R=j(B),T=j(G),[e,m,l,d]=M(()=>{const s=!!w,t=re(a,h,E,U,!h,q);return[t,oe(t,s),le(t,s),s]});a!==e._getItemsLength()&&e._update(Q,[a,N]);const L=W(e),[_,p]=e._getRange(),O=e._getScrollDirection(),F=e._getJumpCount(),V=e._getTotalSize(),i=[],[y,A]=X(_,p,H,O,a),S=s=>{const t=K(s);return C.jsx(ie,{_resizer:m._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_element:P,_children:t,_isHorizontal:d,_isSSR:z[o]},ne(t,s))};D(()=>{z[o]=!1;const s=e._subscribe(Y,u=>{u?ce.flushSync(L):L()}),t=e._subscribe(Z,()=>{R[o]&&R[o](e._getScrollOffset())}),r=e._subscribe($,()=>{T[o]&&T[o]()}),c=u=>{m._observeRoot(u),l._observe(u)};return b?ee(()=>c(b[o])):c(I[o].parentElement),()=>{s(),t(),r(),m._dispose(),l._dispose()}},[]),D(()=>{l._fixScrollJump()},[F]),n.useEffect(()=>{v&&v(_,p)},[_,p]),n.useImperativeHandle(J,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return se(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:l._scrollToIndex,scrollTo:l._scrollTo,scrollBy:l._scrollBy}),[]);for(let s=y,t=A;s<=t;s++)i.push(S(s));if(g){const s=[],t=[];g.sort((r,c)=>r-c).forEach(r=>{r<y&&s.push(S(r)),r>A&&t.push(S(r))}),i.unshift(...s),i.push(...t)}return C.jsx(f,{ref:I,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?V:"100%",height:d?"100%":V,pointerEvents:O!==te?"none":"auto"},children:i})});ue.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ue as V};
