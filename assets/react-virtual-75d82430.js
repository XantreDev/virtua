import{j as I}from"./jsx-runtime-c3d7f245.js";import{r as c,R as L}from"./index-c6dae603.js";/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function M(){return M=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},M.apply(this,arguments)}function $e(n,e){if(n==null)return{};var r={},t=Object.keys(n),a,i;for(i=0;i<t.length;i++)a=t[i],!(e.indexOf(a)>=0)&&(r[a]=n[a]);return r}var ke=["bottom","height","left","right","top","width"],we=function(e,r){return e===void 0&&(e={}),r===void 0&&(r={}),ke.some(function(t){return e[t]!==r[t]})},S=new Map,me,Te=function n(){var e=[];S.forEach(function(r,t){var a=t.getBoundingClientRect();we(a,r.rect)&&(r.rect=a,e.push(r))}),e.forEach(function(r){r.callbacks.forEach(function(t){return t(r.rect)})}),me=window.requestAnimationFrame(n)};function Fe(n,e){return{observe:function(){var t=S.size===0;S.has(n)?S.get(n).callbacks.push(e):S.set(n,{rect:void 0,hasRectChanged:!1,callbacks:[e]}),t&&Te()},unobserve:function(){var t=S.get(n);if(t){var a=t.callbacks.indexOf(e);a>=0&&t.callbacks.splice(a,1),t.callbacks.length||S.delete(n),S.size||cancelAnimationFrame(me)}}}}var V=typeof window<"u"?c.useLayoutEffect:c.useEffect;function Ie(n,e){var r=e.rect;return n.height!==r.height||n.width!==r.width?r:n}var Le=function(e,r){r===void 0&&(r={width:0,height:0});var t=L.useState(e.current),a=t[0],i=t[1],v=L.useReducer(Ie,r),m=v[0],x=v[1],z=L.useRef(!1);return V(function(){e.current!==a&&i(e.current)}),V(function(){if(a&&!z.current){z.current=!0;var g=a.getBoundingClientRect();x({rect:g})}},[a]),L.useEffect(function(){if(a){var g=Fe(a,function($){x({rect:$})});return g.observe(),function(){g.unobserve()}}},[a]),m},Ve=["align"],je=function(){return 50},Ke=function(e){return e},Ne=function(e,r){var t=r?"offsetWidth":"offsetHeight";return e[t]},qe=function(e){for(var r=Math.max(e.start-e.overscan,0),t=Math.min(e.end+e.overscan,e.size-1),a=[],i=r;i<=t;i++)a.push(i);return a},Ae=function(e){var r,t=e.size,a=t===void 0?0:t,i=e.estimateSize,v=i===void 0?je:i,m=e.overscan,x=m===void 0?1:m,z=e.paddingStart,g=z===void 0?0:z,$=e.paddingEnd,he=$===void 0?0:$,b=e.parentRef,H=e.horizontal,k=H===void 0?!1:H,pe=e.scrollToFn,ge=e.useObserver,Re=e.initialRect,W=e.onScrollElement,D=e.scrollOffsetFn,Y=e.keyExtractor,G=Y===void 0?Ke:Y,J=e.measureSize,Q=J===void 0?Ne:J,U=e.rangeExtractor,X=U===void 0?qe:U,Se=k?"width":"height",w=k?"scrollLeft":"scrollTop",h=c.useRef({outerSize:0,scrollOffset:0,measurements:[],totalSize:0}),Z=c.useState(0),ze=Z[0],ee=Z[1];h.current.scrollOffset=ze;var ye=ge||Le,xe=ye(b,Re),Ee=xe[Se];h.current.outerSize=Ee;var O=c.useCallback(function(s){b.current&&(b.current[w]=s)},[b,w]),re=pe||O,T=c.useCallback(function(s){re(s,O)},[O,re]),te=c.useState({}),ae=te[0],j=te[1],be=c.useCallback(function(){return j({})},[]),F=c.useRef([]),E=c.useMemo(function(){var s=F.current.length>0?Math.min.apply(Math,F.current):0;F.current=[];for(var l=h.current.measurements.slice(0,s),o=s;o<a;o++){var u=G(o),R=ae[u],d=l[o-1]?l[o-1].end:g,p=typeof R=="number"?R:v(o),y=d+p;l[o]={index:o,start:d,size:p,end:y,key:u}}return l},[v,ae,g,a,G]),ne=(((r=E[a-1])==null?void 0:r.end)||g)+he;h.current.measurements=E,h.current.totalSize=ne;var C=W?W.current:b.current,K=c.useRef(D);K.current=D,V(function(){if(!C){ee(0);return}var s=function(o){var u=K.current?K.current(o):C[w];ee(u)};return s(),C.addEventListener("scroll",s,{capture:!1,passive:!0}),function(){C.removeEventListener("scroll",s)}},[C,w]);var se=Pe(h.current),ue=se.start,ie=se.end,N=c.useMemo(function(){return X({start:ue,end:ie,overscan:x,size:E.length})},[ue,ie,x,E.length,X]),oe=c.useRef(Q);oe.current=Q;var Oe=c.useMemo(function(){for(var s=[],l=function(d,p){var y=N[d],B=E[y],f=M({},B,{measureRef:function(fe){if(fe){var P=oe.current(fe,k);if(P!==f.size){var ve=h.current.scrollOffset;f.start<ve&&O(ve+(P-f.size)),F.current.push(y),j(function(Me){var _;return M({},Me,(_={},_[f.key]=P,_))})}}}});s.push(f)},o=0,u=N.length;o<u;o++)l(o);return s},[N,O,k,E]),ce=c.useRef(!1);V(function(){ce.current&&j({}),ce.current=!0},[v]);var q=c.useCallback(function(s,l){var o=l===void 0?{align:"start"}:l,u=o.align,R=h.current,d=R.scrollOffset,p=R.outerSize;u==="auto"&&(s<=d?u="start":s>=d+p?u="end":u="start"),u==="start"?T(s):u==="end"?T(s-p):u==="center"&&T(s-p/2)},[T]),A=c.useCallback(function(s,l){var o=l===void 0?{align:"auto"}:l,u=o.align,R=$e(o,Ve),d=h.current,p=d.measurements,y=d.scrollOffset,B=d.outerSize,f=p[Math.max(0,Math.min(s,a-1))];if(f){if(u==="auto")if(f.end>=y+B)u="end";else if(f.start<=y)u="start";else return;var le=u==="center"?f.start+f.size/2:u==="end"?f.end:f.start;q(le,M({align:u},R))}},[q,a]),Ce=c.useCallback(function(s,l){A(s,l),requestAnimationFrame(function(){A(s,l)})},[A]);return{virtualItems:Oe,totalSize:ne,scrollToOffset:q,scrollToIndex:Ce,measure:be}},Be=function(e,r,t,a){for(;e<=r;){var i=(e+r)/2|0,v=t(i);if(v<a)e=i+1;else if(v>a)r=i-1;else return i}return e>0?e-1:0};function Pe(n){for(var e=n.measurements,r=n.outerSize,t=n.scrollOffset,a=e.length-1,i=function(z){return e[z].start},v=Be(0,a,i,t),m=v;m<a&&e[m].end<t+r;)m++;return{start:v,end:m}}const de=({count:n,Component:e})=>{const r=c.useRef(null),t=Ae({size:n,parentRef:r});return I("div",{ref:r,style:{flex:1,overflow:"auto"},children:I("div",{style:{height:`${t.totalSize}px`,width:"100%",position:"relative"},children:t.virtualItems.map(a=>I("div",{ref:a.measureRef,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${a.start}px)`},children:I(e,{index:a.index})},a.key))})})};try{de.displayName="ReactVirtualList",de.__docgenInfo={description:"",displayName:"ReactVirtualList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}}}}}catch{}export{de as R};
//# sourceMappingURL=react-virtual-75d82430.js.map
