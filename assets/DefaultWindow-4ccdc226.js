import{r as v}from"./index-5284b0bf.js";import{r as oe}from"./index-480187bb.js";import{j as Z}from"./jsx-runtime-f8a6c6ea.js";const J=Math.min,R=Math.max,ie=Math.abs,$=Date.now,T=e=>e!=null,Q=(e,t)=>Array.from({length:e},(s,n)=>t(n)),ue=e=>{const t=[...e].sort((n,i)=>n-i),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},le=(e,t)=>{let s;const n=()=>{T(s)&&clearTimeout(s)},i=()=>{n(),s=setTimeout(()=>{s=null,e()},t)};return i._cancel=n,i},ce=(e,t)=>{let s=$()-t;return(...n)=>{const i=$();s+t<i&&(s=i,e(...n))}},P=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},E=-1,D=(e,t)=>{const s=e._sizes[t];return s===E?e._defaultItemSize:s},fe=(e,t,s)=>{const n=e._sizes[t]===E;return e._sizes[t]=s,e._measuredOffsetIndex=J(t,e._measuredOffsetIndex),n},ne=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+D(e,t):e._offsets[t];let n=e._measuredOffsetIndex,i=e._offsets[n];for(;n<=t&&(e._offsets[n]=i,!(n===t&&!s));)i+=D(e,n),n++;return e._measuredOffsetIndex=t,i},ae=e=>ne(e,e._length-1,!0),X=(e,t)=>ne(e,t),re=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const i=D(e,t++);if((n+=i)>=s){n-i/2>=s&&t--;break}}else for(;t>0;){const i=D(e,--t);if((n-=i)<=s){n+i/2<s&&t++;break}}return J(R(t,0),e._length-1)},Y=(e,t,s,n)=>re(e,s,t-n),B=re,de=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===E)return!0;return!1},_e=e=>{const t=e._sizes.filter(n=>n!==E),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:ue(t)},H=(e,t,s)=>({_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?J(s._measuredOffsetIndex,e-1):0,_sizes:Q(e,n=>{const i=s&&s._sizes[n];return T(i)?i:E}),_offsets:Q(e,n=>{if(n===0)return 0;const i=s&&s._offsets[n];return T(i)?i:E})}),ee=e=>e.reduce((t,[s])=>t+s,0),L=0,te=1,K=2,k=3,A=1,V=2,x=3,q=4,F=5,he=(e,t,s=0,n,i,I)=>{const a=!t,d=t||40;let _=d*R(s-1,0),r=0,m=0,f,o=H(e,d),c=L,l=!1,g=[0,s],S;const z=new Set,h=()=>ae(o),M=()=>{const u=l;return l=!1,u},y=u=>{const p=c;if(c=u,c===L)return!1;if(p===L&&(c===te||c===K))return!0};return{_getRange(){const[u,p]=g,w=X(o,u),b=Y(o,r,u,w),O=B(o,b,_);return u===b&&p===O?g:g=[b,O]},_isUnmeasuredItem(u){return o._sizes[u]===E},_hasUnmeasuredItemsInRange(u){return de(o,u,B(o,u,_))},_getItemOffset(u){const p=X(o,u);return n?p+R(0,_-h()):p},_getItemSize(u){return D(o,u)},_getScrollOffset(){return r},_getViewportSize(){return _},_getScrollSize(){return h()},_getScrollableDomSize(){return R(h(),_)},_getJumpCount(){return m},_flushJump(){const u=f;return f=void 0,u},_getItemIndexForScrollTo(u){return Y(o,u,0,0)},_waitForScrollDestinationItemsMeasured(){return S&&S[1](),new Promise((u,p)=>{S=[()=>{u(),S=void 0},p]})},_subscribe(u){return z.add(u),()=>{z.delete(u)}},_update(u,p){let w,b,O=!1;switch(u){case A:{const C=p.filter(([N,W])=>o._sizes[N]!==W);if(!C.length)break;let j=!1;const G=[];C.forEach(([N,W])=>{G.push([W-D(o,N),N]),fe(o,N,W)&&(j=!0)}),a&&j&&!r&&_e(o),(c===k||c===K)&&(f=[G,c===k],m++),l=w=O=!0;break}case V:{O=_!==p,_=p;break}case x:case q:{if(r===p)break;if(u===x){const C=M();(c===L||!C)&&c!==k&&(b=y(r>p?K:te)),w=ie(r-p)>_}r=p,O=!0;break}case F:{b=y(p);break}}O&&(z.forEach(C=>{C(w)}),u===x?I(r):S&&u===A&&S[0]()),T(b)&&i(b)},_getScrollDirection(){return c},_updateCacheLength(u){o._length!==u&&(o=H(u,d,o))}}},me=typeof window<"u"?v.useLayoutEffect:v.useEffect,U="current",we=e=>!T(e)||typeof e=="boolean",pe=e=>{const t=v.useRef(e);return me(()=>{t[U]=e},[e]),t},be=(e,t,s)=>{const[n,i]=v.useState(t),I=pe(t);if(v.useLayoutEffect(()=>{const a=()=>{i(()=>I[U]())};return e._subscribe(d=>{d?oe.flushSync(a):a()})},[]),s){const a=t();n!==a&&i(a)}return n},Se=P(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),Re=(e,t,s)=>{let n;const i=t?"scrollLeft":"scrollTop",I=()=>n?t?n.scrollWidth:n.scrollHeight:0,a=(r,m)=>Se(n)||m?-r:e._getScrollSize()-e._getViewportSize()-r,d=(r,m)=>{n&&(t&&s&&(r=a(r,m)),m?n[i]+=r:(n[i]=r,e._update(F,k)))},_=async(r,m)=>{const f=()=>{let o=m();const c=I(),l=e._getViewportSize();return c-(o+l)<=0&&(o=c-l),o};if(e._hasUnmeasuredItemsInRange(r)){do{e._update(q,f());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(r));d(f())}else{const o=f();d(o),e._update(q,o)}};return{_initRoot(r){n=r;const m=()=>{let l=r[i];t&&s&&(l=a(l)),e._update(x,l)},f=le(()=>{m(),e._update(F,L)},150),o=()=>{m(),f()},c=ce(l=>{if(e._getScrollDirection()!==L&&!l.ctrlKey&&(t?l.deltaX:l.deltaY)){const g=e._getScrollOffset();g>0&&g<e._getScrollSize()-e._getViewportSize()&&f()}},50);return r.addEventListener("scroll",o),r.addEventListener("wheel",c,{passive:!0}),()=>{r.removeEventListener("scroll",o),r.removeEventListener("wheel",c),f._cancel()}},_getActualScrollSize:I,_scrollTo(r){r=R(r,0),_(e._getItemIndexForScrollTo(r),()=>r)},_scrollToIndex(r,m){r=R(J(r,m-1),0),_(r,()=>e._getItemOffset(r))},_fixScrollJump:([r,m],f)=>{if(m){const o=e._getScrollOffset();if(o!==0){const c=ee(r);if(e._getScrollSize()-(o+e._getViewportSize()+c)<=0)c&&d(o+c);else{const l=r.reduce((g,[S,z])=>(z<f&&(g+=S),g),0);l&&d(l,!0)}}}else{const o=ee(r);o&&d(o,!0)}}}},ve=e=>{const t=v.useRef();return t[U]||(t[U]=e())},Oe=(e,t)=>{let s;const n=t?"width":"height",i=new WeakMap,I=P(()=>new ResizeObserver(a=>{const d=[];for(const{target:_,contentRect:r}of a)if(_===s)e._update(V,r[n]);else{const m=i.get(_);T(m)&&d.push([m,r[n]])}d.length&&e._update(A,d)}));return{_observeRoot(a){s=a;const d=I();return d.observe(a),()=>{d.disconnect()}},_observeItem(a,d){const _=I();return i.set(a,d),_.observe(a),()=>{i.delete(a),_.unobserve(a)}}}},Ee=(e,t)=>{let s;const n="height",i="width",I=new WeakMap,a=new Set,d=new Set,_=new Map,r=(f,o)=>`${f}-${o}`,m=P(()=>new ResizeObserver(f=>{const o=new Set,c=new Set;for(const{target:l,contentRect:g}of f)if(l===s)e._update(V,g[n]),t._update(V,g[i]);else{const S=I.get(l);if(S){const[z,h]=S,M=r(z,h),y=_.get(M),u=[g[n],g[i]];let p,w;y?(y[0]!==u[0]&&(p=!0),y[1]!==u[1]&&(w=!0)):p=w=!0,p&&o.add(z),w&&c.add(h),(p||w)&&_.set(M,u)}}if(o.size){const l=[];o.forEach(g=>{let S=0;d.forEach(z=>{const h=_.get(r(g,z));h&&(S=R(S,h[0]))}),S&&l.push([g,S])}),e._update(A,l)}if(c.size){const l=[];c.forEach(g=>{let S=0;a.forEach(z=>{const h=_.get(r(z,g));h&&(S=R(S,h[1]))}),S&&l.push([g,S])}),t._update(A,l)}}));return{_observeRoot(f){s=f;const o=m();return o.observe(f),()=>{o.disconnect()}},_observeItem(f,o,c){const l=m();return I.set(f,[o,c]),a.add(o),d.add(c),l.observe(f),()=>{I.delete(f),l.unobserve(f)}}}},se=v.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:i},I)=>Z("div",{ref:I,...t,children:Z("div",{style:v.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:i?"none":"auto"}),[s,n,i]),children:e})}));try{se.displayName="DefaultWindow",se.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{se as D,me as a,pe as b,ve as c,he as d,T as e,Oe as f,Re as g,J as h,we as i,Ee as j,R as m,U as r,be as u};
//# sourceMappingURL=DefaultWindow-4ccdc226.js.map
