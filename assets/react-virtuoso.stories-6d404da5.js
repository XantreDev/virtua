import{j as J,a as yt}from"./jsx-runtime-c3d7f245.js";import{I as xe,S as Ce,V as ye,H as We,a as Me}from"./virtua-ba970ddf.js";import{R as x,r as Kn}from"./index-c6dae603.js";import{R as qn}from"./index-eb008d06.js";import"./List-530e9e42.js";const le=0,bt=1,kt=2,gn=4;function xn(t,e){return n=>t(e(n))}function Yn(t,e){return e(t)}function In(t,e){return n=>t(e,n)}function Pe(t,e){return()=>t(e)}function ce(t,e){return e(t),t}function K(...t){return t}function Zn(t){t()}function Ge(t){return()=>t}function Jn(...t){return()=>{t.map(Zn)}}function Dt(){}function $(t,e){return t(bt,e)}function F(t,e){t(le,e)}function Ee(t){t(kt)}function xt(t){return t(gn)}function B(t,e){return $(t,In(e,le))}function _t(t,e){const n=t(bt,o=>{n(),e(o)});return n}function P(){const t=[];return(e,n)=>{switch(e){case kt:t.splice(0,t.length);return;case bt:return t.push(n),()=>{const o=t.indexOf(n);o>-1&&t.splice(o,1)};case le:t.slice().forEach(o=>{o(n)});return;default:throw new Error(`unrecognized action ${e}`)}}}function y(t){let e=t;const n=P();return(o,r)=>{switch(o){case bt:r(e);break;case le:e=r;break;case gn:return e}return n(o,r)}}function Qn(t){let e,n;const o=()=>e&&e();return function(r,s){switch(r){case bt:return s?n===s?void 0:(o(),n=s,e=$(t,s),e):(o(),Dt);case kt:o(),n=null;return;default:throw new Error(`unrecognized action ${r}`)}}}function pt(t){return ce(P(),e=>B(t,e))}function it(t,e){return ce(y(e),n=>B(t,n))}function Xn(...t){return e=>t.reduceRight(Yn,e)}function v(t,...e){const n=Xn(...e);return(o,r)=>{switch(o){case bt:return $(t,n(r));case kt:Ee(t);return}}}function vn(t,e){return t===e}function j(t=vn){let e;return n=>o=>{t(e,o)||(e=o,n(o))}}function V(t){return e=>n=>{t(n)&&e(n)}}function R(t){return e=>xn(e,t)}function Rt(t){return e=>()=>e(t)}function Ct(t,e){return n=>o=>n(e=t(e,o))}function oe(t){return e=>n=>{t>0?t--:e(n)}}function zt(t){let e,n;return o=>r=>{e=r,!n&&(n=setTimeout(()=>{n=void 0,o(e)},t))}}function Ae(t){let e,n;return o=>r=>{e=r,n&&clearTimeout(n),n=setTimeout(()=>{o(e)},t)}}function M(...t){const e=new Array(t.length);let n=0,o=null;const r=Math.pow(2,t.length)-1;return t.forEach((s,i)=>{const l=Math.pow(2,i);$(s,u=>{const m=n;n=n|l,e[i]=u,m!==r&&n===r&&o&&(o(),o=null)})}),s=>i=>{const l=()=>s([i].concat(e));n===r?l():o=l}}function Fe(...t){return function(e,n){switch(e){case bt:return Jn(...t.map(o=>$(o,n)));case kt:return;default:throw new Error(`unrecognized action ${e}`)}}}function k(t,e=vn){return v(t,j(e))}function nt(...t){const e=P(),n=new Array(t.length);let o=0;const r=Math.pow(2,t.length)-1;return t.forEach((s,i)=>{const l=Math.pow(2,i);$(s,u=>{n[i]=u,o=o|l,o===r&&F(e,n)})}),function(s,i){switch(s){case bt:return o===r&&i(n),$(e,i);case kt:return Ee(e);default:throw new Error(`unrecognized action ${s}`)}}}function A(t,e=[],{singleton:n}={singleton:!0}){return{id:to(),constructor:t,dependencies:e,singleton:n}}const to=()=>Symbol();function eo(t){const e=new Map,n=({id:o,constructor:r,dependencies:s,singleton:i})=>{if(i&&e.has(o))return e.get(o);const l=r(s.map(u=>n(u)));return i&&e.set(o,l),l};return n(t)}function no(t,e){const n={},o={};let r=0;const s=t.length;for(;r<s;)o[t[r]]=1,r+=1;for(const i in e)o.hasOwnProperty(i)||(n[i]=e[i]);return n}const Jt=typeof document<"u"?x.useLayoutEffect:x.useEffect;function Sn(t,e,n){const o=Object.keys(e.required||{}),r=Object.keys(e.optional||{}),s=Object.keys(e.methods||{}),i=Object.keys(e.events||{}),l=x.createContext({});function u(d,g){d.propsReady&&F(d.propsReady,!1);for(const f of o){const p=d[e.required[f]];F(p,g[f])}for(const f of r)if(f in g){const p=d[e.optional[f]];F(p,g[f])}d.propsReady&&F(d.propsReady,!0)}function m(d){return s.reduce((g,f)=>(g[f]=p=>{const w=d[e.methods[f]];F(w,p)},g),{})}function a(d){return i.reduce((g,f)=>(g[f]=Qn(d[e.events[f]]),g),{})}return{Component:x.forwardRef((d,g)=>{const{children:f,...p}=d,[w]=x.useState(()=>ce(eo(t),c=>u(c,p))),[b]=x.useState(Pe(a,w));return Jt(()=>{for(const c of i)c in p&&$(b[c],p[c]);return()=>{Object.values(b).map(Ee)}},[p,b,w]),Jt(()=>{u(w,p)}),x.useImperativeHandle(g,Ge(m(w))),x.createElement(l.Provider,{value:w},n?x.createElement(n,no([...o,...r,...i],p),f):f)}),usePublisher:d=>x.useCallback(In(F,x.useContext(l)[d]),[d]),useEmitterValue:d=>{const f=x.useContext(l)[d],[p,w]=x.useState(Pe(xt,f));return Jt(()=>$(f,b=>{b!==p&&w(Ge(b))}),[f,p]),p},useEmitter:(d,g)=>{const p=x.useContext(l)[d];Jt(()=>$(p,g),[g,p])}}}const oo=typeof document<"u"?x.useLayoutEffect:x.useEffect,ro=oo;var ht=(t=>(t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR",t))(ht||{});const so={[0]:"debug",[1]:"log",[2]:"warn",[3]:"error"},io=()=>typeof globalThis>"u"?window:globalThis,Ht=A(()=>{const t=y(3);return{log:y((n,o,r=1)=>{const s=io().VIRTUOSO_LOG_LEVEL??xt(t);r>=s&&console[so[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",n,o)}),logLevel:t}},[],{singleton:!0});function Re(t,e=!0){const n=x.useRef(null);let o=r=>{};if(typeof ResizeObserver<"u"){const r=x.useMemo(()=>new ResizeObserver(s=>{const i=s[0].target;i.offsetParent!==null&&t(i)}),[t]);o=s=>{s&&e?(r.observe(s),n.current=s):(n.current&&r.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:o}}function Bt(t,e=!0){return Re(t,e).callbackRef}function lo(t,e,n,o,r,s,i){const l=x.useCallback(u=>{const m=co(u.children,e,"offsetHeight",r);let a=u.parentElement;for(;!a.dataset.virtuosoScroller;)a=a.parentElement;const h=a.lastElementChild.dataset.viewportType==="window",S=i?i.scrollTop:h?window.pageYOffset||document.documentElement.scrollTop:a.scrollTop,C=i?i.scrollHeight:h?document.documentElement.scrollHeight:a.scrollHeight,E=i?i.offsetHeight:h?window.innerHeight:a.offsetHeight;o({scrollTop:Math.max(S,0),scrollHeight:C,viewportHeight:E}),s==null||s(uo("row-gap",getComputedStyle(u).rowGap,r)),m!==null&&t(m)},[t,e,r,s,i,o]);return Re(l,n)}function co(t,e,n,o){const r=t.length;if(r===0)return null;const s=[];for(let i=0;i<r;i++){const l=t.item(i);if(!l||l.dataset.index===void 0)continue;const u=parseInt(l.dataset.index),m=parseFloat(l.dataset.knownSize),a=e(l,n);if(a===0&&o("Zero-sized element, this should not happen",{child:l},ht.ERROR),a===m)continue;const h=s[s.length-1];s.length===0||h.size!==a||h.endIndex!==u-1?s.push({startIndex:u,endIndex:u,size:a}):s[s.length-1].endIndex++}return s}function uo(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,ht.WARN),e==="normal"?0:parseInt(e??"0",10)}function Ot(t,e){return Math.round(t.getBoundingClientRect()[e])}function wn(t,e){return Math.abs(t-e)<1.01}function Tn(t,e,n,o=Dt,r){const s=x.useRef(null),i=x.useRef(null),l=x.useRef(null),u=x.useCallback(h=>{const S=h.target,C=S===window||S===document,E=C?window.pageYOffset||document.documentElement.scrollTop:S.scrollTop,d=C?document.documentElement.scrollHeight:S.scrollHeight,g=C?window.innerHeight:S.offsetHeight,f=()=>{t({scrollTop:Math.max(E,0),scrollHeight:d,viewportHeight:g})};h.suppressFlushSync?f():qn.flushSync(f),i.current!==null&&(E===i.current||E<=0||E===d-g)&&(i.current=null,e(!0),l.current&&(clearTimeout(l.current),l.current=null))},[t,e]);x.useEffect(()=>{const h=r||s.current;return o(r||s.current),u({target:h,suppressFlushSync:!0}),h.addEventListener("scroll",u,{passive:!0}),()=>{o(null),h.removeEventListener("scroll",u)}},[s,u,n,o,r]);function m(h){const S=s.current;if(!S||"offsetHeight"in S&&S.offsetHeight===0)return;const C=h.behavior==="smooth";let E,d,g;S===window?(d=Math.max(Ot(document.documentElement,"height"),document.documentElement.scrollHeight),E=window.innerHeight,g=document.documentElement.scrollTop):(d=S.scrollHeight,E=Ot(S,"height"),g=S.scrollTop);const f=d-E;if(h.top=Math.ceil(Math.max(Math.min(f,h.top),0)),wn(E,d)||h.top===g){t({scrollTop:g,scrollHeight:d,viewportHeight:E}),C&&e(!0);return}C?(i.current=h.top,l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{l.current=null,i.current=null,e(!0)},1e3)):i.current=null,S.scrollTo(h)}function a(h){s.current.scrollBy(h)}return{scrollerRef:s,scrollByCallback:a,scrollToCallback:m}}const at=A(()=>{const t=P(),e=P(),n=y(0),o=P(),r=y(0),s=P(),i=P(),l=y(0),u=y(0),m=y(0),a=y(0),h=P(),S=P(),C=y(!1);return B(v(t,R(({scrollTop:E})=>E)),e),B(v(t,R(({scrollHeight:E})=>E)),i),B(e,r),{scrollContainerState:t,scrollTop:e,viewportHeight:s,headerHeight:l,fixedHeaderHeight:u,fixedFooterHeight:m,footerHeight:a,scrollHeight:i,smoothScrollTargetReached:o,scrollTo:h,scrollBy:S,statefulScrollTop:r,deviation:n,scrollingInProgress:C}},[],{singleton:!0}),Gt={lvl:0};function Cn(t,e,n,o=Gt,r=Gt){return{k:t,v:e,lvl:n,l:o,r}}function U(t){return t===Gt}function Vt(){return Gt}function Ie(t,e){if(U(t))return Gt;const{k:n,l:o,r}=t;if(e===n){if(U(o))return r;if(U(r))return o;{const[s,i]=yn(o);return ee(X(t,{k:s,v:i,l:En(o)}))}}else return e<n?ee(X(t,{l:Ie(o,e)})):ee(X(t,{r:Ie(r,e)}))}function At(t,e){if(!U(t))return e===t.k?t.v:e<t.k?At(t.l,e):At(t.r,e)}function Tt(t,e,n="k"){if(U(t))return[-1/0,void 0];if(t[n]===e)return[t.k,t.v];if(t[n]<e){const o=Tt(t.r,e,n);return o[0]===-1/0?[t.k,t.v]:o}return Tt(t.l,e,n)}function mt(t,e,n){return U(t)?Cn(e,n,1):e===t.k?X(t,{k:e,v:n}):e<t.k?Ue(X(t,{l:mt(t.l,e,n)})):Ue(X(t,{r:mt(t.r,e,n)}))}function ve(t,e,n){if(U(t))return[];const{k:o,v:r,l:s,r:i}=t;let l=[];return o>e&&(l=l.concat(ve(s,e,n))),o>=e&&o<=n&&l.push({k:o,v:r}),o<=n&&(l=l.concat(ve(i,e,n))),l}function Nt(t){return U(t)?[]:[...Nt(t.l),{k:t.k,v:t.v},...Nt(t.r)]}function yn(t){return U(t.r)?[t.k,t.v]:yn(t.r)}function En(t){return U(t.r)?t.l:ee(X(t,{r:En(t.r)}))}function X(t,e){return Cn(e.k!==void 0?e.k:t.k,e.v!==void 0?e.v:t.v,e.lvl!==void 0?e.lvl:t.lvl,e.l!==void 0?e.l:t.l,e.r!==void 0?e.r:t.r)}function me(t){return U(t)||t.lvl>t.r.lvl}function Ue(t){return Se(On(t))}function ee(t){const{l:e,r:n,lvl:o}=t;if(n.lvl>=o-1&&e.lvl>=o-1)return t;if(o>n.lvl+1){if(me(e))return On(X(t,{lvl:o-1}));if(!U(e)&&!U(e.r))return X(e.r,{l:X(e,{r:e.r.l}),r:X(t,{l:e.r.r,lvl:o-1}),lvl:o});throw new Error("Unexpected empty nodes")}else{if(me(t))return Se(X(t,{lvl:o-1}));if(!U(n)&&!U(n.l)){const r=n.l,s=me(r)?n.lvl-1:n.lvl;return X(r,{l:X(t,{r:r.l,lvl:o-1}),r:Se(X(n,{l:r.r,lvl:s})),lvl:r.lvl+1})}else throw new Error("Unexpected empty nodes")}}function ue(t,e,n){if(U(t))return[];const o=Tt(t,e)[0];return ao(ve(t,o,n))}function Rn(t,e){const n=t.length;if(n===0)return[];let{index:o,value:r}=e(t[0]);const s=[];for(let i=1;i<n;i++){const{index:l,value:u}=e(t[i]);s.push({start:o,end:l-1,value:r}),o=l,r=u}return s.push({start:o,end:1/0,value:r}),s}function ao(t){return Rn(t,({k:e,v:n})=>({index:e,value:n}))}function Se(t){const{r:e,lvl:n}=t;return!U(e)&&!U(e.r)&&e.lvl===n&&e.r.lvl===n?X(e,{l:X(t,{r:e.l}),lvl:n+1}):t}function On(t){const{l:e}=t;return!U(e)&&e.lvl===t.lvl?X(e,{r:X(t,{l:e.r})}):t}function re(t,e,n,o=0){let r=t.length-1;for(;o<=r;){const s=Math.floor((o+r)/2),i=t[s],l=n(i,e);if(l===0)return s;if(l===-1){if(r-o<2)return s-1;r=s-1}else{if(r===o)return s;o=s+1}}throw new Error(`Failed binary finding record in array - ${t.join(",")}, searched for ${e}`)}function bn(t,e,n){return t[re(t,e,n)]}function fo(t,e,n,o){const r=re(t,e,o),s=re(t,n,o,r);return t.slice(r,s+1)}const Oe=A(()=>({recalcInProgress:y(!1)}),[],{singleton:!0});function mo(t){const{size:e,startIndex:n,endIndex:o}=t;return r=>r.start===n&&(r.end===o||r.end===1/0)&&r.value===e}function $e(t,e){let n=0,o=0;for(;n<t;)n+=e[o+1]-e[o]-1,o++;return o-(n===t?0:1)}function po(t,e){let n=U(t)?0:1/0;for(const o of e){const{size:r,startIndex:s,endIndex:i}=o;if(n=Math.min(n,s),U(t)){t=mt(t,0,r);continue}const l=ue(t,s-1,i+1);if(l.some(mo(o)))continue;let u=!1,m=!1;for(const{start:a,end:h,value:S}of l)u?(i>=a||r===S)&&(t=Ie(t,a)):(m=S!==r,u=!0),h>i&&i>=a&&S!==r&&(t=mt(t,i+1,S));m&&(t=mt(t,s,r))}return[t,n]}function ho(){return{offsetTree:[],sizeTree:Vt(),groupOffsetTree:Vt(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]}}function be({index:t},e){return e===t?0:e<t?-1:1}function go({offset:t},e){return e===t?0:e<t?-1:1}function xo(t){return{index:t.index,value:t}}function Io(t,e,n,o=0){return o>0&&(e=Math.max(e,bn(t,o,be).offset)),Rn(fo(t,e,n,go),xo)}function we(t,e,n,o){let r=t,s=0,i=0,l=0,u=0;if(e!==0){u=re(r,e-1,be),l=r[u].offset;const a=Tt(n,e-1);s=a[0],i=a[1],r.length&&r[u].size===Tt(n,e)[1]&&(u-=1),r=r.slice(0,u+1)}else r=[];for(const{start:m,value:a}of ue(n,e,1/0)){const h=m-s,S=h*i+l+h*o;r.push({offset:S,size:a,index:m}),s=m,l=S,i=a}return{offsetTree:r,lastIndex:s,lastOffset:l,lastSize:i}}function vo(t,[e,n,o,r]){e.length>0&&o("received item sizes",e,ht.DEBUG);const s=t.sizeTree;let i=s,l=0;if(n.length>0&&U(s)&&e.length===2){const S=e[0].size,C=e[1].size;i=n.reduce((E,d)=>mt(mt(E,d,S),d+1,C),i)}else[i,l]=po(i,e);if(i===s)return t;const{offsetTree:u,lastIndex:m,lastSize:a,lastOffset:h}=we(t.offsetTree,l,i,r);return{sizeTree:i,offsetTree:u,lastIndex:m,lastOffset:h,lastSize:a,groupOffsetTree:n.reduce((S,C)=>mt(S,C,Ft(C,u,r)),Vt()),groupIndices:n}}function Ft(t,e,n){if(e.length===0)return 0;const{offset:o,index:r,size:s}=bn(e,t,be),i=t-r,l=s*i+(i-1)*n+o;return l>0?l+n:l}function So(t){return typeof t.groupIndex<"u"}function Hn(t,e,n){if(So(t))return e.groupIndices[t.groupIndex]+1;{const o=t.index==="LAST"?n:t.index;let r=_n(o,e);return r=Math.max(0,r,Math.min(n,r)),r}}function _n(t,e){if(!ae(e))return t;let n=0;for(;e.groupIndices[n]<=t+n;)n++;return t+n}function ae(t){return!U(t.groupOffsetTree)}const wo={offsetHeight:"height",offsetWidth:"width"},Et=A(([{log:t},{recalcInProgress:e}])=>{const n=P(),o=P(),r=it(o,0),s=P(),i=P(),l=y(0),u=y([]),m=y(void 0),a=y(void 0),h=y((c,I)=>Ot(c,wo[I])),S=y(void 0),C=y(0),E=ho(),d=it(v(n,M(u,t,C),Ct(vo,E),j()),E),g=it(v(u,j(),Ct((c,I)=>({prev:c.current,current:I}),{prev:[],current:[]}),R(({prev:c})=>c)),[]);B(v(u,V(c=>c.length>0),M(d,C),R(([c,I,T])=>{const N=c.reduce((_,z,L)=>mt(_,z,Ft(z,I.offsetTree,T)||L),Vt());return{...I,groupIndices:c,groupOffsetTree:N}})),d),B(v(o,M(d),V(([c,{lastIndex:I,groupIndices:T}])=>c<I&&T.length===0),R(([c,{lastIndex:I,lastSize:T}])=>[{startIndex:c,endIndex:I,size:T}])),n),B(m,a);const f=it(v(m,R(c=>c===void 0)),!0);B(v(a,V(c=>c!==void 0&&U(xt(d).sizeTree)),R(c=>[{startIndex:0,endIndex:0,size:c}])),n);const p=pt(v(n,M(d),Ct(({sizes:c},[I,T])=>({changed:T!==c,sizes:T}),{changed:!1,sizes:E}),R(c=>c.changed)));$(v(l,Ct((c,I)=>({diff:c.prev-I,prev:I}),{diff:0,prev:0}),R(c=>c.diff)),c=>{const{groupIndices:I}=xt(d);if(c>0)F(e,!0),F(s,c+$e(c,I));else if(c<0){const T=xt(g);T.length>0&&F(i,c-$e(-c,T))}}),$(v(l,M(t)),([c,I])=>{c<0&&I("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},ht.ERROR)});const w=pt(s);B(v(s,M(d),R(([c,I])=>{const T=I.groupIndices.length>0,N=[],_=I.lastSize;if(T){const z=At(I.sizeTree,0);let L=0,G=0;for(;L<c;){const D=I.groupIndices[G],tt=I.groupIndices[G+1]-D-1;N.push({startIndex:D,endIndex:D,size:z}),N.push({startIndex:D+1,endIndex:D+1+tt-1,size:_}),G++,L+=tt+1}const O=Nt(I.sizeTree);return L!==c&&O.shift(),O.reduce((D,{k:tt,v:vt})=>{let St=D.ranges;return D.prevSize!==0&&(St=[...D.ranges,{startIndex:D.prevIndex,endIndex:tt+c-1,size:D.prevSize}]),{ranges:St,prevIndex:tt+c,prevSize:vt}},{ranges:N,prevIndex:c,prevSize:0}).ranges}return Nt(I.sizeTree).reduce((z,{k:L,v:G})=>({ranges:[...z.ranges,{startIndex:z.prevIndex,endIndex:L+c-1,size:z.prevSize}],prevIndex:L+c,prevSize:G}),{ranges:[],prevIndex:0,prevSize:_}).ranges})),n);const b=pt(v(i,M(d,C),R(([c,{offsetTree:I},T])=>{const N=-c;return Ft(N,I,T)})));return B(v(i,M(d,C),R(([c,I,T])=>{if(I.groupIndices.length>0){let _=Vt();const z=xt(g);let L=0,G=0,O=0;for(;L<-c;){O=z[G];const D=z[G+1]-O-1;G++,L+=D+1}if(_=Nt(I.sizeTree).reduce((D,{k:tt,v:vt})=>mt(D,Math.max(0,tt+c),vt),_),L!==-c){const D=At(I.sizeTree,O);_=mt(_,0,D);const tt=Tt(I.sizeTree,-c+1)[1];_=mt(_,1,tt)}return{...I,sizeTree:_,...we(I.offsetTree,0,_,T)}}else{const _=Nt(I.sizeTree).reduce((z,{k:L,v:G})=>mt(z,Math.max(0,L+c),G),Vt());return{...I,sizeTree:_,...we(I.offsetTree,0,_,T)}}})),d),{data:S,totalCount:o,sizeRanges:n,groupIndices:u,defaultItemSize:a,fixedItemSize:m,unshiftWith:s,shiftWith:i,shiftWithOffset:b,beforeUnshiftWith:w,firstItemIndex:l,gap:C,sizes:d,listRefresh:p,statefulTotalCount:r,trackItemSizes:f,itemSize:h}},K(Ht,Oe),{singleton:!0}),To=typeof document<"u"&&"scrollBehavior"in document.documentElement.style;function Bn(t){const e=typeof t=="number"?{index:t}:t;return e.align||(e.align="start"),(!e.behavior||!To)&&(e.behavior="auto"),e.offset||(e.offset=0),e}const Kt=A(([{sizes:t,totalCount:e,listRefresh:n,gap:o},{scrollingInProgress:r,viewportHeight:s,scrollTo:i,smoothScrollTargetReached:l,headerHeight:u,footerHeight:m,fixedHeaderHeight:a,fixedFooterHeight:h},{log:S}])=>{const C=P(),E=y(0);let d=null,g=null,f=null;function p(){d&&(d(),d=null),f&&(f(),f=null),g&&(clearTimeout(g),g=null),F(r,!1)}return B(v(C,M(t,s,e,E,u,m,S),M(o,a,h),R(([[w,b,c,I,T,N,_,z],L,G,O])=>{const q=Bn(w),{align:D,behavior:tt,offset:vt}=q,St=I-1,H=Hn(q,b,St);let Y=Ft(H,b.offsetTree,L)+N;D==="end"?(Y+=G+Tt(b.sizeTree,H)[1]-c+O,H===St&&(Y+=_)):D==="center"?Y+=(G+Tt(b.sizeTree,H)[1]-c+O)/2:Y-=T,vt&&(Y+=vt);const gt=ot=>{p(),ot?(z("retrying to scroll to",{location:w},ht.DEBUG),F(C,w)):z("list did not change, scroll successful",{},ht.DEBUG)};if(p(),tt==="smooth"){let ot=!1;f=$(n,dt=>{ot=ot||dt}),d=_t(l,()=>{gt(ot)})}else d=_t(v(n,Co(150)),gt);return g=setTimeout(()=>{p()},1200),F(r,!0),z("scrolling from index to",{index:H,top:Y,behavior:tt},ht.DEBUG),{top:Y,behavior:tt}})),i),{scrollToIndex:C,topListHeight:E}},K(Et,at,Ht),{singleton:!0});function Co(t){return e=>{const n=setTimeout(()=>{e(!1)},t);return o=>{o&&(e(!0),clearTimeout(n))}}}const Ut="up",Mt="down",yo="none",Eo={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},Ro=0,qt=A(([{scrollContainerState:t,scrollTop:e,viewportHeight:n,headerHeight:o,footerHeight:r,scrollBy:s}])=>{const i=y(!1),l=y(!0),u=P(),m=P(),a=y(4),h=y(Ro),S=it(v(Fe(v(k(e),oe(1),Rt(!0)),v(k(e),oe(1),Rt(!1),Ae(100))),j()),!1),C=it(v(Fe(v(s,Rt(!0)),v(s,Rt(!1),Ae(200))),j()),!1);B(v(nt(k(e),k(h)),R(([p,w])=>p<=w),j()),l),B(v(l,zt(50)),m);const E=pt(v(nt(t,k(n),k(o),k(r),k(a)),Ct((p,[{scrollTop:w,scrollHeight:b},c,I,T,N])=>{const _=w+c-b>-N,z={viewportHeight:c,scrollTop:w,scrollHeight:b};if(_){let G,O;return w>p.state.scrollTop?(G="SCROLLED_DOWN",O=p.state.scrollTop-w):(G="SIZE_DECREASED",O=p.state.scrollTop-w||p.scrollTopDelta),{atBottom:!0,state:z,atBottomBecause:G,scrollTopDelta:O}}let L;return z.scrollHeight>p.state.scrollHeight?L="SIZE_INCREASED":c<p.state.viewportHeight?L="VIEWPORT_HEIGHT_DECREASING":w<p.state.scrollTop?L="SCROLLING_UPWARDS":L="NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:L,state:z}},Eo),j((p,w)=>p&&p.atBottom===w.atBottom))),d=it(v(t,Ct((p,{scrollTop:w,scrollHeight:b,viewportHeight:c})=>{if(wn(p.scrollHeight,b))return{scrollTop:w,scrollHeight:b,jump:0,changed:!1};{const I=b-(w+c)<1;return p.scrollTop!==w&&I?{scrollHeight:b,scrollTop:w,jump:p.scrollTop-w,changed:!0}:{scrollHeight:b,scrollTop:w,jump:0,changed:!0}}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),V(p=>p.changed),R(p=>p.jump)),0);B(v(E,R(p=>p.atBottom)),i),B(v(i,zt(50)),u);const g=y(Mt);B(v(t,R(({scrollTop:p})=>p),j(),Ct((p,w)=>xt(C)?{direction:p.direction,prevScrollTop:w}:{direction:w<p.prevScrollTop?Ut:Mt,prevScrollTop:w},{direction:Mt,prevScrollTop:0}),R(p=>p.direction)),g),B(v(t,zt(50),Rt(yo)),g);const f=y(0);return B(v(S,V(p=>!p),Rt(0)),f),B(v(e,zt(100),M(S),V(([p,w])=>!!w),Ct(([p,w],[b])=>[w,b],[0,0]),R(([p,w])=>w-p)),f),{isScrolling:S,isAtTop:l,isAtBottom:i,atBottomState:E,atTopStateChange:m,atBottomStateChange:u,scrollDirection:g,atBottomThreshold:a,atTopThreshold:h,scrollVelocity:f,lastJumpDueToItemResize:d}},K(at)),Lt=A(([{log:t}])=>{const e=y(!1),n=pt(v(e,V(o=>o),j()));return $(e,o=>{o&&xt(t)("props updated",{},ht.DEBUG)}),{propsReady:e,didMount:n}},K(Ht),{singleton:!0});function Oo(t,e){const n=e-1;return typeof t=="number"?t:t.index==="LAST"?n:t.index}const He=A(([{sizes:t,listRefresh:e,defaultItemSize:n},{scrollTop:o},{scrollToIndex:r},{didMount:s}])=>{const i=y(!0),l=y(0);return B(v(s,M(l),V(([u,m])=>!!m),Rt(!1)),i),$(v(nt(e,s),M(i,t,n),V(([[,u],m,{sizeTree:a},h])=>u&&(!U(a)||h!==void 0)&&!m),M(l)),([,u])=>{setTimeout(()=>{_t(o,()=>{F(i,!0)}),F(r,u)})}),{scrolledToInitialItem:i,initialTopMostItemIndex:l}},K(Et,at,Kt,Lt),{singleton:!0});function je(t){return t?t==="smooth"?"smooth":"auto":!1}const bo=(t,e)=>typeof t=="function"?je(t(e)):e&&je(t),Ho=A(([{totalCount:t,listRefresh:e},{isAtBottom:n,atBottomState:o},{scrollToIndex:r},{scrolledToInitialItem:s},{propsReady:i,didMount:l},{log:u},{scrollingInProgress:m}])=>{const a=y(!1),h=P();let S=null;function C(d){F(r,{index:"LAST",align:"end",behavior:d})}$(v(nt(v(k(t),oe(1)),l),M(k(a),n,s,m),R(([[d,g],f,p,w,b])=>{let c=g&&w,I="auto";return c&&(I=bo(f,p||b),c=c&&!!I),{totalCount:d,shouldFollow:c,followOutputBehavior:I}}),V(({shouldFollow:d})=>d)),({totalCount:d,followOutputBehavior:g})=>{S&&(S(),S=null),S=_t(e,()=>{xt(u)("following output to ",{totalCount:d},ht.DEBUG),C(g),S=null})});function E(d){const g=_t(o,f=>{d&&!f.atBottom&&f.notAtBottomBecause==="SIZE_INCREASED"&&!S&&(xt(u)("scrolling to bottom due to increased size",{},ht.DEBUG),C("auto"))});setTimeout(g,100)}return $(v(nt(k(a),t,i),V(([d,,g])=>d&&g),Ct(({value:d},[,g])=>({refreshed:d===g,value:g}),{refreshed:!1,value:0}),V(({refreshed:d})=>d),M(a,t)),([,d])=>{E(d!==!1)}),$(h,()=>{E(xt(a)!==!1)}),$(nt(k(a),o),([d,g])=>{d&&!g.atBottom&&g.notAtBottomBecause==="VIEWPORT_HEIGHT_DECREASING"&&C("auto")}),{followOutput:a,autoscrollToBottom:h}},K(Et,qt,Kt,He,Lt,Ht,at));function _o(t){return t.reduce((e,n)=>(e.groupIndices.push(e.totalCount),e.totalCount+=n+1,e),{totalCount:0,groupIndices:[]})}const Ln=A(([{totalCount:t,groupIndices:e,sizes:n},{scrollTop:o,headerHeight:r}])=>{const s=P(),i=P(),l=pt(v(s,R(_o)));return B(v(l,R(u=>u.totalCount)),t),B(v(l,R(u=>u.groupIndices)),e),B(v(nt(o,n,r),V(([u,m])=>ae(m)),R(([u,m,a])=>Tt(m.groupOffsetTree,Math.max(u-a,0),"v")[0]),j(),R(u=>[u])),i),{groupCounts:s,topItemsIndexes:i}},K(Et,at));function $t(t,e){return!!(t&&t[0]===e[0]&&t[1]===e[1])}function zn(t,e){return!!(t&&t.startIndex===e.startIndex&&t.endIndex===e.endIndex)}const se="top",ie="bottom",Ke="none";function qe(t,e,n){return typeof t=="number"?n===Ut&&e===se||n===Mt&&e===ie?t:0:n===Ut?e===se?t.main:t.reverse:e===ie?t.main:t.reverse}function Ye(t,e){return typeof t=="number"?t:t[e]||0}const _e=A(([{scrollTop:t,viewportHeight:e,deviation:n,headerHeight:o,fixedHeaderHeight:r}])=>{const s=P(),i=y(0),l=y(0),u=y(0),m=it(v(nt(k(t),k(e),k(o),k(s,$t),k(u),k(i),k(r),k(n),k(l)),R(([a,h,S,[C,E],d,g,f,p,w])=>{const b=a-p,c=g+f,I=Math.max(S-b,0);let T=Ke;const N=Ye(w,se),_=Ye(w,ie);return C-=p,C+=S+f,E+=S+f,E-=p,C>a+c-N&&(T=Ut),E<a-I+h+_&&(T=Mt),T!==Ke?[Math.max(b-S-qe(d,se,T)-N,0),b-I-f+h+qe(d,ie,T)+_]:null}),V(a=>a!=null),j($t)),[0,0]);return{listBoundary:s,overscan:u,topListHeight:i,increaseViewportBy:l,visibleRange:m}},K(at),{singleton:!0});function Bo(t,e,n){if(ae(e)){const o=_n(t,e);return[{index:Tt(e.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:n&&n[0]}]}return[{index:t,size:0,offset:0,data:n&&n[0]}]}const Ze={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function Je(t,e,n){if(t.length===0)return[];if(!ae(e))return t.map(m=>({...m,index:m.index+n,originalIndex:m.index}));const o=t[0].index,r=t[t.length-1].index,s=[],i=ue(e.groupOffsetTree,o,r);let l,u=0;for(const m of t){(!l||l.end<m.index)&&(l=i.shift(),u=e.groupIndices.indexOf(l.start));let a;m.index===l.start?a={type:"group",index:u}:a={index:m.index-(u+1)+n,groupIndex:u},s.push({...a,size:m.size,offset:m.offset,originalIndex:m.index,data:m.data})}return s}function ne(t,e,n,o,r,s){const{lastSize:i,lastOffset:l,lastIndex:u}=r;let m=0,a=0;if(t.length>0){m=t[0].offset;const d=t[t.length-1];a=d.offset+d.size}const h=n-u,S=l+h*i+(h-1)*o,C=m,E=S-a;return{items:Je(t,r,s),topItems:Je(e,r,s),topListHeight:e.reduce((d,g)=>g.size+d,0),offsetTop:m,offsetBottom:E,top:C,bottom:a,totalCount:n,firstItemIndex:s}}const Wt=A(([{sizes:t,totalCount:e,data:n,firstItemIndex:o,gap:r},s,{visibleRange:i,listBoundary:l,topListHeight:u},{scrolledToInitialItem:m,initialTopMostItemIndex:a},{topListHeight:h},S,{didMount:C},{recalcInProgress:E}])=>{const d=y([]),g=P();B(s.topItemsIndexes,d);const f=it(v(nt(C,E,k(i,$t),k(e),k(t),k(a),m,k(d),k(o),k(r),n),V(([c,I,,T,,,,,,,N])=>{const _=N&&N.length!==T;return c&&!I&&!_}),R(([,,[c,I],T,N,_,z,L,G,O,q])=>{const D=N,{sizeTree:tt,offsetTree:vt}=D;if(T===0||c===0&&I===0)return{...Ze,totalCount:T};if(U(tt))return ne(Bo(Oo(_,T),D,q),[],T,O,D,G);const St=[];if(L.length>0){const dt=L[0],rt=L[L.length-1];let ft=0;for(const et of ue(tt,dt,rt)){const lt=et.value,Q=Math.max(et.start,dt),ct=Math.min(et.end,rt);for(let st=Q;st<=ct;st++)St.push({index:st,size:lt,offset:ft,data:q&&q[st]}),ft+=lt}}if(!z)return ne([],St,T,O,D,G);const H=L.length>0?L[L.length-1]+1:0,Y=Io(vt,c,I,H);if(Y.length===0)return null;const gt=T-1,ot=ce([],dt=>{for(const rt of Y){const ft=rt.value;let et=ft.offset,lt=rt.start;const Q=ft.size;if(ft.offset<c){lt+=Math.floor((c-ft.offset+O)/(Q+O));const st=lt-rt.start;et+=st*Q+st*O}lt<H&&(et+=(H-lt)*Q,lt=H);const ct=Math.min(rt.end,gt);for(let st=lt;st<=ct&&!(et>=I);st++)dt.push({index:st,size:Q,offset:et,data:q&&q[st]}),et+=Q+O}});return ne(ot,St,T,O,D,G)}),V(c=>c!==null),j()),Ze);B(v(n,V(c=>c!==void 0),R(c=>c==null?void 0:c.length)),e),B(v(f,R(c=>c.topListHeight)),h),B(h,u),B(v(f,R(c=>[c.top,c.bottom])),l),B(v(f,R(c=>c.items)),g);const p=pt(v(f,V(({items:c})=>c.length>0),M(e,n),V(([{items:c},I])=>c[c.length-1].originalIndex===I-1),R(([,c,I])=>[c-1,I]),j($t),R(([c])=>c))),w=pt(v(f,zt(200),V(({items:c,topItems:I})=>c.length>0&&c[0].originalIndex===I.length),R(({items:c})=>c[0].index),j())),b=pt(v(f,V(({items:c})=>c.length>0),R(({items:c})=>{let I=0,T=c.length-1;for(;c[I].type==="group"&&I<T;)I++;for(;c[T].type==="group"&&T>I;)T--;return{startIndex:c[I].index,endIndex:c[T].index}}),j(zn)));return{listState:f,topItemsIndexes:d,endReached:p,startReached:w,rangeChanged:b,itemsRendered:g,...S}},K(Et,Ln,_e,He,Kt,qt,Lt,Oe),{singleton:!0}),Lo=A(([{sizes:t,firstItemIndex:e,data:n,gap:o},{listState:r},{didMount:s}])=>{const i=y(0);return B(v(s,M(i),V(([,l])=>l!==0),M(t,e,o,n),R(([[,l],u,m,a,h=[]])=>{let S=0;if(u.groupIndices.length>0)for(const d of u.groupIndices){if(d-S>=l)break;S++}const C=l+S,E=Array.from({length:C}).map((d,g)=>({index:g,size:0,offset:0,data:h[g]}));return ne(E,[],C,a,u,m)})),r),{initialItemCount:i}},K(Et,Wt,Lt),{singleton:!0}),Nn=A(([{scrollVelocity:t}])=>{const e=y(!1),n=P(),o=y(!1);return B(v(t,M(o,e,n),V(([r,s])=>!!s),R(([r,s,i,l])=>{const{exit:u,enter:m}=s;if(i){if(u(r,l))return!1}else if(m(r,l))return!0;return i}),j()),e),$(v(nt(e,t,n),M(o)),([[r,s,i],l])=>r&&l&&l.change&&l.change(s,i)),{isSeeking:e,scrollSeekConfiguration:o,scrollVelocity:t,scrollSeekRangeChanged:n}},K(qt),{singleton:!0}),zo=A(([{topItemsIndexes:t}])=>{const e=y(0);return B(v(e,V(n=>n>0),R(n=>Array.from({length:n}).map((o,r)=>r))),t),{topItemCount:e}},K(Wt)),Be=A(([{footerHeight:t,headerHeight:e,fixedHeaderHeight:n,fixedFooterHeight:o},{listState:r}])=>{const s=P(),i=it(v(nt(t,o,e,n,r),R(([l,u,m,a,h])=>l+u+m+a+h.offsetBottom+h.bottom)),0);return B(k(i),s),{totalListHeight:i,totalListHeightChanged:s}},K(at,Wt),{singleton:!0});function Vn(t){let e=!1,n;return()=>(e||(e=!0,n=t()),n)}const No=Vn(()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent)),Vo=A(([{scrollBy:t,scrollTop:e,deviation:n,scrollingInProgress:o},{isScrolling:r,isAtBottom:s,scrollDirection:i,lastJumpDueToItemResize:l},{listState:u},{beforeUnshiftWith:m,shiftWithOffset:a,sizes:h,gap:S},{log:C},{recalcInProgress:E}])=>{const d=pt(v(u,M(l),Ct(([,f,p,w],[{items:b,totalCount:c,bottom:I,offsetBottom:T},N])=>{const _=I+T;let z=0;return p===c&&f.length>0&&b.length>0&&(b[0].originalIndex===0&&f[0].originalIndex===0||(z=_-w,z!==0&&(z+=N))),[z,b,c,_]},[0,[],0,0]),V(([f])=>f!==0),M(e,i,o,s,C,E),V(([,f,p,w,,,b])=>!b&&!w&&f!==0&&p===Ut),R(([[f],,,,,p])=>(p("Upward scrolling compensation",{amount:f},ht.DEBUG),f))));function g(f){f>0?(F(t,{top:-f,behavior:"auto"}),F(n,0)):(F(n,0),F(t,{top:-f,behavior:"auto"}))}return $(v(d,M(n,r)),([f,p,w])=>{w&&No()?F(n,p-f):g(-f)}),$(v(nt(it(r,!1),n,E),V(([f,p,w])=>!f&&!w&&p!==0),R(([f,p])=>p),zt(1)),g),B(v(a,R(f=>({top:-f}))),t),$(v(m,M(h,S),R(([f,{lastSize:p,groupIndices:w,sizeTree:b},c])=>{function I(T){return T*(p+c)}if(w.length===0)return I(f);{let T=0;const N=At(b,0);let _=0,z=0;for(;_<f;){_++,T+=N;let L=w[z+1]-w[z]-1;_+L>f&&(T-=N,L=f-_+1),_+=L,T+=I(L),z++}return T}})),f=>{F(n,f),requestAnimationFrame(()=>{F(t,{top:f}),requestAnimationFrame(()=>{F(n,0),F(E,!1)})})}),{deviation:n}},K(at,qt,Wt,Et,Ht,Oe)),ko=A(([{totalListHeight:t},{didMount:e},{scrollTo:n}])=>{const o=y(0);return $(v(e,M(o),V(([,r])=>r!==0),R(([,r])=>({top:r}))),r=>{_t(v(t,V(s=>s!==0)),()=>{setTimeout(()=>{F(n,r)})})}),{initialScrollTop:o}},K(Be,Lt,at),{singleton:!0}),Do=A(([{viewportHeight:t},{totalListHeight:e}])=>{const n=y(!1),o=it(v(nt(n,t,e),V(([r])=>r),R(([,r,s])=>Math.max(0,r-s)),j()),0);return{alignToBottom:n,paddingTopAddition:o}},K(at,Be),{singleton:!0}),kn=A(([{scrollTo:t,scrollContainerState:e}])=>{const n=P(),o=P(),r=P(),s=y(!1),i=y(void 0);return B(v(nt(n,o),R(([{viewportHeight:l,scrollTop:u,scrollHeight:m},{offsetTop:a}])=>({scrollTop:Math.max(0,u-a),scrollHeight:m,viewportHeight:l}))),e),B(v(t,M(o),R(([l,{offsetTop:u}])=>({...l,top:l.top+u}))),r),{useWindowScroll:s,customScrollParent:i,windowScrollContainerState:n,windowViewportRect:o,windowScrollTo:r}},K(at)),Wo=({itemTop:t,itemBottom:e,viewportTop:n,viewportBottom:o,locationParams:{behavior:r,align:s,...i}})=>t<n?{...i,behavior:r,align:s??"start"}:e>o?{...i,behavior:r,align:s??"end"}:null,Mo=A(([{sizes:t,totalCount:e,gap:n},{scrollTop:o,viewportHeight:r,headerHeight:s,fixedHeaderHeight:i,fixedFooterHeight:l,scrollingInProgress:u},{scrollToIndex:m}])=>{const a=P();return B(v(a,M(t,r,e,s,i,l,o),M(n),R(([[h,S,C,E,d,g,f,p],w])=>{const{done:b,behavior:c,align:I,calculateViewLocation:T=Wo,...N}=h,_=Hn(h,S,E-1),z=Ft(_,S.offsetTree,w)+d+g,L=z+Tt(S.sizeTree,_)[1],G=p+g,O=p+C-f,q=T({itemTop:z,itemBottom:L,viewportTop:G,viewportBottom:O,locationParams:{behavior:c,align:I,...N}});return q?b&&_t(v(u,V(D=>D===!1),oe(xt(u)?1:2)),b):b&&b(),q}),V(h=>h!==null)),m),{scrollIntoView:a}},K(Et,at,Kt,Wt,Ht),{singleton:!0}),Po=A(([t,e,n,o,r,s,i,l,u])=>({...t,...e,...n,...o,...r,...s,...i,...l,...u}),K(_e,Lo,Lt,Nn,Be,ko,Do,kn,Mo)),Go=A(([{totalCount:t,sizeRanges:e,fixedItemSize:n,defaultItemSize:o,trackItemSizes:r,itemSize:s,data:i,firstItemIndex:l,groupIndices:u,statefulTotalCount:m,gap:a,sizes:h},{initialTopMostItemIndex:S,scrolledToInitialItem:C},E,d,{listState:g,topItemsIndexes:f,...p},{scrollToIndex:w},b,{topItemCount:c},{groupCounts:I},T,N])=>(B(p.rangeChanged,T.scrollSeekRangeChanged),B(v(T.windowViewportRect,R(_=>_.visibleHeight)),E.viewportHeight),{totalCount:t,data:i,firstItemIndex:l,sizeRanges:e,initialTopMostItemIndex:S,scrolledToInitialItem:C,topItemsIndexes:f,topItemCount:c,groupCounts:I,fixedItemHeight:n,defaultItemHeight:o,gap:a,...d,statefulTotalCount:m,listState:g,scrollToIndex:w,trackItemSizes:r,itemSize:s,groupIndices:u,...p,...T,...E,...N,sizes:h}),K(Et,He,at,Ho,Wt,Kt,Vo,zo,Ln,Po,Ht)),pe="-webkit-sticky",Qe="sticky",Dn=Vn(()=>{if(typeof document>"u")return Qe;const t=document.createElement("div");return t.style.position=pe,t.style.position===pe?pe:Qe});function Wn(t,e){const n=x.useRef(null),o=x.useCallback(l=>{if(l===null||!l.offsetParent)return;const u=l.getBoundingClientRect(),m=u.width;let a,h;if(e){const S=e.getBoundingClientRect(),C=u.top-S.top;a=S.height-Math.max(0,C),h=C+e.scrollTop}else a=window.innerHeight-Math.max(0,u.top),h=u.top+window.pageYOffset;n.current={offsetTop:h,visibleHeight:a,visibleWidth:m},t(n.current)},[t,e]),{callbackRef:r,ref:s}=Re(o),i=x.useCallback(()=>{o(s.current)},[o,s]);return x.useEffect(()=>{if(e){e.addEventListener("scroll",i);const l=new ResizeObserver(i);return l.observe(e),()=>{e.removeEventListener("scroll",i),l.unobserve(e)}}else return window.addEventListener("scroll",i),window.addEventListener("resize",i),()=>{window.removeEventListener("scroll",i),window.removeEventListener("resize",i)}},[i,e]),r}const Mn=x.createContext(void 0),Pn=x.createContext(void 0);function Gn(t){return t}const Ao=A(()=>{const t=y(u=>`Item ${u}`),e=y(null),n=y(u=>`Group ${u}`),o=y({}),r=y(Gn),s=y("div"),i=y(Dt),l=(u,m=null)=>it(v(o,R(a=>a[u]),j()),m);return{context:e,itemContent:t,groupContent:n,components:o,computeItemKey:r,headerFooterTag:s,scrollerRef:i,FooterComponent:l("Footer"),HeaderComponent:l("Header"),TopItemListComponent:l("TopItemList"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),GroupComponent:l("Group","div"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder")}}),Fo=A(([t,e])=>({...t,...e}),K(Go,Ao)),Uo=({height:t})=>x.createElement("div",{style:{height:t}}),$o={position:Dn(),zIndex:1,overflowAnchor:"none"},jo={overflowAnchor:"none"},Xe=x.memo(function({showTopList:e=!1}){const n=W("listState"),o=It("sizeRanges"),r=W("useWindowScroll"),s=W("customScrollParent"),i=It("windowScrollContainerState"),l=It("scrollContainerState"),u=s||r?i:l,m=W("itemContent"),a=W("context"),h=W("groupContent"),S=W("trackItemSizes"),C=W("itemSize"),E=W("log"),d=It("gap"),{callbackRef:g}=lo(o,C,S,e?Dt:u,E,d,s),[f,p]=x.useState(0);Le("deviation",O=>{f!==O&&p(O)});const w=W("EmptyPlaceholder"),b=W("ScrollSeekPlaceholder")||Uo,c=W("ListComponent"),I=W("ItemComponent"),T=W("GroupComponent"),N=W("computeItemKey"),_=W("isSeeking"),z=W("groupIndices").length>0,L=W("paddingTopAddition"),G=e?{}:{boxSizing:"border-box",paddingTop:n.offsetTop+L,paddingBottom:n.offsetBottom,marginTop:f};return!e&&n.totalCount===0&&w?x.createElement(w,ut(w,a)):x.createElement(c,{...ut(c,a),ref:g,style:G,"data-test-id":e?"virtuoso-top-item-list":"virtuoso-item-list"},(e?n.topItems:n.items).map(O=>{const q=O.originalIndex,D=N(q+n.firstItemIndex,O.data,a);return _?x.createElement(b,{...ut(b,a),key:D,index:O.index,height:O.size,type:O.type||"item",...O.type==="group"?{}:{groupIndex:O.groupIndex}}):O.type==="group"?x.createElement(T,{...ut(T,a),key:D,"data-index":q,"data-known-size":O.size,"data-item-index":O.index,style:$o},h(O.index,a)):x.createElement(I,{...ut(I,a),key:D,"data-index":q,"data-known-size":O.size,"data-item-index":O.index,"data-item-group-index":O.groupIndex,item:O.data,style:jo},z?m(O.index,O.groupIndex,O.data,a):m(O.index,O.data,a))}))}),Ko={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},de={width:"100%",height:"100%",position:"absolute",top:0},qo={width:"100%",position:Dn(),top:0,zIndex:1};function ut(t,e){if(typeof t!="string")return{context:e}}const Yo=x.memo(function(){const e=W("HeaderComponent"),n=It("headerHeight"),o=W("headerFooterTag"),r=Bt(i=>n(Ot(i,"height"))),s=W("context");return e?x.createElement(o,{ref:r},x.createElement(e,ut(e,s))):null}),Zo=x.memo(function(){const e=W("FooterComponent"),n=It("footerHeight"),o=W("headerFooterTag"),r=Bt(i=>n(Ot(i,"height"))),s=W("context");return e?x.createElement(o,{ref:r},x.createElement(e,ut(e,s))):null});function An({usePublisher:t,useEmitter:e,useEmitterValue:n}){return x.memo(function({style:s,children:i,...l}){const u=t("scrollContainerState"),m=n("ScrollerComponent"),a=t("smoothScrollTargetReached"),h=n("scrollerRef"),S=n("context"),{scrollerRef:C,scrollByCallback:E,scrollToCallback:d}=Tn(u,a,m,h);return e("scrollTo",d),e("scrollBy",E),x.createElement(m,{ref:C,style:{...Ko,...s},"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...l,...ut(m,S)},i)})}function Fn({usePublisher:t,useEmitter:e,useEmitterValue:n}){return x.memo(function({style:s,children:i,...l}){const u=t("windowScrollContainerState"),m=n("ScrollerComponent"),a=t("smoothScrollTargetReached"),h=n("totalListHeight"),S=n("deviation"),C=n("customScrollParent"),E=n("context"),{scrollerRef:d,scrollByCallback:g,scrollToCallback:f}=Tn(u,a,m,Dt,C);return ro(()=>(d.current=C||window,()=>{d.current=null}),[d,C]),e("windowScrollTo",f),e("scrollBy",g),x.createElement(m,{style:{position:"relative",...s,...h!==0?{height:h+S}:{}},"data-virtuoso-scroller":!0,...l,...ut(m,E)},i)})}const Jo=({children:t})=>{const e=x.useContext(Mn),n=It("viewportHeight"),o=It("fixedItemHeight"),r=Bt(xn(n,s=>Ot(s,"height")));return x.useEffect(()=>{e&&(n(e.viewportHeight),o(e.itemHeight))},[e,n,o]),x.createElement("div",{style:de,ref:r,"data-viewport-type":"element"},t)},Qo=({children:t})=>{const e=x.useContext(Mn),n=It("windowViewportRect"),o=It("fixedItemHeight"),r=W("customScrollParent"),s=Wn(n,r);return x.useEffect(()=>{e&&(o(e.itemHeight),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:100}))},[e,n,o]),x.createElement("div",{ref:s,style:de,"data-viewport-type":"window"},t)},Xo=({children:t})=>{const e=W("TopItemListComponent"),n=W("headerHeight"),o={...qo,marginTop:`${n}px`},r=W("context");return x.createElement(e||"div",{style:o,context:r},t)},tr=x.memo(function(e){const n=W("useWindowScroll"),o=W("topItemsIndexes").length>0,r=W("customScrollParent"),s=r||n?or:nr,i=r||n?Qo:Jo;return x.createElement(s,{...e},o&&x.createElement(Xo,null,x.createElement(Xe,{showTopList:!0})),x.createElement(i,null,x.createElement(Yo,null),x.createElement(Xe,null),x.createElement(Zo,null)))}),{Component:er,usePublisher:It,useEmitterValue:W,useEmitter:Le}=Sn(Fo,{required:{},optional:{context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},tr),nr=An({usePublisher:It,useEmitterValue:W,useEmitter:Le}),or=Fn({usePublisher:It,useEmitterValue:W,useEmitter:Le}),rr=er,tn={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},sr={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:en,ceil:nn,floor:ze,min:he,max:Pt}=Math;function ir(t){return{...sr,items:t}}function ge(t,e,n){return Array.from({length:e-t+1}).map((o,r)=>({index:r+t,data:n==null?void 0:n[r+t]}))}function lr(t,e){return t&&t.column===e.column&&t.row===e.row}function on(t,e){return t&&t.width===e.width&&t.height===e.height}const cr=A(([{overscan:t,visibleRange:e,listBoundary:n},{scrollTop:o,viewportHeight:r,scrollBy:s,scrollTo:i,smoothScrollTargetReached:l,scrollContainerState:u,footerHeight:m,headerHeight:a},h,S,{propsReady:C,didMount:E},{windowViewportRect:d,windowScrollTo:g,useWindowScroll:f,customScrollParent:p,windowScrollContainerState:w},b])=>{const c=y(0),I=y(0),T=y(tn),N=y({height:0,width:0}),_=y({height:0,width:0}),z=P(),L=P(),G=y(0),O=y(void 0),q=y({row:0,column:0});B(v(nt(E,I,O),V(([,H])=>H!==0),R(([,H,Y])=>({items:ge(0,H-1,Y),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}))),T),B(v(nt(k(c),e,k(q,lr),k(_,on),k(N,on),O),R(([H,[Y,gt],ot,dt,rt,ft])=>{const{row:et,column:lt}=ot,{height:Q,width:ct}=dt,{width:st}=rt;if(H===0||st===0)return tn;if(ct===0)return ir(ge(0,0,ft));const Yt=Un(st,ct,lt);let fe=Yt*ze((Y+et)/(Q+et)),Zt=Yt*nn((gt+et)/(Q+et))-1;Zt=he(H-1,Pt(Zt,Yt-1)),fe=he(Zt,Pt(0,fe));const Ne=ge(fe,Zt,ft),{top:Ve,bottom:ke}=rn(rt,ot,dt,Ne),De=nn(H/Yt),jn=De*Q+(De-1)*et-ke;return{items:Ne,offsetTop:Ve,offsetBottom:jn,top:Ve,bottom:ke,itemHeight:Q,itemWidth:ct}})),T),B(v(O,V(H=>H!==void 0),R(H=>H.length)),c),B(v(N,R(({height:H})=>H)),r),B(v(nt(N,_,T,q),R(([H,Y,{items:gt},ot])=>{const{top:dt,bottom:rt}=rn(H,ot,Y,gt);return[dt,rt]}),j($t)),n);const D=pt(v(k(T),V(({items:H})=>H.length>0),M(c),V(([{items:H},Y])=>H[H.length-1].index===Y-1),R(([,H])=>H-1),j())),tt=pt(v(k(T),V(({items:H})=>H.length>0&&H[0].index===0),Rt(0),j())),vt=pt(v(k(T),V(({items:H})=>H.length>0),R(({items:H})=>({startIndex:H[0].index,endIndex:H[H.length-1].index})),j(zn)));B(vt,S.scrollSeekRangeChanged),B(v(z,M(N,_,c,q),R(([H,Y,gt,ot,dt])=>{const rt=Bn(H),{align:ft,behavior:et,offset:lt}=rt;let Q=rt.index;Q==="LAST"&&(Q=ot-1),Q=Pt(0,Q,he(ot-1,Q));let ct=Te(Y,dt,gt,Q);return ft==="end"?ct=en(ct-Y.height+gt.height):ft==="center"&&(ct=en(ct-Y.height/2+gt.height/2)),lt&&(ct+=lt),{top:ct,behavior:et}})),i);const St=it(v(T,R(H=>H.offsetBottom+H.bottom)),0);return B(v(d,R(H=>({width:H.visibleWidth,height:H.visibleHeight}))),N),{data:O,totalCount:c,viewportDimensions:N,itemDimensions:_,scrollTop:o,scrollHeight:L,overscan:t,scrollBy:s,scrollTo:i,scrollToIndex:z,smoothScrollTargetReached:l,windowViewportRect:d,windowScrollTo:g,useWindowScroll:f,customScrollParent:p,windowScrollContainerState:w,deviation:G,scrollContainerState:u,footerHeight:m,headerHeight:a,initialItemCount:I,gap:q,...S,gridState:T,totalListHeight:St,...h,startReached:tt,endReached:D,rangeChanged:vt,propsReady:C,...b}},K(_e,at,qt,Nn,Lt,kn,Ht));function rn(t,e,n,o){const{height:r}=n;if(r===void 0||o.length===0)return{top:0,bottom:0};const s=Te(t,e,n,o[0].index),i=Te(t,e,n,o[o.length-1].index)+r;return{top:s,bottom:i}}function Te(t,e,n,o){const r=Un(t.width,n.width,e.column),s=ze(o/r),i=s*n.height+Pt(0,s-1)*e.row;return i>0?i+e.row:i}function Un(t,e,n){return Pt(1,ze((t+n)/(e+n)))}const ur=A(()=>{const t=y(m=>`Item ${m}`),e=y({}),n=y(null),o=y("virtuoso-grid-item"),r=y("virtuoso-grid-list"),s=y(Gn),i=y("div"),l=y(Dt),u=(m,a=null)=>it(v(e,R(h=>h[m]),j()),a);return{context:n,itemContent:t,components:e,computeItemKey:s,itemClassName:o,listClassName:r,headerFooterTag:i,scrollerRef:l,FooterComponent:u("Footer"),HeaderComponent:u("Header"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),ScrollerComponent:u("Scroller","div"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder","div")}}),ar=A(([t,e])=>({...t,...e}),K(cr,ur)),dr=x.memo(function(){const e=Z("gridState"),n=Z("listClassName"),o=Z("itemClassName"),r=Z("itemContent"),s=Z("computeItemKey"),i=Z("isSeeking"),l=wt("scrollHeight"),u=Z("ItemComponent"),m=Z("ListComponent"),a=Z("ScrollSeekPlaceholder"),h=Z("context"),S=wt("itemDimensions"),C=wt("gap"),E=Z("log"),d=Bt(g=>{const f=g.parentElement.parentElement.scrollHeight;l(f);const p=g.firstChild;p&&S(p.getBoundingClientRect()),C({row:sn("row-gap",getComputedStyle(g).rowGap,E),column:sn("column-gap",getComputedStyle(g).columnGap,E)})});return x.createElement(m,{ref:d,className:n,...ut(m,h),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-test-id":"virtuoso-item-list"},e.items.map(g=>{const f=s(g.index,g.data,h);return i?x.createElement(a,{key:f,...ut(a,h),index:g.index,height:e.itemHeight,width:e.itemWidth}):x.createElement(u,{...ut(u,h),className:o,"data-index":g.index,key:f},r(g.index,g.data,h))}))}),fr=x.memo(function(){const e=Z("HeaderComponent"),n=wt("headerHeight"),o=Z("headerFooterTag"),r=Bt(i=>n(Ot(i,"height"))),s=Z("context");return e?x.createElement(o,{ref:r},x.createElement(e,ut(e,s))):null}),mr=x.memo(function(){const e=Z("FooterComponent"),n=wt("footerHeight"),o=Z("headerFooterTag"),r=Bt(i=>n(Ot(i,"height"))),s=Z("context");return e?x.createElement(o,{ref:r},x.createElement(e,ut(e,s))):null}),pr=({children:t})=>{const e=x.useContext(Pn),n=wt("itemDimensions"),o=wt("viewportDimensions"),r=Bt(s=>{o(s.getBoundingClientRect())});return x.useEffect(()=>{e&&(o({height:e.viewportHeight,width:e.viewportWidth}),n({height:e.itemHeight,width:e.itemWidth}))},[e,o,n]),x.createElement("div",{style:de,ref:r},t)},hr=({children:t})=>{const e=x.useContext(Pn),n=wt("windowViewportRect"),o=wt("itemDimensions"),r=Z("customScrollParent"),s=Wn(n,r);return x.useEffect(()=>{e&&(o({height:e.itemHeight,width:e.itemWidth}),n({offsetTop:0,visibleHeight:e.viewportHeight,visibleWidth:e.viewportWidth}))},[e,n,o]),x.createElement("div",{ref:s,style:de},t)},gr=x.memo(function({...e}){const n=Z("useWindowScroll"),o=Z("customScrollParent"),r=o||n?Ir:xr,s=o||n?hr:pr;return x.createElement(r,{...e},x.createElement(s,null,x.createElement(fr,null),x.createElement(dr,null),x.createElement(mr,null)))}),{Component:Rr,usePublisher:wt,useEmitterValue:Z,useEmitter:$n}=Sn(ar,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},gr),xr=An({usePublisher:wt,useEmitterValue:Z,useEmitter:$n}),Ir=Fn({usePublisher:wt,useEmitterValue:Z,useEmitter:$n});function sn(t,e,n){return e!=="normal"&&!(e!=null&&e.endsWith("px"))&&n(`${t} was not resolved to pixel value correctly`,e,ht.WARN),e==="normal"?0:parseInt(e??"0",10)}const vr={flex:1},jt=({count:t,Component:e})=>J(rr,{style:vr,totalCount:t,itemContent:Kn.useMemo(()=>n=>J(e,{index:n},n),[])});try{jt.displayName="ReactVirtuosoList",jt.__docgenInfo={description:"",displayName:"ReactVirtuosoList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}}}}}catch{}const Or={component:xe},Qt={render:()=>yt("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[yt("div",{style:{display:"flex",flexDirection:"row"},children:[J("div",{style:{flex:1},children:"virtua"}),J("div",{style:{flex:1},children:"react-virtuoso"})]}),J("div",{style:{display:"flex",flexDirection:"row"},children:J(Ce,{count:1e4})}),yt("div",{style:{display:"flex",flexDirection:"row",flex:1,gap:8},children:[J(ye,{count:1e4,Component:xe}),J(jt,{count:1e4,Component:xe})]})]})},Xt={render:()=>yt("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[yt("div",{style:{display:"flex",flexDirection:"row"},children:[J("div",{style:{flex:1},children:"virtua"}),J("div",{style:{flex:1},children:"react-virtuoso"})]}),J("div",{style:{display:"flex",flexDirection:"row"},children:J(Ce,{count:1e4})}),yt("div",{style:{display:"flex",flexDirection:"row",flex:1,gap:8},children:[J(ye,{count:1e4,Component:We}),J(jt,{count:1e4,Component:We})]})]})},te={render:()=>yt("div",{style:{height:"100vh",display:"flex",flexDirection:"column"},children:[yt("div",{style:{display:"flex",flexDirection:"row"},children:[J("div",{style:{flex:1},children:"virtua"}),J("div",{style:{flex:1},children:"react-virtuoso"})]}),J("div",{style:{display:"flex",flexDirection:"row"},children:J(Ce,{count:1e6})}),yt("div",{style:{display:"flex",flexDirection:"row",flex:1,gap:8},children:[J(ye,{count:1e6,Component:Me}),J(jt,{count:1e6,Component:Me})]})]})};var ln,cn,un;Qt.parameters={...Qt.parameters,docs:{...(ln=Qt.parameters)==null?void 0:ln.docs,source:{originalSource:`{
  render: () => {
    const ROW_COUNT = 10000;
    return <div style={{
      height: "100vh",
      display: "flex",
      flexDirection: "column"
    }}>
        <div style={{
        display: "flex",
        flexDirection: "row"
      }}>
          <div style={{
          flex: 1
        }}>virtua</div>
          <div style={{
          flex: 1
        }}>react-virtuoso</div>
        </div>
        <div style={{
        display: "flex",
        flexDirection: "row"
      }}>
          <ScrollInput count={ROW_COUNT} />
        </div>
        <div style={{
        display: "flex",
        flexDirection: "row",
        flex: 1,
        gap: 8
      }}>
          <VirtuaList count={ROW_COUNT} Component={ItemWithRenderCount} />
          <ReactVirtuosoList count={ROW_COUNT} Component={ItemWithRenderCount} />
        </div>
      </div>;
  }
}`,...(un=(cn=Qt.parameters)==null?void 0:cn.docs)==null?void 0:un.source}}};var an,dn,fn;Xt.parameters={...Xt.parameters,docs:{...(an=Xt.parameters)==null?void 0:an.docs,source:{originalSource:`{
  render: () => {
    const ROW_COUNT = 10000;
    return <div style={{
      height: "100vh",
      display: "flex",
      flexDirection: "column"
    }}>
        <div style={{
        display: "flex",
        flexDirection: "row"
      }}>
          <div style={{
          flex: 1
        }}>virtua</div>
          <div style={{
          flex: 1
        }}>react-virtuoso</div>
        </div>
        <div style={{
        display: "flex",
        flexDirection: "row"
      }}>
          <ScrollInput count={ROW_COUNT} />
        </div>
        <div style={{
        display: "flex",
        flexDirection: "row",
        flex: 1,
        gap: 8
      }}>
          <VirtuaList count={ROW_COUNT} Component={HeavyItem} />
          <ReactVirtuosoList count={ROW_COUNT} Component={HeavyItem} />
        </div>
      </div>;
  }
}`,...(fn=(dn=Xt.parameters)==null?void 0:dn.docs)==null?void 0:fn.source}}};var mn,pn,hn;te.parameters={...te.parameters,docs:{...(mn=te.parameters)==null?void 0:mn.docs,source:{originalSource:`{
  render: () => {
    const ROW_COUNT = 1000000;
    return <div style={{
      height: "100vh",
      display: "flex",
      flexDirection: "column"
    }}>
        <div style={{
        display: "flex",
        flexDirection: "row"
      }}>
          <div style={{
          flex: 1
        }}>virtua</div>
          <div style={{
          flex: 1
        }}>react-virtuoso</div>
        </div>
        <div style={{
        display: "flex",
        flexDirection: "row"
      }}>
          <ScrollInput count={ROW_COUNT} />
        </div>
        <div style={{
        display: "flex",
        flexDirection: "row",
        flex: 1,
        gap: 8
      }}>
          <VirtuaList count={ROW_COUNT} Component={SimpleItem} />
          <ReactVirtuosoList count={ROW_COUNT} Component={SimpleItem} />
        </div>
      </div>;
  }
}`,...(hn=(pn=te.parameters)==null?void 0:pn.docs)==null?void 0:hn.source}}};const br=["DynamicHeight","HeavyComponent","OneMillion"];export{Qt as DynamicHeight,Xt as HeavyComponent,te as OneMillion,br as __namedExportsOrder,Or as default};
//# sourceMappingURL=react-virtuoso.stories-6d404da5.js.map
