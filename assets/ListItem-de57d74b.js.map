{"version":3,"file":"ListItem-de57d74b.js","sources":["../../src/react/useLatestRef.ts","../../src/react/ListItem.tsx"],"sourcesContent":["import { useRef } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { refKey } from \"./utils\";\n\nexport const useLatestRef = <T>(value: T) => {\n  const ref = useRef<T>(value);\n\n  useIsomorphicLayoutEffect(() => {\n    ref[refKey] = value;\n  }, [value]);\n\n  return ref;\n};\n","import {\n  memo,\n  useRef,\n  useMemo,\n  CSSProperties,\n  ReactElement,\n  ReactNode,\n} from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { ListResizer } from \"../core/resizer\";\nimport { refKey } from \"./utils\";\nimport { isRTLDocument } from \"../core/environment\";\n\n/**\n * Props of customized item component for {@link VList}.\n */\nexport interface CustomItemComponentProps {\n  style: CSSProperties;\n  children: ReactNode;\n}\n\nexport type CustomItemComponent = React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<CustomItemComponentProps> & React.RefAttributes<any>\n>;\n\ntype ListItemProps = {\n  _children: ReactNode;\n  _resizer: ListResizer;\n  _index: number;\n  _offset: number;\n  _hide: boolean;\n  _element: \"div\";\n  _isHorizontal: boolean;\n};\n\nexport const ListItem = memo(\n  ({\n    _children: children,\n    _resizer: resizer,\n    _index: index,\n    _offset: offset,\n    _hide: hide,\n    _element: Element,\n    _isHorizontal: isHorizontal,\n  }: ListItemProps): ReactElement => {\n    const ref = useRef<HTMLDivElement>(null);\n\n    // The index may be changed if elements are inserted to or removed from the start of props.children\n    useIsomorphicLayoutEffect(\n      () => resizer._observeItem(ref[refKey]!, index),\n      [index]\n    );\n\n    return (\n      <Element\n        ref={ref}\n        style={useMemo((): CSSProperties => {\n          const style: CSSProperties = {\n            margin: 0,\n            padding: 0,\n            position: \"absolute\",\n            [isHorizontal ? \"height\" : \"width\"]: \"100%\",\n            [isHorizontal ? \"top\" : \"left\"]: 0,\n            [isHorizontal ? (isRTLDocument() ? \"right\" : \"left\") : \"top\"]:\n              offset,\n            visibility: hide ? \"hidden\" : \"visible\",\n          };\n          if (isHorizontal) {\n            style.display = \"flex\";\n          }\n          return style;\n        }, [offset, hide])}\n      >\n        {children}\n      </Element>\n    );\n  }\n);\n"],"names":["useLatestRef","value","ref","useRef","useIsomorphicLayoutEffect","refKey","ListItem","memo","children","resizer","index","offset","hide","Element","isHorizontal","jsx","useMemo","style","isRTLDocument"],"mappings":"kJAIa,MAAAA,EAAmBC,GAAa,CACrC,MAAAC,EAAMC,SAAUF,CAAK,EAE3B,OAAAG,EAA0B,IAAM,CAC9BF,EAAIG,CAAM,EAAIJ,CAAA,EACb,CAACA,CAAK,CAAC,EAEHC,CACT,ECuBOI,EAAAC,EAAA,KAAiB,CAAA,CACrB,UAAAC,EACY,SAAAC,EACD,OAAAC,EACF,QAAAC,EACC,MAAAC,EACF,SAAAC,EACG,cAAAC,CACK,IAAA,CAEf,MAAAZ,EAAAC,SAAA,IAAA,EAGA,OAAAC,EAAA,IAAAK,EAAA,aAAAP,EAAAG,CAAA,EAAAK,CAAA,EACgD,CAAAA,CAAA,CACxC,EAGRK,EACEF,EAAC,CAAA,IAAAX,EACC,MAAAc,EAAA,QAAA,IAAA,CAEE,MAAAC,EAAA,CAA6B,OAAA,EACnB,QAAA,EACC,SAAA,WACC,CAAAH,EAAA,SAAA,OAAA,EAAA,OAC2B,CAAAA,EAAA,MAAA,MAAA,EAAA,EACJ,CAAAA,EAAAI,EAAA,EAAA,QAAA,OAAA,KAAA,EAAAP,EAE/B,WAAAC,EAAA,SAAA,SAC4B,EAEhC,OAAAE,IACEG,EAAA,QAAA,QAEFA,CAAO,EAAA,CAAAN,EAAAC,CAAA,CAAA,EACQ,SAAAJ,CAEhB,CAAA,CACH,CAGN"}