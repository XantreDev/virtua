import{j as z}from"./jsx-runtime-c3d7f245.js";import{r as c}from"./index-c6dae603.js";var Se={exports:{}},we={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var D=c;function Ve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ze=typeof Object.is=="function"?Object.is:Ve,Te=D.useState,Ie=D.useEffect,ke=D.useLayoutEffect,He=D.useDebugValue;function je(e,t){var n=t(),o=Te({inst:{value:n,getSnapshot:t}}),i=o[0].inst,d=o[1];return ke(function(){i.value=n,i.getSnapshot=t,oe(i)&&d({inst:i})},[e,n,t]),Ie(function(){return oe(i)&&d({inst:i}),e(function(){oe(i)&&d({inst:i})})},[e]),He(n),n}function oe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ze(e,n)}catch{return!0}}function qe(e,t){return t()}var Ae=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?qe:je;we.useSyncExternalStore=D.useSyncExternalStore!==void 0?D.useSyncExternalStore:Ae;Se.exports=we;var Ce=Se.exports;const N=Math.min,Q=Math.max,Oe=Math.abs,ae=Date.now,W=e=>e!=null,de=(e,t)=>Array.from({length:e},(n,o)=>t(o)),B=(e,t)=>{const n=e.t[t];return n===-1?e.o:n},Ee=(e,t,n)=>{if(!e.l)return 0;if(e.i>=t)return n?e.u[t]+B(e,t):e.u[t];let o=e.i,i=e.u[o];for(;o<=t&&(e.u[o]=i,o!==t||n);)i+=B(e,o),o++;return e.i=t,i},fe=(e,t)=>Ee(e,t),xe=(e,t,n)=>{let o=0;if(n>=0)for(;t<e.l-1;){const i=B(e,t++);if((o+=i)>=n){o-i/2>=n&&t--;break}}else for(;t>0;){const i=B(e,--t);if((o-=i)<=n){o+i/2<n&&t++;break}}return N(Q(t,0),e.l-1)},he=(e,t,n,o)=>xe(e,n,t-o),pe=xe,me=(e,t,n)=>({o:t,l:e,i:n?N(n.i,e-1):0,t:de(e,o=>{const i=n&&n.t[o];return W(i)?i:-1}),u:de(e,o=>{if(o===0)return 0;const i=n&&n.u[o];return W(i)?i:-1})}),$=typeof window<"u"?c.useLayoutEffect:c.useEffect,K=(e,t)=>Ce.useSyncExternalStore(e,t,t),b="current",ve=e=>{const t=c.useRef();return t[b]||(t[b]=e())},ge=e=>{const t=c.useRef(e);return $(()=>{t[b]=e},[e]),t},Ne=c.memo(({_:e,h:t,m:n,g:o,S:i})=>{const d=c.useRef(null),H=K(n.p,()=>n.v(o)),T=K(n.p,()=>n.I(o));return $(()=>t.T(d[b],o),[o]),z(i,{ref:d,style:c.useMemo(()=>{const j=n.R(),F=n.M()?"right":"left",X={margin:0,padding:0,position:"absolute",[j?"height":"width"]:"100%",[j?"top":F]:0,[j?F:"top"]:H,visibility:T?"hidden":"visible"};return j&&(X.display="flex"),X},[H,T]),children:e})}),We=c.forwardRef(({children:e,scrollSize:t,scrolling:n,horizontal:o,attrs:i},d)=>z("div",{ref:d,...i,children:z("div",{style:c.useMemo(()=>({position:"relative",visibility:"hidden",width:o?t:"100%",height:o?"100%":t,pointerEvents:n?"none":"auto"}),[t,n]),children:e})})),De=({_:e,O:t,m:n,S:o,k:i,j:d})=>{const H=K(n.p,n.A),T=n.R();return z(o,{ref:t,scrollSize:H,scrolling:i,horizontal:T,attrs:c.useMemo(()=>({...d,style:{overflow:T?"auto hidden":"hidden auto",contain:"strict",width:"100%",height:"100%",padding:0,margin:0,...d.style}}),[d]),children:e})},Fe=c.forwardRef(({children:e,itemSize:t=40,overscan:n=4,horizontal:o,rtl:i,element:d=We,itemElement:H="div",onScroll:T,onScrollStop:j,onRangeChange:F,...X},Re)=>{const Z=c.useMemo(()=>{const s=[];return c.Children.forEach(e,y=>{(x=>!W(x)||typeof x=="boolean")(y)||s.push(y)}),s},[e]),Y=Z.length,E=ve(()=>((s,y,x,J)=>{let p,q=0,_=0,w=0,A=[],f=me(s,y),C=[0,0];const R=new Set,k=()=>x?q:_;return{C(){const[u,v]=C,g=fe(f,u),L=he(f,w,u,g),S=pe(f,L,k());return u===L&&v===S?C:C=[L,S]},I:u=>f.t[u]===-1,D:u=>((v,g,L)=>{for(let S=g;S<=L;S++)if(v.t[S]===-1)return!0;return!1})(f,u,pe(f,u,k())),v:u=>fe(f,u),F:()=>w,J:()=>k(),A:()=>(u=>Ee(u,u.l-1,!0))(f),P:()=>f.l,U:()=>A,R:()=>x,M:()=>J,B:u=>he(f,u,0,0),H:()=>(p&&p[1](),new Promise((u,v)=>{p=[()=>{Promise.resolve().then(()=>{u(),p=void 0})},v]})),p:u=>(R.add(u),()=>{R.delete(u)}),L(u,v){(()=>{switch(u){case 0:return f.l!==v&&(f=me(v,y,f),!0);case 1:{const g=v.filter(([S,r])=>f.t[S]!==r);if(!g.length)return!1;const L=[];return g.forEach(([S,r])=>{L.push([S,r-B(f,S)]),((a,l,h)=>{a.t[l]=h,a.i=N(l,a.i)})(f,S,r)}),A=L,!0}case 2:return(q!==v.V||_!==v.W)&&(q=v.V,_=v.W,!0);case 3:{const g=w;return(w=v)!==g}}})()&&(R.forEach(g=>{g()}),p&&u===1&&p[0]())}}})(Y,t,!!o,!!i)),[G,ee]=K(E.p,E.C),te=K(E.p,E.U),se=c.useRef(null),ie=ge(T),le=ge(j),[ne,Le]=c.useState(new Set),[_e,be]=c.useState(!1),I=ve(()=>((s,y,x)=>{let J,p,q,_=-1,w=0,A=!1;const f=s.R(),C=s.M(),R=f?"scrollLeft":"scrollTop",k=new WeakMap,u=()=>q||(q=new ResizeObserver(r=>{const a=[];for(const l of r)if(l.target===p)s.L(2,{V:l.contentRect.width,W:l.contentRect.height});else{const h=k.get(l.target);W(h)&&a.push([h,l.contentRect[f?"width":"height"]])}a.length&&(s.L(1,a),A=!0)})),v=()=>p?s.R()?p.scrollWidth:p.scrollHeight:0,g=(r,a)=>{if(p){if(C){if(!W(J)){const l=p[R];p[R]=1,J=p[R]===0,p[R]=l}J&&(r*=-1)}a?p[R]+=r:(p[R]=r,w=3)}},L=async(r,a)=>{const l=()=>{let h=a();const M=v(),V=s.J();return M-(h+V)<=0&&(h=M-V),h};if(s.D(r)){do{s.L(3,l());try{await s.H()}catch{return}}while(s.D(r));g(l())}else{const h=l();g(h),s.L(3,h)}},S=r=>r.reduce((a,[,l])=>a+l,0);return{q(r){p=r;const a=u(),l=()=>{let m=r[R];C&&(m=Oe(m)),_!==m&&(w!==0&&A?A=!1:w!==3&&(w=_>m?2:1),s.L(3,_=m),y(m))},h=(()=>{let m;const O=()=>{W(m)&&clearTimeout(m)},P=()=>{O(),m=setTimeout(()=>{m=null,l(),w=0,x(!1)},150)};return P.G=O,P})(),M=()=>{const m=w===0;l(),m&&x(!0),h()},V=(()=>{let m=ae()-50;return(...O)=>{const P=ae();m+50<P&&(m=P,(re=>{w!==0&&(re.ctrlKey||(f?re.deltaX:re.deltaY)&&_>0&&_<s.A()-s.J()&&h())})(...O))}})();return a.observe(r),r.addEventListener("scroll",M),r.addEventListener("wheel",V,{passive:!0}),()=>{a.disconnect(),r.removeEventListener("scroll",M),r.removeEventListener("wheel",V),h.G()}},T(r,a){const l=u();return k.set(r,a),l.observe(r),()=>{k.delete(r),l.unobserve(r)}},K:v,N(r){r=Q(r,0),L(s.B(r),()=>r)},X(r,a){r=Q(N(r,a-1),0),L(r,()=>s.v(r))},Y:(r,a)=>{if(w===2){const l=S(r);l&&g(l,!0)}else if(w===3){const l=s.F();if(l!==0){const h=S(r);if(s.A()-(l+s.J()+h)<=0)h&&g(l+h);else{const M=r.reduce((V,[m,O])=>(m<a&&(V+=O),V),0);M&&g(M,!0)}}}}}})(E,s=>{ie[b]&&ie[b](s)},s=>{be(s),s||(Le(new Set),le[b]&&le[b]())})),U=N(Y,E.P());$(()=>{E.L(0,Y)},[Y]),$(()=>I.q(se[b]),[]),$(()=>{te.length&&I.Y(te,G)},[te]),c.useEffect(()=>{F&&F({start:G,end:ee,count:U})},[G,ee]),c.useImperativeHandle(Re,()=>({get scrollOffset(){return E.F()},get scrollSize(){return I.K()},get viewportSize(){return E.J()},scrollToIndex(s){I.X(s,U)},scrollTo:I.N,scrollBy(s){I.N(E.F()+s)}}),[U]);const ue=Q(G-n,0),ce=N(ee+n,U-1),Me=c.useMemo(()=>{const s=[];for(let y=ue;y<=ce;y++)ne.add(y);return ne.forEach(y=>{const x=Z[y];s.push(z(Ne,{h:I,m:E,g:y,S:H,_:x},(x==null?void 0:x.key)||y))}),s},[Z,ne,ue,ce]);return z(De,{O:se,m:E,S:d,k:_e,_:Me,j:X})}),ye=c.memo(({count:e,Component:t,handle:n})=>{const o=c.useRef(null);return c.useImperativeHandle(n,()=>({scrollToIndex:i=>{var d;(d=o.current)==null||d.scrollToIndex(i)}})),z(Fe,{ref:o,children:Array.from({length:e}).map((i,d)=>z(t,{index:d},d))})});try{ye.displayName="VirtuaList",ye.__docgenInfo={description:"",displayName:"VirtuaList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{ye as V};
//# sourceMappingURL=virtua-393cfd11.js.map
