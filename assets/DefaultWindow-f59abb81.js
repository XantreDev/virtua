import{r as O}from"./index-5284b0bf.js";import{r as se}from"./index-480187bb.js";import{j as P}from"./jsx-runtime-f8a6c6ea.js";const V=Math.min,v=Math.max,re=Math.abs,j=Date.now,C=e=>e!=null,G=(e,t)=>Array.from({length:e},(s,r)=>t(r)),ne=(e,t)=>{let s;const r=()=>{C(s)&&clearTimeout(s)},o=()=>{r(),s=setTimeout(()=>{s=null,e()},t)};return o._cancel=r,o},oe=(e,t)=>{let s=j()-t;return(...r)=>{const o=j();s+t<o&&(s=o,e(...r))}},q=e=>{let t,s;return(...r)=>(t||(t=!0,s=e(...r)),s)},D=-1,L=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},ie=(e,t,s)=>{e._sizes[t]=s,e._measuredOffsetIndex=V(t,e._measuredOffsetIndex)},ee=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+L(e,t):e._offsets[t];let r=e._measuredOffsetIndex,o=e._offsets[r];for(;r<=t&&(e._offsets[r]=o,!(r===t&&!s));)o+=L(e,r),r++;return e._measuredOffsetIndex=t,o},le=e=>ee(e,e._length-1,!0),Z=(e,t)=>ee(e,t),te=(e,t,s)=>{let r=0;if(s>=0)for(;t<e._length-1;){const o=L(e,t++);if((r+=o)>=s){r-o/2>=s&&t--;break}}else for(;t>0;){const o=L(e,--t);if((r-=o)<=s){r+o/2<s&&t++;break}}return V(v(t,0),e._length-1)},$=(e,t,s,r)=>te(e,s,t-r),Q=te,ue=(e,t,s)=>{for(let r=t;r<=s;r++)if(e._sizes[r]===D)return!0;return!1},X=(e,t,s)=>({_defaultItemSize:t,_length:e,_measuredOffsetIndex:s?V(s._measuredOffsetIndex,e-1):0,_sizes:G(e,r=>{const o=s&&s._sizes[r];return C(o)?o:D}),_offsets:G(e,r=>{if(r===0)return 0;const o=s&&s._offsets[r];return C(o)?o:D})}),Y=e=>e.reduce((t,[s])=>t+s,0),y=0,B=1,U=2,x=3,N=1,k=2,W=3,J=4,K=5,pe=(e,t,s=0,r,o,h)=>{let a=t*v(s-1,0),d=0,g=0,n,i=X(e,t),u=y,c=!1,m=[0,s],f;const p=new Set,S=()=>le(i),b=()=>{const l=c;return c=!1,l},w=l=>{const _=u;if(u=l,u===y)return!1;if(_===y&&(u===B||u===U))return!0};return{_getRange(){const[l,_]=m,R=Z(i,l),I=$(i,d,l,R),z=Q(i,I,a);return l===I&&_===z?m:m=[I,z]},_isUnmeasuredItem(l){return i._sizes[l]===D},_hasUnmeasuredItemsInRange(l){return ue(i,l,Q(i,l,a))},_getItemOffset(l){const _=Z(i,l);return r?_+v(0,a-S()):_},_getItemSize(l){return L(i,l)},_getScrollOffset(){return d},_getViewportSize(){return a},_getScrollSize(){return S()},_getScrollableDomSize(){return v(S(),a)},_getJumpCount(){return g},_flushJump(){const l=n;return n=void 0,l},_getItemIndexForScrollTo(l){return $(i,l,0,0)},_waitForScrollDestinationItemsMeasured(){return f&&f[1](),new Promise((l,_)=>{f=[()=>{Promise.resolve().then(()=>{l(),f=void 0})},_]})},_subscribe(l){return p.add(l),()=>{p.delete(l)}},_update(l,_){let R,I,z=!1;switch(l){case N:{const E=_.filter(([T,A])=>i._sizes[T]!==A);if(!E.length)break;const F=[];E.forEach(([T,A])=>{F.push([A-L(i,T),T]),ie(i,T,A)}),(u===x||u===U)&&(n=[F,u===x],g++),c=R=z=!0;break}case k:{z=a!==_,a=_;break}case W:case J:{if(d===_)break;if(l===W){const E=b();(u===y||!E)&&u!==x&&(I=w(d>_?U:B)),R=re(d-_)>a}d=_,z=!0;break}case K:{I=w(_);break}}z&&(p.forEach(E=>{E(R)}),l===W?h(d):f&&l===N&&f[0]()),C(I)&&o(I)},_getScrollDirection(){return u},_updateCacheLength(l){i._length!==l&&(i=X(l,t,i))}}},ce=typeof window<"u"?O.useLayoutEffect:O.useEffect,M="current",Se=e=>!C(e)||typeof e=="boolean",fe=e=>{const t=O.useRef(e);return ce(()=>{t[M]=e},[e]),t},ge=(e,t,s)=>{const[r,o]=O.useState(t),h=fe(t);if(O.useLayoutEffect(()=>{const a=()=>{o(()=>h[M]())};return e._subscribe(d=>{d?se.flushSync(a):a()})},[]),s){const a=t();r!==a&&o(a)}return r},ae=q(e=>{const t="scrollLeft",s=e[t];e[t]=1;const r=e[t]<1;return e[t]=s,r}),he=(e,t,s)=>{let r;const o=t?"scrollLeft":"scrollTop",h=()=>r?t?r.scrollWidth:r.scrollHeight:0,a=(n,i)=>ae(r)||i?-n:e._getScrollSize()-e._getViewportSize()-n,d=(n,i)=>{r&&(t&&s&&(n=a(n,i)),i?r[o]+=n:(r[o]=n,e._update(K,x)))},g=async(n,i)=>{const u=()=>{let c=i();const m=h(),f=e._getViewportSize();return m-(c+f)<=0&&(c=m-f),c};if(e._hasUnmeasuredItemsInRange(n)){do{e._update(J,u());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(n));d(u())}else{const c=u();d(c),e._update(J,c)}};return{_initRoot(n){r=n;const i=()=>{let f=n[o];t&&s&&(f=a(f)),e._update(W,f)},u=ne(()=>{i(),e._update(K,y)},150),c=()=>{i(),u()},m=oe(f=>{if(e._getScrollDirection()!==y&&!f.ctrlKey&&(t?f.deltaX:f.deltaY)){const p=e._getScrollOffset();p>0&&p<e._getScrollSize()-e._getViewportSize()&&u()}},50);return n.addEventListener("scroll",c),n.addEventListener("wheel",m,{passive:!0}),()=>{n.removeEventListener("scroll",c),n.removeEventListener("wheel",m),u._cancel()}},_getActualScrollSize:h,_scrollTo(n){n=v(n,0),g(e._getItemIndexForScrollTo(n),()=>n)},_scrollToIndex(n,i){n=v(V(n,i-1),0),g(n,()=>e._getItemOffset(n))},_fixScrollJump:([n,i],u)=>{if(i){const c=e._getScrollOffset();if(c!==0){const m=Y(n);if(e._getScrollSize()-(c+e._getViewportSize()+m)<=0)m&&d(c+m);else{const f=n.reduce((p,[S,b])=>(b<u&&(p+=S),p),0);f&&d(f,!0)}}}else{const c=Y(n);c&&d(c,!0)}}}},Ie=e=>{const t=O.useRef();return t[M]||(t[M]=e())},ze=(e,t)=>{let s;const r=t?"width":"height",o=new WeakMap,h=q(()=>new ResizeObserver(a=>{const d=[];for(const{target:g,contentRect:n}of a)if(g===s)e._update(k,n[r]);else{const i=o.get(g);C(i)&&d.push([i,n[r]])}d.length&&e._update(N,d)}));return{_observeRoot(a){s=a;const d=h();return d.observe(a),()=>{d.disconnect()}},_observeItem(a,d){const g=h();return o.set(a,d),g.observe(a),()=>{o.delete(a),g.unobserve(a)}}}},we=(e,t)=>{let s;const r="height",o="width",h=new WeakMap,a=new Set,d=new Set,g=new Map,n=(u,c)=>`${u}-${c}`,i=q(()=>new ResizeObserver(u=>{const c=new Set,m=new Set;for(const{target:f,contentRect:p}of u)if(f===s)e._update(k,p[r]),t._update(k,p[o]);else{const S=h.get(f);if(S){const[b,w]=S,l=n(b,w),_=g.get(l),R=[p[r],p[o]];let I,z;_?(_[0]!==R[0]&&(I=!0),_[1]!==R[1]&&(z=!0)):I=z=!0,I&&c.add(b),z&&m.add(w),(I||z)&&g.set(l,R)}}if(c.size){const f=[];c.forEach(p=>{let S=0;d.forEach(b=>{const w=g.get(n(p,b));w&&(S=v(S,w[0]))}),S&&f.push([p,S])}),e._update(N,f)}if(m.size){const f=[];m.forEach(p=>{let S=0;a.forEach(b=>{const w=g.get(n(b,p));w&&(S=v(S,w[1]))}),S&&f.push([p,S])}),t._update(N,f)}}));return{_observeRoot(u){s=u;const c=i();return c.observe(u),()=>{c.disconnect()}},_observeItem(u,c,m){const f=i();return h.set(u,[c,m]),a.add(c),d.add(m),f.observe(u),()=>{h.delete(u),f.unobserve(u)}}}},H=O.forwardRef(({children:e,attrs:t,width:s,height:r,scrolling:o},h)=>P("div",{ref:h,...t,children:P("div",{style:O.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:r??"100%",pointerEvents:o?"none":"auto"}),[s,r,o]),children:e})}));try{H.displayName="DefaultWindow",H.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{H as D,ce as a,fe as b,Ie as c,pe as d,C as e,ze as f,he as g,V as h,Se as i,we as j,v as m,M as r,ge as u};
//# sourceMappingURL=DefaultWindow-f59abb81.js.map
