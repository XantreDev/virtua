import{r as b}from"./index-5284b0bf.js";import{r as B}from"./index-480187bb.js";import{j as k}from"./jsx-runtime-f8a6c6ea.js";const M=Math.min,R=Math.max,H=Math.abs,K=Date.now,L=e=>e!=null,q=(e,t)=>Array.from({length:e},(s,r)=>t(r)),ee=(e,t)=>{let s;const r=()=>{L(s)&&clearTimeout(s)},i=()=>{r(),s=setTimeout(()=>{s=null,e()},t)};return i._cancel=r,i},te=(e,t)=>{let s=K()-t;return(...r)=>{const i=K();s+t<i&&(s=i,e(...r))}},J=e=>{let t,s;return(...r)=>(t||(t=!0,s=e(...r)),s)},D=-1,E=(e,t)=>{const s=e._sizes[t];return s===D?e._defaultItemSize:s},se=(e,t,s)=>{e._sizes[t]=s,e._measuredOffsetIndex=M(t,e._measuredOffsetIndex)},Q=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+E(e,t):e._offsets[t];let r=e._measuredOffsetIndex,i=e._offsets[r];for(;r<=t&&(e._offsets[r]=i,!(r===t&&!s));)i+=E(e,r),r++;return e._measuredOffsetIndex=t,i},re=e=>Q(e,e._length-1,!0),F=(e,t)=>Q(e,t),X=(e,t,s)=>{let r=0;if(s>=0)for(;t<e._length-1;){const i=E(e,t++);if((r+=i)>=s){r-i/2>=s&&t--;break}}else for(;t>0;){const i=E(e,--t);if((r-=i)<=s){r+i/2<s&&t++;break}}return M(R(t,0),e._length-1)},P=(e,t,s,r)=>X(e,s,t-r),j=X,ne=(e,t,s)=>{for(let r=t;r<=s;r++)if(e._sizes[r]===D)return!0;return!1},Z=(e,t,s)=>({_defaultItemSize:t,_length:e,_measuredOffsetIndex:s?M(s._measuredOffsetIndex,e-1):0,_sizes:q(e,r=>{const i=s&&s._sizes[r];return L(i)?i:D}),_offsets:q(e,r=>{if(r===0)return 0;const i=s&&s._offsets[r];return L(i)?i:D})}),$=e=>e.reduce((t,[s])=>t+s,0),y=0,Y=1,V=2,A=3,C=1,N=2,x=3,U=4,ae=(e,t,s=0,r,i,h)=>{let a=t*R(s-1,0),d=0,S=0,o,c=Z(e,t),f=y,u=!1,g=[0,s],l;const _=new Set,p=()=>re(c);return{_getRange(){const[n,m]=g,v=F(c,n),O=P(c,d,n,v),I=j(c,O,a);return n===O&&m===I?g:g=[O,I]},_isUnmeasuredItem(n){return c._sizes[n]===D},_hasUnmeasuredItemsInRange(n){return ne(c,n,j(c,n,a))},_getItemOffset(n){const m=F(c,n);return r?m+R(0,a-p()):m},_getItemSize(n){return E(c,n)},_getScrollOffset(){return d},_getViewportSize(){return a},_getScrollSize(){return p()},_getScrollableDomSize(){return R(p(),a)},_getJumpCount(){return S},_flushJump(){const n=o;return o=void 0,n},_getIsJustResized(){const n=u;return u=!1,n},_getItemIndexForScrollTo(n){return P(c,n,0,0)},_waitForScrollDestinationItemsMeasured(){return l&&l[1](),new Promise((n,m)=>{l=[()=>{Promise.resolve().then(()=>{n(),l=void 0})},m]})},_subscribe(n){return _.add(n),()=>{_.delete(n)}},_update(n,m){let v;(()=>{switch(n){case C:{const I=m.filter(([w,T])=>c._sizes[w]!==T);if(!I.length)return!1;const z=[];return I.forEach(([w,T])=>{z.push([T-E(c,w),w]),se(c,w,T)}),(f===A||f===V)&&(o=[z,f===A],S++),u=v=!0}case N:return a===m?!1:(a=m,!0);case x:case U:{const I=d,z=(d=m)!==I;return z&&n===x&&(v=H(I-m)>a),z}}})()&&(_.forEach(I=>{I(v)}),n===x?h(d):l&&n===C&&l[0]())},_getScrollDirection(){return f},_setScrollDirection(n){const m=f;f=n,f===y?i(!1):m===y&&(f===Y||f===V)&&i(!0)},_updateCacheLength(n){c._length!==n&&(c=Z(n,t,c))}}},oe=typeof window<"u"?b.useLayoutEffect:b.useEffect,W="current",de=e=>!L(e)||typeof e=="boolean",ie=e=>{const t=b.useRef(e);return oe(()=>{t[W]=e},[e]),t},_e=(e,t,s)=>{const[r,i]=b.useState(t),h=ie(t);if(b.useLayoutEffect(()=>{const a=()=>{i(()=>h[W]())};return e._subscribe(d=>{d?B.flushSync(a):a()})},[]),s){const a=t();r!==a&&i(a)}return r},ce=J(e=>{const t="scrollLeft",s=e[t];e[t]=1;const r=e[t]<1;return e[t]=s,r}),me=(e,t,s)=>{let r;const i=t?"scrollLeft":"scrollTop",h=()=>r?t?r.scrollWidth:r.scrollHeight:0,a=(o,c)=>ce(r)||c?-o:e._getScrollSize()-e._getViewportSize()-o,d=(o,c)=>{r&&(t&&s&&(o=a(o,c)),c?r[i]+=o:(r[i]=o,e._setScrollDirection(A)))},S=async(o,c)=>{const f=()=>{let u=c();const g=h(),l=e._getViewportSize();return g-(u+l)<=0&&(u=g-l),u};if(e._hasUnmeasuredItemsInRange(o)){do{e._update(U,f());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(o));d(f())}else{const u=f();d(u),e._update(U,u)}};return{_initRoot(o){r=o;const c=()=>{let l=o[i];t&&s&&(l=a(l));const _=e._getScrollOffset();if(_===l)return;const p=e._getScrollDirection(),n=e._getIsJustResized();(p===y||!n)&&p!==A&&e._setScrollDirection(_>l?V:Y),e._update(x,l)},f=ee(()=>{c(),e._setScrollDirection(y)},150),u=()=>{c(),f()},g=te(l=>{if(e._getScrollDirection()!==y&&!l.ctrlKey&&(t?l.deltaX:l.deltaY)){const _=e._getScrollOffset();_>0&&_<e._getScrollSize()-e._getViewportSize()&&f()}},50);return o.addEventListener("scroll",u),o.addEventListener("wheel",g,{passive:!0}),()=>{o.removeEventListener("scroll",u),o.removeEventListener("wheel",g),f._cancel()}},_getActualScrollSize:h,_scrollTo(o){o=R(o,0),S(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o,c){o=R(M(o,c-1),0),S(o,()=>e._getItemOffset(o))},_fixScrollJump:([o,c],f)=>{if(c){const u=e._getScrollOffset();if(u!==0){const g=$(o);if(e._getScrollSize()-(u+e._getViewportSize()+g)<=0)g&&d(u+g);else{const l=o.reduce((_,[p,n])=>(n<f&&(_+=p),_),0);l&&d(l,!0)}}}else{const u=$(o);u&&d(u,!0)}}}},pe=e=>{const t=b.useRef();return t[W]||(t[W]=e())},ge=(e,t)=>{let s;const r=t?"width":"height",i=new WeakMap,h=J(()=>new ResizeObserver(a=>{const d=[];for(const{target:S,contentRect:o}of a)if(S===s)e._update(N,o[r]);else{const c=i.get(S);L(c)&&d.push([c,o[r]])}d.length&&e._update(C,d)}));return{_observeRoot(a){s=a;const d=h();return d.observe(a),()=>{d.disconnect()}},_observeItem(a,d){const S=h();return i.set(a,d),S.observe(a),()=>{i.delete(a),S.unobserve(a)}}}},Se=(e,t)=>{let s;const r="height",i="width",h=new WeakMap,a=new Set,d=new Set,S=new Map,o=(f,u)=>`${f}-${u}`,c=J(()=>new ResizeObserver(f=>{const u=new Set,g=new Set;for(const{target:l,contentRect:_}of f)if(l===s)e._update(N,_[r]),t._update(N,_[i]);else{const p=h.get(l);if(p){const[n,m]=p,v=o(n,m),O=S.get(v),I=[_[r],_[i]];let z,w;O?(O[0]!==I[0]&&(z=!0),O[1]!==I[1]&&(w=!0)):z=w=!0,z&&u.add(n),w&&g.add(m),(z||w)&&S.set(v,I)}}if(u.size){const l=[];u.forEach(_=>{let p=0;d.forEach(n=>{const m=S.get(o(_,n));m&&(p=R(p,m[0]))}),p&&l.push([_,p])}),e._update(C,l)}if(g.size){const l=[];g.forEach(_=>{let p=0;a.forEach(n=>{const m=S.get(o(n,_));m&&(p=R(p,m[1]))}),p&&l.push([_,p])}),t._update(C,l)}}));return{_observeRoot(f){s=f;const u=c();return u.observe(f),()=>{u.disconnect()}},_observeItem(f,u,g){const l=c();return h.set(f,[u,g]),a.add(u),d.add(g),l.observe(f),()=>{h.delete(f),l.unobserve(f)}}}},G=b.forwardRef(({children:e,attrs:t,width:s,height:r,scrolling:i},h)=>k("div",{ref:h,...t,children:k("div",{style:b.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:r??"100%",pointerEvents:i?"none":"auto"}),[s,r,i]),children:e})}));try{G.displayName="DefaultWindow",G.__docgenInfo={description:"",displayName:"DefaultWindow",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{G as D,oe as a,ie as b,pe as c,ae as d,L as e,ge as f,me as g,M as h,de as i,Se as j,R as m,W as r,_e as u};
//# sourceMappingURL=DefaultWindow-98929275.js.map
