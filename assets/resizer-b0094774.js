import{r as N}from"./index-5284b0bf.js";import{s as q}from"./index-847519d5.js";const C=Math.min,w=Math.max,V=Date.now,E=e=>e!=null,J=(e,t)=>Array.from({length:e},(s,o)=>t(o)),B=(e,t)=>{let s;const o=()=>{E(s)&&clearTimeout(s)},i=()=>{o(),s=setTimeout(()=>{s=null,e()},t)};return i._cancel=o,i},j=(e,t)=>{let s=V()-t;return(...o)=>{const i=V();s+t<i&&(s=i,e(...o))}},K=e=>{let t,s;return(...o)=>(t||(t=!0,s=e(...o)),s)},b=-1,R=(e,t)=>{const s=e._sizes[t];return s===b?e._defaultItemSize:s},H=(e,t,s)=>{e._sizes[t]=s,e._measuredOffsetIndex=C(t,e._measuredOffsetIndex)},Q=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+R(e,t):e._offsets[t];let o=e._measuredOffsetIndex,i=e._offsets[o];for(;o<=t&&(e._offsets[o]=i,!(o===t&&!s));)i+=R(e,o),o++;return e._measuredOffsetIndex=t,i},ee=e=>Q(e,e._length-1,!0),F=(e,t)=>Q(e,t),X=(e,t,s)=>{let o=0;if(s>=0)for(;t<e._length-1;){const i=R(e,t++);if((o+=i)>=s){o-i/2>=s&&t--;break}}else for(;t>0;){const i=R(e,--t);if((o-=i)<=s){o+i/2<s&&t++;break}}return C(w(t,0),e._length-1)},P=(e,t,s,o)=>X(e,s,t-o),Z=X,te=(e,t,s)=>{for(let o=t;o<=s;o++)if(e._sizes[o]===b)return!0;return!1},$=(e,t,s)=>({_defaultItemSize:t,_length:e,_measuredOffsetIndex:s?C(s._measuredOffsetIndex,e-1):0,_sizes:J(e,o=>{const i=s&&s._sizes[o];return E(i)?i:b}),_offsets:J(e,o=>{if(o===0)return 0;const i=s&&s._offsets[o];return E(i)?i:b})}),v=0,Y=1,U=2,M=3,L=1,y=2,W=3,k=4,oe=(e,t,s=0,o,i,h)=>{let p=t*w(s-1,0),d=0,m=[],u=$(e,t),g=v,r=[0,s],_;const f=new Set,l=()=>ee(u);return{_getRange(){const[n,c]=r,S=F(u,n),a=P(u,d,n,S),z=Z(u,a,p);return n===a&&c===z?r:r=[a,z]},_isUnmeasuredItem(n){return u._sizes[n]===b},_hasUnmeasuredItemsInRange(n){return te(u,n,Z(u,n,p))},_getItemOffset(n){const c=F(u,n);return o?c+w(0,p-l()):c},_getItemSize(n){return R(u,n)},_getScrollOffset(){return d},_getViewportSize(){return p},_getScrollSize(){return l()},_getScrollableDomSize(){return w(l(),p)},_getJump(){return m},_getItemIndexForScrollTo(n){return P(u,n,0,0)},_waitForScrollDestinationItemsMeasured(){return _&&_[1](),new Promise((n,c)=>{_=[()=>{Promise.resolve().then(()=>{n(),_=void 0})},c]})},_subscribe(n){return f.add(n),()=>{f.delete(n)}},_update(n,c){(()=>{switch(n){case L:{const a=c.filter(([I,O])=>u._sizes[I]!==O);if(!a.length)return!1;const z=[];return a.forEach(([I,O])=>{z.push([O-R(u,I),I]),H(u,I,O)}),m=z,!0}case y:return p===c?!1:(p=c,!0);case W:case k:{const a=d;return(d=c)!==a}}})()&&(f.forEach(a=>{a()}),n===W?h(d):_&&n===L&&_[0]())},_getScrollDirection(){return g},_setScrollDirection(n){const c=g;g=n,g===v?i(!1):c===v&&(g===Y||g===U)&&i(!0)},_updateCacheLength(n){u._length!==n&&(u=$(n,t,u))}}},ce=typeof window<"u"?N.useLayoutEffect:N.useEffect,ie=(e,t)=>q.useSyncExternalStore(e,t,t),se=K(e=>{const t="scrollLeft",s=e[t];e[t]=1;const o=e[t]<1;return e[t]=s,o}),le=(e,t,s,o)=>{let i;const h=t?"scrollLeft":"scrollTop",p=()=>i?t?i.scrollWidth:i.scrollHeight:0,d=(r,_)=>se(i)||_?-r:e._getScrollSize()-e._getViewportSize()-r,m=(r,_)=>{i&&(t&&s&&(r=d(r,_)),_?i[h]+=r:(i[h]=r,e._setScrollDirection(M)))},u=async(r,_)=>{const f=()=>{let l=_();const n=p(),c=e._getViewportSize();return n-(l+c)<=0&&(l=n-c),l};if(e._hasUnmeasuredItemsInRange(r)){do{e._update(k,f());try{await e._waitForScrollDestinationItemsMeasured()}catch{return}}while(e._hasUnmeasuredItemsInRange(r));m(f())}else{const l=f();m(l),e._update(k,l)}},g=r=>r.reduce((_,[f])=>_+f,0);return{_initRoot(r){i=r;const _=()=>{let c=r[h];t&&s&&(c=d(c));const S=e._getScrollOffset();if(S===c)return;const a=e._getScrollDirection(),z=o();(a===v||!z)&&a!==M&&e._setScrollDirection(S>c?U:Y),e._update(W,c)},f=B(()=>{_(),e._setScrollDirection(v)},150),l=()=>{_(),f()},n=j(c=>{if(e._getScrollDirection()!==v&&!c.ctrlKey&&(t?c.deltaX:c.deltaY)){const S=e._getScrollOffset();S>0&&S<e._getScrollSize()-e._getViewportSize()&&f()}},50);return r.addEventListener("scroll",l),r.addEventListener("wheel",n,{passive:!0}),()=>{r.removeEventListener("scroll",l),r.removeEventListener("wheel",n),f._cancel()}},_getActualScrollSize:p,_scrollTo(r){r=w(r,0),u(e._getItemIndexForScrollTo(r),()=>r)},_scrollToIndex(r,_){r=w(C(r,_-1),0),u(r,()=>e._getItemOffset(r))},_fixScrollJump:(r,_)=>{const f=e._getScrollDirection();if(f===U){const l=g(r);l&&m(l,!0)}else if(f===M){const l=e._getScrollOffset();if(l!==0){const n=g(r);if(e._getScrollSize()-(l+e._getViewportSize()+n)<=0)n&&m(l+n);else{const c=r.reduce((S,[a,z])=>(z<_&&(S+=a),S),0);c&&m(c,!0)}}}}}},G="current",fe=e=>!E(e)||typeof e=="boolean",ue=e=>{const t=N.useRef();return t[G]||(t[G]=e())},ae=(e,t)=>{let s=!1,o;const i=t?"width":"height",h=new WeakMap,p=K(()=>new ResizeObserver(d=>{const m=[];for(const{target:u,contentRect:g}of d)if(u===o)e._update(y,g[i]);else{const r=h.get(u);E(r)&&m.push([r,g[i]])}m.length&&(e._update(L,m),s=!0)}));return{_observeRoot(d){o=d;const m=p();return m.observe(d),()=>{m.disconnect()}},_observeItem(d,m){const u=p();return h.set(d,m),u.observe(d),()=>{h.delete(d),u.unobserve(d)}},_isJustResized(){const d=s;return s=!1,d}}},_e=(e,t)=>{let s=!1,o=!1,i;const h="height",p="width",d=new WeakMap,m=new Set,u=new Set,g=new Map,r=(f,l)=>`${f}-${l}`,_=K(()=>new ResizeObserver(f=>{const l=new Set,n=new Set;for(const{target:c,contentRect:S}of f)if(c===i)e._update(y,S[h]),t._update(y,S[p]);else{const a=d.get(c);if(a){const[z,I]=a,O=r(z,I),x=g.get(O),A=[S[h],S[p]];let D,T;x?(x[0]!==A[0]&&(D=!0),x[1]!==A[1]&&(T=!0)):D=T=!0,D&&l.add(z),T&&n.add(I),(D||T)&&g.set(O,A)}}if(l.size){const c=[];l.forEach(S=>{let a=0;u.forEach(z=>{const I=g.get(r(S,z));I&&(a=w(a,I[0]))}),a&&c.push([S,a])}),e._update(L,c),s=!0}if(n.size){const c=[];n.forEach(S=>{let a=0;m.forEach(z=>{const I=g.get(r(z,S));I&&(a=w(a,I[1]))}),a&&c.push([S,a])}),t._update(L,c),o=!0}}));return{_observeRoot(f){i=f;const l=_();return l.observe(f),()=>{l.disconnect()}},_observeItem(f,l,n){const c=_();return d.set(f,[l,n]),m.add(l),u.add(n),c.observe(f),()=>{d.delete(f),c.unobserve(f)}},_isJustResized(f){const l=f?o:s;return f?o=!1:s=!1,l}}};export{ce as a,ue as b,oe as c,le as d,C as e,_e as f,E as g,ae as h,fe as i,w as m,G as r,ie as u};
//# sourceMappingURL=resizer-b0094774.js.map
