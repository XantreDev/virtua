import{r as O}from"./index-5284b0bf.js";import{r as de}from"./index-480187bb.js";import{j as B}from"./jsx-runtime-f8a6c6ea.js";const y=Math.min,v=Math.max,_e=Math.abs,Q=Date.now,Le=Object.values,ne=setTimeout,C=e=>e!=null,Y=(e,t)=>{const s=[];for(let n=0;n<e;n++)s.push(t(n));return s},me=e=>{const t=[...e].sort((n,r)=>n-r),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},re=(e,t)=>{let s;const n=()=>{C(s)&&clearTimeout(s)},r=()=>{n(),s=ne(()=>{s=null,e()},t)};return r._cancel=n,r},pe=(e,t)=>{let s=Q()-t;return(...n)=>{const r=Q();s+t<r&&(s=r,e(...n))}},j=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},T=-1,N=(e,t)=>{const s=e._sizes[t];return s===T?e._defaultItemSize:s},ge=(e,t,s)=>{const n=e._sizes[t]===T;return e._sizes[t]=s,e._measuredOffsetIndex=y(t,e._measuredOffsetIndex),n},oe=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+N(e,t):e._offsets[t];let n=e._measuredOffsetIndex,r=e._offsets[n];for(;n<=t&&(e._offsets[n]=r,!(n===t&&!s));)r+=N(e,n),n++;return e._measuredOffsetIndex=t,r},he=e=>oe(e,e._length-1,!0),$=(e,t)=>oe(e,t),ie=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const r=N(e,t++);if((n+=r)>=s){n-r/2>=s&&t--;break}}else for(;t>0;){const r=N(e,--t);if((n-=r)<=s){n+r/2<s&&t++;break}}return y(v(t,0),e._length-1)},G=(e,t,s,n)=>ie(e,s,t-n),we=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===T)return!0;return!1},Se=e=>{const t=e._sizes.filter(n=>n!==T),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:me(t)},H=(e,t,s)=>({_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?y(s._measuredOffsetIndex,e-1):0,_sizes:Y(e,n=>{const r=s&&s._sizes[n];return C(r)?r:T}),_offsets:Y(e,n=>{if(n===0)return 0;const r=s&&s._offsets[n];return C(r)?r:T})}),q=e=>e.reduce((t,[s])=>t+s,0),ee=(e,t)=>t.map(([s,n])=>[n-N(e,s),s]),Ie=1.5,M=0,te=1,F=2,X=3,U=1,J=2,D=3,ce=4,P=5,ue=1,A=2,le=4,ye=(e,t,s=0,n,r,_)=>{const c=!t,f=t||40;let u=f*v(s-1,0),o=0,p=0,a,i=H(e,f),d=M,h=!1,g=[0,s];const w=new Set,b=()=>he(i),I=()=>b()-u,K=()=>{const l=h;return h=!1,l},x=l=>{const m=d;if(d=l,d===M)return!1;if(m===M&&(d===te||d===F))return!0};return{_getRange(){const[l,m]=g,S=$(i,l),R=G(i,o,l,S),z=ie(i,R,u);return l===R&&m===z?g:g=[R,z]},_isUnmeasuredItem(l){return i._sizes[l]===T},_hasUnmeasuredItemsInRange(l){return we(i,v(0,l-2),y(i._length-1,l+2))},_getItemOffset(l){const m=$(i,l);return n?m+v(0,u-b()):m},_getItemSize(l){return N(i,l)},_getItemLength(){return i._length},_getScrollOffset(){return o},_getScrollOffsetMax:I,_getViewportSize(){return u},_getScrollSize:b,_getCorrectedScrollSize(){return v(b(),u)},_getJumpCount(){return p},_flushJump(){const l=a;return a=void 0,l},_getItemIndexForScrollTo(l){return G(i,l,0,0)},_subscribe(l,m){const S=[l,m];return w.add(S),()=>{w.delete(S)}},_update(l,m){let S,R,z=0;switch(l){case U:{const E=m.filter(([W,k])=>i._sizes[W]!==k);if(!E.length)break;let L=0;if(d===F)L=q(ee(i,E));else if(d===X){const W=ee(i,E),[k]=g;o===0||(o>I()-Ie?L=q(W):L=q(W.filter(([,ae])=>ae<k)))}L&&(a=L,p++,z+=le);let Z=!1;E.forEach(([W,k])=>{ge(i,W,k)&&(Z=!0)}),c&&Z&&!o&&Se(i),z+=A,h=S=!0;break}case J:{u!==m&&(z=A),u=m;break}case D:case ce:{if(o===m)break;if(l===D){const E=K();(d===M||!E)&&d!==X&&(R=x(o>m?F:te)),S=_e(o-m)>u}o=v(0,y(I(),m)),z=ue;break}case P:{R=x(m?X:M);break}}z&&(w.forEach(([E,L])=>{z&E&&L(S)}),l===D&&_&&_(o)),C(R)&&r(R)},_getScrollDirection(){return d},_updateCacheLength(l){i._length!==l&&(i=H(l,f,i))}}},be=typeof window<"u"?O.useLayoutEffect:O.useEffect,V="current",Ce=e=>{const t=[];return O.Children.forEach(e,s=>{!C(s)||typeof s=="boolean"||t.push(s)}),t},ve=e=>{const t=O.useRef(e);return be(()=>{t[V]=e},[e]),t},Te=(e,t,s)=>{const[n,r]=O.useState(t),_=ve(t);if(O.useLayoutEffect(()=>{let c;t===e._getRange?c=ue+A:t===e._getCorrectedScrollSize?c=A:t===e._getJumpCount?c=le:c=A;const f=()=>{r(()=>_[V]())};return e._subscribe(c,u=>{u?de.flushSync(f):f()})},[]),s){const c=t();n!==c&&r(c)}return n},ze=j(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),fe=(e,t,s)=>pe(n=>{if(e._getScrollDirection()!==M&&!n.ctrlKey&&(t?n.deltaX:n.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&s()}},50),xe=(e,t,s)=>{let n,r;const _=t?"scrollLeft":"scrollTop",c=()=>n?t?n.scrollWidth:n.scrollHeight:0,f=(o,p)=>t&&s?ze(n)||p?-o:e._getScrollOffsetMax()-o:o,u=async(o,p)=>{if(!n)return;const a=()=>y(p(),c()-e._getViewportSize());for(;e._update(ce,a()),!!e._hasUnmeasuredItemsInRange(o);){r&&r[1]();const i=e._subscribe(A,()=>{r&&r[0]()});try{await new Promise((d,h)=>{let g=!1;const w=()=>{g||(g=!0,d(),r=void 0)};r=[w,h],ne(w,250)})}catch{return}finally{i()}}n[_]=f(a()),e._update(P,!0)};return{_initRoot(o){n=o;const p=()=>{e._update(D,f(o[_]))},a=re(()=>{p(),e._update(P,!1)},150),i=()=>{p(),a()},d=fe(e,t,a);return o.addEventListener("scroll",i),o.addEventListener("wheel",d,{passive:!0}),()=>{o.removeEventListener("scroll",i),o.removeEventListener("wheel",d),a._cancel()}},_getActualScrollSize:c,_scrollTo(o){o=v(o,0),u(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o){o=v(y(o,e._getItemLength()-1),0),u(o,()=>e._getItemOffset(o))},_fixScrollJump:o=>{n&&(n[_]+=f(o,!0))}}},We=(e,t)=>{const s=t?"scrollX":"scrollY",n=t?"offsetLeft":"offsetTop";return{_initRoot(r){let _=!1;const c=(i,d)=>{const h=d+i[n],g=i.offsetParent;return i===document.body||!g?h:c(g,h)},f=()=>{_&&e._update(D,window[s]-c(r,0))},u=re(()=>{f(),e._update(P,!1)},150),o=()=>{f(),u()},p=fe(e,t,u),a=new IntersectionObserver(([i])=>{_=i.isIntersecting});return a.observe(r),window.addEventListener("scroll",o),window.addEventListener("wheel",p,{passive:!0}),()=>{a.disconnect(),window.removeEventListener("scroll",o),window.removeEventListener("wheel",p),u._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?r:0,t?0:r)}}},Me=e=>{const t=O.useRef();return t[V]||(t[V]=e())},Ae=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,_=j(()=>new ResizeObserver(c=>{const f=[];for(const{target:u,contentRect:o}of c)if(u===s)e._update(J,o[n]);else{const p=r.get(u);C(p)&&f.push([p,o[n]])}f.length&&e._update(U,f)}));return{_observeRoot(c){s=c;const f=_();return f.observe(c),()=>{f.disconnect()}},_observeItem(c,f){const u=_();return r.set(c,f),u.observe(c),()=>{r.delete(c),u.unobserve(c)}}}},Ne=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,_=j(()=>new ResizeObserver(c=>{const f=[];for(const{target:u,contentRect:o}of c){const p=r.get(u);C(p)&&f.push([p,o[s]])}f.length&&e._update(U,f)}));return{_observeRoot(){const c=()=>{e._update(J,window[n])};return window.addEventListener("resize",c),c(),()=>{window.removeEventListener("resize",c),_().disconnect()}},_observeItem(c,f){const u=_();return r.set(c,f),u.observe(c),()=>{r.delete(c),u.unobserve(c)}}}},ke=(e,t)=>{let s;const n="height",r="width",_=new WeakMap,c=new Set,f=new Set,u=new Map,o=(a,i)=>`${a}-${i}`,p=j(()=>new ResizeObserver(a=>{const i=new Set,d=new Set;for(const{target:h,contentRect:g}of a)if(h===s)e._update(J,g[n]),t._update(J,g[r]);else{const w=_.get(h);if(w){const[b,I]=w,K=o(b,I),x=u.get(K),l=[g[n],g[r]];let m,S;x?(x[0]!==l[0]&&(m=!0),x[1]!==l[1]&&(S=!0)):m=S=!0,m&&i.add(b),S&&d.add(I),(m||S)&&u.set(K,l)}}if(i.size){const h=[];i.forEach(g=>{let w=0;f.forEach(b=>{const I=u.get(o(g,b));I&&(w=v(w,I[0]))}),w&&h.push([g,w])}),e._update(U,h)}if(d.size){const h=[];d.forEach(g=>{let w=0;c.forEach(b=>{const I=u.get(o(b,g));I&&(w=v(w,I[1]))}),w&&h.push([g,w])}),t._update(U,h)}}));return{_observeRoot(a){s=a;const i=p();return i.observe(a),()=>{i.disconnect()}},_observeItem(a,i,d){const h=p();return _.set(a,[i,d]),c.add(i),f.add(d),h.observe(a),()=>{_.delete(a),h.unobserve(a)}}}},se=O.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:r},_)=>B("div",{ref:_,...t,children:B("div",{style:O.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:r?"none":"auto"}),[s,n,r]),children:e})}));try{se.displayName="Window",se.__docgenInfo={description:"",displayName:"Window",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{se as W,Me as a,Te as b,be as c,ye as d,C as e,Ce as f,Ae as g,xe as h,y as i,Ne as j,We as k,ke as l,v as m,V as r,ve as u,Le as v};
//# sourceMappingURL=Window-da581f5e.js.map
