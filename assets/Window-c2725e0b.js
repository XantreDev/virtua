import{r as z}from"./index-5284b0bf.js";import{r as de}from"./index-480187bb.js";import{j as Q}from"./jsx-runtime-f8a6c6ea.js";const y=Math.min,b=Math.max,_e=Math.abs,Y=Date.now,Le=Object.values,ne=setTimeout,C=e=>e!=null,me=e=>{const t=[...e].sort((n,r)=>n-r),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},re=(e,t)=>{let s;const n=()=>{C(s)&&clearTimeout(s)},r=()=>{n(),s=ne(()=>{s=null,e()},t)};return r._cancel=n,r},pe=(e,t)=>{let s=Y()-t;return(...n)=>{const r=Y();s+t<r&&(s=r,e(...n))}},q=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},T=-1,k=(e,t)=>{const s=e._sizes[t];return s===T?e._defaultItemSize:s},ge=(e,t,s)=>{const n=e._sizes[t]===T;return e._sizes[t]=s,e._measuredOffsetIndex=y(t,e._measuredOffsetIndex),n},oe=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+k(e,t):e._offsets[t];let n=e._measuredOffsetIndex,r=e._offsets[n];for(;n<=t&&(e._offsets[n]=r,!(n===t&&!s));)r+=k(e,n),n++;return e._measuredOffsetIndex=t,r},he=e=>oe(e,e._length-1,!0),$=(e,t)=>oe(e,t),ie=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const r=k(e,t++);if((n+=r)>=s){n-r/2>=s&&t--;break}}else for(;t>0;){const r=k(e,--t);if((n-=r)<=s){n+r/2<s&&t++;break}}return y(b(t,0),e._length-1)},G=(e,t,s,n)=>ie(e,s,t-n),we=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===T)return!0;return!1},Se=e=>{const t=e._sizes.filter(n=>n!==T),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:me(t)},H=(e,t,s)=>{const n=[],r=[];for(let a=0;a<e;a++){const i=s&&s._sizes[a];if(n.push(C(i)?i:T),a===0)r.push(0);else{const l=s&&s._offsets[a];r.push(C(l)?l:T)}}return{_defaultItemSize:s?s._defaultItemSize:t,_length:e,_measuredOffsetIndex:s?y(s._measuredOffsetIndex,e-1):0,_sizes:n,_offsets:r}},F=e=>e.reduce((t,[s])=>t+s,0),ee=(e,t)=>t.map(([s,n])=>[n-k(e,s),s]),Ie=1.5,N=0,te=1,X=2,Z=3,K=1,P=2,U=3,ce=4,V=5,ue=1,A=2,le=4,ye=(e,t,s=0,n,r,a,i)=>{const l=!t,d=t||40;let o=d*b(s-1,0),f=0,p=0,m=0,c=a??H(e,d),_=N,h=!1,w=[0,s];const I=new Set,S=()=>he(c),x=()=>S()-o,D=()=>{const u=h;return h=!1,u},W=u=>{const g=_;if(_=u,_===N)return!1;if(g===N&&(_===te||_===X))return!0};return{_getCache(){return JSON.parse(JSON.stringify(c))},_getRange(){const[u,g]=w,O=$(c,u),R=G(c,f,u,O),v=ie(c,R,o);return u===R&&g===v?w:w=[R,v]},_isUnmeasuredItem(u){return c._sizes[u]===T},_hasUnmeasuredItemsInRange(u){return we(c,b(0,u-2),y(c._length-1,u+2))},_getItemOffset(u){const g=$(c,u);return n?g+b(0,o-S()):g},_getItemSize(u){return k(c,u)},_getItemLength(){return c._length},_getScrollOffset(){return f},_getScrollOffsetMax:x,_getViewportSize(){return o},_getScrollSize:S,_getCorrectedScrollSize(){return b(S(),o)},_getJumpCount(){return p},_flushJump(){const u=m;return m=0,u},_getItemIndexForScrollTo(u){return G(c,u,0,0)},_subscribe(u,g){const O=[u,g];return I.add(O),()=>{I.delete(O)}},_update(u,g){let O,R,v=0;switch(u){case K:{const E=g.filter(([M,J])=>c._sizes[M]!==J);if(!E.length)break;let L=0;if(_===X)L=F(ee(c,E));else if(_===Z){const M=ee(c,E),[J]=w;f===0||(f>x()-Ie?L=F(M):L=F(M.filter(([,ae])=>ae<J)))}L&&(m=L,p++,v+=le);let B=!1;E.forEach(([M,J])=>{ge(c,M,J)&&(B=!0)}),l&&B&&!f&&Se(c),v+=A,h=O=!0;break}case P:{o!==g&&(o=g,v=A);break}case U:case ce:{if(f===g)break;if(u===U){const E=D();(_===N||!E)&&_!==Z&&(R=W(f>g?X:te)),O=_e(f-g)>o}f=b(0,y(x(),g)),v=ue;break}case V:{R=W(g?Z:N);break}}v&&(I.forEach(([E,L])=>{v&E&&L(O)}),u===U&&i&&i(f)),C(R)&&r(R)},_getScrollDirection(){return _},_updateCacheLength(u){c._length!==u&&(c=H(u,d,c))}}},be=typeof window<"u"?z.useLayoutEffect:z.useEffect,j="current",Ce=e=>{const t=[];return z.Children.forEach(e,s=>{!C(s)||typeof s=="boolean"||t.push(s)}),t},ve=e=>{const t=z.useRef(e);return be(()=>{t[j]=e},[e]),t},Te=(e,t,s)=>{const[n,r]=z.useState(t),a=ve(t);if(z.useLayoutEffect(()=>{let i;t===e._getRange?i=ue+A:t===e._getCorrectedScrollSize?i=A:t===e._getJumpCount?i=le:i=A;const l=()=>{r(()=>a[j]())};return e._subscribe(i,d=>{d?de.flushSync(l):l()})},[]),s){const i=t();n!==i&&r(i)}return n},ze=q(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),fe=(e,t,s)=>pe(n=>{if(e._getScrollDirection()!==N&&!n.ctrlKey&&(t?n.deltaX:n.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&s()}},50),xe=(e,t,s)=>{let n,r;const a=t?"scrollLeft":"scrollTop",i=()=>n?t?n.scrollWidth:n.scrollHeight:0,l=(o,f)=>t&&s?ze(n)||f?-o:e._getScrollOffsetMax()-o:o,d=async(o,f)=>{if(!n)return;const p=()=>y(f(),i()-e._getViewportSize());for(;e._update(ce,p()),!!e._hasUnmeasuredItemsInRange(o);){r&&r[1]();const m=e._subscribe(A,()=>{r&&r[0]()});try{await new Promise((c,_)=>{let h=!1;const w=()=>{h||(h=!0,c(),r=void 0)};r=[w,_],ne(w,250)})}catch{return}finally{m()}}n[a]=l(p()),e._update(V,!0)};return{_initRoot(o){n=o;const f=()=>{e._update(U,l(o[a]))},p=re(()=>{f(),e._update(V,!1)},150),m=()=>{f(),p()},c=fe(e,t,p);return o.addEventListener("scroll",m),o.addEventListener("wheel",c,{passive:!0}),()=>{o.removeEventListener("scroll",m),o.removeEventListener("wheel",c),p._cancel()}},_getActualScrollSize:i,_scrollTo(o){o=b(o,0),d(e._getItemIndexForScrollTo(o),()=>o)},_scrollToIndex(o){o=b(y(o,e._getItemLength()-1),0),d(o,()=>e._getItemOffset(o))},_fixScrollJump:o=>{n&&(n[a]+=l(o,!0))}}},We=(e,t)=>{const s=t?"scrollX":"scrollY",n=t?"offsetLeft":"offsetTop";return{_initRoot(r){let a=!1;const i=(m,c)=>{const _=c+m[n],h=m.offsetParent;return m===document.body||!h?_:i(h,_)},l=()=>{a&&e._update(U,window[s]-i(r,0))},d=re(()=>{l(),e._update(V,!1)},150),o=()=>{l(),d()},f=fe(e,t,d),p=new IntersectionObserver(([m])=>{a=m.isIntersecting});return p.observe(r),window.addEventListener("scroll",o),window.addEventListener("wheel",f,{passive:!0}),()=>{p.disconnect(),window.removeEventListener("scroll",o),window.removeEventListener("wheel",f),d._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?r:0,t?0:r)}}},Me=e=>{const t=z.useRef();return t[j]||(t[j]=e())},Ne=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,a=q(()=>new ResizeObserver(i=>{const l=[];for(const{target:d,contentRect:o}of i)if(d===s)e._update(P,o[n]);else{const f=r.get(d);C(f)&&l.push([f,o[n]])}l.length&&e._update(K,l)}));return{_observeRoot(i){s=i;const l=a();return l.observe(i),()=>{l.disconnect()}},_observeItem(i,l){const d=a();return r.set(i,l),d.observe(i),()=>{r.delete(i),d.unobserve(i)}}}},Ae=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,a=q(()=>new ResizeObserver(i=>{const l=[];for(const{target:d,contentRect:o}of i){const f=r.get(d);C(f)&&l.push([f,o[s]])}l.length&&e._update(K,l)}));return{_observeRoot(){const i=()=>{e._update(P,window[n])};return window.addEventListener("resize",i),i(),()=>{window.removeEventListener("resize",i),a().disconnect()}},_observeItem(i,l){const d=a();return r.set(i,l),d.observe(i),()=>{r.delete(i),d.unobserve(i)}}}},ke=(e,t)=>{let s;const n="height",r="width",a=new WeakMap,i=new Set,l=new Set,d=new Map,o=(p,m)=>`${p}-${m}`,f=q(()=>new ResizeObserver(p=>{const m=new Set,c=new Set;for(const{target:_,contentRect:h}of p)if(_===s)e._update(P,h[n]),t._update(P,h[r]);else{const w=a.get(_);if(w){const[I,S]=w,x=o(I,S),D=d.get(x),W=[h[n],h[r]];let u,g;D?(D[0]!==W[0]&&(u=!0),D[1]!==W[1]&&(g=!0)):u=g=!0,u&&m.add(I),g&&c.add(S),(u||g)&&d.set(x,W)}}if(m.size){const _=[];m.forEach(h=>{let w=0;l.forEach(I=>{const S=d.get(o(h,I));S&&(w=b(w,S[0]))}),w&&_.push([h,w])}),e._update(K,_)}if(c.size){const _=[];c.forEach(h=>{let w=0;i.forEach(I=>{const S=d.get(o(I,h));S&&(w=b(w,S[1]))}),w&&_.push([h,w])}),t._update(K,_)}}));return{_observeRoot(p){s=p;const m=f();return m.observe(p),()=>{m.disconnect()}},_observeItem(p,m,c){const _=f();return a.set(p,[m,c]),i.add(m),l.add(c),_.observe(p),()=>{a.delete(p),_.unobserve(p)}}}},se=z.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:r},a)=>Q("div",{ref:a,...t,children:Q("div",{style:z.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:r?"none":"auto"}),[s,n,r]),children:e})}));try{se.displayName="Window",se.__docgenInfo={description:"",displayName:"Window",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{se as W,Me as a,Te as b,be as c,ye as d,C as e,Ce as f,Ne as g,xe as h,y as i,Ae as j,We as k,ke as l,b as m,j as r,ve as u,Le as v};
//# sourceMappingURL=Window-c2725e0b.js.map
