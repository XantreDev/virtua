import{r as T}from"./index-c6dae603.js";import{j as G}from"./jsx-runtime-c3d7f245.js";const x=Math.min,z=Math.max,pe=Math.abs,X=Date.now,Ce=Object.values,ge=Array.isArray,ne=setTimeout,N=(e,t,n)=>x(n,z(t,e)),P=e=>e!=null,we=e=>{const t=[...e].sort((s,i)=>s-i),n=e.length/2|0;return t.length%2===0?(t[n-1]+t[n])/2:t[n]},se=(e,t)=>{let n;const s=()=>{P(n)&&clearTimeout(n)},i=()=>{s(),n=ne(()=>{n=null,e()},t)};return i._cancel=s,i},Se=(e,t)=>{let n=X()-t;return(...s)=>{const i=X();n+t<i&&(n=i,e(...s))}},k=e=>{let t,n;return(...s)=>(t||(t=!0,n=e(...s)),n)},j=e=>getComputedStyle(e),K=e=>e?parseFloat(e):0,L=-1,C=(e,t)=>{const n=e._sizes[t];return n===L?e._defaultItemSize:n},Ie=(e,t,n)=>{const s=e._sizes[t]===L;return e._sizes[t]=n,e._computedOffsetIndex=x(t,e._computedOffsetIndex),s},q=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];let n=e._computedOffsetIndex,s=e._offsets[n];for(;n<t;)s+=C(e,n),e._offsets[++n]=s;return e._computedOffsetIndex=t,s},be=e=>e._length?q(e,e._length-1)+C(e,e._length-1):0,Z=(e,t,n)=>{let s=q(e,n);for(;n>=0&&n<e._length;)if(s<=t){const i=C(e,n);if(s+i>t)break;s+=i,n++}else s-=C(e,--n);return N(n,0,e._length-1)},Q=(e,t,n,s)=>{const i=Z(e,t,x(n,e._length-1));return[i,Z(e,t+s,i)]},ve=(e,t,n)=>e._sizes.slice(z(0,t-1),x(e._length-1,n+1)+1).includes(L),Oe=e=>{const t=e._sizes.filter(s=>s!==L),n=t[0];e._defaultItemSize=t.every(s=>s===n)?n:we(t)},re=(e,t,n)=>{const s=n?"unshift":"push";for(let i=e._length;i<t;i++)e._sizes[s](L),e._offsets.push(i===0?0:L);e._length=t},Re=(e,t)=>{const n={_defaultItemSize:t,_length:0,_computedOffsetIndex:0,_sizes:[],_offsets:[]};return re(n,e),n},Y=(e,t,n)=>{const s=t-e._length,i=s<0;let c;return i?(c=(n?e._sizes.splice(0,-s):e._sizes.splice(s)).reduce((o,r)=>o+(r===L?e._defaultItemSize:r),0),e._offsets.splice(s)):(c=e._defaultItemSize*s,re(e,e._length+s,n)),e._computedOffsetIndex=n?0:N(t-1,0,e._computedOffsetIndex),e._length=t,[c,i]},$=(e,t,n)=>t.reduce((s,[i,c])=>{const o=c-C(e,i);return(!n||o>0)&&(s+=o),s},0),he=1.5,W=0,oe=1,ie=2,M=1,V=2,ze=3,D=4,le=5,F=6,ue=7,U=1,J=2,Ee=4,xe=(e,t=40,n=0,s=Re(e,t),i,c)=>{let o=t*z(n-1,0),r=0,l=0,d=0,a=W,f=!1,g=!1,S=!1,u=[0,n];const w=new Set,_=()=>be(s),I=()=>_()-o,O=m=>N(m,0,I()),A=m=>{const p=a;return a=m,a!==p};return{_getCache(){return JSON.parse(JSON.stringify(s))},_getRange(){return u=Q(s,r,u[0],o)},_isUnmeasuredItem(m){return s._sizes[m]===L},_hasUnmeasuredItemsInTargetViewport(m){const[p,b]=Q(s,m,u[0],o);return ve(s,p,b)},_getItemOffset(m){const p=q(s,m);return i?p+z(0,o-_()):p},_getItemSize(m){return C(s,m)},_getItemsLength(){return s._length},_getScrollOffset(){return r},_getScrollOffsetMax:I,_getScrollDirection(){return a},_getViewportSize(){return o},_getCorrectedScrollSize(){return z(_(),o)},_getJumpCount(){return l},_flushJump(){const m=d;return d=0,m},_subscribe(m,p){const b=[m,p];return w.add(b),()=>{w.delete(b)}},_update(m,p){let b,v=0;switch(m){case M:{const R=p.filter(([h,y])=>s._sizes[h]!==y);if(!R.length)break;if(!f){let h=0;if(r!==0)if(r>I()-he)h=$(s,R,!0);else{const[y]=u;h=$(s,R.filter(([me])=>me<y))}h&&(d=h,l++)}let E=!1;R.forEach(([h,y])=>{Ie(s,h,y)&&(E=!0)}),c&&E&&!r&&Oe(s),v+=J,S=b=!0;break}case V:{o!==p&&(o=p,v=J);break}case ze:{if(p[1]){const R=I()-r,[E,h]=Y(s,p[0],!0),y=h?-x(E,R):E;d+=y,r=O(r+y),l++,v=U}else Y(s,p[0]);break}case D:case le:{if(r===p)break;if(m===D){const R=p-r,E=S;S=!1,(a===W||!E)&&!g&&A(R<0?ie:oe),b=pe(R)>o,v+=Ee}else f=!0;r=O(p),v+=U;break}case F:{A(W)&&(v=U),g=f=!1;break}case ue:{f=!1,g=!0;break}}v&&w.forEach(([R,E])=>{v&R&&E(b)})}}},ce=typeof window<"u",ye=k(e=>{const t="scrollLeft",n=e[t];e[t]=1;const s=e[t]<1;return e[t]=n,s}),B=k(()=>ce?j(document.body).direction==="rtl":!1),Ae=ce?T.useLayoutEffect:T.useEffect,fe=(e,t,n)=>Se(s=>{if(e._getScrollDirection()!==W&&!s.ctrlKey&&(t?s.deltaX:s.deltaY)){const i=e._getScrollOffset();i>0&&i<e._getScrollOffsetMax()&&n()}},50),de=(e,t,n,s)=>ye(e)||s?-n:t._getScrollOffsetMax()-n,Ne=(e,t)=>{let n,s;const i=t?"scrollLeft":"scrollTop",c=(r,l)=>t&&B()?de(n,e,r,l):r,o=async r=>{if(!n)return;const l=()=>N(r(),0,e._getScrollOffsetMax());for(;;){const d=l();if(e._update(le,d),!e._hasUnmeasuredItemsInTargetViewport(d))break;s&&s[1]();const a=e._subscribe(J,()=>{s&&s[0]()});try{await new Promise((f,g)=>{let S=!1;const u=()=>{S||(S=!0,f(),s=void 0)};s=[u,g],ne(u,250)})}catch{return}finally{a()}}n[i]=c(l()),e._update(ue)};return{_initRoot(r){n=r;const l=()=>{e._update(D,c(r[i]))},d=se(()=>{l(),e._update(F)},150),a=()=>{l(),d()},f=fe(e,t,d);return r.addEventListener("scroll",a),r.addEventListener("wheel",f,{passive:!0}),()=>{r.removeEventListener("scroll",a),r.removeEventListener("wheel",f),d._cancel()}},_scrollTo(r){o(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),o(()=>r)},_scrollToIndex(r,l){r=N(r,0,e._getItemsLength()-1),o(l==="end"?()=>e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():()=>e._getItemOffset(r))},_fixScrollJump:r=>{n&&(n[i]+=c(r,!0))}}},Me=(e,t)=>{let n;const s=t?"scrollX":"scrollY",i=t?"offsetLeft":"offsetTop",c=(o,r)=>t&&B()?de(n,e,o,r):o;return{_initRoot(o){n=o;let r=!1;const l=(u,w)=>{const _=w+(t&&B()?window.innerWidth-u[i]-u.offsetWidth:u[i]),I=u.offsetParent;return u===document.body||!I?_:l(I,_)},d=()=>{r&&e._update(D,c(window[s])-l(o,0))},a=se(()=>{d(),e._update(F)},150),f=()=>{d(),a()},g=fe(e,t,a),S=new IntersectionObserver(([u])=>{r=u.isIntersecting});return S.observe(o),window.addEventListener("scroll",f),window.addEventListener("wheel",g,{passive:!0}),()=>{S.disconnect(),window.removeEventListener("scroll",f),window.removeEventListener("wheel",g),a._cancel()}},_fixScrollJump:o=>{window.scrollBy(t?c(o,!0):0,t?0:o)}}},H="current",Ve={},ae=(e,t)=>{if(ge(e))for(const n of e)ae(n,t);else!P(e)||typeof e=="boolean"||t.push(e)},ke=e=>{const t=[];return ae(e,t),t},We=(e,t,n)=>z(e-(n===oe?1:z(1,t)),0),De=(e,t,n,s)=>x(e+(n===ie?1:z(1,t)),s-1),Pe=e=>{const t=T.useRef();return t[H]||(t[H]=e())},_e={box:"border-box"},Ue=(e,t)=>{let n;const s=t?"width":"height",i=new WeakMap,c=k(()=>new ResizeObserver(o=>{const r=[];for(const{target:l,contentRect:d}of o)if(l.offsetParent)if(l===n)e._update(V,d[s]+d[t?"left":"top"]+K(j(n)[t?"paddingRight":"paddingBottom"]));else{const a=i.get(l);P(a)&&r.push([a,d[s]])}r.length&&e._update(M,r)}));return{_observeRoot(o){n=o;const r=c();return r.observe(o,_e),()=>{r.disconnect()}},_observeItem(o,r){const l=c();return i.set(o,r),l.observe(o),()=>{i.delete(o),l.unobserve(o)}}}},Ke=(e,t)=>{const n=t?"width":"height",s=t?"innerWidth":"innerHeight",i=new WeakMap,c=k(()=>new ResizeObserver(o=>{const r=[];for(const{target:l,contentRect:d}of o){if(!l.offsetParent)continue;const a=i.get(l);P(a)&&r.push([a,d[n]])}r.length&&e._update(M,r)}));return{_observeRoot(){const o=()=>{e._update(V,window[s])};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o),c().disconnect()}},_observeItem(o,r){const l=c();return i.set(o,r),l.observe(o),()=>{i.delete(o),l.unobserve(o)}}}},Je=(e,t)=>{let n;const s="height",i="width",c=new WeakMap,o=new Set,r=new Set,l=new Map,d=(f,g)=>`${f}-${g}`,a=k(()=>new ResizeObserver(f=>{const g=new Set,S=new Set;for(const{target:u,contentRect:w}of f)if(u.offsetParent)if(u===n){const _=j(n);e._update(V,w[s]+w.top+K(_.paddingBottom)),t._update(V,w[i]+w.left+K(_.paddingRight))}else{const _=c.get(u);if(_){const[I,O]=_,A=d(I,O),m=l.get(A),p=[w[s],w[i]];let b,v;m?(m[0]!==p[0]&&(b=!0),m[1]!==p[1]&&(v=!0)):b=v=!0,b&&g.add(I),v&&S.add(O),(b||v)&&l.set(A,p)}}if(g.size){const u=[];g.forEach(w=>{let _=0;r.forEach(I=>{const O=l.get(d(w,I));O&&(_=z(_,O[0]))}),_&&u.push([w,_])}),e._update(M,u)}if(S.size){const u=[];S.forEach(w=>{let _=0;o.forEach(I=>{const O=l.get(d(I,w));O&&(_=z(_,O[1]))}),_&&u.push([w,_])}),t._update(M,u)}}));return{_observeRoot(f){n=f;const g=a();return g.observe(f,_e),()=>{g.disconnect()}},_observeItem(f,g,S){const u=a();return c.set(f,[g,S]),o.add(g),r.add(S),u.observe(f),()=>{c.delete(f),u.unobserve(f)}}}},ee=T.forwardRef(({children:e,attrs:t,width:n,height:s,scrolling:i},c)=>G("div",{ref:c,...t,children:G("div",{style:T.useMemo(()=>({position:"relative",visibility:"hidden",width:n??"100%",height:s??"100%",pointerEvents:i?"none":"auto"}),[n,s,i]),children:e})}));try{ee.displayName="Viewport",ee.__docgenInfo={description:"",displayName:"Viewport",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"ViewportComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}const te=()=>[],Be=()=>T.useReducer(te,void 0,te)[1];export{ze as A,W as S,U,ee as V,Be as a,Ae as b,J as c,Ve as d,P as e,ke as f,xe as g,Ke as h,Me as i,De as j,We as k,B as l,Je as m,Ne as n,Ee as o,Ue as p,H as r,Pe as u,Ce as v};
//# sourceMappingURL=useRerender-ed6d5057.js.map
