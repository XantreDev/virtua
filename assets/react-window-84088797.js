import{j as b}from"./jsx-runtime-f8a6c6ea.js";import{r as z}from"./index-5284b0bf.js";import{A as ne}from"./AutoSizer-5485b04d.js";import{a as $,b as ie}from"./assertThisInitialized-27d5fa6d.js";import{_ as ae}from"./inheritsLoose-76ae461f.js";var U=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function oe(i,t){return!!(i===t||U(i)&&U(t))}function le(i,t){if(i.length!==t.length)return!1;for(var r=0;r<i.length;r++)if(!oe(i[r],t[r]))return!1;return!0}function W(i,t){t===void 0&&(t=le);var r,n=[],o,c=!1;function u(){for(var s=[],h=0;h<arguments.length;h++)s[h]=arguments[h];return c&&r===this&&t(s,n)||(o=i.apply(this,s),c=!0,r=this,n=s),o}return u}var se=typeof performance=="object"&&typeof performance.now=="function",q=se?function(){return performance.now()}:function(){return Date.now()};function H(i){cancelAnimationFrame(i.id)}function ce(i,t){var r=q();function n(){q()-r>=t?i.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var A=-1;function V(i){if(i===void 0&&(i=!1),A===-1||i){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),A=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return A}var C=null;function B(i){if(i===void 0&&(i=!1),C===null||i){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?C="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?C="negative":C="positive-ascending"),document.body.removeChild(t),C}return C}var ue=150,de=function(t,r){return t};function fe(i){var t,r=i.getItemOffset,n=i.getEstimatedTotalSize,o=i.getItemSize,c=i.getOffsetForIndexAndAlignment,u=i.getStartIndexForOffset,s=i.getStopIndexForStartIndex,h=i.initInstanceProps,g=i.shouldResetStyleCacheOnItemSizeChange,y=i.validateProps;return t=function(T){ae(M,T);function M(S){var e;return e=T.call(this,S)||this,e._instanceProps=h(e.props,$(e)),e._outerRef=void 0,e._resetIsScrollingTimeoutId=null,e.state={instance:$(e),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof e.props.initialScrollOffset=="number"?e.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},e._callOnItemsRendered=void 0,e._callOnItemsRendered=W(function(a,l,f,m){return e.props.onItemsRendered({overscanStartIndex:a,overscanStopIndex:l,visibleStartIndex:f,visibleStopIndex:m})}),e._callOnScroll=void 0,e._callOnScroll=W(function(a,l,f){return e.props.onScroll({scrollDirection:a,scrollOffset:l,scrollUpdateWasRequested:f})}),e._getItemStyle=void 0,e._getItemStyle=function(a){var l=e.props,f=l.direction,m=l.itemSize,v=l.layout,d=e._getItemStyleCache(g&&m,g&&v,g&&f),p;if(d.hasOwnProperty(a))p=d[a];else{var I=r(e.props,a,e._instanceProps),x=o(e.props,a,e._instanceProps),O=f==="horizontal"||v==="horizontal",E=f==="rtl",N=O?I:0;d[a]=p={position:"absolute",left:E?void 0:N,right:E?N:void 0,top:O?0:I,height:O?"100%":x,width:O?x:"100%"}}return p},e._getItemStyleCache=void 0,e._getItemStyleCache=W(function(a,l,f){return{}}),e._onScrollHorizontal=function(a){var l=a.currentTarget,f=l.clientWidth,m=l.scrollLeft,v=l.scrollWidth;e.setState(function(d){if(d.scrollOffset===m)return null;var p=e.props.direction,I=m;if(p==="rtl")switch(B()){case"negative":I=-m;break;case"positive-descending":I=v-f-m;break}return I=Math.max(0,Math.min(I,v-f)),{isScrolling:!0,scrollDirection:d.scrollOffset<m?"forward":"backward",scrollOffset:I,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._onScrollVertical=function(a){var l=a.currentTarget,f=l.clientHeight,m=l.scrollHeight,v=l.scrollTop;e.setState(function(d){if(d.scrollOffset===v)return null;var p=Math.max(0,Math.min(v,m-f));return{isScrolling:!0,scrollDirection:d.scrollOffset<p?"forward":"backward",scrollOffset:p,scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(a){var l=e.props.outerRef;e._outerRef=a,typeof l=="function"?l(a):l!=null&&typeof l=="object"&&l.hasOwnProperty("current")&&(l.current=a)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&H(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=ce(e._resetIsScrolling,ue)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1,null)})},e}M.getDerivedStateFromProps=function(e,a){return me(e,a),y(e),null};var _=M.prototype;return _.scrollTo=function(e){e=Math.max(0,e),this.setState(function(a){return a.scrollOffset===e?null:{scrollDirection:a.scrollOffset<e?"forward":"backward",scrollOffset:e,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},_.scrollToItem=function(e,a){a===void 0&&(a="auto");var l=this.props,f=l.itemCount,m=l.layout,v=this.state.scrollOffset;e=Math.max(0,Math.min(e,f-1));var d=0;if(this._outerRef){var p=this._outerRef;m==="vertical"?d=p.scrollWidth>p.clientWidth?V():0:d=p.scrollHeight>p.clientHeight?V():0}this.scrollTo(c(this.props,e,a,v,this._instanceProps,d))},_.componentDidMount=function(){var e=this.props,a=e.direction,l=e.initialScrollOffset,f=e.layout;if(typeof l=="number"&&this._outerRef!=null){var m=this._outerRef;a==="horizontal"||f==="horizontal"?m.scrollLeft=l:m.scrollTop=l}this._callPropsCallbacks()},_.componentDidUpdate=function(){var e=this.props,a=e.direction,l=e.layout,f=this.state,m=f.scrollOffset,v=f.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var d=this._outerRef;if(a==="horizontal"||l==="horizontal")if(a==="rtl")switch(B()){case"negative":d.scrollLeft=-m;break;case"positive-ascending":d.scrollLeft=m;break;default:var p=d.clientWidth,I=d.scrollWidth;d.scrollLeft=I-p-m;break}else d.scrollLeft=m;else d.scrollTop=m}this._callPropsCallbacks()},_.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&H(this._resetIsScrollingTimeoutId)},_.render=function(){var e=this.props,a=e.children,l=e.className,f=e.direction,m=e.height,v=e.innerRef,d=e.innerElementType,p=e.innerTagName,I=e.itemCount,x=e.itemData,O=e.itemKey,E=O===void 0?de:O,N=e.layout,Z=e.outerElementType,J=e.outerTagName,Q=e.style,X=e.useIsScrolling,Y=e.width,D=this.state.isScrolling,L=f==="horizontal"||N==="horizontal",ee=L?this._onScrollHorizontal:this._onScrollVertical,P=this._getRangeToRender(),te=P[0],re=P[1],F=[];if(I>0)for(var R=te;R<=re;R++)F.push(z.createElement(a,{data:x,key:E(R,x),index:R,isScrolling:X?D:void 0,style:this._getItemStyle(R)}));var k=n(this.props,this._instanceProps);return z.createElement(Z||J||"div",{className:l,onScroll:ee,ref:this._outerRefSetter,style:ie({position:"relative",height:m,width:Y,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:f},Q)},z.createElement(d||p||"div",{children:F,ref:v,style:{height:L?"100%":k,pointerEvents:D?"none":void 0,width:L?k:"100%"}}))},_._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var e=this.props.itemCount;if(e>0){var a=this._getRangeToRender(),l=a[0],f=a[1],m=a[2],v=a[3];this._callOnItemsRendered(l,f,m,v)}}if(typeof this.props.onScroll=="function"){var d=this.state,p=d.scrollDirection,I=d.scrollOffset,x=d.scrollUpdateWasRequested;this._callOnScroll(p,I,x)}},_._getRangeToRender=function(){var e=this.props,a=e.itemCount,l=e.overscanCount,f=this.state,m=f.isScrolling,v=f.scrollDirection,d=f.scrollOffset;if(a===0)return[0,0,0,0];var p=u(this.props,d,this._instanceProps),I=s(this.props,p,d,this._instanceProps),x=!m||v==="backward"?Math.max(1,l):1,O=!m||v==="forward"?Math.max(1,l):1;return[Math.max(0,p-x),Math.max(0,Math.min(a-1,I+O)),p,I]},M}(z.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var me=function(t,r){t.children,t.direction,t.height,t.layout,t.innerTagName,t.outerTagName,t.width,r.instance},he=50,w=function(t,r,n){var o=t,c=o.itemSize,u=n.itemMetadataMap,s=n.lastMeasuredIndex;if(r>s){var h=0;if(s>=0){var g=u[s];h=g.offset+g.size}for(var y=s+1;y<=r;y++){var T=c(y);u[y]={offset:h,size:T},h+=T}n.lastMeasuredIndex=r}return u[r]},pe=function(t,r,n){var o=r.itemMetadataMap,c=r.lastMeasuredIndex,u=c>0?o[c].offset:0;return u>=n?G(t,r,c,0,n):ve(t,r,Math.max(0,c),n)},G=function(t,r,n,o,c){for(;o<=n;){var u=o+Math.floor((n-o)/2),s=w(t,u,r).offset;if(s===c)return u;s<c?o=u+1:s>c&&(n=u-1)}return o>0?o-1:0},ve=function(t,r,n,o){for(var c=t.itemCount,u=1;n<c&&w(t,n,r).offset<o;)n+=u,u*=2;return G(t,r,Math.min(n,c-1),Math.floor(n/2),o)},K=function(t,r){var n=t.itemCount,o=r.itemMetadataMap,c=r.estimatedItemSize,u=r.lastMeasuredIndex,s=0;if(u>=n&&(u=n-1),u>=0){var h=o[u];s=h.offset+h.size}var g=n-u-1,y=g*c;return s+y},ge=fe({getItemOffset:function(t,r,n){return w(t,r,n).offset},getItemSize:function(t,r,n){return n.itemMetadataMap[r].size},getEstimatedTotalSize:K,getOffsetForIndexAndAlignment:function(t,r,n,o,c,u){var s=t.direction,h=t.height,g=t.layout,y=t.width,T=s==="horizontal"||g==="horizontal",M=T?y:h,_=w(t,r,c),S=K(t,c),e=Math.max(0,Math.min(S-M,_.offset)),a=Math.max(0,_.offset-M+_.size+u);switch(n==="smart"&&(o>=a-M&&o<=e+M?n="auto":n="center"),n){case"start":return e;case"end":return a;case"center":return Math.round(a+(e-a)/2);case"auto":default:return o>=a&&o<=e?o:o<a?a:e}},getStartIndexForOffset:function(t,r,n){return pe(t,n,r)},getStopIndexForStartIndex:function(t,r,n,o){for(var c=t.direction,u=t.height,s=t.itemCount,h=t.layout,g=t.width,y=c==="horizontal"||h==="horizontal",T=y?g:u,M=w(t,r,o),_=n+T,S=M.offset+M.size,e=r;e<s-1&&S<_;)e++,S+=w(t,e,o).size;return e},initInstanceProps:function(t,r){var n=t,o=n.estimatedItemSize,c={itemMetadataMap:{},estimatedItemSize:o||he,lastMeasuredIndex:-1};return r.resetAfterIndex=function(u,s){s===void 0&&(s=!0),c.lastMeasuredIndex=Math.min(c.lastMeasuredIndex,u-1),r._getItemStyleCache(-1),s&&r.forceUpdate()},c},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){t.itemSize}});const Ie=({index:i,setHeight:t,Component:r})=>{const n=z.useRef(null);return z.useEffect(()=>{n.current&&t(i,n.current.getBoundingClientRect().height)},[]),b(r,{ref:n,index:i})},j=z.memo(({count:i,Component:t,handle:r})=>{const n=z.useMemo(()=>Array.from({length:i}).map(()=>50),[]),o=z.useRef(null),c=s=>n[s],u=(s,h)=>{var g;n[s]=h,(g=o.current)==null||g.resetAfterIndex(s)};return z.useImperativeHandle(r,()=>({scrollToIndex:s=>{var h;(h=o.current)==null||h.scrollToItem(s)}})),b(ne,{children:({width:s,height:h})=>b(ge,{ref:o,width:s,height:h,itemCount:i,itemSize:c,children:({index:g,style:y})=>b("div",{style:y,children:b(Ie,{index:g,setHeight:u,Component:t})},g)})})});try{j.displayName="ReactWindowList",j.__docgenInfo={description:"",displayName:"ReactWindowList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{j as R};
//# sourceMappingURL=react-window-84088797.js.map
