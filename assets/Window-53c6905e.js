import{r as z}from"./index-c6dae603.js";import{r as ue}from"./index-eb008d06.js";import{j as F}from"./jsx-runtime-c3d7f245.js";const C=Math.min,O=Math.max,le=Math.abs,G=Date.now,Re=Object.values,$=setTimeout,N=e=>e!=null,fe=e=>{const t=[...e].sort((n,r)=>n-r),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},H=(e,t)=>{let s;const n=()=>{N(s)&&clearTimeout(s)},r=()=>{n(),s=$(()=>{s=null,e()},t)};return r._cancel=n,r},ae=(e,t)=>{let s=G()-t;return(...n)=>{const r=G();s+t<r&&(s=r,e(...n))}},P=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},L=-1,x=(e,t)=>{const s=e._sizes[t];return s===L?e._defaultItemSize:s},de=(e,t,s)=>{const n=e._sizes[t]===L;return e._sizes[t]=s,e._measuredOffsetIndex=C(t,e._measuredOffsetIndex),n},ee=(e,t,s)=>{if(!e._length)return 0;if(e._measuredOffsetIndex>=t)return s?e._offsets[t]+x(e,t):e._offsets[t];let n=e._measuredOffsetIndex,r=e._offsets[n];for(;n<=t&&(e._offsets[n]=r,!(n===t&&!s));)r+=x(e,n),n++;return e._measuredOffsetIndex=t,r},_e=e=>ee(e,e._length-1,!0),Z=(e,t)=>ee(e,t),te=(e,t,s)=>{let n=0;if(s>=0)for(;t<e._length-1;){const r=x(e,t++);if((n+=r)>=s){n-r/2>=s&&t--;break}}else for(;t>0;){const r=x(e,--t);if((n-=r)<=s){n+r/2<s&&t++;break}}return C(O(t,0),e._length-1)},B=(e,t,s,n)=>te(e,s,t-n),me=(e,t,s)=>{for(let n=t;n<=s;n++)if(e._sizes[n]===L)return!0;return!1},pe=e=>{const t=e._sizes.filter(n=>n!==L),s=t[0];e._defaultItemSize=t.every(n=>n===s)?s:fe(t)},Se=(e,t)=>{const s=[],n=[];for(let r=0;r<e;r++)s.push(L),n.push(r===0?0:L);return{_defaultItemSize:t,_length:e,_measuredOffsetIndex:0,_sizes:s,_offsets:n}},he=(e,t)=>{const s=[],n=[];for(let r=0;r<t;r++){const a=e._sizes[r];if(s.push(N(a)?a:L),r===0)n.push(0);else{const c=e._offsets[r];n.push(N(c)?c:L)}}e._length=t,e._measuredOffsetIndex=C(e._measuredOffsetIndex,t-1),e._sizes=s,e._offsets=n},K=e=>e.reduce((t,[s])=>t+s,0),X=(e,t)=>t.map(([s,n])=>[n-x(e,s),s]),ge=1.5,T=0,Ie=1,Q=2,U=1,k=2,D=3,se=4,q=5,ne=6,re=1,W=2,oe=4,V=8,we=16,Ce=(e,t,s=0,n,r)=>{const a=!t,c=t||40,o=r||Se(e,c);let u=c*O(s-1,0),i=0,_=0,d=0,l=T,h=!1,S=!1,m=[0,s];const g=new Set,v=()=>_e(o),b=()=>v()-u,A=f=>{const p=l;return l=f,l!==p&&(l===T||p===T)};return{_getCache(){return JSON.parse(JSON.stringify(o))},_getRange(){const[f,p]=m,w=Z(o,f),I=B(o,i,f,w),E=te(o,I,u);return f===I&&p===E?m:m=[I,E]},_isUnmeasuredItem(f){return o._sizes[f]===L},_hasUnmeasuredItemsInRange(f){return me(o,O(0,f-2),C(o._length-1,f+2))},_getItemOffset(f){const p=Z(o,f);return n?p+O(0,u-v()):p},_getItemSize(f){return x(o,f)},_getItemLength(){return o._length},_getScrollOffset(){return i},_getScrollOffsetMax:b,_getViewportSize(){return u},_getScrollSize:v,_getCorrectedScrollSize(){return O(v(),u)},_getJumpCount(){return _},_flushJump(){const f=d;return d=0,f},_getItemIndexForScrollTo(f){return B(o,f,0,0)},_subscribe(f,p){const w=[f,p];return g.add(w),()=>{g.delete(w)}},_update(f,p){let w,I=0;switch(f){case U:{const E=p.filter(([y,M])=>o._sizes[y]!==M);if(!E.length)break;let R=0;if(l===Q)R=K(X(o,E));else if(h){const y=X(o,E),[M]=m;i===0||(i>b()-ge?R=K(y):R=K(y.filter(([,ce])=>ce<M)))}R&&(d=R,_++,I+=oe);let j=!1;E.forEach(([y,M])=>{de(o,y,M)&&(j=!0)}),a&&j&&!i&&pe(o),I+=W,S=w=!0;break}case k:{u!==p&&(u=p,I=W);break}case D:case se:{if(i===p)break;if(f===D){const E=S;S=!1,(l===T||!E)&&!h&&A(i>p?Q:Ie)&&(I+=V),w=le(i-p)>u,I+=we}i=O(0,C(b(),p)),I+=re;break}case q:{A(T)&&(I=V),h=!1;break}case ne:{h=!0;break}}I&&g.forEach(([E,R])=>{I&E&&R(w)})},_getIsScrolling(){return l!==T},_updateCacheLength(f){o._length!==f&&he(o,f)}}},be=typeof window<"u"?z.useLayoutEffect:z.useEffect,J="current",ye=e=>{const t=[];return z.Children.forEach(e,s=>{!N(s)||typeof s=="boolean"||t.push(s)}),t},ve=e=>{const t=z.useRef(e);return be(()=>{t[J]=e},[e]),t},Te=re+W,Ne=W,xe=oe,We=V,Ae=W,Me=(e,t,s,n)=>{const[r,a]=z.useState(t),c=ve(t);if(z.useLayoutEffect(()=>{const o=()=>{a(()=>c[J]())};return e._subscribe(s,u=>{u?ue.flushSync(o):o()})},[]),n){const o=t();r!==o&&a(o)}return r},Ee=P(e=>{const t="scrollLeft",s=e[t];e[t]=1;const n=e[t]<1;return e[t]=s,n}),ie=(e,t,s)=>ae(n=>{if(e._getIsScrolling()&&!n.ctrlKey&&(t?n.deltaX:n.deltaY)){const r=e._getScrollOffset();r>0&&r<e._getScrollOffsetMax()&&s()}},50),Ue=(e,t,s)=>{let n,r;const a=t?"scrollLeft":"scrollTop",c=()=>n?t?n.scrollWidth:n.scrollHeight:0,o=(i,_)=>t&&s?Ee(n)||_?-i:e._getScrollOffsetMax()-i:i,u=async(i,_)=>{if(!n)return;const d=()=>C(_(),c()-e._getViewportSize());for(;e._update(se,d()),!!e._hasUnmeasuredItemsInRange(i);){r&&r[1]();const l=e._subscribe(W,()=>{r&&r[0]()});try{await new Promise((h,S)=>{let m=!1;const g=()=>{m||(m=!0,h(),r=void 0)};r=[g,S],$(g,250)})}catch{return}finally{l()}}n[a]=o(d()),e._update(ne)};return{_initRoot(i){n=i;const _=()=>{e._update(D,o(i[a]))},d=H(()=>{_(),e._update(q)},150),l=()=>{_(),d()},h=ie(e,t,d);return i.addEventListener("scroll",l),i.addEventListener("wheel",h,{passive:!0}),()=>{i.removeEventListener("scroll",l),i.removeEventListener("wheel",h),d._cancel()}},_getActualScrollSize:c,_scrollTo(i){i=O(i,0),u(e._getItemIndexForScrollTo(i),()=>i)},_scrollToIndex(i){i=O(C(i,e._getItemLength()-1),0),u(i,()=>e._getItemOffset(i))},_fixScrollJump:i=>{n&&(n[a]+=o(i,!0))}}},ke=(e,t)=>{const s=t?"scrollX":"scrollY",n=t?"offsetLeft":"offsetTop";return{_initRoot(r){let a=!1;const c=(l,h)=>{const S=h+l[n],m=l.offsetParent;return l===document.body||!m?S:c(m,S)},o=()=>{a&&e._update(D,window[s]-c(r,0))},u=H(()=>{o(),e._update(q)},150),i=()=>{o(),u()},_=ie(e,t,u),d=new IntersectionObserver(([l])=>{a=l.isIntersecting});return d.observe(r),window.addEventListener("scroll",i),window.addEventListener("wheel",_,{passive:!0}),()=>{d.disconnect(),window.removeEventListener("scroll",i),window.removeEventListener("wheel",_),u._cancel()}},_fixScrollJump:r=>{window.scrollBy(t?r:0,t?0:r)}}},De=e=>{const t=z.useRef();return t[J]||(t[J]=e())},Je=(e,t)=>{let s;const n=t?"width":"height",r=new WeakMap,a=P(()=>new ResizeObserver(c=>{const o=[];for(const{target:u,contentRect:i}of c)if(u===s)e._update(k,i[n]);else{const _=r.get(u);N(_)&&o.push([_,i[n]])}o.length&&e._update(U,o)}));return{_observeRoot(c){s=c;const o=a();return o.observe(c),()=>{o.disconnect()}},_observeItem(c,o){const u=a();return r.set(c,o),u.observe(c),()=>{r.delete(c),u.unobserve(c)}}}},Pe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,a=P(()=>new ResizeObserver(c=>{const o=[];for(const{target:u,contentRect:i}of c){const _=r.get(u);N(_)&&o.push([_,i[s]])}o.length&&e._update(U,o)}));return{_observeRoot(){const c=()=>{e._update(k,window[n])};return window.addEventListener("resize",c),c(),()=>{window.removeEventListener("resize",c),a().disconnect()}},_observeItem(c,o){const u=a();return r.set(c,o),u.observe(c),()=>{r.delete(c),u.unobserve(c)}}}},Ke=(e,t)=>{let s;const n="height",r="width",a=new WeakMap,c=new Set,o=new Set,u=new Map,i=(d,l)=>`${d}-${l}`,_=P(()=>new ResizeObserver(d=>{const l=new Set,h=new Set;for(const{target:S,contentRect:m}of d)if(S===s)e._update(k,m[n]),t._update(k,m[r]);else{const g=a.get(S);if(g){const[v,b]=g,A=i(v,b),f=u.get(A),p=[m[n],m[r]];let w,I;f?(f[0]!==p[0]&&(w=!0),f[1]!==p[1]&&(I=!0)):w=I=!0,w&&l.add(v),I&&h.add(b),(w||I)&&u.set(A,p)}}if(l.size){const S=[];l.forEach(m=>{let g=0;o.forEach(v=>{const b=u.get(i(m,v));b&&(g=O(g,b[0]))}),g&&S.push([m,g])}),e._update(U,S)}if(h.size){const S=[];h.forEach(m=>{let g=0;c.forEach(v=>{const b=u.get(i(v,m));b&&(g=O(g,b[1]))}),g&&S.push([m,g])}),t._update(U,S)}}));return{_observeRoot(d){s=d;const l=_();return l.observe(d),()=>{l.disconnect()}},_observeItem(d,l,h){const S=_();return a.set(d,[l,h]),c.add(l),o.add(h),S.observe(d),()=>{a.delete(d),S.unobserve(d)}}}},Y=z.forwardRef(({children:e,attrs:t,width:s,height:n,scrolling:r},a)=>F("div",{ref:a,...t,children:F("div",{style:z.useMemo(()=>({position:"relative",visibility:"hidden",width:s??"100%",height:n??"100%",pointerEvents:r?"none":"auto"}),[s,n,r]),children:e})}));try{Y.displayName="Window",Y.__docgenInfo={description:"",displayName:"Window",props:{children:{defaultValue:null,description:"Renderable item elements.",name:"children",required:!0,type:{name:"ReactNode"}},attrs:{defaultValue:null,description:"Attributes that should be passed to the scrollable element.",name:"attrs",required:!0,type:{name:"WindowComponentAttributes"}},height:{defaultValue:null,description:"Total height of items. It's undefined if component is not vertically scrollable.",name:"height",required:!0,type:{name:"number | undefined"}},width:{defaultValue:null,description:"Total width of items. It's undefined if component is not horizontally scrollable.",name:"width",required:!0,type:{name:"number | undefined"}},scrolling:{defaultValue:null,description:"Currently component is scrolling or not.",name:"scrolling",required:!0,type:{name:"boolean"}}}}}catch{}export{Te as S,we as U,Y as W,De as a,Me as b,be as c,Ce as d,N as e,ye as f,Pe as g,ke as h,We as i,xe as j,Ne as k,C as l,O as m,Ae as n,Ke as o,Ue as p,Je as q,J as r,ve as u,Re as v};
//# sourceMappingURL=Window-53c6905e.js.map
