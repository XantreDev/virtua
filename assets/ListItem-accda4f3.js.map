{"version":3,"file":"ListItem-accda4f3.js","sources":["../../src/react/ListItem.tsx"],"sourcesContent":["import {\n  memo,\n  useRef,\n  useMemo,\n  CSSProperties,\n  ReactElement,\n  ReactNode,\n} from \"react\";\nimport { VirtualStore } from \"../core/store\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { useSelector } from \"./useSelector\";\nimport { ListResizer } from \"../core/resizer\";\nimport { refKey } from \"./utils\";\n\n/**\n * Props of customized item component for {@link VList}.\n */\nexport interface CustomItemComponentProps {\n  style: CSSProperties;\n  children: ReactNode;\n}\n\nexport type CustomItemComponent = React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<CustomItemComponentProps> & React.RefAttributes<any>\n>;\n\ntype ListItemProps = {\n  _children: ReactNode;\n  _resizer: ListResizer;\n  _store: VirtualStore;\n  _index: number;\n  _element: \"div\";\n  _isHorizontal: boolean;\n  _isRtl: boolean;\n};\n\nexport const ListItem = memo(\n  ({\n    _children: children,\n    _resizer: resizer,\n    _store: store,\n    _index: index,\n    _element: Element,\n    _isHorizontal: isHorizontal,\n    _isRtl: isRtl,\n  }: ListItemProps): ReactElement => {\n    const ref = useRef<HTMLDivElement>(null);\n\n    const offset = useSelector(store, () => store._getItemOffset(index), true);\n    const hide = useSelector(store, () => store._isUnmeasuredItem(index), true);\n\n    // The index may be changed if elements are inserted to or removed from the start of props.children\n    useIsomorphicLayoutEffect(\n      () => resizer._observeItem(ref[refKey]!, index),\n      [index]\n    );\n\n    return (\n      <Element\n        ref={ref}\n        style={useMemo((): CSSProperties => {\n          const leftOrRightKey = isRtl ? \"right\" : \"left\";\n          const style: CSSProperties = {\n            margin: 0,\n            padding: 0,\n            position: \"absolute\",\n            [isHorizontal ? \"height\" : \"width\"]: \"100%\",\n            [isHorizontal ? \"top\" : leftOrRightKey]: 0,\n            [isHorizontal ? leftOrRightKey : \"top\"]: offset,\n            visibility: hide ? \"hidden\" : \"visible\",\n            // willChange: \"transform\",\n          };\n          if (isHorizontal) {\n            style.display = \"flex\";\n          }\n          return style;\n        }, [offset, hide])}\n      >\n        {children}\n      </Element>\n    );\n  }\n);\n"],"names":["ListItem","memo","children","resizer","store","index","Element","isHorizontal","isRtl","ref","useRef","offset","useSelector","hide","useIsomorphicLayoutEffect","refKey","jsx","useMemo","leftOrRightKey","style"],"mappings":"6IAoCO,MAAAA,EAAAC,EAAA,KAAiB,CAAA,CACrB,UAAAC,EACY,SAAAC,EACD,OAAAC,EACF,OAAAC,EACA,SAAAC,EACE,cAAAC,EACK,OAAAC,CACP,IAAA,CAER,MAAAC,EAAAC,SAAA,IAAA,EAEAC,EAAAC,EAAAR,EAAA,IAAAA,EAAA,eAAAC,CAAA,EAAA,EAAA,EACAQ,EAAAD,EAAAR,EAAA,IAAAA,EAAA,kBAAAC,CAAA,EAAA,EAAA,EAGA,OAAAS,EAAA,IAAAX,EAAA,aAAAM,EAAAM,CAAA,EAAAV,CAAA,EACgD,CAAAA,CAAA,CACxC,EAGRW,EACEV,EAAC,CAAA,IAAAG,EACC,MAAAQ,EAAA,QAAA,IAAA,CAEE,MAAAC,EAAAV,EAAA,QAAA,OACAW,EAAA,CAA6B,OAAA,EACnB,QAAA,EACC,SAAA,WACC,CAAAZ,EAAA,SAAA,OAAA,EAAA,OAC2B,CAAAA,EAAA,MAAAW,CAAA,EAAA,EACI,CAAAX,EAAAW,EAAA,KAAA,EAAAP,EACA,WAAAE,EAAA,SAAA,SACX,EAGhC,OAAAN,IACEY,EAAA,QAAA,QAEFA,CAAO,EAAA,CAAAR,EAAAE,CAAA,CAAA,EACQ,SAAAX,CAEhB,CAAA,CACH,CAGN"}