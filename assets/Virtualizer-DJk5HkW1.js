import{j as L}from"./jsx-runtime-CmfuFKGs.js";import{r as l}from"./index-obz6jkze.js";import{a as G,A as J,b as K,u as O,r,U as M,h as F,j as Q,m as W,g as X,c as Y,k as Z,S as $,d as ee,l as se,n as re}from"./useRerender-CQ15Wemt.js";import{u as te,a as V,L as oe}from"./useChildren-hvymIWaB.js";import{r as le}from"./index-C4ZtItU4.js";const ne=l.forwardRef(({children:y,count:A,overscan:C=4,itemSize:_,shift:k,horizontal:D,cache:j,startMargin:H,ssrCount:p,as:c="div",item:N="div",scrollRef:S,onScroll:w,onScrollEnd:U,onRangeChange:g},q)=>{c=c;const[P,n]=te(y,A),b=l.useRef(null),E=l.useRef(!!p),v=V(w),h=V(U),[e,u,o,f]=G(()=>{const s=!!D,t=ee(n,_,p,j,!_,H);return[t,se(t,s),re(t,s),s]});n!==e._getItemsLength()&&e._update(J,[n,k]);const z=K(e),[d,m]=e._getRange(),I=e._getScrollDirection(),B=e._getJumpCount(),R=e._getTotalSize(),T=[];O(()=>{E[r]=!1;const s=e._subscribe(M,a=>{a?le.flushSync(z):z()}),t=e._subscribe(F,()=>{v[r]&&v[r](e._getScrollOffset())}),i=e._subscribe(Q,()=>{h[r]&&h[r]()}),x=a=>{u._observeRoot(a),o._observe(a)};return S?W(()=>x(S[r])):x(b[r].parentElement),()=>{s(),t(),i(),u._dispose(),o._dispose()}},[]),O(()=>{o._fixScrollJump()},[B]),l.useEffect(()=>{g&&g(d,m)},[d,m]),l.useImperativeHandle(q,()=>({get cache(){return e._getCacheSnapshot()},get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return X(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),[]);for(let[s,t]=Y(d,m,C,I,n);s<=t;s++){const i=P(s);T.push(L.jsx(oe,{_resizer:u._observeItem,_index:s,_offset:e._getItemOffset(s),_hide:e._isUnmeasuredItem(s),_element:N,_children:i,_isHorizontal:f,_isSSR:E[r]},Z(i,s)))}return L.jsx(c,{ref:b,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:f?R:"100%",height:f?"100%":R,pointerEvents:I!==$?"none":"auto"},children:T})});ne.__docgenInfo={description:"Customizable list virtualizer for advanced usage. See {@link VirtualizerProps} and {@link VirtualizerHandle}.",methods:[{name:"cache",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollOffset",docblock:null,modifiers:["get"],params:[],returns:null},{name:"scrollSize",docblock:null,modifiers:["get"],params:[],returns:null},{name:"viewportSize",docblock:null,modifiers:["get"],params:[],returns:null}],displayName:"Virtualizer",props:{overscan:{defaultValue:{value:"4",computed:!1},required:!1},as:{defaultValue:{value:'"div"',computed:!1},required:!1},item:{defaultValue:{value:'"div"',computed:!1},required:!1}}};export{ne as V};
