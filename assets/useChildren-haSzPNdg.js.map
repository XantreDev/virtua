{"version":3,"file":"useChildren-haSzPNdg.js","sources":["../../src/react/useLatestRef.ts","../../src/react/ListItem.tsx","../../src/react/useChildren.ts"],"sourcesContent":["import { useRef } from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { refKey } from \"./utils\";\n\nexport const useLatestRef = <T>(value: T) => {\n  const ref = useRef<T>(value);\n\n  useIsomorphicLayoutEffect(() => {\n    ref[refKey] = value;\n  }, [value]);\n\n  return ref;\n};\n","import {\n  memo,\n  useRef,\n  useMemo,\n  CSSProperties,\n  ReactElement,\n  ReactNode,\n} from \"react\";\nimport { useIsomorphicLayoutEffect } from \"./useIsomorphicLayoutEffect\";\nimport { ListResizer } from \"../core/resizer\";\nimport { refKey } from \"./utils\";\nimport { isRTLDocument } from \"../core/environment\";\n\n/**\n * Props of customized item component for {@link VList}.\n */\nexport interface CustomItemComponentProps {\n  style: CSSProperties;\n  index: number;\n  children: ReactNode;\n}\n\nexport type CustomItemComponent = React.ForwardRefExoticComponent<\n  React.PropsWithoutRef<CustomItemComponentProps> & React.RefAttributes<any>\n>;\n\ntype ListItemProps = {\n  _children: ReactNode;\n  _resizer: ListResizer;\n  _index: number;\n  _offset: number;\n  _hide: boolean;\n  _element: \"div\" | CustomItemComponent;\n  _isHorizontal: boolean;\n};\n\nexport const ListItem = memo(\n  ({\n    _children: children,\n    _resizer: resizer,\n    _index: index,\n    _offset: offset,\n    _hide: hide,\n    _element: Element,\n    _isHorizontal: isHorizontal,\n  }: ListItemProps): ReactElement => {\n    const ref = useRef<HTMLDivElement>(null);\n\n    // The index may be changed if elements are inserted to or removed from the start of props.children\n    useIsomorphicLayoutEffect(\n      () => resizer._observeItem(ref[refKey]!, index),\n      [index]\n    );\n\n    const style = useMemo((): CSSProperties => {\n      const style: CSSProperties = {\n        margin: 0,\n        padding: 0,\n        position: \"absolute\",\n        [isHorizontal ? \"height\" : \"width\"]: \"100%\",\n        [isHorizontal ? \"top\" : \"left\"]: 0,\n        [isHorizontal ? (isRTLDocument() ? \"right\" : \"left\") : \"top\"]: offset,\n        visibility: hide ? \"hidden\" : \"visible\",\n      };\n      if (isHorizontal) {\n        style.display = \"flex\";\n      }\n      return style;\n    }, [offset, hide]);\n\n    if (typeof Element === \"string\") {\n      return (\n        <Element ref={ref} style={style}>\n          {children}\n        </Element>\n      );\n    } else {\n      return (\n        <Element ref={ref} style={style} index={index}>\n          {children}\n        </Element>\n      );\n    }\n  }\n);\n","import { ReactElement, ReactNode, useMemo } from \"react\";\nimport { ItemElement, flattenChildren } from \"./utils\";\n\nexport const useChildren = (\n  children: ReactNode | ((i: number) => ReactElement),\n  count: number | undefined\n) => {\n  return useMemo((): [(i: number) => ItemElement, number] => {\n    if (typeof children === \"function\") {\n      return [children, count || 0];\n    }\n    // Memoize element array\n    const _elements = flattenChildren(children);\n    return [(i) => _elements[i]!, _elements.length];\n  }, [children, count]);\n};\n"],"names":["useLatestRef","value","ref","useRef","useIsomorphicLayoutEffect","refKey","ListItem","memo","children","resizer","index","offset","hide","Element","isHorizontal","style","useMemo","style2","isRTLDocument","jsx","useChildren","count","_elements","flattenChildren"],"mappings":"yJAIa,MAAAA,EAAmBC,GAAa,CACrC,MAAAC,EAAMC,SAAUF,CAAK,EAE3B,OAAAG,EAA0B,IAAM,CAC9BF,EAAIG,CAAM,EAAIJ,CAAA,EACb,CAACA,CAAK,CAAC,EAEHC,CACT,ECwBOI,EAAAC,EAAA,KAAiB,CAAA,CACrB,UAAAC,EACY,SAAAC,EACD,OAAAC,EACF,QAAAC,EACC,MAAAC,EACF,SAAAC,EACG,cAAAC,CACK,IAAA,CAEf,MAAAZ,EAAAC,SAAA,IAAA,EAGAC,EAAA,IAAAK,EAAA,aAAAP,EAAAG,CAAA,EAAAK,CAAA,EACgD,CAAAA,CAAA,CACxC,EAGR,MAAAK,EAAAC,EAAAA,QAAA,IAAA,CACE,MAAAC,EAAA,CAA6B,OAAA,EACnB,QAAA,EACC,SAAA,WACC,CAAAH,EAAA,SAAA,OAAA,EAAA,OAC2B,CAAAA,EAAA,MAAA,MAAA,EAAA,EACJ,CAAAA,EAAAI,EAAA,EAAA,QAAA,OAAA,KAAA,EAAAP,EAC8B,WAAAC,EAAA,SAAA,SACjC,EAEhC,OAAAE,IACEG,EAAA,QAAA,QAEFA,CAAO,EAAA,CAAAN,EAAAC,CAAA,CAAA,EAGT,OAAA,OAAAC,GAAA,SACEM,EAAAN,EAAA,CAAA,IAAAX,EAAA,MAAAa,EAAA,SAAAP,CAAA,CAAA,EAMAW,EAAAN,EAAA,CAAA,IAAAX,EAAA,MAAAa,EAAA,MAAAL,EAAA,SAAAF,CAAA,CAAA,CAKF,CAEJ,+wBCjFa,MAAAY,EAAc,CACzBZ,EACAa,IAEOL,UAAQ,IAA4C,CACrD,GAAA,OAAOR,GAAa,WACf,MAAA,CAACA,EAAUa,GAAS,CAAC,EAGxB,MAAAC,EAAYC,EAAgBf,CAAQ,EAC1C,MAAO,CAAE,GAAMc,EAAU,CAAC,EAAIA,EAAU,MAAM,CAAA,EAC7C,CAACd,EAAUa,CAAK,CAAC"}