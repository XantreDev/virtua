import{j as W}from"./jsx-runtime-KhpQ_ow-.js";import{r as v}from"./index-G6kSzgdV.js";import{r as me}from"./index-xBZDQ2qw.js";const N=Math.min,I=Math.max,ve=Math.abs,ee=Date.now,ge=Object.values,ye=Array.isArray,K=setTimeout,Y=(e,n,t)=>N(t,I(n,e)),U=e=>e!=null,be=(e,n)=>{let t;const r=()=>{U(t)&&clearTimeout(t)},s=()=>{r(),t=K(()=>{t=null,e()},n)};return s.t=r,s},z=e=>{let n,t;return(...r)=>(n||(n=!0,t=e(...r)),t)},ce=e=>getComputedStyle(e),we=e=>e?parseFloat(e):0,q=-1,D=(e,n)=>{const t=e.o[n];return t===q?e.i:t},Q=(e,n)=>{if(!e.l)return 0;if(e.u>=n)return e.h[n];let t=e.u,r=e.h[t];for(;t<n;)r+=D(e,t),e.h[++t]=r;return e.u=n,r},te=(e,n,t)=>{let r=Q(e,t);for(;t>=0&&t<e.l;)if(r<=n){const s=D(e,t);if(r+s>n)break;r+=s,t++}else r-=D(e,--t);return Y(t,0,e.l-1)},re=(e,n,t,r)=>{const s=te(e,n,N(t,e.l-1));return[s,te(e,n+r,s)]},ue=(e,n,t)=>{const r=t?"unshift":"push";for(let s=e.l;s<n;s++)e.o[r](q),e.h.push(s===0?0:q);e.l=n},ne=(e,n,t)=>{const r=n-e.l,s=r<0;let c;return s?(c=(t?e.o.splice(0,-r):e.o.splice(r)).reduce((l,i)=>l+(i===q?e.i:i),0),e.h.splice(r)):(c=e.i*r,ue(e,e.l+r,t)),e.u=t?0:Y(n-1,0,e.u),e.l=n,[c,s]},ae=typeof window<"u",fe=()=>document.documentElement,Re=z(e=>{const n="scrollLeft",t=e[n];e[n]=1;const r=e[n]<1;return e[n]=t,r}),de=z(()=>!!ae&&ce(fe()).direction==="rtl"),Z=z(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ee=z(()=>"scrollBehavior"in fe().style),oe=(e,n,t)=>n.reduce((r,[s,c])=>{const l=c-D(e,s);return(!t||l>0)&&(r+=l),r},0),Le=(e,n=40,t=0,r=((l,i)=>{const p={i,l:0,u:0,o:[],h:[]};return ue(p,l),p})(e,n),s,c)=>{let l=n*I(t-1,0),i=0,p=0,o=0,f=0,g=0,y=0,h=0,R=!1,b=null,B=!1,x=[0,t];const X=new Set,j=()=>(a=>a.l?Q(a,a.l-1)+D(a,a.l-1):0)(r),m=()=>j()-l+i+p,P=a=>Y(a,0,m()),O=a=>{Z()&&h!==0?y+=a:(g+=a,f++)},H=a=>{const d=h;return h=a,h!==d};return{_:()=>JSON.parse(JSON.stringify(r)),g:()=>b?[N(x[0],b[0]),I(x[1],b[1])]:x=re(r,o+y,x[0],l),m:a=>r.o[a]===q,p:()=>!!b&&r.o.slice(I(0,b[0]-1),N(r.l-1,b[1]+1)+1).includes(q),v(a){const d=Q(r,a)-y;return s?d+I(0,l-j()):d},S:a=>D(r,a),I:()=>r.l,R:()=>o,k:m,O:()=>h,C:()=>l,T:()=>i,M:()=>I(j(),l-i-p),H:()=>f,J(){const a=g;return g=0,a},W(a,d){const C=[a,d];return X.add(C),()=>{X.delete(C)}},B(a,d){let C,J,T=0;switch(a){case 1:{const w=d.filter(([k,S])=>r.o[k]!==S);if(!w.length)break;let L=0;if(o!==0)if(o>m()-1.5)L=oe(r,w,!0);else{const[k]=x;L=oe(r,w.filter(([S])=>S<k))}L&&O(L);let A=!1;w.forEach(([k,S])=>{((M,u,E)=>{const _=M.o[u]===q;return M.o[u]=E,M.u=N(u,M.u),_})(r,k,S)&&(A=!0)}),c&&A&&!o&&(k=>{const S=k.o.filter(u=>u!==q),M=S[0];k.i=S.every(u=>u===M)?M:(u=>{const E=[...u].sort((G,$)=>G-$),_=u.length/2|0;return E.length%2==0?(E[_-1]+E[_])/2:E[_]})(S)})(r),T=2,B=J=!0;break}case 2:{const w=d[0]+d[1]+d[2];l!==w&&(l=w,i=d[1],p=d[2],T=2);break}case 3:if(d[1]){const w=m()-o,[L,A]=ne(r,d[0],!0),k=A?-N(L,w):L;O(k),Z()||(o=P(o+k)),T=1}else ne(r,d[0]);break;case 4:{if(d===o)break;const w=d-o,L=B;B=!1,h!==0&&L||R||H(w<0?2:1),J=ve(w)>l,o=P(d),T=5;break}case 5:H(0)&&(C=!0,T=1),R=!1,b=null;break;case 6:R=!0;break;case 7:b=re(r,d,x[0],l),T=1}T&&(C&&y&&(B=!0,g+=y,y=0,f++),X.forEach(([w,L])=>{T&w&&L(J)}))}}},F=ae?v.useLayoutEffect:v.useEffect,ke=(e,n,t)=>(()=>{let r=ee()-50;return(...s)=>{const c=ee();r+50<c&&(r=c,(l=>{if(e.O()!==0&&!l.ctrlKey&&(n?l.deltaX:l.deltaY)){const i=e.R();i>0&&i<e.k()&&t()}})(...s))}})(),xe=(e,n,t,r)=>Re(e)||r?-t:n.k()-t,Se=(e,n)=>{let t,r,s=!1;const c=n?"scrollLeft":"scrollTop",l=n?"overflowX":"overflowY",i=(o,f)=>n&&de()?xe(t,e,o,f):o,p=async(o,f)=>{if(!t)return;r&&r();const g=()=>Y(o(),0,e.k()),y=()=>{let h;return[new Promise((R,b)=>{h=R,K(r=b,150)}),e.W(2,()=>{h&&h()})]};if(f&&Ee()){for(;e.B(7,g()),e.p();){const[h,R]=y();try{await h}catch{return}finally{R()}}t.scrollTo({[n?"left":"top"]:i(g()),behavior:"smooth"})}else for(;;){const[h,R]=y();try{t[c]=i(g()),e.B(6),await h}catch{return}finally{R()}}};return{L(o){t=o;let f=!1,g=!1;const y=be(()=>{f?y():(g=!1,e.B(5))},150),h=()=>{g&&(s=!0),e.B(4,i(o[c])),y()},R=ke(e,n,y),b=()=>{f=!0,g=s=!1},B=()=>{f=!1,Z()&&(g=!0)};return o.addEventListener("scroll",h),o.addEventListener("wheel",R,{passive:!0}),o.addEventListener("touchstart",b,{passive:!0}),o.addEventListener("touchend",B,{passive:!0}),()=>{o.removeEventListener("scroll",h),o.removeEventListener("wheel",R),o.removeEventListener("touchstart",b),o.removeEventListener("touchend",B),y.t()}},$(o){p(()=>o)},P(o){o+=e.R(),p(()=>o)},V(o,{align:f,smooth:g}={}){if(o=Y(o,0,e.I()-1),f==="nearest"){const y=e.v(o),h=e.R();if(y<h)f="start";else{if(!(y+e.S(o)>h+e.C()))return;f="end"}}p(()=>f==="end"?e.T()+e.v(o)+e.S(o)-e.C():f==="center"?e.T()+e.v(o)+(e.S(o)-e.C())/2:e.T()+e.v(o),g)},X:o=>{if(t){if(s){s=!1;const f=t.style,g=f[l];f[l]="hidden",K(()=>{f[l]=g})}t[c]+=i(o,!0)}}}},V="current",Te={},he=(e,n)=>{if(ye(e))for(const t of e)he(t,n);else U(e)&&typeof e!="boolean"&&n.push(e)},Me=(e,n,t)=>I(e-(t===1?1:I(1,n)),0),_e=(e,n,t,r)=>N(e+(t===2?1:I(1,n)),r-1),Be=e=>{const n=v.useRef();return n[V]||(n[V]=e())},se=e=>{const n=v.useRef(e);return F(()=>{n[V]=e},[e]),n},Ce={box:"border-box"},Ie=(e,n)=>{let t;const r=n?"width":"height",s=new WeakMap,c=z(()=>new ResizeObserver(l=>{const i=[];for(const{target:p,contentRect:o}of l)if(p.offsetParent)if(p===t)e.B(2,[o[r],o[n?"left":"top"],we(ce(t)[n?"paddingRight":"paddingBottom"])]);else{const f=s.get(p);U(f)&&i.push([f,o[r]])}i.length&&e.B(1,i)}));return{Y(l){t=l;const i=c();return i.observe(l,Ce),()=>{i.disconnect()}},j(l,i){const p=c();return s.set(l,i),p.observe(l),()=>{s.delete(l),p.unobserve(l)}}}},Ve=v.forwardRef(({children:e,attrs:n,width:t,height:r,scrolling:s},c)=>W("div",{ref:c,...n,children:W("div",{style:v.useMemo(()=>({position:"relative",visibility:"hidden",width:t??"100%",height:r??"100%",pointerEvents:s?"none":"auto"}),[t,r,s]),children:e})})),Oe=v.memo(({D:e,N:n,U:t,A:r,F:s,G:c,q:l})=>{const i=v.useRef(null);return F(()=>n.j(i[V],t),[t]),W(c,{ref:i,style:v.useMemo(()=>{const p={margin:0,padding:0,position:"absolute",[l?"height":"width"]:"100%",[l?"top":"left"]:0,[l?de()?"right":"left":"top"]:r,visibility:s?"hidden":"visible"};return l&&(p.display="flex"),p},[r,s]),children:e})}),le=()=>[],He=()=>v.useReducer(le,void 0,le)[1],Ae=(e,n)=>v.useMemo(()=>{if(typeof e=="function")return[e,n||0];const t=(r=>{const s=[];return he(r,s),s})(e);return[r=>t[r],t.length]},[e,n]),qe=v.forwardRef(({children:e,count:n,overscan:t=4,initialItemSize:r,initialItemCount:s,shift:c,horizontal:l,reverse:i,cache:p,components:{Root:o=Ve,Item:f="div"}=Te,onScroll:g,onScrollStop:y,onRangeChange:h,...R},b)=>{const[B,x]=Ae(e,n),X=se(g),j=se(y),[m,P,O,H]=Be(()=>{const u=!!l,E=Le(x,r,s,p,!!i,!r);return[E,Ie(E,u),Se(E,u),u]});x!==m.I()&&m.B(3,[x,c]);const a=He(),[d,C]=m.g(),J=m.O(),T=m.H(),w=m.M(),L=v.useRef(null),A=J!==0;F(()=>{const u=L[V],E=m.W(3,pe=>{pe?me.flushSync(a):a()}),_=m.W(4,()=>{X[V]&&X[V](m.R())}),G=P.Y(u),$=O.L(u);return()=>{E(),_(),G(),$()}},[]),F(()=>{const u=m.J();u&&O.X(u)},[T]),v.useEffect(()=>{A||j[V]&&j[V]()},[A]),v.useEffect(()=>{h&&h(d,C)},[d,C]),v.useImperativeHandle(b,()=>({get cache(){return m._()},get scrollOffset(){return m.R()},get scrollSize(){return m.M()},get viewportSize(){return m.C()},scrollToIndex:O.V,scrollTo:O.$,scrollBy:O.P}),[]);const k=Me(d,t,J),S=_e(C,t,J,x),M=[];for(let u=k;u<=S;u++){const E=B(u),_=E.key;M.push(W(Oe,{N:P,U:u,A:m.v(u),F:m.m(u),G:f,D:E,q:H},U(_)?_:"_"+u))}return W(o,{ref:L,width:H?w:void 0,height:H?void 0:w,scrolling:A,attrs:v.useMemo(()=>({...R,style:{[H?"overflowX":"overflowY"]:"auto",display:H?"inline-block":"block",contain:"strict",width:"100%",height:"100%",...R.style}}),ge(R)),children:M})}),ie=v.memo(({count:e,Component:n,handle:t})=>{const r=v.useRef(null);return v.useImperativeHandle(t,()=>({scrollToIndex:s=>{var c;(c=r.current)==null||c.scrollToIndex(s)}})),W(qe,{ref:r,children:Array.from({length:e}).map((s,c)=>W(n,{index:c},c))})});try{ie.displayName="VirtuaList",ie.__docgenInfo={description:"",displayName:"VirtuaList",props:{count:{defaultValue:null,description:"",name:"count",required:!0,type:{name:"number"}},Component:{defaultValue:null,description:"",name:"Component",required:!0,type:{name:"ForwardRefExoticComponent<{ index: number; } & RefAttributes<HTMLDivElement>>"}},handle:{defaultValue:null,description:"",name:"handle",required:!1,type:{name:"Ref<ListHandle>"}}}}}catch{}export{ie as V};
//# sourceMappingURL=virtua-FT8yW3FI.js.map
