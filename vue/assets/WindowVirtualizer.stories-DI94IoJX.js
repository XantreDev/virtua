import{b as p,d as A,o as z,f as S,j as T,w as V,u as b,n as L,t as N}from"./vue.esm-bundler-WriCcUPi.js";import{c as R,U as O,b as B,A as U,d as k,e as H,L as W,i as j,j as G,S as J,_ as M}from"./_plugin-vue_export-helper-Bj05xw9U.js";const P={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean},y=defineComponent({props:P,emits:["scrollEnd","rangeChange"],setup(n,{emit:c,slots:u}){const o=n.horizontal,s=ref(),e=R(n.data.length,n.itemSize??40,void 0,void 0,!n.itemSize),r=j(e,o),m=G(e,o),d=ref(e._getStateVersion()),w=e._subscribe(O,()=>{d.value=e._getStateVersion()}),I=e._subscribe(B,()=>{c("scrollEnd")});return onMounted(()=>{const t=s.value;t&&(r._observeRoot(t),m._observe(t))}),onUnmounted(()=>{w(),I(),r._dispose(),m._dispose()}),watch(()=>n.data.length,t=>{e._update(U,[t,n.shift])}),watch([d,e._getJumpCount],([,t],[,i])=>{t!==i&&m._fixScrollJump()},{flush:"post"}),watch([d,e._getRange],([,[t,i]],[,[f,l]])=>{f===t&&l===i||c("rangeChange",t,i)},{flush:"post"}),()=>{d.value;const t=n.data.length,[i,f]=e._getRange(),l=e._getScrollDirection(),h=e._getTotalSize(),g=[];for(let[a,D]=k(i,f,n.overscan,l,t);a<=D;a++){const x=u.default(n.data[a])[0];g.push(p(W,{key:H(x,a),_resizer:r._observeItem,_index:a,_offset:e._getItemOffset(a),_hide:e._isUnmeasuredItem(a),_children:x,_isHorizontal:o},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal"]))}return p("div",{ref:s,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:o?h+"px":"100%",height:o?"100%":h+"px",pointerEvents:l!==J?"none":"auto"}},[g],4)}}}),q={style:{padding:"200px 100px"}},K={style:{border:"solid 1px gray"}},$=A({__name:"WindowVirtualizer",setup(n){const c=[20,40,180,77],u=s=>({index:s,size:c[s%4]+"px"}),o=Array.from({length:1e3}).map((s,e)=>u(e));return(s,e)=>(z(),S("div",q,[T("div",K,[p(b(y),{data:b(o)},{default:V(r=>[(z(),S("div",{key:r.index,style:L({height:r.size,background:"white",borderBottom:"solid 1px #ccc"})},N(r.index),5))]),_:1},8,["data"])])]))}}),F=M($,[["__scopeId","data-v-2d3e870f"]]),Y={component:y},_={render:()=>({components:{Component:F},template:"<Component />"})};var v,C,E;_.parameters={..._.parameters,docs:{...(v=_.parameters)==null?void 0:v.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...(E=(C=_.parameters)==null?void 0:C.docs)==null?void 0:E.source}}};const Z=["Default"];export{_ as Default,Z as __namedExportsOrder,Y as default};
