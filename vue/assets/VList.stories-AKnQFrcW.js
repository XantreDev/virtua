import{d as b,b as d,o as K,e as Q,w,f as S,i as ee,g as x,j as te,k as N,u as O,l as y,t as C,n as A,m as h}from"./vue.esm-bundler-FgBGtPgo.js";import{c as oe,U as ne,a as re,b as se,d as ae,g as le,e as ce,o as ie,f as ue,h as de,L as pe,S as _e,i as me,j as fe,A as he,_ as D}from"./_plugin-vue_export-helper-YDIUgs9o.js";const ve={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean},ge=b({props:ve,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:l,expose:u,slots:s}){const o=t.horizontal,a=d(),e=oe(t.data.length,t.itemSize??40,void 0,void 0,!t.itemSize),_=me(e,o),n=fe(e,o),r=d(e._getStateVersion()),c=e._subscribe(ne+re,()=>{r.value=e._getStateVersion()}),m=e._subscribe(se,()=>{l("scroll",e._getScrollOffset())}),p=e._subscribe(ae,()=>{l("scrollEnd")});return K(()=>{const i=a.value.parentElement;i&&(_._observeRoot(i),n._observe(i))}),Q(()=>{c(),m(),p(),_._dispose(),n._dispose()}),w(()=>t.data.length,i=>{e._update(he,[i,t.shift])}),w([r,e._getJumpCount],([,i],[,v])=>{if(i===v)return;const g=e._flushJump();g&&n._fixScrollJump(g)},{flush:"post"}),w([r,e._getRange],([,[i,v]],[,[g,z]])=>{g===i&&z===v||l("rangeChange",i,v)},{flush:"post"}),u({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return le(e)},get viewportSize(){return e._getViewportSize()},scrollToIndex:n._scrollToIndex,scrollTo:n._scrollTo,scrollBy:n._scrollBy}),()=>{r.value;const i=t.data.length,[v,g]=e._getRange(),z=e._getScrollDirection(),B=e._getTotalSize(),Y=ce(e),L=[];for(let f=ie(v,t.overscan,z),Z=ue(g,t.overscan,z,i);f<=Z;f++){const H=s.default(t.data[f])[0],R=H.key;L.push(S(pe,{key:de(R)?R:"_"+f,_resizer:_._observeItem,_index:f,_offset:e._getItemOffset(f),_hide:e._isUnmeasuredItem(f),_element:"div",_children:H,_isHorizontal:o},null))}return S("div",{ref:a,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:o?B+"px":"100%",height:o?"100%":B+"px",[o?"minWidth":"minHeight"]:Y+"px",pointerEvents:z!==_e?"none":"auto"}},[L])}}});function Se(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!ee(t)}const xe={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean},k=b({props:xe,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:l,expose:u,slots:s}){const o=t.horizontal,a=r=>{l("scroll",r)},e=()=>{l("scrollEnd")},_=(r,c)=>{l("rangeChange",r,c)},n=d();return u({get scrollOffset(){return n.value.scrollOffset},get scrollSize(){return n.value.scrollSize},get viewportSize(){return n.value.viewportSize},scrollToIndex:(...r)=>n.value.scrollToIndex(...r),scrollTo:(...r)=>n.value.scrollTo(...r),scrollBy:(...r)=>n.value.scrollBy(...r)}),()=>S("div",{style:{display:o?"inline-block":"block",[o?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%"}},[S(ge,{ref:n,data:t.data,overscan:t.overscan,itemSize:t.itemSize,shift:t.shift,horizontal:o,onScroll:a,onScrollEnd:e,onRangeChange:_},Se(s)?s:{default:()=>[s]})])}}),G=b({__name:"Default",setup(t){const l=[20,40,180,77],u=o=>({index:o,size:l[o%4]+"px"}),s=d(Array.from({length:1e3}).map((o,a)=>u(a)));return(o,a)=>(x(),te(O(k),{data:s.value,style:{height:"100vh"}},{default:N(e=>[(x(),y("div",{key:e.index,style:A({height:e.size,background:"white",borderBottom:"solid 1px #ccc"})},C(e.index),5))]),_:1},8,["data"]))}}),ze=D(G,[["__scopeId","data-v-bbc40dad"]]);G.__docgenInfo={exportName:"default",displayName:"Default",description:"",tags:{},sourceFiles:["/home/runner/work/virtua/virtua/stories/vue/Default.vue"]};const Ce={style:{padding:"10px"}},W=b({__name:"Horizontal",setup(t){const l=[40,180,77],u=o=>({index:o,size:l[o%3]+"px"}),s=d(Array.from({length:1e3}).map((o,a)=>u(a)));return(o,a)=>(x(),y("div",Ce,[S(O(k),{data:s.value,style:{width:"100%",height:"200px"},horizontal:""},{default:N(e=>[(x(),y("div",{key:e.index,style:A({width:e.size,background:"white",borderRight:"solid 1px #ccc"})},C(e.index),5))]),_:1},8,["data"])]))}}),ye=D(W,[["__scopeId","data-v-65c14141"]]);W.__docgenInfo={exportName:"default",displayName:"Horizontal",description:"",tags:{},sourceFiles:["/home/runner/work/virtua/virtua/stories/vue/Horizontal.vue"]};const be={style:{height:"100%",display:"flex","flex-direction":"column"}},Ee=["value"],X=b({__name:"Controlls",setup(t){const l=[20,40,180,77],u=c=>({index:c,height:l[c%4]+"px"}),s=d(Array.from({length:1e3}).map((c,m)=>u(m))),o=d(0),a=d(!1),e=d(567),_=d(),n=()=>{var c;(c=_.value)==null||c.scrollToIndex(e.value)},r=()=>{s.value=[...s.value,...Array.from({length:100}).map((c,m)=>u(m+s.value.length))]};return(c,m)=>(x(),y("div",be,[h("div",null,"offset: "+C(o.value),1),h("div",null,"scrolling: "+C(a.value),1),h("div",null,[h("input",{type:"number",value:e.value,onInput:m[0]||(m[0]=p=>{e.value=Number(p.target.value)})},null,40,Ee),h("button",{onClick:n},"scrollToIndex")]),h("div",null,[h("button",{onClick:r},"append")]),S(O(k),{ref_key:"handle",ref:_,data:s.value,onScroll:p=>{o.value=p,a.value=!0},onScrollEnd:()=>{a.value=!1}},{default:N(p=>[(x(),y("div",{key:p.index,style:A({height:p.height,background:"white",borderBottom:"solid 1px #ccc"})},C(p.index),5))]),_:1},8,["data","onScroll","onScrollEnd"])]))}}),Ie=D(X,[["__scopeId","data-v-a0049c1f"]]);X.__docgenInfo={exportName:"default",displayName:"Controlls",description:"",tags:{},sourceFiles:["/home/runner/work/virtua/virtua/stories/vue/Controlls.vue"]};const we={component:k},E={render:()=>({components:{Component:ze},template:"<Component />"})},I={render:()=>({components:{Component:ye},template:"<Component />"})},T={render:()=>({components:{Component:Ie},template:"<Component />"})};var V,j,U;E.parameters={...E.parameters,docs:{...(V=E.parameters)==null?void 0:V.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...(U=(j=E.parameters)==null?void 0:j.docs)==null?void 0:U.source}}};var P,$,F;I.parameters={...I.parameters,docs:{...(P=I.parameters)==null?void 0:P.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: HorizontalComponent
    },
    template: "<Component />"
  })
}`,...(F=($=I.parameters)==null?void 0:$.docs)==null?void 0:F.source}}};var J,M,q;T.parameters={...T.parameters,docs:{...(J=T.parameters)==null?void 0:J.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: ControllsComponent
    },
    template: "<Component />"
  })
}`,...(q=(M=T.parameters)==null?void 0:M.docs)==null?void 0:q.source}}};const Ne=["Default","Horizontal","Controlls"];export{T as Controlls,E as Default,I as Horizontal,Ne as __namedExportsOrder,we as default};
