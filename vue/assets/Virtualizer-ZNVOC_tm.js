import{b as h}from"./vue.esm-bundler-WriCcUPi.js";import{c as I,U as O,a as C,b as x,m as L,A as N,g as A,d as V,e as y,L as w,f as D,h as U,S as H}from"./_plugin-vue_export-helper-Bj05xw9U.js";const B={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:Number,ssrCount:Number,scrollRef:Object},j=defineComponent({props:B,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:c,expose:b,slots:z}){let f=!!t.ssrCount;const l=t.horizontal,d=ref(),e=I(t.data.length,t.itemSize??40,t.ssrCount,void 0,!t.itemSize,t.startMargin),_=D(e,l),n=U(e,l),i=ref(e._getStateVersion()),E=e._subscribe(O,()=>{i.value=e._getStateVersion()}),R=e._subscribe(C,()=>{c("scroll",e._getScrollOffset())}),T=e._subscribe(x,()=>{c("scrollEnd")});return onMounted(()=>{f=!1,L(()=>{const s=r=>{_._observeRoot(r),n._observe(r)};t.scrollRef?s(t.scrollRef):s(d.value.parentElement)})}),onUnmounted(()=>{E(),R(),T(),_._dispose(),n._dispose()}),watch(()=>t.data.length,s=>{e._update(N,[s,t.shift])}),watch([i,e._getJumpCount],([,s],[,r])=>{s!==r&&n._fixScrollJump()},{flush:"post"}),watch([i,e._getRange],([,[s,r]],[,[u,a]])=>{u===s&&a===r||c("rangeChange",s,r)},{flush:"post"}),b({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return A(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:n._scrollToIndex,scrollTo:n._scrollTo,scrollBy:n._scrollBy}),()=>{i.value;const s=t.data.length,[r,u]=e._getRange(),a=e._getScrollDirection(),g=e._getTotalSize(),S=[];for(let[o,v]=V(r,u,t.overscan,a,s);o<=v;o++){const m=z.default(t.data[o])[0];S.push(h(w,{key:y(m,o),_resizer:_._observeItem,_index:o,_offset:e._getItemOffset(o),_hide:e._isUnmeasuredItem(o),_children:m,_isHorizontal:l,_isSSR:f},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR"]))}return h("div",{ref:d,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?g+"px":"100%",height:l?"100%":g+"px",pointerEvents:a!==H?"none":"auto"}},[S],4)}}});export{j as V};
