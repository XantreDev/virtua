import{d as w,b as x,o as L,e as k,w as p,f as h,g as z,l as E,m as R,k as O,u as b,n as W,t as B}from"./vue.esm-bundler-CtIVE62n.js";import{c as U,U as H,a as P,d as j,o as G,e as J,f as M,L as q,S as F,j as K,k as Z,A as Q,_ as X}from"./_plugin-vue_export-helper-KM4ExoBb.js";const Y={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean},D=w({props:Y,emits:["scrollEnd","rangeChange"],setup(n,{emit:d,slots:u}){const o=n.horizontal,s=x(),e=U(n.data.length,n.itemSize??40,void 0,void 0,!n.itemSize),r=K(e,o),m=Z(e,o),l=x(e._getStateVersion()),A=e._subscribe(H+P,()=>{l.value=e._getStateVersion()}),N=e._subscribe(j,()=>{d("scrollEnd")});return L(()=>{const t=s.value;t&&(r._observeRoot(t),m._observe(t))}),k(()=>{A(),N(),r._dispose(),m._dispose()}),p(()=>n.data.length,t=>{e._update(Q,[t,n.shift])}),p([l,e._getJumpCount],([,t],[,i])=>{t!==i&&m._fixScrollJump()},{flush:"post"}),p([l,e._getRange],([,[t,i]],[,[f,c]])=>{f===t&&c===i||d("rangeChange",t,i)},{flush:"post"}),()=>{l.value;const t=n.data.length,[i,f]=e._getRange(),c=e._getScrollDirection(),g=e._getTotalSize(),S=[];for(let a=G(i,n.overscan,c),V=J(f,n.overscan,c,t);a<=V;a++){const v=u.default(n.data[a])[0];S.push(h(q,{key:M(v,a),_resizer:r._observeItem,_index:a,_offset:e._getItemOffset(a),_hide:e._isUnmeasuredItem(a),_children:v,_isHorizontal:o},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal"]))}return h("div",{ref:s,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:o?g+"px":"100%",height:o?"100%":g+"px",pointerEvents:c!==F?"none":"auto"}},[S],4)}}}),$={style:{padding:"200px 100px"}},ee={style:{border:"solid 1px gray"}},T=w({__name:"WindowVirtualizer",setup(n){const d=[20,40,180,77],u=s=>({index:s,size:d[s%4]+"px"}),o=Array.from({length:1e3}).map((s,e)=>u(e));return(s,e)=>(z(),E("div",$,[R("div",ee,[h(b(D),{data:b(o)},{default:O(r=>[(z(),E("div",{key:r.index,style:W({height:r.size,background:"white",borderBottom:"solid 1px #ccc"})},B(r.index),5))]),_:1},8,["data"])])]))}}),te=X(T,[["__scopeId","data-v-943c8ab4"]]);T.__docgenInfo={exportName:"default",displayName:"WindowVirtualizer",description:"",tags:{},sourceFiles:["/home/runner/work/virtua/virtua/stories/vue/WindowVirtualizer.vue"]};const se={component:D},_={render:()=>({components:{Component:te},template:"<Component />"})};var y,C,I;_.parameters={..._.parameters,docs:{...(y=_.parameters)==null?void 0:y.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...(I=(C=_.parameters)==null?void 0:C.docs)==null?void 0:I.source}}};const re=["Default"];export{_ as Default,re as __namedExportsOrder,se as default};
