import{d as C,b as h,l as x,m as L,q as d,e as z}from"./vue.esm-bundler-BDuSoBIa.js";import{c as N,U as A,a as V,b as y,g as D,d as U,e as w,L as H,S as p,f as B,h as M,A as P}from"./_plugin-vue_export-helper-C-eE2DD6.js";const q={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:Number,ssrCount:Number},j=C({props:q,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:c,expose:E,slots:T}){let f=!!t.ssrCount;const l=t.horizontal,g=h(),e=N(t.data.length,t.itemSize??40,t.ssrCount,void 0,!t.itemSize,t.startMargin),_=B(e,l),o=M(e,l),i=h(e._getStateVersion()),v=e._subscribe(A,()=>{i.value=e._getStateVersion()}),I=e._subscribe(V,()=>{c("scroll",e._getScrollOffset())}),O=e._subscribe(y,()=>{c("scrollEnd")});return x(()=>{f=!1;const s=g.value.parentElement;s&&(_._observeRoot(s),o._observe(s))}),L(()=>{v(),I(),O(),_._dispose(),o._dispose()}),d(()=>t.data.length,s=>{e._update(P,[s,t.shift])}),d([i,e._getJumpCount],([,s],[,n])=>{s!==n&&o._fixScrollJump()},{flush:"post"}),d([i,e._getRange],([,[s,n]],[,[u,a]])=>{u===s&&a===n||c("rangeChange",s,n)},{flush:"post"}),E({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return D(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy}),()=>{i.value;const s=t.data.length,[n,u]=e._getRange(),a=e._getScrollDirection(),S=e._getTotalSize(),m=[];for(let[r,R]=U(n,u,t.overscan,a,s);r<=R;r++){const b=T.default(t.data[r])[0];m.push(z(H,{key:w(b,r),_resizer:_._observeItem,_index:r,_offset:e._getItemOffset(r),_hide:e._isUnmeasuredItem(r),_children:b,_isHorizontal:l,_isSSR:f},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR"]))}return z("div",{ref:g,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?S+"px":"100%",height:l?"100%":S+"px",pointerEvents:a!==p?"none":"auto"}},[m],4)}}});export{j as V};
