import{d as C,b as h,l as x,m as L,q as f,e as z}from"./vue.esm-bundler-B7NV8nxH.js";import{c as N,U as A,a as V,b as y,m as D,g as U,d as w,e as H,L as B,S as M,f as P,h as j,A as k}from"./_plugin-vue_export-helper-BgrjzGwi.js";const q={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:Number,ssrCount:Number,scrollRef:Object},K=C({props:q,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:c,expose:E,slots:R}){let d=!!t.ssrCount;const l=t.horizontal,g=h(),e=N(t.data.length,t.itemSize??40,t.ssrCount,void 0,!t.itemSize,t.startMargin),_=P(e,l),n=j(e,l),i=h(e._getStateVersion()),T=e._subscribe(A,()=>{i.value=e._getStateVersion()}),v=e._subscribe(V,()=>{c("scroll",e._getScrollOffset())}),I=e._subscribe(y,()=>{c("scrollEnd")});return x(()=>{d=!1,D(()=>{const s=r=>{_._observeRoot(r),n._observe(r)};t.scrollRef?s(t.scrollRef):s(g.value.parentElement)})}),L(()=>{T(),v(),I(),_._dispose(),n._dispose()}),f(()=>t.data.length,s=>{e._update(k,[s,t.shift])}),f([i,e._getJumpCount],([,s],[,r])=>{s!==r&&n._fixScrollJump()},{flush:"post"}),f([i,e._getRange],([,[s,r]],[,[u,a]])=>{u===s&&a===r||c("rangeChange",s,r)},{flush:"post"}),E({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return U(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:n._scrollToIndex,scrollTo:n._scrollTo,scrollBy:n._scrollBy}),()=>{i.value;const s=t.data.length,[r,u]=e._getRange(),a=e._getScrollDirection(),S=e._getTotalSize(),m=[];for(let[o,O]=w(r,u,t.overscan,a,s);o<=O;o++){const b=R.default(t.data[o])[0];m.push(z(B,{key:H(b,o),_resizer:_._observeItem,_index:o,_offset:e._getItemOffset(o),_hide:e._isUnmeasuredItem(o),_children:b,_isHorizontal:l,_isSSR:d},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR"]))}return z("div",{ref:g,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?S+"px":"100%",height:l?"100%":S+"px",pointerEvents:a!==M?"none":"auto"}},[m],4)}}});export{K as V};
