import{d as C,b as h,l as A,m as N,q as c,e as E}from"./vue.esm-bundler-B7NV8nxH.js";import{c as x,U as L,a as y,b as V,m as D,g as U,d as H,e as w,L as B,S as M,f as G,h as P,A as j,i as k}from"./_plugin-vue_export-helper-DQenFFzL.js";const p={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object},J=C({props:p,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:_,expose:T,slots:z}){let f=!!t.ssrCount;const l=t.horizontal,S=h(),e=x(t.data.length,t.itemSize??40,t.ssrCount,void 0,!t.itemSize),u=G(e,l),n=P(e,l),i=h(e._getStateVersion()),R=e._subscribe(L,()=>{i.value=e._getStateVersion()}),O=e._subscribe(y,()=>{_("scroll",e._getScrollOffset())}),v=e._subscribe(V,()=>{_("scrollEnd")});return A(()=>{f=!1,D(()=>{const s=r=>{u._observeRoot(r),n._observe(r)};t.scrollRef?s(t.scrollRef):s(S.value.parentElement)})}),N(()=>{R(),O(),v(),u._dispose(),n._dispose()}),c(()=>t.data.length,s=>{e._update(j,[s,t.shift])}),c(()=>t.startMargin,s=>{e._update(k,s)},{immediate:!0}),c([i,e._getJumpCount],([,s],[,r])=>{s!==r&&n._fixScrollJump()},{flush:"post"}),c([i,e._getRange],([,[s,r]],[,[d,a]])=>{d===s&&a===r||_("rangeChange",s,r)},{flush:"post"}),T({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return U(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:n._scrollToIndex,scrollTo:n._scrollTo,scrollBy:n._scrollBy}),()=>{i.value;const s=t.data.length,[r,d]=e._getRange(),a=e._getScrollDirection(),g=e._getTotalSize(),m=[];for(let[o,I]=H(r,d,t.overscan,a,s);o<=I;o++){const b=z.default(t.data[o])[0];m.push(E(B,{key:w(b,o),_resizer:u._observeItem,_index:o,_offset:e._getItemOffset(o),_hide:e._isUnmeasuredItem(o),_children:b,_isHorizontal:l,_isSSR:f},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR"]))}return E("div",{ref:S,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?g+"px":"100%",height:l?"100%":g+"px",pointerEvents:a!==M?"none":"auto"}},[m],4)}}});export{J as V};
