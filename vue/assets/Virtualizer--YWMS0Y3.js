import{d as L,b,k as x,l as A,m as d,e as h}from"./vue.esm-bundler-CbvoPaxB.js";import{c as N,U as C,a as R,b as y,d as V,g as D,e as U,f as p,L as M,S as w,h as H,i as B,A as P}from"./_plugin-vue_export-helper-BV67pP0q.js";const k={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:Number,endMargin:Number},j=L({props:k,emits:["scroll","scrollEnd","rangeChange"],setup(r,{emit:c,expose:E,slots:z}){const i=r.horizontal,f=b(),e=N(r.data.length,r.itemSize??40,void 0,void 0,!r.itemSize,r.startMargin,r.endMargin),_=H(e,i),s=B(e,i),l=b(e._getStateVersion()),T=e._subscribe(C+R,()=>{l.value=e._getStateVersion()}),v=e._subscribe(y,()=>{c("scroll",e._getScrollOffset())}),I=e._subscribe(V,()=>{c("scrollEnd")});return x(()=>{const t=f.value.parentElement;t&&(_._observeRoot(t),s._observe(t))}),A(()=>{T(),v(),I(),_._dispose(),s._dispose()}),d(()=>r.data.length,t=>{e._update(P,[t,r.shift])}),d([l,e._getJumpCount],([,t],[,o])=>{t!==o&&s._fixScrollJump()},{flush:"post"}),d([l,e._getRange],([,[t,o]],[,[u,a]])=>{u===t&&a===o||c("rangeChange",t,o)},{flush:"post"}),E({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return D(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:s._scrollToIndex,scrollTo:s._scrollTo,scrollBy:s._scrollBy}),()=>{l.value;const t=r.data.length,[o,u]=e._getRange(),a=e._getScrollDirection(),g=e._getTotalSize(),S=[];for(let[n,O]=U(o,u,r.overscan,a,t);n<=O;n++){const m=z.default(r.data[n])[0];S.push(h(M,{key:p(m,n),_resizer:_._observeItem,_index:n,_offset:e._getItemOffset(n),_hide:e._isUnmeasuredItem(n),_children:m,_isHorizontal:i},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal"]))}return h("div",{ref:f,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:i?g+"px":"100%",height:i?"100%":g+"px",pointerEvents:a!==w?"none":"auto"}},[S],4)}}});export{j as V};
