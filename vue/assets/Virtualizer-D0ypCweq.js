import{d as x,b,k as L,l as N,m as d,e as h}from"./vue.esm-bundler-CbvoPaxB.js";import{c as A,U as R,a as V,b as y,g as C,d as D,e as U,L as p,S as M,f as w,h as H,A as B}from"./_plugin-vue_export-helper-BKcfhg_G.js";const P={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:Number,endMargin:Number},J=x({props:P,emits:["scroll","scrollEnd","rangeChange"],setup(r,{emit:c,expose:z,slots:E}){const i=r.horizontal,f=b(),e=A(r.data.length,r.itemSize??40,void 0,void 0,!r.itemSize,r.startMargin,r.endMargin),_=w(e,i),s=H(e,i),l=b(e._getStateVersion()),T=e._subscribe(R,()=>{l.value=e._getStateVersion()}),v=e._subscribe(V,()=>{c("scroll",e._getScrollOffset())}),I=e._subscribe(y,()=>{c("scrollEnd")});return L(()=>{const t=f.value.parentElement;t&&(_._observeRoot(t),s._observe(t))}),N(()=>{T(),v(),I(),_._dispose(),s._dispose()}),d(()=>r.data.length,t=>{e._update(B,[t,r.shift])}),d([l,e._getJumpCount],([,t],[,o])=>{t!==o&&s._fixScrollJump()},{flush:"post"}),d([l,e._getRange],([,[t,o]],[,[u,a]])=>{u===t&&a===o||c("rangeChange",t,o)},{flush:"post"}),z({get scrollOffset(){return e._getScrollOffset()},get scrollSize(){return C(e)},get viewportSize(){return e._getViewportSize()},getItemOffset:e._getItemOffset,scrollToIndex:s._scrollToIndex,scrollTo:s._scrollTo,scrollBy:s._scrollBy}),()=>{l.value;const t=r.data.length,[o,u]=e._getRange(),a=e._getScrollDirection(),g=e._getTotalSize(),S=[];for(let[n,O]=D(o,u,r.overscan,a,t);n<=O;n++){const m=E.default(r.data[n])[0];S.push(h(p,{key:U(m,n),_resizer:_._observeItem,_index:n,_offset:e._getItemOffset(n),_hide:e._isUnmeasuredItem(n),_children:m,_isHorizontal:i},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal"]))}return h("div",{ref:f,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:i?g+"px":"100%",height:i?"100%":g+"px",pointerEvents:a!==M?"none":"auto"}},[S],4)}}});export{J as V};
