import{d as D,b as z,o as L,e as R,w as p,f as h,g as E,l as b,m as O,k as W,u as y,n as B,t as U}from"./vue.esm-bundler-9aQdBDVL.js";import{c as H,U as P,a as G,d as J,o as M,f as j,h as q,L as F,S as Z,k as K,l as Q,A as X,_ as Y}from"./_plugin-vue_export-helper-rVLPKG7N.js";const $={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean},T=D({props:$,emits:["scrollEnd","rangeChange"],setup(n,{emit:d,slots:_}){const o=n.horizontal,s=z(),e=H(n.data.length,n.itemSize??40,void 0,void 0,!n.itemSize),r=K(e,o),m=Q(e,o),l=z(e._getStateVersion()),N=e._subscribe(P+G,()=>{l.value=e._getStateVersion()}),V=e._subscribe(J,()=>{d("scrollEnd")});return L(()=>{const t=s.value;t&&(r._observeRoot(t),m._observe(t))}),R(()=>{N(),V(),r._dispose(),m._dispose()}),p(()=>n.data.length,t=>{e._update(X,[t,n.shift])}),p([l,e._getJumpCount],([,t],[,i])=>{t!==i&&m._fixScrollJump()},{flush:"post"}),p([l,e._getRange],([,[t,i]],[,[f,c]])=>{f===t&&c===i||d("rangeChange",t,i)},{flush:"post"}),()=>{l.value;const t=n.data.length,[i,f]=e._getRange(),c=e._getScrollDirection(),g=e._getTotalSize(),v=[];for(let a=M(i,n.overscan,c),k=j(f,n.overscan,c,t);a<=k;a++){const S=_.default(n.data[a])[0],x=S.key;v.push(h(F,{key:q(x)?x:"_"+a,_resizer:r._observeItem,_index:a,_offset:e._getItemOffset(a),_hide:e._isUnmeasuredItem(a),_element:"div",_children:S,_isHorizontal:o},null))}return h("div",{ref:s,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:o?g+"px":"100%",height:o?"100%":g+"px",pointerEvents:c!==Z?"none":"auto"}},[v])}}}),ee={style:{padding:"200px 100px"}},te={style:{border:"solid 1px gray"}},A=D({__name:"WindowVirtualizer",setup(n){const d=[20,40,180,77],_=s=>({index:s,size:d[s%4]+"px"}),o=Array.from({length:1e3}).map((s,e)=>_(e));return(s,e)=>(E(),b("div",ee,[O("div",te,[h(y(T),{data:y(o)},{default:W(r=>[(E(),b("div",{key:r.index,style:B({height:r.size,background:"white",borderBottom:"solid 1px #ccc"})},U(r.index),5))]),_:1},8,["data"])])]))}}),ne=Y(A,[["__scopeId","data-v-943c8ab4"]]);A.__docgenInfo={exportName:"default",displayName:"WindowVirtualizer",description:"",tags:{},sourceFiles:["/home/runner/work/virtua/virtua/stories/vue/WindowVirtualizer.vue"]};const re={component:T},u={render:()=>({components:{Component:ne},template:"<Component />"})};var C,I,w;u.parameters={...u.parameters,docs:{...(C=u.parameters)==null?void 0:C.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...(w=(I=u.parameters)==null?void 0:I.docs)==null?void 0:w.source}}};const ae=["Default"];export{u as Default,ae as __namedExportsOrder,re as default};
