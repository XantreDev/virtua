import{d as w,b as h,o as k,e as L,w as p,f as g,g as E,l as b,m as R,k as O,u as W,n as B,t as U}from"./vue.esm-bundler-FgBGtPgo.js";import{c as H,U as J,a as P,d as j,o as G,f as M,h as q,L as F,S as Z,k as K,l as Q,A as X,_ as Y}from"./_plugin-vue_export-helper-YDIUgs9o.js";const $={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean},D=w({props:$,emits:["scrollEnd","rangeChange"],setup(n,{emit:l,slots:m}){const o=n.horizontal,s=h(),e=H(n.data.length,n.itemSize??40,void 0,void 0,!n.itemSize),r=K(e,o),f=Q(e,o),u=h(e._getStateVersion()),A=e._subscribe(J+P,()=>{u.value=e._getStateVersion()}),N=e._subscribe(j,()=>{l("scrollEnd")});return k(()=>{const t=s.value;t&&(r._observeRoot(t),f._observe(t))}),L(()=>{A(),N(),r._dispose(),f._dispose()}),p(()=>n.data.length,t=>{e._update(X,[t,n.shift])}),p([u,e._getJumpCount],([,t],[,i])=>{if(t===i)return;const c=e._flushJump();c&&f._fixScrollJump(c)},{flush:"post"}),p([u,e._getRange],([,[t,i]],[,[c,d]])=>{c===t&&d===i||l("rangeChange",t,i)},{flush:"post"}),()=>{u.value;const t=n.data.length,[i,c]=e._getRange(),d=e._getScrollDirection(),v=e._getTotalSize(),S=[];for(let a=G(i,n.overscan,d),V=M(c,n.overscan,d,t);a<=V;a++){const x=m.default(n.data[a])[0],z=x.key;S.push(g(F,{key:q(z)?z:"_"+a,_resizer:r._observeItem,_index:a,_offset:e._getItemOffset(a),_hide:e._isUnmeasuredItem(a),_element:"div",_children:x,_isHorizontal:o},null))}return g("div",{ref:s,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:o?v+"px":"100%",height:o?"100%":v+"px",pointerEvents:d!==Z?"none":"auto"}},[S])}}}),ee={style:{padding:"200px 100px"}},te={style:{border:"solid 1px gray"}},T=w({__name:"WindowVirtualizer",setup(n){const l=[20,40,180,77],m=s=>({index:s,size:l[s%4]+"px"}),o=h(Array.from({length:1e3}).map((s,e)=>m(e)));return(s,e)=>(E(),b("div",ee,[R("div",te,[g(W(D),{data:o.value},{default:O(r=>[(E(),b("div",{key:r.index,style:B({height:r.size,background:"white",borderBottom:"solid 1px #ccc"})},U(r.index),5))]),_:1},8,["data"])])]))}}),ne=Y(T,[["__scopeId","data-v-151d4b03"]]);T.__docgenInfo={exportName:"default",displayName:"WindowVirtualizer",description:"",tags:{},sourceFiles:["/home/runner/work/virtua/virtua/stories/vue/WindowVirtualizer.vue"]};const re={component:D},_={render:()=>({components:{Component:ne},template:"<Component />"})};var y,C,I;_.parameters={..._.parameters,docs:{...(y=_.parameters)==null?void 0:y.docs,source:{originalSource:`{
  render: () => ({
    components: {
      Component: DefaultComponent
    },
    template: "<Component />"
  })
}`,...(I=(C=_.parameters)==null?void 0:C.docs)==null?void 0:I.source}}};const ae=["Default"];export{_ as Default,ae as __namedExportsOrder,re as default};
