import{i as Le,e as ue,j as ve,k as Ee,t as he,l as ce,u as ze,p as Re,q as we,v as Te,c as Ce}from"./web-ZdxCXCJP.js";const C=Math.min,E=Math.max,ne=Math.abs,K=setTimeout,Y=(e,t,s)=>C(s,E(t,e)),j=e=>e!=null,ye=e=>{const t=[...e].sort((n,l)=>n-l),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},Ae=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},De=(e,t)=>{let s;const n=()=>{j(s)&&clearTimeout(s)},l=()=>{n(),s=K(()=>{s=null,e()},t)};return l._cancel=n,l},q=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},y=-1,k=(e,t,s)=>{const n=s?"unshift":"push";for(let l=0;l<t;l++)e[n](y);return e},D=(e,t)=>{const s=e._sizes[t];return s===y?e._defaultItemSize:s},Je=(e,t,s)=>{const n=e._sizes[t]===y;return e._sizes[t]=s,e._computedOffsetIndex=C(t,e._computedOffsetIndex),n},X=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=D(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Me=e=>e._length?X(e,e._length-1)+D(e,e._length-1):0,re=(e,t,s)=>{let n=X(e,s);for(;s>=0&&s<e._length;)if(n<=t){const l=D(e,s);if(n+l>t)break;n+=l,s++}else n-=D(e,--s);return Y(s,0,e._length-1)},oe=(e,t,s,n)=>{const l=re(e,t,C(s,e._length-1));return[l,re(e,t+n,l)]},Ne=(e,t)=>{let s=0;const n=e._sizes.filter((u,c)=>{const i=u!==y;return i&&c<t&&s++,i}),l=e._defaultItemSize;return e._computedOffsetIndex=-1,((e._defaultItemSize=ye(n))-l)*E(t-s,0)},ke=(e,t)=>({_defaultItemSize:t,_length:e,_computedOffsetIndex:-1,_sizes:k([],e),_offsets:k([],e)}),le=(e,t,s)=>{const n=t-e._length,l=n>0;let u;return l?(u=e._defaultItemSize*n,k(e._sizes,n,s),k(e._offsets,n)):(u=(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((c,i)=>c+(i===y?e._defaultItemSize:i),0),e._offsets.splice(n)),e._computedOffsetIndex=s?-1:C(t-1,e._computedOffsetIndex),e._length=t,[u,l]},xe=typeof window<"u",fe=()=>document.documentElement,$=e=>e.ownerDocument,G=e=>e.defaultView,Z=q(()=>xe?getComputedStyle(fe()).direction==="rtl":!1),_e=q(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Pe=q(()=>"scrollBehavior"in fe().style),Ue=1.5,M=0,ae=1,de=2,W=0,Ve=1,ie=2,Q=1,H=2,We=3,me=4,Se=5,pe=6,ge=7,N=1,F=2,Be=4,Ke=8,qe=e=>E(e._getTotalSize(),e._getViewportSize()),Xe=(e,t,s)=>E(e-(s===ae?1:E(1,t)),0),$e=(e,t,s,n)=>C(e+(s===de?1:E(1,t)),n-1),B=(e,t,s)=>t.reduce((n,[l,u])=>{const c=u-D(e,l);return(!s||c>0)&&(n+=c),n},0),Ge=(e,t=40,s=0,n,l=!1,u=0,c=0)=>{let i=!!s,r=[],o=0,_=0,f=0,a=0,m=0,h=!1,L=0,I=M,v=W,z=i?[0,E(s-1,0)]:null,T=[0,0],ee=0;const d=n||ke(e,t),x=new Set,te=()=>Me(d),se=()=>te()+u+c,be=()=>_-u,P=()=>E(0,se()-o),U=S=>{_e()&&I!==M?m+=S:(a+=S,f++)};return{_getStateVersion(){return r},_getCacheSnapshot(){return JSON.parse(JSON.stringify(d))},_getRange(){return z?[C(T[0],z[0]),E(T[1],z[1])]:L?T:T=oe(d,be()+m+a,T[0],o)},_isUnmeasuredItem(S){return d._sizes[S]===y},_hasUnmeasuredItemsInFrozenRange(){return z?d._sizes.slice(E(0,z[0]-1),C(d._length-1,z[1]+1)+1).includes(y):!1},_getItemOffset(S){return X(d,S)-m},_getItemSize(S){return D(d,S)},_getItemsLength(){return d._length},_getScrollOffset(){return _},_getScrollDirection(){return I},_getViewportSize(){return o},_getStartSpacerSize(){return u},_getTotalSize:te,_getJumpCount(){return f},_flushJump(){const S=a,O=h;return a=0,h=!1,o>se()?[0,!1]:[L=S,O]},_subscribe(S,O){const J=[S,O];return x.add(J),()=>{x.delete(J)}},_update(S,O){let J,V,R=0;switch(S){case Q:{const p=O.filter(([b,w])=>d._sizes[b]!==w);if(!p.length)break;let g=0;if(_!==0)if(_>P()-Ue)g=B(d,p,!0);else if(v===ie)g=B(d,p);else{const[b]=T;g=B(d,p.filter(([w])=>w<b))}g&&U(g);for(const[b,w]of p)Je(d,b,w)&&l&&(ee+=w);l&&o&&ee>o&&(U(Ne(d,T[0])),l=!1),R=F,V=!0;break}case H:{o!==O&&(o=O,R=F);break}case We:{if(O[1]){const p=P()-_,[g,b]=le(d,O[0],!0);U(b?g:-C(g,p)),b&&(v=ie,h=!0),R=N}else le(d,O[0]);break}case me:{const p=Y(O,0,P()),g=L;if(L=0,p===_)break;const b=p-_,w=ne(b);!(g&&w<ne(g)+1)&&v===W&&(I=b<0?de:ae),i&&(z=null,i=!1),V=w>o,_=p,R=N+Be;break}case Se:{R=Ke,I!==M&&(J=!0,R+=N),I=M,v=W,z=null;break}case pe:{v=Ve;break}case ge:{z=oe(d,O,T[0],o),R=N;break}}R&&(r=[],J&&m&&(a+=m,m=0,f++),x.forEach(([p,g])=>{R&p&&g(V)}))}}},Ie=e=>{let t;return{_observe(s){(t||(t=new(G($(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ze=(e,t)=>{let s;const n=t?"width":"height",l=new WeakMap,u=Ie(c=>{const i=[];for(const{target:r,contentRect:o}of c)if(r.offsetParent)if(r===s)e._update(H,o[n]);else{const _=l.get(r);j(_)&&i.push([_,o[n]])}i.length&&e._update(Q,i)});return{_observeRoot(c){u._observe(s=c)},_observeItem:(c,i)=>(l.set(c,i),u._observe(c),()=>{l.delete(c),u._unobserve(c)}),_dispose:u._dispose}},Qe=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",l=new WeakMap,u=Ie(i=>{const r=[];for(const{target:o,contentRect:_}of i){if(!o.offsetParent)continue;const f=l.get(o);j(f)&&r.push([f,_[s]])}r.length&&e._update(Q,r)});let c;return{_observeRoot(i){const r=G($(i)),o=()=>{e._update(H,r[n])};r.addEventListener("resize",o),o(),c=()=>{r.removeEventListener("resize",o)}},_observeItem:(i,r)=>(l.set(i,r),u._observe(i),()=>{l.delete(i),u._unobserve(i)}),_dispose(){c&&c(),u._dispose()}}},A=(e,t)=>t&&Z()?-e:e,Oe=(e,t,s,n,l)=>{const u=Date.now;let c=0,i=!1,r=!1,o=!1,_=!1;const f=De(()=>{if(i||r){i=!1,f();return}o=!1,e._update(Se)},150),a=()=>{c=u(),o&&(_=!0),e._update(me,n()),f()},m=I=>{if(i||e._getScrollDirection()===M||I.ctrlKey)return;const v=u()-c;150>v&&50<v&&(s?I.deltaX:I.deltaY)&&(i=!0)},h=()=>{r=!0,o=_=!1},L=()=>{r=!1,_e()&&(o=!0)};return t.addEventListener("scroll",a),t.addEventListener("wheel",m,{passive:!0}),t.addEventListener("touchstart",h,{passive:!0}),t.addEventListener("touchend",L,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",a),t.removeEventListener("wheel",m),t.removeEventListener("touchstart",h),t.removeEventListener("touchend",L),f._cancel()},_fixScrollJump:()=>{const[I,v]=e._flushJump();if(I)return l(I,_),_=!1,v}}},He=(e,t)=>{let s,n,l;const u=t?"scrollLeft":"scrollTop",c=t?"overflowX":"overflowY",i=async(r,o)=>{if(!s){Ae(()=>i(r,o));return}l&&l();const _=()=>{let f;return[new Promise((a,m)=>{f=a,K(l=m,150)}),e._subscribe(F,()=>{f&&f()})]};if(o&&Pe()){for(;e._update(ge,r()),!!e._hasUnmeasuredItemsInFrozenRange();){const[f,a]=_();try{await f}catch{return}finally{a()}}s.scrollTo({[t?"left":"top"]:A(r(),t),behavior:"smooth"})}else for(;;){const[f,a]=_();try{s[u]=A(r(),t),e._update(pe),await f}catch{return}finally{a()}}};return{_observe(r){s=r,n=Oe(e,r,t,()=>A(r[u],t),(o,_)=>{if(_){const f=r.style,a=f[c];f[c]="hidden",K(()=>{f[c]=a})}r[u]+=A(o,t)})},_dispose(){n&&n._dispose()},_scrollTo(r){i(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),i(()=>r)},_scrollToIndex(r,{align:o,smooth:_}={}){if(r=Y(r,0,e._getItemsLength()-1),o==="nearest"){const f=e._getItemOffset(r),a=e._getScrollOffset();if(f<a)o="start";else if(f+e._getItemSize(r)>a+e._getViewportSize())o="end";else return}i(()=>e._getStartSpacerSize()+(o==="end"?e._getItemOffset(r)+e._getItemSize(r)-e._getViewportSize():o==="center"?e._getItemOffset(r)+(e._getItemSize(r)-e._getViewportSize())/2:e._getItemOffset(r)),_)},_fixScrollJump:()=>{n&&n._fixScrollJump()&&l&&l()}}},et=(e,t)=>{let s;return{_observe(n){const l=t?"scrollX":"scrollY",u=$(n),c=G(u),i=u.body,r=(o,_,f,a=0)=>{const m=f?"offsetLeft":"offsetTop",h=a+(f&&Z()?c.innerWidth-o[m]-o.offsetWidth:o[m]),L=o.offsetParent;return o===_||!L?h:r(L,_,f,h)};s=Oe(e,c,t,()=>A(c[l],t)-r(n,i,t),o=>{c.scrollBy(t?A(o,t):0,t?0:o)})},_dispose(){s&&s._dispose()},_fixScrollJump:()=>{s&&s._fixScrollJump()}}};var Fe=he("<div>");const tt=e=>{let t;Le(()=>{t&&ce(e._resizer(t,e._index))});const s=ue(()=>{const n=e._isHorizontal,l={margin:0,padding:0,position:"absolute",[n?"height":"width"]:"100%",[n?"top":"left"]:"0px",[n?Z()?"right":"left":"top"]:e._offset+"px",visibility:e._hide?"hidden":"visible"};return n&&(l.display="flex"),l});return(()=>{var n=Fe(),l=t;return typeof l=="function"?ze(l,n):t=n,ve(n,()=>e._children),Ee(u=>Re(n,s(),u)),n})()},st=e=>{let t=new Map;return ce(()=>{for(const s of t.values())s._dispose()}),ue(()=>{const s=e._each,[n,l]=e._range,u=new Map,c=[];return we(()=>{for(let i=n;i<=l;i++){const r=s[i],o=t.get(i);c.push(o?o._element:Te(_=>{const f=Ce(r),a=e._render(f[0](),i);return u.set(i,{_data:f,_element:a,_dispose:_}),a})),o&&(r!==o._data&&o._data[1](r),u.set(i,o))}for(const[i,r]of t.entries())u.has(i)||r._dispose();return t=u,c})})},nt=(e,t)=>e[0]===t[0]&&e[1]===t[1];export{We as A,tt as L,st as R,M as S,N as U,F as a,Be as b,Ge as c,Ke as d,j as e,Ze as f,$e as g,qe as h,nt as i,He as j,Qe as k,et as l,Xe as o};
