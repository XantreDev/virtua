import{i as ve,e as ce,j as Le,k as ze,t as Ee,l as fe,u as Re,p as he,q as Te,v as we,c as Ce}from"./web-DwhiH2Oy.js";const T=Math.min,h=Math.max,le=Math.abs,F=setTimeout,$=(e,t,s)=>T(s,h(t,e)),q=e=>e!=null,Ae=e=>{const t=[...e].sort((n,l)=>n-l),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},ke=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},ye=(e,t)=>{let s;const n=()=>{q(s)&&clearTimeout(s)},l=()=>{n(),s=F(()=>{s=null,e()},t)};return l._cancel=n,l},G=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},w=-1,J=(e,t,s)=>{const n=s?"unshift":"push";for(let l=0;l<t;l++)e[n](w);return e},V=(e,t)=>{const s=e._sizes[t];return s===w?e._defaultItemSize:s},Me=(e,t,s)=>{const n=e._sizes[t]===w;return e._sizes[t]=s,e._computedOffsetIndex=T(t,e._computedOffsetIndex),n},X=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=V(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Ne=e=>e._length?X(e,e._length-1)+V(e,e._length-1):0,ie=(e,t,s)=>{for(;s>=0&&s<e._length;){const n=X(e,s);if(n<=t){if(n+V(e,s)>t)break;s++}else s--}return $(s,0,e._length-1)},De=(e,t,s,n)=>{const l=ie(e,t,T(s,e._length-1));return[l,ie(e,t+n,l)]},Je=(e,t)=>{let s=0;const n=e._sizes.filter((u,c)=>{const i=u!==w;return i&&c<t&&s++,i}),l=e._defaultItemSize;return e._computedOffsetIndex=-1,((e._defaultItemSize=Ae(n))-l)*h(t-s,0)},Ve=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s?s[0]:J([],e),_length:e,_computedOffsetIndex:-1,_offsets:J([],e)}),xe=e=>[[...e._sizes],e._defaultItemSize],ue=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:T(t-1,e._computedOffsetIndex),e._length=t,n>0?(J(e._offsets,n),J(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((l,u)=>l-(u===w?e._defaultItemSize:u),0))},Ue=typeof window<"u",_e=()=>document.documentElement,Z=e=>e.ownerDocument,j=e=>e.defaultView,Q=G(()=>Ue?getComputedStyle(_e()).direction==="rtl":!1),ae=G(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),We=G(()=>"scrollBehavior"in _e().style),k=0,de=1,me=2,D=0,Pe=1,B=2,K=1,Se=2,H=3,ee=4,Be=5,pe=6,ge=7,Ie=8,A=1,Y=2,Fe=4,Ke=8,qe=e=>h(e._getTotalSize(),e._getViewportSize()),Ge=(e,t,s,n,l)=>(n!==de&&(e-=h(0,s)),n!==me&&(t+=h(0,s)),[h(e,0),T(t,l-1)]),Xe=(e,t=40,s=0,n,l=!1,u=0,c=0)=>{let i=!!s,r=[],o=0,_=0,f=0,a=0,d=0,v=0,I=k,z=D,m=i?[0,h(s-1,0)]:null,g=[0,0],x=0;const p=Ve(e,t,n),U=new Set,te=()=>_-u,se=S=>De(p,S,g[0],o),ne=()=>Ne(p),re=S=>X(p,S)-d,N=S=>V(p,S),W=S=>{S&&(ae()&&I!==k?d+=S:(a+=S,f++))};return{_getStateVersion(){return r},_getCacheSnapshot(){return xe(p)},_getRange(){return v?g:(g=se(te()+d+a),m?[T(g[0],m[0]),h(g[1],m[1])]:g)},_isUnmeasuredItem(S){return p._sizes[S]===w},_hasUnmeasuredItemsInFrozenRange(){return m?p._sizes.slice(h(0,m[0]-1),T(p._length-1,m[1]+1)+1).includes(w):!1},_getItemOffset:re,_getItemSize:N,_getItemsLength(){return p._length},_getScrollOffset(){return _},_getScrollDirection(){return I},_getViewportSize(){return o},_getStartSpacerSize(){return u},_getTotalSize:ne,_getJumpCount(){return f},_flushJump(){return v=a,a=0,[v,z===B]},_subscribe(S,L){const y=[S,L];return U.add(y),()=>{U.delete(y)}},_update(S,L){let y,P,E=0;switch(S){case K:{const R=$(L,0,ne()+u+c),O=v;if(v=0,R===_)break;const b=R-_,C=le(b);!(O&&C<le(O)+1)&&z===D&&(I=b<0?me:de),i&&(m=null,i=!1),P=C>o,_=R,E=A+Fe;break}case Se:{E=Ke,I!==k&&(y=!0,E+=A),I=k,z=D,m=null;break}case H:{const R=L.filter(([O,b])=>p._sizes[O]!==b);if(!R.length)break;W(R.reduce((O,[b,C])=>((z===B||(m?b<m[0]:re(b)+(I===k&&z===D?N(b):0)<te()))&&(O+=C-N(b)),O),0));for(const[O,b]of R){const C=N(O),oe=Me(p,O,b);l&&(x+=b,oe||(x-=C))}l&&o&&x>o&&(W(Je(p,g[0])),l=!1),E=A+Y,P=!0;break}case ee:{o!==L&&(o=L,E=A+Y);break}case Be:{L[1]?(W(ue(p,L[0],!0)),z=B,E=A):ue(p,L[0]);break}case pe:{u=L;break}case ge:{z=Pe;break}case Ie:{m=se(L),E=A;break}}E&&(r=[],y&&d&&(a+=d,d=0,f++),U.forEach(([R,O])=>{E&R&&O(P)}))}}},Oe=e=>{let t;return{_observe(s){(t||(t=new(j(Z(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},Ze=(e,t)=>{let s;const n=t?"width":"height",l=new WeakMap,u=Oe(c=>{const i=[];for(const{target:r,contentRect:o}of c)if(r.offsetParent)if(r===s)e._update(ee,o[n]);else{const _=l.get(r);q(_)&&i.push([_,o[n]])}i.length&&e._update(H,i)});return{_observeRoot(c){u._observe(s=c)},_observeItem:(c,i)=>(l.set(c,i),u._observe(c),()=>{l.delete(c),u._unobserve(c)}),_dispose:u._dispose}},je=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",l=new WeakMap,u=Oe(i=>{const r=[];for(const{target:o,contentRect:_}of i){if(!o.offsetParent)continue;const f=l.get(o);q(f)&&r.push([f,_[s]])}r.length&&e._update(H,r)});let c;return{_observeRoot(i){const r=j(Z(i)),o=()=>{e._update(ee,r[n])};r.addEventListener("resize",o),o(),c=()=>{r.removeEventListener("resize",o)}},_observeItem:(i,r)=>(l.set(i,r),u._observe(i),()=>{l.delete(i),u._unobserve(i)}),_dispose(){c&&c(),u._dispose()}}},M=(e,t)=>t&&Q()?-e:e,be=(e,t,s,n,l,u)=>{const c=Date.now;let i=0,r=!1,o=!1,_=!1,f=!1;const a=ye(()=>{if(r||o){r=!1,a();return}_=!1,e._update(Se)},150),d=()=>{i=c(),_&&(f=!0),u&&e._update(pe,u()),e._update(K,n()),a()},v=m=>{if(r||e._getScrollDirection()===k||m.ctrlKey)return;const g=c()-i;150>g&&50<g&&(s?m.deltaX:m.deltaY)&&(r=!0)},I=()=>{o=!0,_=f=!1},z=()=>{o=!1,ae()&&(_=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",v,{passive:!0}),t.addEventListener("touchstart",I,{passive:!0}),t.addEventListener("touchend",z,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",v),t.removeEventListener("touchstart",I),t.removeEventListener("touchend",z),a._cancel()},_fixScrollJump:()=>{const[m,g]=e._flushJump();m&&(l(M(m,s),g,f),f=!1,g&&e._getViewportSize()>e._getTotalSize()&&e._update(K,n()))}}},Qe=(e,t)=>{let s,n,l;const u=t?"scrollLeft":"scrollTop",c=t?"overflowX":"overflowY",i=async(r,o)=>{if(!s){ke(()=>i(r,o));return}l&&l();const _=()=>{let f;return[new Promise((a,d)=>{f=a,F(l=d,150)}),e._subscribe(Y,()=>{f&&f()})]};if(o&&We()){for(;e._update(Ie,r()),!!e._hasUnmeasuredItemsInFrozenRange();){const[f,a]=_();try{await f}catch{return}finally{a()}}s.scrollTo({[t?"left":"top"]:M(r(),t),behavior:"smooth"})}else for(;;){const[f,a]=_();try{s[u]=M(r(),t),e._update(ge),await f}catch{return}finally{a()}}};return{_observe(r){s=r,n=be(e,r,t,()=>M(r[u],t),(o,_,f)=>{if(f){const a=r.style,d=a[c];a[c]="hidden",F(()=>{a[c]=d})}_?(r[u]=e._getScrollOffset()+o,l&&l()):r[u]+=o})},_dispose(){n&&n._dispose()},_scrollTo(r){i(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),i(()=>r)},_scrollToIndex(r,{align:o,smooth:_,offset:f=0}={}){if(r=$(r,0,e._getItemsLength()-1),o==="nearest"){const a=e._getItemOffset(r),d=e._getScrollOffset();if(a<d)o="start";else if(a+e._getItemSize(r)>d+e._getViewportSize())o="end";else return}i(()=>f+e._getStartSpacerSize()+e._getItemOffset(r)+(o==="end"?e._getItemSize(r)-e._getViewportSize():o==="center"?(e._getItemSize(r)-e._getViewportSize())/2:0),_)},_fixScrollJump:()=>{n&&n._fixScrollJump()}}},He=(e,t)=>{let s;return{_observe(n){const l=t?"scrollX":"scrollY",u=Z(n),c=j(u),i=u.body,r=(o,_,f,a=0)=>{const d=f?"offsetLeft":"offsetTop",v=a+(f&&Q()?c.innerWidth-o[d]-o.offsetWidth:o[d]),I=o.offsetParent;return o===_||!I?v:r(I,_,f,v)};s=be(e,c,t,()=>M(c[l],t),(o,_)=>{_?c.scroll({[t?"left":"top"]:e._getScrollOffset()+o}):c.scrollBy(t?o:0,t?0:o)},()=>r(n,i,t))},_dispose(){s&&s._dispose()},_fixScrollJump:()=>{s&&s._fixScrollJump()}}};var Ye=Ee("<div>");const et=e=>{let t;ve(()=>{t&&fe(e._resizer(t,e._index))});const s=ce(()=>{const n=e._isHorizontal,l={margin:0,padding:0,position:"absolute",[n?"height":"width"]:"100%",[n?"top":"left"]:"0px",[n?Q()?"right":"left":"top"]:e._offset+"px",visibility:e._hide?"hidden":"visible"};return n&&(l.display="flex"),l});return(()=>{var n=Ye(),l=t;return typeof l=="function"?Re(l,n):t=n,Le(n,()=>e._children),ze(u=>he(n,s(),u)),n})()},tt=e=>{let t=new Map;return fe(()=>{for(const s of t.values())s._dispose()}),ce(()=>{const s=e._each,[n,l]=e._range,u=new Map,c=[];return Te(()=>{for(let i=n;i<=l;i++){const r=s[i],o=t.get(i);c.push(o?o._element:we(_=>{const f=Ce(r),a=e._render(f[0](),i);return u.set(i,{_data:f,_element:a,_dispose:_}),a})),o&&(r!==o._data&&o._data[1](r),u.set(i,o))}for(const[i,r]of t.entries())u.has(i)||r._dispose();return t=u,c})})},st=(e,t)=>e[0]===t[0]&&e[1]===t[1];export{Be as A,et as L,tt as R,k as S,A as U,Fe as a,Ke as b,Xe as c,Ze as d,q as e,qe as f,Ge as g,Qe as h,st as i,je as j,He as k};
