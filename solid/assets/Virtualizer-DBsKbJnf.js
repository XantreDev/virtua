import{m as x,c as L,h as s,o as D,j as V,k as b,d as u,D as A,l as y,n as E}from"./web-BB0IMLXK.js";import{c as N,U,a as w,b as P,S as H,R as M,L as j,d as B,i as R,g as G,e as J,f as k,h as F,A as q}from"./utils-BXxFqQ7p.js";const W=t=>{let i;const{itemSize:f,horizontal:c=!1}=t;t=x({as:"div"},t);const n=N(t.data.length,f??40,void 0,void 0,!f),l=B(n,c),o=k(n,c),[a,T]=L(n._getStateVersion()),I=n._subscribe(U,()=>{T(n._getStateVersion())}),z=n._subscribe(w,()=>{var e;(e=t.onScroll)==null||e.call(t,n._getScrollOffset())}),O=n._subscribe(P,()=>{var e;(e=t.onScrollEnd)==null||e.call(t)}),d=s(e=>{a();const r=n._getRange();return e&&R(e,r)?e:r}),S=s(()=>a()&&n._getScrollDirection()),m=s(()=>a()&&n._getTotalSize()),C=s(()=>a()&&n._getJumpCount()),v=s(e=>{const r=t.overscan??4,[_,g]=d(),h=G(_,g,r,S(),t.data.length);return e&&R(e,h)?e:h});return D(()=>{t.ref&&t.ref({get scrollOffset(){return n._getScrollOffset()},get scrollSize(){return J(n)},get viewportSize(){return n._getViewportSize()},getItemOffset:n._getItemOffset,scrollToIndex:o._scrollToIndex,scrollTo:o._scrollTo,scrollBy:o._scrollBy});const e=i.parentElement;l._observeRoot(e),o._observe(e),y(()=>{t.ref&&t.ref(),I(),z(),O(),l._dispose(),o._dispose()})}),V(E(()=>t.data.length,(e,r)=>{F(r)&&e!==r&&n._update(q,[e,t.shift])})),b(E(C,()=>{o._fixScrollJump()})),b(()=>{const e=d();t.onRangeChange&&t.onRangeChange(e[0],e[1])}),u(A,{get component(){return t.as},ref(e){var r=i;typeof r=="function"?r(e):i=e},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:c?m()+"px":"100%",height:c?"100%":m()+"px","pointer-events":S()!==H?"none":"auto"}},get children(){return u(M,{get _each(){return t.data},get _range(){return v()},_render:(e,r)=>{const _=s(()=>(a(),n._getItemOffset(r))),g=s(()=>(a(),n._isUnmeasuredItem(r)));return u(j,{get _as(){return t.item},_index:r,get _resizer(){return l._observeItem},get _offset(){return _()},get _hide(){return g()},get _children(){return t.children(e(),r)},_isHorizontal:c})}})}})};export{W as V};
