import{i as Re,e as ae,j as Te,k as we,t as Ce,l as de,u as ye,p as ke,q as Ae,v as Me,c as Ne}from"./web-DwhiH2Oy.js";const C=Math.min,h=Math.max,ue=Math.abs,$=setTimeout,X=(e,t,s)=>C(s,h(t,e)),G=e=>e!=null,De=e=>{const t=[...e].sort((n,l)=>n-l),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},Je=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},Ve=(e,t)=>{let s;const n=()=>{G(s)&&clearTimeout(s)},l=()=>{n(),s=$(()=>{s=null,e()},t)};return l._cancel=n,l},Z=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},y=-1,U=(e,t,s)=>{const n=s?"unshift":"push";for(let l=0;l<t;l++)e[n](y);return e},P=(e,t)=>{const s=e._sizes[t];return s===y?e._defaultItemSize:s},xe=(e,t,s)=>{const n=e._sizes[t]===y;return e._sizes[t]=s,e._computedOffsetIndex=C(t,e._computedOffsetIndex),n},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=P(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Ue=e=>e._length?j(e,e._length-1)+P(e,e._length-1):0,ce=(e,t,s)=>{for(;s>=0&&s<e._length;){const n=j(e,s);if(n<=t){if(n+P(e,s)>t)break;s++}else s--}return X(s,0,e._length-1)},Pe=(e,t,s,n)=>{const l=ce(e,t,C(s,e._length-1));return[l,ce(e,t+n,l)]},We=(e,t)=>{let s=0;const n=e._sizes.filter((u,c)=>{const i=u!==y;return i&&c<t&&s++,i}),l=e._defaultItemSize;return e._computedOffsetIndex=-1,((e._defaultItemSize=De(n))-l)*h(t-s,0)},Be=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s?s[0]:U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),Fe=e=>[[...e._sizes],e._defaultItemSize],fe=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:C(t-1,e._computedOffsetIndex),e._length=t,n>0?(U(e._offsets,n),U(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((l,u)=>l-(u===y?e._defaultItemSize:u),0))},Ke=typeof window<"u",me=()=>document.documentElement,Q=e=>e.ownerDocument,H=e=>e.defaultView,ee=Z(()=>Ke?getComputedStyle(me()).direction==="rtl":!1),Se=Z(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Ye=Z(()=>"scrollBehavior"in me().style),$e=1.5,A=0,pe=1,ge=2,x=0,qe=1,_e=2,te=1,se=2,Xe=3,Oe=4,Ie=5,be=6,Le=7,he=8,k=1,q=2,Ge=4,Ze=8,He=e=>h(e._getTotalSize(),e._getViewportSize()),et=(e,t,s,n,l)=>(n!==pe&&(e-=h(0,s)),n!==ge&&(t+=h(0,s)),[h(e,0),C(t,l-1)]),tt=(e,t=40,s=0,n,l=!1,u=0,c=0)=>{let i=!!s,r=[],o=0,f=0,_=0,a=0,d=0,E=!1,I=0,v=A,g=x,S=i?[0,h(s-1,0)]:null,T=[0,0],W=0;const p=Be(e,t,n),B=new Set,ne=m=>Pe(p,m,T[0],o),re=()=>Ue(p),oe=()=>re()+u+c,ze=()=>f-u,le=()=>h(0,oe()-o),ie=m=>j(p,m)-d,J=m=>P(p,m),F=m=>{m&&(Se()&&v!==A?d+=m:(a+=m,_++))};return{_getStateVersion(){return r},_getCacheSnapshot(){return Fe(p)},_getRange(){return I?T:(T=ne(ze()+d+a),S?[C(T[0],S[0]),h(T[1],S[1])]:T)},_isUnmeasuredItem(m){return p._sizes[m]===y},_hasUnmeasuredItemsInFrozenRange(){return S?p._sizes.slice(h(0,S[0]-1),C(p._length-1,S[1]+1)+1).includes(y):!1},_getItemOffset:ie,_getItemSize:J,_getItemsLength(){return p._length},_getScrollOffset(){return f},_getScrollDirection(){return v},_getViewportSize(){return o},_getStartSpacerSize(){return u},_getTotalSize:re,_getJumpCount(){return _},_flushJump(){const m=a,O=E;return a=0,E=!1,o>oe()?[0,!1]:[I=m,O]},_subscribe(m,O){const M=[m,O];return B.add(M),()=>{B.delete(M)}},_update(m,O){let M,K,z=0;switch(m){case te:{const R=O.filter(([b,L])=>p._sizes[b]!==L);if(!R.length)break;let w=!1,N=!1;g===_e?f>le()-$e&&(N=!0):w=!0,F(R.reduce((b,[L,Y])=>{if(!w||(S?L<S[0]:ie(L)+(v===A&&g===x?J(L):0)<f)){const V=Y-J(L);(!N||V>0)&&(b+=V)}return b},0));for(const[b,L]of R){const Y=J(b),V=xe(p,b,L);l&&(W+=L,V||(W-=Y))}l&&o&&W>o&&(F(We(p,T[0])),l=!1),z=k+q,K=!0;break}case se:{o!==O&&(o=O,z=k+q);break}case Xe:{O[1]?(F(fe(p,O[0],!0)),g=_e,E=!0,z=k):fe(p,O[0]);break}case Oe:{const R=X(O,0,le()),w=I;if(I=0,R===f)break;const N=R-f,b=ue(N);!(w&&b<ue(w)+1)&&g===x&&(v=N<0?ge:pe),i&&(S=null,i=!1),K=b>o,f=R,z=k+Ge;break}case Ie:{z=Ze,v!==A&&(M=!0,z+=k),v=A,g=x,S=null;break}case be:{u=O;break}case Le:{g=qe;break}case he:{S=ne(O),z=k;break}}z&&(r=[],M&&d&&(a+=d,d=0,_++),B.forEach(([R,w])=>{z&R&&w(K)}))}}},Ee=e=>{let t;return{_observe(s){(t||(t=new(H(Q(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},st=(e,t)=>{let s;const n=t?"width":"height",l=new WeakMap,u=Ee(c=>{const i=[];for(const{target:r,contentRect:o}of c)if(r.offsetParent)if(r===s)e._update(se,o[n]);else{const f=l.get(r);G(f)&&i.push([f,o[n]])}i.length&&e._update(te,i)});return{_observeRoot(c){u._observe(s=c)},_observeItem:(c,i)=>(l.set(c,i),u._observe(c),()=>{l.delete(c),u._unobserve(c)}),_dispose:u._dispose}},nt=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",l=new WeakMap,u=Ee(i=>{const r=[];for(const{target:o,contentRect:f}of i){if(!o.offsetParent)continue;const _=l.get(o);G(_)&&r.push([_,f[s]])}r.length&&e._update(te,r)});let c;return{_observeRoot(i){const r=H(Q(i)),o=()=>{e._update(se,r[n])};r.addEventListener("resize",o),o(),c=()=>{r.removeEventListener("resize",o)}},_observeItem:(i,r)=>(l.set(i,r),u._observe(i),()=>{l.delete(i),u._unobserve(i)}),_dispose(){c&&c(),u._dispose()}}},D=(e,t)=>t&&ee()?-e:e,ve=(e,t,s,n,l,u)=>{const c=Date.now;let i=0,r=!1,o=!1,f=!1,_=!1;const a=Ve(()=>{if(r||o){r=!1,a();return}f=!1,e._update(Ie)},150),d=()=>{i=c(),f&&(_=!0),u&&e._update(be,u()),e._update(Oe,n()),a()},E=g=>{if(r||e._getScrollDirection()===A||g.ctrlKey)return;const S=c()-i;150>S&&50<S&&(s?g.deltaX:g.deltaY)&&(r=!0)},I=()=>{o=!0,f=_=!1},v=()=>{o=!1,Se()&&(f=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",E,{passive:!0}),t.addEventListener("touchstart",I,{passive:!0}),t.addEventListener("touchend",v,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",E),t.removeEventListener("touchstart",I),t.removeEventListener("touchend",v),a._cancel()},_fixScrollJump:()=>{const[g,S]=e._flushJump();g&&(l(D(g,s),S,_),_=!1)}}},rt=(e,t)=>{let s,n,l;const u=t?"scrollLeft":"scrollTop",c=t?"overflowX":"overflowY",i=async(r,o)=>{if(!s){Je(()=>i(r,o));return}l&&l();const f=()=>{let _;return[new Promise((a,d)=>{_=a,$(l=d,150)}),e._subscribe(q,()=>{_&&_()})]};if(o&&Ye()){for(;e._update(he,r()),!!e._hasUnmeasuredItemsInFrozenRange();){const[_,a]=f();try{await _}catch{return}finally{a()}}s.scrollTo({[t?"left":"top"]:D(r(),t),behavior:"smooth"})}else for(;;){const[_,a]=f();try{s[u]=D(r(),t),e._update(Le),await _}catch{return}finally{a()}}};return{_observe(r){s=r,n=ve(e,r,t,()=>D(r[u],t),(o,f,_)=>{if(_){const a=r.style,d=a[c];a[c]="hidden",$(()=>{a[c]=d})}f?(r[u]=e._getScrollOffset()+o,l&&l()):r[u]+=o})},_dispose(){n&&n._dispose()},_scrollTo(r){i(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),i(()=>r)},_scrollToIndex(r,{align:o,smooth:f,offset:_=0}={}){if(r=X(r,0,e._getItemsLength()-1),o==="nearest"){const a=e._getItemOffset(r),d=e._getScrollOffset();if(a<d)o="start";else if(a+e._getItemSize(r)>d+e._getViewportSize())o="end";else return}i(()=>_+e._getStartSpacerSize()+e._getItemOffset(r)+(o==="end"?e._getItemSize(r)-e._getViewportSize():o==="center"?(e._getItemSize(r)-e._getViewportSize())/2:0),f)},_fixScrollJump:()=>{n&&n._fixScrollJump()}}},ot=(e,t)=>{let s;return{_observe(n){const l=t?"scrollX":"scrollY",u=Q(n),c=H(u),i=u.body,r=(o,f,_,a=0)=>{const d=_?"offsetLeft":"offsetTop",E=a+(_&&ee()?c.innerWidth-o[d]-o.offsetWidth:o[d]),I=o.offsetParent;return o===f||!I?E:r(I,f,_,E)};s=ve(e,c,t,()=>D(c[l],t),(o,f)=>{f?c.scroll({[t?"left":"top"]:e._getScrollOffset()+o}):c.scrollBy(t?o:0,t?0:o)},()=>r(n,i,t))},_dispose(){s&&s._dispose()},_fixScrollJump:()=>{s&&s._fixScrollJump()}}};var je=Ce("<div>");const lt=e=>{let t;Re(()=>{t&&de(e._resizer(t,e._index))});const s=ae(()=>{const n=e._isHorizontal,l={margin:0,padding:0,position:"absolute",[n?"height":"width"]:"100%",[n?"top":"left"]:"0px",[n?ee()?"right":"left":"top"]:e._offset+"px",visibility:e._hide?"hidden":"visible"};return n&&(l.display="flex"),l});return(()=>{var n=je(),l=t;return typeof l=="function"?ye(l,n):t=n,Te(n,()=>e._children),we(u=>ke(n,s(),u)),n})()},it=e=>{let t=new Map;return de(()=>{for(const s of t.values())s._dispose()}),ae(()=>{const s=e._each,[n,l]=e._range,u=new Map,c=[];return Ae(()=>{for(let i=n;i<=l;i++){const r=s[i],o=t.get(i);c.push(o?o._element:Me(f=>{const _=Ne(r),a=e._render(_[0](),i);return u.set(i,{_data:_,_element:a,_dispose:f}),a})),o&&(r!==o._data&&o._data[1](r),u.set(i,o))}for(const[i,r]of t.entries())u.has(i)||r._dispose();return t=u,c})})},ut=(e,t)=>e[0]===t[0]&&e[1]===t[1];export{Xe as A,lt as L,it as R,A as S,k as U,Ge as a,Ze as b,tt as c,st as d,G as e,He as f,et as g,rt as h,ut as i,nt as j,ot as k};
