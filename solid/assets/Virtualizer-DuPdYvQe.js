import{m as v,c as L,h as a,o as D,j as E,k as b,d as u,D as V,l as N,n as f}from"./web-CyEQ2uJi.js";import{c as y,U,a as w,b as H,S as M,R as P,L as j,d as F,i as R,g as G,e as B,f as J,h as k,A as q,j as K}from"./utils-DsPLEayC.js";const X=t=>{let i;const{itemSize:d,horizontal:c=!1}=t;t=v({as:"div"},t);const n=y(t.data.length,d??40,void 0,void 0,!d),l=F(n,c),s=J(n,c),[o,I]=L(n._getStateVersion()),O=n._subscribe(U,()=>{I(n._getStateVersion())}),z=n._subscribe(w,()=>{var e;(e=t.onScroll)==null||e.call(t,n._getScrollOffset())}),C=n._subscribe(H,()=>{var e;(e=t.onScrollEnd)==null||e.call(t)}),S=a(e=>{o();const r=n._getRange();return e&&R(e,r)?e:r}),m=a(()=>o()&&n._getScrollDirection()),h=a(()=>o()&&n._getTotalSize()),x=a(()=>o()&&n._getJumpCount()),A=a(e=>{const r=t.overscan??4,[_,g]=S(),T=G(_,g,r,m(),t.data.length);return e&&R(e,T)?e:T});return D(()=>{t.ref&&t.ref({get scrollOffset(){return n._getScrollOffset()},get scrollSize(){return B(n)},get viewportSize(){return n._getViewportSize()},getItemOffset:n._getItemOffset,scrollToIndex:s._scrollToIndex,scrollTo:s._scrollTo,scrollBy:s._scrollBy});const e=t.scrollRef||i.parentElement;l._observeRoot(e),s._observe(e),N(()=>{t.ref&&t.ref(),O(),z(),C(),l._dispose(),s._dispose()})}),E(f(()=>t.data.length,(e,r)=>{k(r)&&e!==r&&n._update(q,[e,t.shift])})),E(f(()=>t.startMargin||0,e=>{e!==n._getStartSpacerSize()&&n._update(K,e)})),b(f(x,()=>{s._fixScrollJump()})),b(()=>{const e=S();t.onRangeChange&&t.onRangeChange(e[0],e[1])}),u(V,{get component(){return t.as},ref(e){var r=i;typeof r=="function"?r(e):i=e},get style(){return{"overflow-anchor":"none",flex:"none",position:"relative",visibility:"hidden",width:c?h()+"px":"100%",height:c?"100%":h()+"px","pointer-events":m()!==M?"none":"auto"}},get children(){return u(P,{get _each(){return t.data},get _range(){return A()},_render:(e,r)=>{const _=a(()=>(o(),n._getItemOffset(r))),g=a(()=>(o(),n._isUnmeasuredItem(r)));return u(j,{get _as(){return t.item},_index:r,get _resizer(){return l._observeItem},get _offset(){return _()},get _hide(){return g()},get _children(){return t.children(e(),r)},_isHorizontal:c})}})}})};export{X as V};
