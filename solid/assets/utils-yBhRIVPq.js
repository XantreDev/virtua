import{i as he,e as _e,j as ve,k as ze,t as Re,l as ae,u as Te,p as we,q as Ce,v as ye,c as ke}from"./web-DwhiH2Oy.js";const C=Math.min,E=Math.max,ie=Math.abs,Y=setTimeout,X=(e,t,s)=>C(s,E(t,e)),G=e=>e!=null,Ae=e=>{const t=[...e].sort((n,l)=>n-l),s=e.length/2|0;return t.length%2===0?(t[s-1]+t[s])/2:t[s]},Me=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)},Ne=(e,t)=>{let s;const n=()=>{G(s)&&clearTimeout(s)},l=()=>{n(),s=Y(()=>{s=null,e()},t)};return l._cancel=n,l},Z=e=>{let t,s;return(...n)=>(t||(t=!0,s=e(...n)),s)},y=-1,U=(e,t,s)=>{const n=s?"unshift":"push";for(let l=0;l<t;l++)e[n](y);return e},P=(e,t)=>{const s=e._sizes[t];return s===y?e._defaultItemSize:s},De=(e,t,s)=>{const n=e._sizes[t]===y;return e._sizes[t]=s,e._computedOffsetIndex=C(t,e._computedOffsetIndex),n},j=(e,t)=>{if(!e._length)return 0;if(e._computedOffsetIndex>=t)return e._offsets[t];e._computedOffsetIndex<0&&(e._offsets[0]=0,e._computedOffsetIndex=0);let s=e._computedOffsetIndex,n=e._offsets[s];for(;s<t;)n+=P(e,s),e._offsets[++s]=n;return e._computedOffsetIndex=t,n},Je=e=>e._length?j(e,e._length-1)+P(e,e._length-1):0,ue=(e,t,s)=>{for(;s>=0&&s<e._length;){const n=j(e,s);if(n<=t){if(n+P(e,s)>t)break;s++}else s--}return X(s,0,e._length-1)},Ve=(e,t,s,n)=>{const l=ue(e,t,C(s,e._length-1));return[l,ue(e,t+n,l)]},xe=(e,t)=>{let s=0;const n=e._sizes.filter((u,c)=>{const i=u!==y;return i&&c<t&&s++,i}),l=e._defaultItemSize;return e._computedOffsetIndex=-1,((e._defaultItemSize=Ae(n))-l)*E(t-s,0)},Ue=(e,t,s)=>({_defaultItemSize:s?s[1]:t,_sizes:s?s[0]:U([],e),_length:e,_computedOffsetIndex:-1,_offsets:U([],e)}),Pe=e=>[[...e._sizes],e._defaultItemSize],ce=(e,t,s)=>{const n=t-e._length;return e._computedOffsetIndex=s?-1:C(t-1,e._computedOffsetIndex),e._length=t,n>0?(U(e._offsets,n),U(e._sizes,n,s),e._defaultItemSize*n):(e._offsets.splice(n),(s?e._sizes.splice(0,-n):e._sizes.splice(n)).reduce((l,u)=>l-(u===y?e._defaultItemSize:u),0))},We=typeof window<"u",de=()=>document.documentElement,Q=e=>e.ownerDocument,H=e=>e.defaultView,ee=Z(()=>We?getComputedStyle(de()).direction==="rtl":!1),me=Z(()=>/iP(hone|od|ad)/.test(navigator.userAgent)),Be=Z(()=>"scrollBehavior"in de().style),Fe=1.5,A=0,Se=1,pe=2,x=0,Ke=1,fe=2,$=1,ge=2,te=3,se=4,Ye=5,Ie=6,Oe=7,be=8,k=1,q=2,$e=4,qe=8,Ze=e=>E(e._getTotalSize(),e._getViewportSize()),je=(e,t,s,n,l)=>(n!==Se&&(e-=E(0,s)),n!==pe&&(t+=E(0,s)),[E(e,0),C(t,l-1)]),Qe=(e,t=40,s=0,n,l=!1,u=0,c=0)=>{let i=!!s,r=[],o=0,f=0,_=0,a=0,d=0,h=!1,b=0,v=A,g=x,m=i?[0,E(s-1,0)]:null,T=[0,0],W=0;const p=Ue(e,t,n),B=new Set,ne=S=>Ve(p,S,T[0],o),re=()=>Je(p),oe=()=>E(0,re()+u+c-o),le=S=>j(p,S)-d,D=S=>P(p,S),F=S=>{S&&(me()&&v!==A?d+=S:(a+=S,_++))};return{_getStateVersion(){return r},_getCacheSnapshot(){return Pe(p)},_getRange(){return b?T:(T=ne(f-u+d+a),m?[C(T[0],m[0]),E(T[1],m[1])]:T)},_isUnmeasuredItem(S){return p._sizes[S]===y},_hasUnmeasuredItemsInFrozenRange(){return m?p._sizes.slice(E(0,m[0]-1),C(p._length-1,m[1]+1)+1).includes(y):!1},_getItemOffset:le,_getItemSize:D,_getItemsLength(){return p._length},_getScrollOffset(){return f},_getScrollDirection(){return v},_getViewportSize(){return o},_getStartSpacerSize(){return u},_getTotalSize:re,_getJumpCount(){return _},_flushJump(){const S=a,I=h;return a=0,h=!1,[b=S,I]},_subscribe(S,I){const M=[S,I];return B.add(M),()=>{B.delete(M)}},_update(S,I){let M,K,z=0;switch(S){case $:{const R=X(I,0,oe()),w=b;if(b=0,R===f)break;const L=R-f,O=ie(L);!(w&&O<ie(w)+1)&&g===x&&(v=L<0?pe:Se),i&&(m=null,i=!1),K=O>o,f=R,z=k+$e;break}case ge:{z=qe,v!==A&&(M=!0,z+=k),v=A,g=x,m=null;break}case te:{const R=I.filter(([L,O])=>p._sizes[L]!==O);if(!R.length)break;const w=g===fe&&f>oe()-Fe;F(R.reduce((L,[O,J])=>{if(w||(m?O<m[0]:le(O)+(v===A&&g===x?D(O):0)<f)){const V=J-D(O);(!w||V>0)&&(L+=V)}return L},0));for(const[L,O]of R){const J=D(L),V=De(p,L,O);l&&(W+=O,V||(W-=J))}l&&o&&W>o&&(F(xe(p,T[0])),l=!1),z=k+q,K=!0;break}case se:{o!==I&&(o=I,z=k+q);break}case Ye:{I[1]?(F(ce(p,I[0],!0)),g=fe,h=!0,z=k):ce(p,I[0]);break}case Ie:{u=I;break}case Oe:{g=Ke;break}case be:{m=ne(I),z=k;break}}z&&(r=[],M&&d&&(a+=d,d=0,_++),B.forEach(([R,w])=>{z&R&&w(K)}))}}},Le=e=>{let t;return{_observe(s){(t||(t=new(H(Q(s))).ResizeObserver(e))).observe(s)},_unobserve(s){t.unobserve(s)},_dispose(){t&&t.disconnect()}}},He=(e,t)=>{let s;const n=t?"width":"height",l=new WeakMap,u=Le(c=>{const i=[];for(const{target:r,contentRect:o}of c)if(r.offsetParent)if(r===s)e._update(se,o[n]);else{const f=l.get(r);G(f)&&i.push([f,o[n]])}i.length&&e._update(te,i)});return{_observeRoot(c){u._observe(s=c)},_observeItem:(c,i)=>(l.set(c,i),u._observe(c),()=>{l.delete(c),u._unobserve(c)}),_dispose:u._dispose}},et=(e,t)=>{const s=t?"width":"height",n=t?"innerWidth":"innerHeight",l=new WeakMap,u=Le(i=>{const r=[];for(const{target:o,contentRect:f}of i){if(!o.offsetParent)continue;const _=l.get(o);G(_)&&r.push([_,f[s]])}r.length&&e._update(te,r)});let c;return{_observeRoot(i){const r=H(Q(i)),o=()=>{e._update(se,r[n])};r.addEventListener("resize",o),o(),c=()=>{r.removeEventListener("resize",o)}},_observeItem:(i,r)=>(l.set(i,r),u._observe(i),()=>{l.delete(i),u._unobserve(i)}),_dispose(){c&&c(),u._dispose()}}},N=(e,t)=>t&&ee()?-e:e,Ee=(e,t,s,n,l,u)=>{const c=Date.now;let i=0,r=!1,o=!1,f=!1,_=!1;const a=Ne(()=>{if(r||o){r=!1,a();return}f=!1,e._update(ge)},150),d=()=>{i=c(),f&&(_=!0),u&&e._update(Ie,u()),e._update($,n()),a()},h=g=>{if(r||e._getScrollDirection()===A||g.ctrlKey)return;const m=c()-i;150>m&&50<m&&(s?g.deltaX:g.deltaY)&&(r=!0)},b=()=>{o=!0,f=_=!1},v=()=>{o=!1,me()&&(f=!0)};return t.addEventListener("scroll",d),t.addEventListener("wheel",h,{passive:!0}),t.addEventListener("touchstart",b,{passive:!0}),t.addEventListener("touchend",v,{passive:!0}),{_dispose:()=>{t.removeEventListener("scroll",d),t.removeEventListener("wheel",h),t.removeEventListener("touchstart",b),t.removeEventListener("touchend",v),a._cancel()},_fixScrollJump:()=>{const[g,m]=e._flushJump();g&&(l(N(g,s),m,_),_=!1,m&&e._getViewportSize()>e._getTotalSize()&&e._update($,n()))}}},tt=(e,t)=>{let s,n,l;const u=t?"scrollLeft":"scrollTop",c=t?"overflowX":"overflowY",i=async(r,o)=>{if(!s){Me(()=>i(r,o));return}l&&l();const f=()=>{let _;return[new Promise((a,d)=>{_=a,Y(l=d,150)}),e._subscribe(q,()=>{_&&_()})]};if(o&&Be()){for(;e._update(be,r()),!!e._hasUnmeasuredItemsInFrozenRange();){const[_,a]=f();try{await _}catch{return}finally{a()}}s.scrollTo({[t?"left":"top"]:N(r(),t),behavior:"smooth"})}else for(;;){const[_,a]=f();try{s[u]=N(r(),t),e._update(Oe),await _}catch{return}finally{a()}}};return{_observe(r){s=r,n=Ee(e,r,t,()=>N(r[u],t),(o,f,_)=>{if(_){const a=r.style,d=a[c];a[c]="hidden",Y(()=>{a[c]=d})}f?(r[u]=e._getScrollOffset()+o,l&&l()):r[u]+=o})},_dispose(){n&&n._dispose()},_scrollTo(r){i(()=>r)},_scrollBy(r){r+=e._getScrollOffset(),i(()=>r)},_scrollToIndex(r,{align:o,smooth:f,offset:_=0}={}){if(r=X(r,0,e._getItemsLength()-1),o==="nearest"){const a=e._getItemOffset(r),d=e._getScrollOffset();if(a<d)o="start";else if(a+e._getItemSize(r)>d+e._getViewportSize())o="end";else return}i(()=>_+e._getStartSpacerSize()+e._getItemOffset(r)+(o==="end"?e._getItemSize(r)-e._getViewportSize():o==="center"?(e._getItemSize(r)-e._getViewportSize())/2:0),f)},_fixScrollJump:()=>{n&&n._fixScrollJump()}}},st=(e,t)=>{let s;return{_observe(n){const l=t?"scrollX":"scrollY",u=Q(n),c=H(u),i=u.body,r=(o,f,_,a=0)=>{const d=_?"offsetLeft":"offsetTop",h=a+(_&&ee()?c.innerWidth-o[d]-o.offsetWidth:o[d]),b=o.offsetParent;return o===f||!b?h:r(b,f,_,h)};s=Ee(e,c,t,()=>N(c[l],t),(o,f)=>{f?c.scroll({[t?"left":"top"]:e._getScrollOffset()+o}):c.scrollBy(t?o:0,t?0:o)},()=>r(n,i,t))},_dispose(){s&&s._dispose()},_fixScrollJump:()=>{s&&s._fixScrollJump()}}};var Xe=Re("<div>");const nt=e=>{let t;he(()=>{t&&ae(e._resizer(t,e._index))});const s=_e(()=>{const n=e._isHorizontal,l={margin:0,padding:0,position:"absolute",[n?"height":"width"]:"100%",[n?"top":"left"]:"0px",[n?ee()?"right":"left":"top"]:e._offset+"px",visibility:e._hide?"hidden":"visible"};return n&&(l.display="flex"),l});return(()=>{var n=Xe(),l=t;return typeof l=="function"?Te(l,n):t=n,ve(n,()=>e._children),ze(u=>we(n,s(),u)),n})()},rt=e=>{let t=new Map;return ae(()=>{for(const s of t.values())s._dispose()}),_e(()=>{const s=e._each,[n,l]=e._range,u=new Map,c=[];return Ce(()=>{for(let i=n;i<=l;i++){const r=s[i],o=t.get(i);c.push(o?o._element:ye(f=>{const _=ke(r),a=e._render(_[0](),i);return u.set(i,{_data:_,_element:a,_dispose:f}),a})),o&&(r!==o._data&&o._data[1](r),u.set(i,o))}for(const[i,r]of t.entries())u.has(i)||r._dispose();return t=u,c})})},ot=(e,t)=>e[0]===t[0]&&e[1]===t[1];export{Ye as A,nt as L,rt as R,A as S,k as U,$e as a,qe as b,Qe as c,He as d,G as e,Ze as f,je as g,tt as h,ot as i,et as j,st as k};
